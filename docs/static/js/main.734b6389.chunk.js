(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{268:function(e,t,l){e.exports=l(458)},273:function(e,t,l){},275:function(e,t,l){},276:function(e,t,l){},372:function(e,t,l){},381:function(e,t,l){},382:function(e,t,l){},383:function(e,t,l){},384:function(e,t,l){},456:function(e,t,l){},457:function(e,t,l){},458:function(e,t,l){"use strict";l.r(t);var n=l(0),a=l.n(n),r=l(48),o=l.n(r),i=(l(273),l(7)),s=l(8),c=l(11),u=l(9),m=l(10),y=(l(274),l(469)),p=l(167),v=l(477),h=l(475),d=l(478),f=(l(275),l(276),l(33)),E=l(22),w=l.n(E),g=function(){function e(){var t=this;Object(i.a)(this,e),this.scriptIoReloadInterval=null,this.reloadScriptIo=function(){if(!window.io.unavailable)return clearInterval(t.scriptIoReloadInterval),t.scriptIoReloadInterval=null,t.bindSocket(),void console.log("Loaded script.io!");var e=document.getElementById("socket-io-script"),l=document.createElement("script");l.id=e.id,l.type=e.type,l.src=e.src,e.remove(),document.head.append(l),console.warn("Retrying socket.io script download...")},this.reload=function(){window.location.reload(!0)},this.justConnected=function(){t.getUser(),t.connected=!0,t.onConnect.map(function(e){return e(t.connected)})},this.justDisconnected=function(){t.connected=!1,t.disconnected=!0,t.onDisconnect.map(function(e){return e(t.connected)})},this.gotUser=function(e){e&&(t.id=e.id,t.username=e.name,t.token=e.token,t.settings=e.settings,localStorage.setItem("user-id",t.id),localStorage.setItem("user-name",t.username),localStorage.setItem("user-token",t.token),localStorage.setItem("user-settings",JSON.stringify(t.settings))),t.user=e,t.onUser.map(function(t){return t(e)}),t.gotUsers(t.usersInfo.users)},this.gotUsers=function(e){(e=w.a.orderBy(e,[function(e){return e.isUserRatingProvisional?1:0},"score","maxScore"],["asc","desc","desc"])).forEach(function(e,t){e.rank=t+1}),t.usersInfo=t.prepareUsers(e),t.onUsers.map(function(e){return e(t.usersInfo)})},this.gotGames=function(e){e=w.a.sortBy(e,["startDatetime","id"],["desc","desc"]),t.gamesInfo=t.prepareGames(e),t.onGames.map(function(e){return e(t.gamesInfo)})},this.gotTournaments=function(e){e=w.a.sortBy(e,["startDatetime","endDatetime","createdDatetime","id"],["desc","desc","desc","desc"]),t.tournamentsInfo=t.prepareTournaments(e),t.onTournaments.map(function(e){return e(t.tournamentsInfo)})},this.id=localStorage.getItem("user-id")||null,this.username=localStorage.getItem("user-name")||null;var l=localStorage.getItem("user-password")||null;localStorage.removeItem("user-password"),this.token=localStorage.getItem("user-token")||l;var n=localStorage.getItem("user-settings")||"null";try{this.settings=JSON.parse(n)}catch(a){this.settings=null}this.settings||(this.settings=this.constructor.getDefaultSettings()),window.io||(window.io=function(){return{on:function(){return console.warn("Socket script was missing")},emit:function(){return console.warn("Socket script was missing")},unavailable:!0}},window.io.unavailable=!0,this.scriptIoReloadInterval=setInterval(this.reloadScriptIo,1e3)),this.disconnected=!1,this.onConnect=[],this.onDisconnect=[],this.onUser=[],this.onUsers=[],this.onGames=[],this.onTournaments=[],this.bindSocket()}return Object(s.a)(e,null,[{key:"getDefaultSettings",value:function(){return JSON.parse(JSON.stringify({autoSubmitMoves:!1,enableNotifications:!1,theme:{pieces:"king",scheme:"",rotateOpponent:!0,animations:!0,arrows:!0,numbers:"obvious"}}))}}]),Object(s.a)(e,[{key:"bindSocket",value:function(){this.socket=window.io("https://thyra.basdekis.io"),this.available=!this.socket.unavailable,this.connected=!1,this.socket.on("connect",this.justConnected),this.socket.on("disconnect",this.justDisconnected),this.socket.on("reload",this.reload),this.user=null,this.socket.on("user",this.gotUser),this.usersInfo=this.prepareUsers([]),this.socket.on("users",this.gotUsers),this.gamesInfo=this.prepareGames([]),this.socket.on("games",this.gotGames),this.tournamentsInfo=this.prepareTournaments([]),this.socket.on("tournaments",this.gotTournaments),this.getUser()}},{key:"subscribe",value:function(e){for(var t=0,l=["onConnect","onDisconnect","onUser","onUsers","onGames","onTournaments"];t<l.length;t++){var n=l[t],a=e[n];a&&this[n].push(a)}}},{key:"unsubscribe",value:function(e){for(var t=0,l=["onConnect","onDisconnect","onUser","onUsers","onGames"];t<l.length;t++){var n=l[t],a=e[n];a&&w.a.pull(this[n],a)}}},{key:"getUser",value:function(){this.socket.emit("create-user",{appVersion:3,id:this.id,name:this.username,token:this.token,settings:this.settings})}},{key:"logIn",value:function(e,t,l){this.socket.emit("log-in",{appVersion:3,name:e,password:t,mergeUsers:l})}},{key:"logOut",value:function(){this.socket.emit("log-out")}},{key:"changeUsername",value:function(e){this.socket.emit("change-username",e)}},{key:"changePassword",value:function(e){this.socket.emit("change-password",e)}},{key:"updateSettings",value:function(e){this.socket.emit("update-settings",e)}},{key:"changeReadyToPlay",value:function(e){this.socket.emit("change-ready-to-play",e)}},{key:"prepareUsers",value:function(e){var t,l=this;if(this.user){var n=e.findIndex(function(e){return e.id===l.user.id});n>=0?(t=e.slice(0,n).concat(e.slice(n+1)),e=[e[n]].concat(Object(f.a)(t))):t=e}else t=e;var a=w.a.fromPairs(e.map(function(e){return[e.id,e]})),r=e.filter(function(e){return e.online}),o=r.filter(function(e){return[!0,!l.user||l.user.id].includes(e.readyToPlay)});return{users:e,byId:a,other:t,online:r,offline:e.filter(function(e){return!e.online}),readyToPlay:o,readyToPlayMe:o.filter(function(e){return l.user&&l.user.id===e.readyToPlay}),challengedUser:this.user&&a[this.user.readyToPlay]||null}}},{key:"prepareGames",value:function(e){var t=this,l=e.filter(function(e){return!e.finished}),n=e.filter(function(e){return e.finished});return{games:e,byId:w.a.fromPairs(e.map(function(e){return[e.id,e]})),live:l,myLive:this.user?l.filter(function(e){return e.userIds.includes(t.user.id)}):[],otherLive:this.user?l.filter(function(e){return!e.userIds.includes(t.user.id)}):l,finished:n,myFinished:this.user?n.filter(function(e){return e.userIds.includes(t.user.id)}):[],otherFinished:this.user?n.filter(function(e){return!e.userIds.includes(t.user.id)}):l,mine:this.user?e.filter(function(e){return e.userIds.includes(t.user.id)}):[]}}},{key:"submitGameMove",value:function(e,t){this.socket.emit("submit-game-moves",{id:e.id,moves:t})}},{key:"createTournament",value:function(e){this.socket.emit("create-tournament",e)}},{key:"joinTournament",value:function(e){this.socket.emit("join-tournament",e.id)}},{key:"leaveTournament",value:function(e){this.socket.emit("leave-tournament",e.id)}},{key:"startTournament",value:function(e){this.socket.emit("start-tournament",e.id)}},{key:"abortTournament",value:function(e){this.socket.emit("abort-tournament",e.id)}},{key:"prepareTournaments",value:function(e){var t=this,l=e.filter(function(e){return!e.started}),n=e.filter(function(e){return e.started&&!e.finished}),a=l.concat(n),r=e.filter(function(e){return e.finished});return{tournaments:e,byId:w.a.fromPairs(e.map(function(e){return[e.id,e]})),future:l,live:n,futureAndLive:a,finished:r,myFuture:this.user?l.filter(function(e){return e.userIds.includes(t.user.id)}):[],myLive:this.user?n.filter(function(e){return e.userIds.includes(t.user.id)}):[],myFutureAndLive:this.user?a.filter(function(e){return e.userIds.includes(t.user.id)}):[],myFinished:this.user?r.filter(function(e){return e.userIds.includes(t.user.id)}):[],otherFuture:this.user?n.filter(function(e){return!e.userIds.includes(t.user.id)}):n,otherLive:this.user?l.filter(function(e){return!e.userIds.includes(t.user.id)}):l,otherFutureAndLive:this.user?a.filter(function(e){return!e.userIds.includes(t.user.id)}):l,otherFinished:this.user?r.filter(function(e){return!e.userIds.includes(t.user.id)}):r,mine:this.user?e.filter(function(e){return e.userIds.includes(t.user.id)}):[]}}}]),e}(),k=new g;window.client=k;var b=g,x=l(24),O=l(37),C=l(26),A=l(63),R=l(254),P=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"constructUrl",value:function(e){var t=this.props.match;return"".concat(t.url.endsWith("/")?t.url.slice(0,-1):t.url).concat(e?"/".concat(e):"")}},{key:"getPreparedPanesDefaultToAndActiveIndex",value:function(){var e=this,t=this.props,l=t.panes,n=t.defaultIndex,r=t.match,o=t.location,i=null,s=null,c=r.url;return{preparedPanes:l.map(function(e,t){return[e,t]}).filter(function(e){return Object(O.a)(e,1)[0]}).map(function(t,l){var r=Object(O.a)(t,2),u=r[0],m=r[1];if(!u)return null;var y=e.constructUrl(u.path);m===n&&(i=y);var p=void 0!==u.navigate?e.constructUrl(u.navigate):y;o.pathname.startsWith(p)&&(s=l,c=y);var v="string"===typeof u.menuItem?{content:u.menuItem}:u.menuItem;return Object(x.a)({to:y},u,{menuItem:a.a.createElement(R.a.Item,Object.assign({key:u.path,as:C.b,to:p},v,{icon:u.icon||v.icon}))})}).filter(function(e){return e}),defaultTo:i,activeIndex:s,activeTo:c}}},{key:"render",value:function(){var e=this.props,t=e.tab,l=e.menu,r=e.match,o=e.renderActiveOnly,i=e.className,s=this.getPreparedPanesDefaultToAndActiveIndex(),c=s.preparedPanes,u=s.defaultTo,m=s.activeIndex,y=s.activeTo;return a.a.createElement(n.Fragment,null,null!==u?a.a.createElement(A.d,null,a.a.createElement(A.a,{exact:!0,from:r.url,to:u})):null,a.a.createElement(A.b,{path:y},a.a.createElement(d.a,Object.assign({menu:l,renderActiveOnly:o},t,{panes:c,activeIndex:m,className:i}))))}}]),t}(n.Component);P.defaultProps={renderActiveOnly:!0,defaultIndex:0};var M,_,S=Object(A.g)(P),T=l(13),I=(l(372),l(256)),j=l(40),L=l.n(j),N=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),t}(Object(I.a)(Error)),Y=function(){function e(t,l,n,a,r){var o=this;if(Object(i.a)(this,e),!t||!l)throw new Error("You need to pass rowsAndColumns, status, and previous game");this.previous=n,this.history=(this.previous?this.previous.history:[]).filter(function(e){return!e.canUndo}).concat([this]),this.previousInHistory=this.history[this.history.length-2],this.fullHistory=(this.previous?this.previous.fullHistory:[]).concat(this),this.isNextMove=r,this.moveCount=this.previous?r?this.previous.moveCount+1:this.previous.moveCount:1,this.chainCount=this.previous?this.previous.chainCount+1:0,this.lastMove=a||(l.resignedPlayer?{resign:l.resignedPlayer}:a),this.moves=this.previous?this.previous.moves.concat([this.lastMove]):[],this.rowsAndColumns=t;var s=["nextPlayer","moveType","availableMovesMatrix","canUndo","resignedPlayer","useCheck"].filter(function(e){return void 0===l[e]});if(s.length)throw new Error("Some status keys were missing: ".concat(s.join(", ")));var c=l.nextPlayer,u=l.moveType,m=l.availableMovesMatrix,y=l.canUndo,p=l.resignedPlayer,v=l.useCheck;this.useCheck=v,this.thisPlayer=n?n.nextPlayer:e.PLAYER_A,this.nextPlayer=c,this.thisMoveType=n?n.moveType:null,this.moveType=u,this.availableMovesMatrix=m,this.canUndo=y,this.canTakeMoveBack=!!this.previous,this.resignedPlayer=p,this.moveNotation=p?this.constructor.MOVE_RESIGNED_NOTATION[p]:a?this.constructor.MOVE_NOTATION[a.y][a.x]:"",this.fullNotation="".concat(this.previous?this.previous.fullNotation:"").concat(this.moveNotation),this.compressedFullNotation=this.fullNotation.split(/(..)/).filter(function(e){return e}).map(function(e){return o.constructor.MOVE_NOTATION_COMPRESSION[e]}).join(""),this.positionNotation=this.constructor.getPositionNotation(this.rowsAndColumns),this.winner=this.getWinner(),this.winner?this.finished=!0:this.constructor.hasAvailableMove(this.availableMovesMatrix)?this.finished=!1:(this.finished=!0,this.winner=this.constructor.OTHER_PLAYER[this.nextPlayer]),this.finished&&(this.availableMovesMatrix=this.constructor.noMovesAreAvailable())}return Object(s.a)(e,[{key:"createStep",value:function(e,t,l){return new this.constructor(e,t,this,l,!1)}},{key:"createNext",value:function(e,t,l){return new this.constructor(e,t,this,l,!0)}}],[{key:"create",value:function(){return new this(this.getInitialRowsAndColumns(),this.getInitialStatus(),null,null,!1)}},{key:"fromMoves",value:function(e,t){if(void 0===t)throw new Error("Expected useCheck is not set");var l=this.create();return t||(l.useCheck=!1),l.makeMoves(e),l}},{key:"fromRowsAndColumns",value:function(e){var t=this;if(5!==e.length)throw new Error("Expected 5 rows but got ".concat(e.length));if(e.find(function(e){return 5!==e.cells.length}))throw new Error("Expected 5 columns but some rows had a different number");if(e.find(function(e,t){return e.y!==t}))throw new Error("Some rows had invalid `y`");if(e.find(function(e){return e.cells.find(function(t,l){return t.x!==l||t.y!==e.y})}))throw new Error("Some cells had invalid `x` or `y`");if(this.findCell(e,function(e){return e.player&&!t.PLAYERS.includes(e.player)||e.worker&&!t.WORKERS.includes(e.worker)}))throw new Error("Some cells had invalid player or worker");if(this.findCell(e,function(e){return![0,1,2,3,4].includes(e.level)}))throw new Error("Some cells have invalid level");var l,n=this.findCells(e,function(e){return e.player===t.PLAYER_A}).length,a=this.findCells(e,function(e){return e.player===t.PLAYER_B}).length;if(n>2||a>2)throw new Error("Players can have at most 2 workers, but player A has ".concat(n," and player B has ").concat(a));if(0===Math.max.apply(Math,Object(f.a)(w.a.flatten(e.map(function(e){return e.cells.map(function(e){return e.level})})))))if(0===a)if(0===n)l={nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_PLACE_FIRST_WORKER,availableMovesMatrix:this.allMovesAreAvailableMatrix(),canUndo:!1,resignedPlayer:null,useCheck:!0};else if(1===n)l={nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_PLACE_SECOND_WORKER,availableMovesMatrix:this.getEmptyCellsAvailableMovesMatrix(e),canUndo:!1,resignedPlayer:null,useCheck:!0};else{var r=this.findCell(function(e){return e.player===t.PLAYER_A&&e.worker===t.WORKER_FIRST}),o=this.findCell(function(e){return e.player===t.PLAYER_A&&e.worker===t.WORKER_SECOND});if(!r||!o)throw new Error("Could not find both workers of player A");l={nextPlayer:this.PLAYER_B,moveType:this.MOVE_TYPE_PLACE_FIRST_WORKER,availableMovesMatrix:this.getEmptyCellsAvailableMovesMatrix(e),canUndo:!1,resignedPlayer:null,useCheck:!0}}else{if(2!==n)throw new Error("Player A must put both of their workers before player B can place theirs");if(1===a)l={nextPlayer:this.PLAYER_B,moveType:this.MOVE_TYPE_PLACE_SECOND_WORKER,availableMovesMatrix:this.getEmptyCellsAvailableMovesMatrix(e),canUndo:!1,resignedPlayer:null,useCheck:!0};else{var i=this.findCell(function(e){return e.player===t.PLAYER_B&&e.worker===t.WORKER_FIRST}),s=this.findCell(function(e){return e.player===t.PLAYER_B&&e.worker===t.WORKER_SECOND});if(!i||!s)throw new Error("Could not find both workers of player B");l={nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_SELECT_WORKER_TO_MOVE,availableMovesMatrix:this.getPlayerAvailableMovesMatrix(e,this.PLAYER_A,!0),canUndo:!1,resignedPlayer:null,useCheck:!0}}}else{if(2!==n||2!==a)throw new Error("Both players must have placed both of their workers before they can move and build");if(this.findCell(e,function(e){return 4===e.level&&e.player}))throw new Error("Some workers are on the 4th level");if(this.findCells(e,function(e){return 3===e.level&&e.player}).length>1)throw new Error("Too many workers have won");l=w.a.sum(w.a.flatten(e.map(function(e){return e.cells.map(function(e){return e.level})})))%2===0?{nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_SELECT_WORKER_TO_MOVE,availableMovesMatrix:this.getPlayerAvailableMovesMatrix(e,this.PLAYER_A,!0),canUndo:!1,resignedPlayer:null,useCheck:!0}:{nextPlayer:this.PLAYER_B,moveType:this.MOVE_TYPE_SELECT_WORKER_TO_MOVE,availableMovesMatrix:this.getPlayerAvailableMovesMatrix(e,this.PLAYER_B,!0),canUndo:!1,resignedPlayer:null,useCheck:!0}}return new this(e,l,null,null,!1)}},{key:"fromMoveNotation",value:function(e){var t=this,l=e.split("").map(function(e){return t.MOVE_REVERSE_NOTATION[e]});if(l.filter(function(e){return!e}).length)return null;try{return this.fromMoves(l,!0)}catch(n){return this.fromMoves(l,!1)}}},{key:"fromCompressedMoveNotation",value:function(e){var t=this,l=e.split("").map(function(e){return t.MOVE_NOTATION_DECOMPRESSION[e]});if(l.filter(function(e){return!e}).length)return null;try{return this.fromMoves(l,!0)}catch(n){return this.fromMoves(l,!1)}}},{key:"getPositionNotation",value:function(e){var t=this;return w.a.flatten(e.map(function(e){return e.cells.map(function(e){return t.POSITION_NOTATION_COMPRESSION[e.level][e.player]})})).join("")}},{key:"fromPositionNotation",value:function(e){var t=this,l=this.ROWS.map(function(l){return{y:l,cells:t.COLUMNS.map(function(n){return Object(x.a)({x:n,y:l},t.POSITION_REVERSE_NOTATION[e[5*l+n]])})}});return this.fromPosition(l)}},{key:"fromCompressedPositionNotation",value:function(e){var t=this,l=this.ROWS.map(function(l){return{y:l,cells:t.COLUMNS.map(function(n){return Object(x.a)({x:n,y:l},t.POSITION_NOTATION_DECOMPRESSION[e[5*l+n]])})}});return this.fromPosition(l)}},{key:"fromPosition",value:function(e){var t=0,l=0,n=!0,a=!1,r=void 0;try{for(var o,i=this.ROWS[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value,c=!0,u=!1,m=void 0;try{for(var y,p=this.COLUMNS[Symbol.iterator]();!(c=(y=p.next()).done);c=!0){var v=e[y.value].cells[s];v.player===this.PLAYER_A?(v.worker=this.WORKERS[t%2],t+=1):v.player===this.PLAYER_B&&(v.worker=this.WORKERS[l%2],l+=1)}}catch(h){u=!0,m=h}finally{try{c||null==p.return||p.return()}finally{if(u)throw m}}}}catch(h){a=!0,r=h}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return this.fromRowsAndColumns(e)}}]),Object(s.a)(e,[{key:"serialize",value:function(){return this.serializeCompact()}},{key:"serializeCompact",value:function(){return{moves:this.moves}}},{key:"serializeVerbose",value:function(){return{rowsAndColumns:this.rowsAndColumns,status:{nextPlayer:this.nextPlayer,moveType:this.moveType,availableMovesMatrix:this.availableMovesMatrix,canUndo:this.canUndo,resignedPlayer:this.resignedPlayer},previous:this.previous?this.previous.serialize():null,lastMove:this.lastMove,isNextMove:this.isNextMove}}},{key:"getPrintout",value:function(){var t,l,n,a,r,o,i=(a={},Object(T.a)(a,e.PLAYER_A,(t={},Object(T.a)(t,0,"a"),Object(T.a)(t,1,L.a.bgWhite("b")),Object(T.a)(t,2,L.a.bgYellow("c")),Object(T.a)(t,3,L.a.bgRed("d")),t)),Object(T.a)(a,e.PLAYER_B,(l={},Object(T.a)(l,0,"w"),Object(T.a)(l,1,L.a.bgWhite("x")),Object(T.a)(l,2,L.a.bgYellow("y")),Object(T.a)(l,3,L.a.bgRed("z")),l)),Object(T.a)(a,null,(n={},Object(T.a)(n,0," "),Object(T.a)(n,1,L.a.bgWhite(" ")),Object(T.a)(n,2,L.a.bgYellow(" ")),Object(T.a)(n,3,L.a.bgRed(" ")),Object(T.a)(n,4,L.a.bgBlue(" ")),n)),a),s=this.rowsAndColumns.map(function(e){return e.cells.map(function(e){return i[e.player][e.level]}).join("")}).join("\n"),c=(r={},Object(T.a)(r,e.PLAYER_A,"A"),Object(T.a)(r,e.PLAYER_B,"B"),r)[this.nextPlayer],u=(o={},Object(T.a)(o,e.PLAYER_A,"A"),Object(T.a)(o,e.PLAYER_B,"B"),Object(T.a)(o,null,"+"),o)[this.winner];return"".concat(c,"-----").concat(u,"\n")+s.split("\n").map(function(e){return"|".concat(L.a.black(e),"|")}).join("\n")+"\n+-----+"}},{key:"checkCoordinatesAreValid",value:function(e){var t=e.x,l=e.y;if(Math.floor(t)!==t||Math.floor(l)!==l)throw new N("Coordinates '".concat(JSON.stringify({x:t,y:l}),"' are not valid"));if(void 0===this.availableMovesMatrix[l]||void 0===this.availableMovesMatrix[l][t])throw new N("Coordinates '".concat(JSON.stringify({x:t,y:l}),"' are out of bounds"))}},{key:"isMoveAvailable",value:function(e){var t=e.x,l=e.y;return this.availableMovesMatrix[l][t]}},{key:"findCell",value:function(e){return this.constructor.findCell(this.rowsAndColumns,e)}},{key:"findCells",value:function(e){return this.constructor.findCells(this.rowsAndColumns,e)}},{key:"getWinner",value:function(){if(this.resignedPlayer)return this.constructor.OTHER_PLAYER[this.resignedPlayer];var e=this.findCell(function(e){return e.player&&3===e.level});return e?e.player:this.useCheck&&!this.canUndo&&this.constructor.canPlayerWin(this.rowsAndColumns,this.nextPlayer)?this.nextPlayer:null}},{key:"checkCanMakeMove",value:function(e,t,l){if(this.finished)throw new N("The game has already finished");if(this.moveType!==e)throw new N('You cannot perform move of type "'.concat(e,'": you need to perform "').concat(this.moveType,'"'));if(this.checkCoordinatesAreValid(t),l&&this.checkCoordinatesAreValid(l),!this.availableMovesMatrix[t.y][t.x])throw new Error("Move ".concat(JSON.stringify(t)," is not one of the available ones"))}},{key:"resign",value:function(e){return this.createStep(this.rowsAndColumns,{nextPlayer:this.nextPlayer,moveType:this.moveType,availableMovesMatrix:this.availableMovesMatrix,canUndo:!1,resignedPlayer:e,useCheck:this.useCheck},{resign:e})}},{key:"makeMoves",value:function(e){var t=this,l=!0,n=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(l=(r=o.next()).done);l=!0){var i=r.value;t=t.makeMove(i)}}catch(s){n=!0,a=s}finally{try{l||null==o.return||o.return()}finally{if(n)throw a}}return t}},{key:"makeMove",value:function(e){var t;if(e.resign)return this.resign(e.resign);var l=(t={},Object(T.a)(t,this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER,this.placeFirstWorker),Object(T.a)(t,this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER,this.placeSecondWorker),Object(T.a)(t,this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE,this.selectWorkerToMove),Object(T.a)(t,this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER,this.moveFirstWorker),Object(T.a)(t,this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER,this.moveSecondWorker),Object(T.a)(t,this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER,this.buildAroundWorker),t)[this.moveType];if(!l)throw new N("Don't know how to perform move of type \"".concat(this.moveType,'"'));return l.bind(this)(e)}},{key:"undo",value:function(){if(!this.canUndo)throw new Error("Cannot undo");return this.previous}},{key:"takeMoveBack",value:function(){if(!this.canTakeMoveBack)throw new Error("Cannot take move back");return this.previous}},{key:"placeFirstWorker",value:function(e){var t=e.x,l=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER,{x:t,y:l});var n=this.constructor.updateCells(this.rowsAndColumns,{x:t,y:l,player:this.nextPlayer,worker:this.constructor.WORKER_FIRST});return this.createStep(n,{nextPlayer:this.nextPlayer,moveType:this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER,availableMovesMatrix:this.constructor.getEmptyCellsAvailableMovesMatrix(n),canUndo:!0,resignedPlayer:null,useCheck:this.useCheck},{x:t,y:l})}},{key:"placeSecondWorker",value:function(e){var t=e.x,l=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER,{x:t,y:l});var n=this.constructor.updateCells(this.rowsAndColumns,{x:t,y:l,player:this.nextPlayer,worker:this.constructor.WORKER_SECOND}),a=this.constructor.OTHER_PLAYER[this.nextPlayer];return this.createNext(n,{nextPlayer:a,moveType:a===this.constructor.PLAYER_A?this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE:this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER,availableMovesMatrix:a===this.constructor.PLAYER_A?this.constructor.getPlayerAvailableMovesMatrix(n,a,this.useCheck):this.constructor.getEmptyCellsAvailableMovesMatrix(n),canUndo:!1,resignedPlayer:null,useCheck:this.useCheck},{x:t,y:l})}},{key:"selectWorkerToMove",value:function(e){var t=e.x,l=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE,{x:t,y:l});var n=this.rowsAndColumns[l].cells[t];return this.createStep(this.rowsAndColumns,{nextPlayer:this.nextPlayer,moveType:n.worker===this.constructor.WORKER_FIRST?this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER:this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER,availableMovesMatrix:this.constructor.getMovableAvailableMovesMatrix(this.rowsAndColumns,{x:t,y:l},this.useCheck),canUndo:!0,resignedPlayer:null,useCheck:this.useCheck},{x:t,y:l})}},{key:"moveWorker",value:function(e,t){var l,n=this,a=this.findCell(function(e){return e.player===n.nextPlayer&&e.worker===t}),r=this.rowsAndColumns[e.y].cells[e.x],o=(l=this.constructor).updateCells.apply(l,[this.rowsAndColumns].concat([{x:a.x,y:a.y,player:null,worker:null},{x:r.x,y:r.y,player:a.player,worker:a.worker}]));return this.createStep(o,{nextPlayer:this.nextPlayer,moveType:this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER,availableMovesMatrix:this.constructor.getBuildableAvailableMovesMatrix(o,e,this.useCheck),canUndo:!0,resignedPlayer:null,useCheck:this.useCheck},{x:e.x,y:e.y})}},{key:"moveFirstWorker",value:function(e){var t=e.x,l=e.y;return this.checkCanMakeMove(this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER,{x:t,y:l}),this.moveWorker({x:t,y:l},this.constructor.WORKER_FIRST)}},{key:"moveSecondWorker",value:function(e){var t=e.x,l=e.y;return this.checkCanMakeMove(this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER,{x:t,y:l}),this.moveWorker({x:t,y:l},this.constructor.WORKER_SECOND)}},{key:"buildAroundWorker",value:function(e){var t=e.x,l=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER,{x:t,y:l});var n=this.constructor.updateCells(this.rowsAndColumns,{x:t,y:l,level:this.rowsAndColumns[l].cells[t].level+1}),a=this.constructor.OTHER_PLAYER[this.nextPlayer];return this.createNext(n,{nextPlayer:a,moveType:this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE,availableMovesMatrix:this.constructor.getPlayerAvailableMovesMatrix(n,a,this.useCheck),canUndo:!1,resignedPlayer:null,useCheck:this.useCheck},{x:t,y:l})}}],[{key:"getAvailableMoves",value:function(e){return w.a.flatten(e.map(function(e,t){return e.map(function(e,l){return e?{x:l,y:t}:null})})).filter(function(e){return e})}},{key:"deserialize",value:function(e){return e.moves?this.deserializeCompact(e):this.deserializeVerbose(e)}},{key:"deserializeCompact",value:function(e){var t=e.moves,l=e.useCheck,n=void 0!==l&&l;return this.fromMoves(t,n)}},{key:"deserializeVerbose",value:function(e){var t=this,l=e.cells,n=e.rowsAndColumns,a=e.status,r=e.previous,o=e.lastMove,i=e.isNextMove;return r&&(r=this.deserialize(r)),n||(n=this.ROWS.map(function(e){return{y:e,cells:t.COLUMNS.map(function(t){return l[e][t]})}})),new this(n,a,r,o,i)}},{key:"getInitialRowsAndColumns",value:function(){var e=this;return this.ROWS.map(function(t){return{y:t,cells:e.COLUMNS.map(function(e){return{x:e,y:t,level:0,player:null,worker:null}})}})}},{key:"getInitialStatus",value:function(){return{nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_PLACE_FIRST_WORKER,availableMovesMatrix:this.allMovesAreAvailableMatrix(),canUndo:!1,resignedPlayer:null,useCheck:!0}}},{key:"hasAvailableMove",value:function(e){return this.getAvailableMoves(e).length>0}},{key:"findCell",value:function(e,t){return e.map(function(e){return e.cells.find(t)}).find(function(e){return e})}},{key:"findCells",value:function(e,t){return w.a.flatten(e.map(function(e){return e.cells.filter(t)}))}},{key:"canPlayerWin",value:function(e,t){var l=this.findCells(e,function(e){return e.player===t&&2===e.level});return!!l.length&&this.findCells(e,function(e){return 3===e.level&&l.find(function(t){return Math.abs(e.x-t.x)<=1&&Math.abs(e.y-t.y)<=1})}).length>0}},{key:"allMovesAreAvailableMatrix",value:function(){var e=this;return this.ROWS.map(function(){return e.COLUMNS.map(function(){return!0})})}},{key:"noMovesAreAvailable",value:function(){var e=this;return this.ROWS.map(function(){return e.COLUMNS.map(function(){return!1})})}},{key:"getEmptyCellsAvailableMovesMatrix",value:function(e){return this.getAvailableMovesMatrix(e,function(e){return!e.player})}},{key:"getPlayerAvailableMovesMatrix",value:function(e,t,l){var n=this;if(void 0===l)throw new Error("Expected useCheck");return this.getAvailableMovesMatrix(e,function(a){return a.player===t&&n.hasAvailableMove(n.getMovableAvailableMovesMatrix(e,a,l))})}},{key:"getMovableAvailableMovesMatrix",value:function(e,t,l){var n=this;if(void 0===l)throw new Error("Expected useCheck");var a=e[t.y].cells[t.x],r=a.level+1;return this.getAvailableMovesMatrix(e,function(o){return Math.abs(o.x-t.x)<=1&&Math.abs(o.y-t.y)<=1&&!o.player&&o.level<=3&&o.level<=r&&(!l||n.hasAvailableMove(n.getBuildableAvailableMovesMatrix(n.updateCells.apply(n,[e].concat([{x:a.x,y:a.y,player:null,worker:null},{x:o.x,y:o.y,player:a.player,worker:a.worker}])),o,l)))})}},{key:"getBuildableAvailableMovesMatrix",value:function(e,t,l){var n=this;if(void 0===l)throw new Error("Expected useCheck");var a=e[t.y].cells[t.x];return this.getAvailableMovesMatrix(e,function(r){return Math.abs(r.x-t.x)<=1&&Math.abs(r.y-t.y)<=1&&!r.player&&r.level<4&&(!l||!n.canPlayerWin(n.updateCells.apply(n,[e].concat([{x:r.x,y:r.y,level:r.level+1}])),n.OTHER_PLAYER[a.player]))})}},{key:"getAvailableMovesMatrix",value:function(e,t){return e.map(function(e){return e.cells.map(t)})}},{key:"updateCells",value:function(e){for(var t={},l=arguments.length,n=new Array(l>1?l-1:0),a=1;a<l;a++)n[a-1]=arguments[a];for(var r=0,o=n;r<o.length;r++){var i=o[r];t[i.y]=t[i.y]||{},t[i.y][i.x]=i}return e.map(function(e){return t[e.y]?Object(x.a)({},e,{cells:e.cells.map(function(e){return t[e.y][e.x]?Object(x.a)({},e,t[e.y][e.x]):e})}):e})}}]),e}();Y.PLAYER_A="player-a",Y.PLAYER_B="player-b",Y.PLAYERS=[Y.PLAYER_A,Y.PLAYER_B],Y.OTHER_PLAYER=(M={},Object(T.a)(M,Y.PLAYER_A,Y.PLAYER_B),Object(T.a)(M,Y.PLAYER_B,Y.PLAYER_A),M),Y.WORKER_FIRST="first-worker",Y.WORKER_SECOND="second-worker",Y.WORKERS=[Y.WORKER_FIRST,Y.WORKER_SECOND],Y.MOVE_TYPE_PLACE_FIRST_WORKER="place-first-worker",Y.MOVE_TYPE_PLACE_SECOND_WORKER="place-second-worker",Y.MOVE_TYPE_SELECT_WORKER_TO_MOVE="select-worker-to-move",Y.MOVE_TYPE_MOVE_FIRST_WORKER="move-first-worker",Y.MOVE_TYPE_MOVE_SECOND_WORKER="move-second-worker",Y.MOVE_TYPE_BUILD_AROUND_WORKER="build-around-worker",Y.MOVE_TYPES_PLACE_WORKER=[Y.MOVE_TYPE_PLACE_FIRST_WORKER,Y.MOVE_TYPE_PLACE_SECOND_WORKER],Y.MOVE_TYPES_MOVE_WORKER=[Y.MOVE_TYPE_MOVE_FIRST_WORKER,Y.MOVE_TYPE_MOVE_SECOND_WORKER],Y.MOVE_TYPES_MOVE_OR_BUILD=[].concat(Object(f.a)(Y.MOVE_TYPES_MOVE_WORKER),[Y.MOVE_TYPE_BUILD_AROUND_WORKER]),Y.ROWS=Array.from({length:5},function(e,t){return t}),Y.COLUMNS=Array.from({length:5},function(e,t){return t}),Y.MOVE_NOTATION=Y.ROWS.map(function(e){return Y.COLUMNS.map(function(t){return"".concat(["A","B","C","D","E"][t]).concat(["1","2","3","4","5"][e])})}),Y.MOVE_RESIGNED_NOTATION=(_={},Object(T.a)(_,Y.PLAYER_A,"RA"),Object(T.a)(_,Y.PLAYER_B,"RB"),_),Y.MOVE_REVERSE_NOTATION=Object(x.a)({},w.a.fromPairs(w.a.flatten(Y.ROWS.map(function(e){return Y.COLUMNS.map(function(t){return["".concat(["A","B","C","D","E"][t]).concat(["1","2","3","4","5"][e]),{x:t,y:e}]})}))),{RA:[{resign:Y.PLAYER_A}],RB:[{resign:Y.PLAYER_B}]}),Y.MOVE_NOTATION_COMPRESSION=w.a.fromPairs(Object.keys(Y.MOVE_REVERSE_NOTATION).sort().map(function(e,t){return[e,String.fromCharCode(t<26?65+t:t-26+48)]})),Y.MOVE_NOTATION_DECOMPRESSION=w.a.fromPairs(Object.keys(Y.MOVE_REVERSE_NOTATION).sort().map(function(e,t){return[String.fromCharCode(t<26?65+t:t-26+48),Y.MOVE_REVERSE_NOTATION[e]]})),Y.POSITION_NOTATION=w.a.fromPairs([0,1,2,3,4].map(function(e){return[e,w.a.fromPairs([null,Y.PLAYER_A,Y.PLAYER_B].map(function(t){return[t,"".concat(e,"-").concat(t)]}))]})),Y.POSITION_REVERSE_NOTATION=w.a.fromPairs(w.a.flatten(Object.entries(Y.POSITION_NOTATION).map(function(e){var t=Object(O.a)(e,2),l=t[0],n=t[1];return Object.entries(n).map(function(e){var t=Object(O.a)(e,2),n=t[0];return[t[1],{level:parseInt(l),player:"null"===n?null:n}]})}))),Y.POSITION_NOTATION_COMPRESSION_MAP=w.a.fromPairs(w.a.flatten(Object.entries(Y.POSITION_NOTATION).map(function(e){var t=Object(O.a)(e,2)[1];return Object.entries(t).map(function(e){return Object(O.a)(e,2)[1]})})).map(function(e,t){return[e,String.fromCharCode(65+t)]})),Y.POSITION_NOTATION_COMPRESSION=w.a.fromPairs(Object.entries(Y.POSITION_NOTATION).map(function(e){var t=Object(O.a)(e,2),l=t[0],n=t[1];return[l,w.a.fromPairs(Object.entries(n).map(function(e){var t=Object(O.a)(e,2),l=t[0],n=t[1];return[l,Y.POSITION_NOTATION_COMPRESSION_MAP[n]]}))]})),Y.POSITION_NOTATION_DECOMPRESSION=w.a.fromPairs(Object.entries(Y.POSITION_NOTATION_COMPRESSION_MAP).map(function(e){var t=Object(O.a)(e,2),l=t[0];return[t[1],Y.POSITION_REVERSE_NOTATION[l]]}));var U=Y,W=l(257),F=l(4),G=l.n(F),B=(l(381),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,l=t.className,n=t.clickable,r=t.undoable,o=t.isCellAvailable,i=t.isCellUndoable,s=t.small,c=t.medium,u=t.makeMove,m=t.onSelect,y=t.selected,p=t.settings,v=t.rowsAndColumns,h=p.theme,d=h.scheme,f=h.numbers;return l=G()("board","html-board",{"small-board":s,"medium-board":c,editable:!!u&&(n||r),selectable:!!m,selected:y,"board-theme-default":""===d,"board-theme-subtle":"subtle"===d,"board-theme-pastel":"pastel"===d,"board-theme-green":"green"===d,"numbered-levels":["obvious","subtle","very-subtle"].includes(f),"obvious-levels":"obvious"===f,"subtle-levels":"subtle"===f,"very-subtle-levels":"very-subtle"===f},l),a.a.createElement("div",{className:l,onClick:m},v.map(function(t){return a.a.createElement("div",{key:"row-".concat(t.y),className:"row"},t.cells.map(function(t){return a.a.createElement(D,{key:"".concat(t.x,"-").concat(t.y),cell:t,clickable:n||r&&i(t),available:o(t),undoable:i(t),settings:p,makeMove:e.props.makeMove,undo:e.props.undo})}))}))}}]),t}(n.Component));B.defaultProps={className:"",small:!1,medium:!1,clickable:!1,selected:!1,animated:!1};var D=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).makeMove=function(){l.props.available&&l.props.makeMove?l.props.makeMove(l.props.cell):l.props.undoable&&l.props.undo&&l.props.undo()},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cell,l=e.clickable,n=e.available,r=e.undoable,o=e.settings.theme.numbers,i=e.makeMove,s=e.undo,c=["obvious","subtle","very-subtle"].includes(o)&&t.level>0&&t.level<4?t.level:null;return a.a.createElement("div",{key:"row-".concat(t.x,"-").concat(t.y),className:G()("cell","level-".concat(t.level),{available:n,undoable:r}),onClick:(i&&n||s&&r)&&l?this.makeMove:null},a.a.createElement("div",{className:G()("level","level-1")},a.a.createElement("div",{className:G()("level","level-2")},a.a.createElement("div",{className:G()("level","level-3")},t.player?a.a.createElement("div",{className:G()("worker","player-".concat(t.player))},c):4===t.level?a.a.createElement("div",{className:G()("level","level-4")}):c))))}}]),t}(n.Component);D.defaultProps={clickable:!1,available:!1,undoable:!1};var K=B,V=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.level;return e?a.a.createElement("g",{transform:"translate(".concat(10,",").concat(10,")")},a.a.createElement("text",{dominantBaseline:"central",textAnchor:"middle",style:{fontSize:"".concat(15,"px")}},e)):null}}]),t}(n.PureComponent),z=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.level;return e?a.a.createElement("g",{transform:"translate(22,22)"},a.a.createElement("circle",{r:15,fill:"#bbb",stroke:"#111",strokeWidth:2}),a.a.createElement("text",{dominantBaseline:"central",textAnchor:"middle",style:{fontSize:"".concat(25,"px")}},e)):null}}]),t}(n.PureComponent),H=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.level;return e?a.a.createElement("g",{transform:"translate(".concat(50,",").concat(50,")")},a.a.createElement("text",{dominantBaseline:"central",textAnchor:"middle",stroke:"#eee",strokeWidth:6,paintOrder:"stroke",style:{fontSize:"".concat(45,"px")}},e)):null}}]),t}(n.PureComponent),q=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.level,l=e.type,n=this.constructor.indicatorMap[l];return n?a.a.createElement(n,{level:t}):null}}]),t}(n.PureComponent);q.indicatorMap={"very-subtle":V,subtle:z,obvious:H};var J=q,X=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,l=e.path,r=e.dimensions,o=e.offset;return a.a.createElement(n.Fragment,null,a.a.createElement("g",{id:"piece-".concat(t,"-base"),transform:["translate(".concat(50,",").concat(50,")"),"scale(".concat(.1,",").concat(.1,")"),"translate(".concat(-r.x/2+o.x,",").concat(-r.y/2+o.y,")")].join(",")},l),a.a.createElement("g",{id:"piece-".concat(t,"-white")},a.a.createElement("use",{xlinkHref:"#piece-".concat(t,"-base"),strokeWidth:80,stroke:"#111"}),a.a.createElement("use",{xlinkHref:"#piece-".concat(t,"-base"),fill:"white"})),a.a.createElement("g",{id:"piece-".concat(t,"-black")},a.a.createElement("use",{xlinkHref:"#piece-".concat(t,"-base"),strokeWidth:80,stroke:"#bbb"}),a.a.createElement("use",{xlinkHref:"#piece-".concat(t,"-base"),fill:"black"})))}}]),t}(n.PureComponent),$=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,l=e.colour,n=e.rotated;return a.a.createElement("use",{xlinkHref:"#piece-".concat(t,"-").concat(l),transform:n?this.constructor.rotateTransform:void 0})}}]),t}(n.PureComponent);$.rotateTransform="rotate(180,".concat(50,",").concat(50,")");var Q=function(e,t){var l=t.path,r=t.dimensions,o=t.offset,y=void 0===o?{x:0,y:0}:o,p=function(t){function n(){return Object(i.a)(this,n),Object(c.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,t),Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement(X,{name:e,path:l,dimensions:r,offset:y})}}]),n}(n.PureComponent);p.displayName="".concat(e,"Definition");var v=function(t){function l(){return Object(i.a)(this,l),Object(c.a)(this,Object(u.a)(l).apply(this,arguments))}return Object(m.a)(l,t),Object(s.a)(l,[{key:"render",value:function(){var t=this.props,l=t.colour,n=t.rotated;return a.a.createElement($,{name:e,colour:l,rotated:n})}}]),l}(n.PureComponent);return v.Definition=p,v.displayName=e,v},Z=Q("PiecePawn",{path:a.a.createElement("path",{d:"M105.1 224H80a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h16v5.49c0 44-4.14 86.6-24 122.51h176c-19.89-35.91-24-78.51-24-122.51V288h16a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-25.1c29.39-18.38 49.1-50.78 49.1-88a104 104 0 0 0-208 0c0 37.22 19.71 69.62 49.1 88zM304 448H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"}),dimensions:{x:320,y:480},offset:{x:0,y:-38}}),ee=Q("PieceKing",{path:a.a.createElement("path",{d:"M400 448H48a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h352a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm16-288H256v-48h40a8 8 0 0 0 8-8V56a8 8 0 0 0-8-8h-40V8a8 8 0 0 0-8-8h-48a8 8 0 0 0-8 8v40h-40a8 8 0 0 0-8 8v48a8 8 0 0 0 8 8h40v48H32a32 32 0 0 0-30.52 41.54L74.56 416h298.88l73.08-214.46A32 32 0 0 0 416 160z"}),dimensions:{x:448,y:512}}),te=Q("PieceCircle",{path:a.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"}),dimensions:{x:512,y:512}}),le=Q("PieceCertificate",{path:a.a.createElement("path",{d:"M458.622 255.92l45.985-45.005c13.708-12.977 7.316-36.039-10.664-40.339l-62.65-15.99 17.661-62.015c4.991-17.838-11.829-34.663-29.661-29.671l-61.994 17.667-15.984-62.671C337.085.197 313.765-6.276 300.99 7.228L256 53.57 211.011 7.229c-12.63-13.351-36.047-7.234-40.325 10.668l-15.984 62.671-61.995-17.667C74.87 57.907 58.056 74.738 63.046 92.572l17.661 62.015-62.65 15.99C.069 174.878-6.31 197.944 7.392 210.915l45.985 45.005-45.985 45.004c-13.708 12.977-7.316 36.039 10.664 40.339l62.65 15.99-17.661 62.015c-4.991 17.838 11.829 34.663 29.661 29.671l61.994-17.667 15.984 62.671c4.439 18.575 27.696 24.018 40.325 10.668L256 458.61l44.989 46.001c12.5 13.488 35.987 7.486 40.325-10.668l15.984-62.671 61.994 17.667c17.836 4.994 34.651-11.837 29.661-29.671l-17.661-62.015 62.65-15.99c17.987-4.302 24.366-27.367 10.664-40.339l-45.984-45.004z"}),dimensions:{x:512,y:512}}),ne=Q("PieceSun",{path:a.a.createElement("path",{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"}),dimensions:{x:512,y:512}}),ae=Q("PieceRocket",{path:a.a.createElement("path",{d:"M505.05 19.1a15.89 15.89 0 0 0-12.2-12.2C460.65 0 435.46 0 410.36 0c-103.2 0-165.1 55.2-211.29 128H94.87A48 48 0 0 0 52 154.49l-49.42 98.8A24 24 0 0 0 24.07 288h103.77l-22.47 22.47a32 32 0 0 0 0 45.25l50.9 50.91a32 32 0 0 0 45.26 0L224 384.16V488a24 24 0 0 0 34.7 21.49l98.7-49.39a47.91 47.91 0 0 0 26.5-42.9V312.79c72.59-46.3 128-108.4 128-211.09.1-25.2.1-50.4-6.85-82.6zM384 168a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"}),dimensions:{x:512,y:512}}),re=Q("PieceBug",{path:a.a.createElement("path",{d:"M511.988 288.9c-.478 17.43-15.217 31.1-32.653 31.1H424v16c0 21.864-4.882 42.584-13.6 61.145l60.228 60.228c12.496 12.497 12.496 32.758 0 45.255-12.498 12.497-32.759 12.496-45.256 0l-54.736-54.736C345.886 467.965 314.351 480 280 480V236c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v244c-34.351 0-65.886-12.035-90.636-32.108l-54.736 54.736c-12.498 12.497-32.759 12.496-45.256 0-12.496-12.497-12.496-32.758 0-45.255l60.228-60.228C92.882 378.584 88 357.864 88 336v-16H32.666C15.23 320 .491 306.33.013 288.9-.484 270.816 14.028 256 32 256h56v-58.745l-46.628-46.628c-12.496-12.497-12.496-32.758 0-45.255 12.498-12.497 32.758-12.497 45.256 0L141.255 160h229.489l54.627-54.627c12.498-12.497 32.758-12.497 45.256 0 12.496 12.497 12.496 32.758 0 45.255L424 197.255V256h56c17.972 0 32.484 14.816 31.988 32.9zM257 0c-61.856 0-112 50.144-112 112h224C369 50.144 318.856 0 257 0z"}),dimensions:{x:512,y:512}}),oe=Q("PieceEye",{path:a.a.createElement("path",{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}),dimensions:{x:512,y:512}}),ie=Q("PieceUser",{path:a.a.createElement("path",{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}),dimensions:{x:512,y:512}}),se=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.style,l=e.colour,n=e.rotated,r=this.constructor.pieceStyleMap[t];return a.a.createElement(r,{colour:l,rotated:n})}}]),t}(n.PureComponent);se.pieceStyleMap={pawn:Z,king:ee,circle:te,certificate:le,sun:ne,rocket:ae,bug:re,eye:oe,user:ie};var ce=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return Object.values(se.pieceStyleMap).map(function(e){return a.a.createElement(e.Definition,{key:e.displayName||e.name})})}}]),t}(n.PureComponent);se.Definitions=ce;var ue=se,me=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(n.Fragment,null,a.a.createElement("rect",{id:"cell-border",width:100,height:100}),a.a.createElement("rect",{id:"cell-0",width:90,height:90,transform:"translate(".concat(5,",").concat(5,")")}),a.a.createElement("g",{id:"cell-1"},a.a.createElement("rect",{className:"border",width:90,height:90,transform:"translate(".concat(5,",").concat(5,")")}),a.a.createElement("rect",{className:"fill",width:80,height:80,transform:"translate(".concat(10,",").concat(10,")")})),a.a.createElement("g",{id:"cell-2"},a.a.createElement("rect",{className:"border",width:80,height:80,transform:"translate(".concat(10,",").concat(10,")")}),a.a.createElement("rect",{className:"fill",width:70,height:70,transform:"translate(".concat(15,",").concat(15,")")})),a.a.createElement("g",{id:"cell-3"},a.a.createElement("rect",{className:"border",width:70,height:70,transform:"translate(".concat(15,",").concat(15,")")}),a.a.createElement("rect",{className:"fill",width:60,height:60,transform:"translate(".concat(20,",").concat(20,")")})),a.a.createElement("g",{id:"cell-4"},a.a.createElement("rect",{className:"border",width:60,height:60,transform:"translate(".concat(20,",").concat(20,")")}),a.a.createElement("rect",{className:"fill",width:50,height:50,transform:"translate(".concat(25,",").concat(25,")")})))}}]),t}(n.PureComponent),ye=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={previousLevel:l.props.level,currentLevel:l.props.level},l.levelsAnimate=[0,1,2,3,4].map(function(e){return a.a.createRef()}),l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,l){var n=this;this.props.animated&&this.state.currentLevel!==this.state.previousLevel&&setTimeout(function(){n.levelsAnimate.filter(function(e,t){return n.state.previousLevel<=t&&t<=n.state.currentLevel||n.state.currentLevel<=t&&t<=n.state.previousLevel}).filter(function(e){return e.current}).map(function(e){return e.current.beginElement()})},0)}},{key:"render",value:function(){var e=this,t=this.props,l=t.x,r=t.y,o=t.available,i=t.undoable,s=t.level,c=t.player,u=t.onClick,m=t.animated,y=t.allowControl,p=t.theme,v=p.pieces,h=void 0===v?"king":v,d=p.rotateOpponent,f=void 0===d||d,E=p.numbers,w=this.state,g=w.previousLevel,k=w.currentLevel,b=!y.includes(U.PLAYER_A)&&y.includes(U.PLAYER_B),x=!b;return a.a.createElement("g",{transform:"translate(".concat(100*l,",").concat(100*r,")")},a.a.createElement("use",{xlinkHref:"#cell-border",className:G()({available:o,undoable:i}),onClick:u}),a.a.createElement("g",{className:"cell-contents"},m?[0,1,2,3,4].map(function(t){return a.a.createElement("use",{key:t,xlinkHref:"".concat(e.constructor.levelMap[t]),opacity:t<=s?1:0},a.a.createElement("animate",{ref:e.levelsAnimate[t],attributeName:"opacity",attributeType:"XML",type:"translate",from:g<t?0:1,to:k<t?0:1,dur:"0.2s",repeatCount:1,fill:"freeze"}))}):[0,1,2,3,4].filter(function(e){return e<=s}).map(function(t){return a.a.createElement(n.Fragment,{key:t},a.a.createElement("use",{xlinkHref:"".concat(e.constructor.levelMap[t])}),c===U.PLAYER_A?a.a.createElement(ue,{style:h,colour:"white",rotated:f&&b}):null,c===U.PLAYER_B?a.a.createElement(ue,{style:h,colour:"black",rotated:f&&x}):null)}),E?a.a.createElement(J,{level:s,type:E}):null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.animated&&e.level!==t.level?{previousLevel:t.currentLevel,currentLevel:e.level}:null}}]),t}(n.PureComponent);ye.Definitions=me,ye.levelMap={0:"#cell-0",1:"#cell-1",2:"#cell-2",3:"#cell-3",4:"#cell-4"},ye.defaultProps={animated:!1};var pe=ye,ve=(l(382),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.constructor,t=e.arrowDimensions,l=e.arrowOffset,r=e.arrowScaling,o=e.hammerDimensions,i=e.hammerOffset,s=e.hammerScaling;return a.a.createElement(n.Fragment,null,a.a.createElement("path",{id:"arrow-move-base",d:"M168 345.941V44c0-6.627-5.373-12-12-12h-56c-6.627 0-12 5.373-12 12v301.941H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.569 9.373 33.941 0l86.059-86.059c15.119-15.119 4.411-40.971-16.971-40.971H168z",transform:["translate(".concat(50,",").concat(50,")"),"scale(".concat(.1*r,",").concat(.1*r,")"),"translate(".concat(-t.x/2+l.x,",").concat(-t.y/2+l.y,")")].join(",")}),a.a.createElement("path",{id:"arrow-build-base",d:"M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z",transform:["translate(".concat(50,",").concat(50,")"),"scale(".concat(.1*s,",").concat(.1*s,")"),"rotate(135)","translate(".concat(-o.x/2+i.x,",").concat(-o.y/2+i.y,")")].join(",")}),a.a.createElement("g",{id:"arrow-move-white"},a.a.createElement("use",{xlinkHref:"#arrow-move-base",strokeWidth:80,stroke:"#111"}),a.a.createElement("use",{xlinkHref:"#arrow-move-base",fill:"white"})),a.a.createElement("g",{id:"arrow-move-black"},a.a.createElement("use",{xlinkHref:"#arrow-move-base",strokeWidth:80,stroke:"#bbb"}),a.a.createElement("use",{xlinkHref:"#arrow-move-base",fill:"black"})),a.a.createElement("g",{id:"arrow-build-white"},a.a.createElement("use",{xlinkHref:"#arrow-build-base",strokeWidth:80,stroke:"#111"}),a.a.createElement("use",{xlinkHref:"#arrow-build-base",fill:"white"})),a.a.createElement("g",{id:"arrow-build-black"},a.a.createElement("use",{xlinkHref:"#arrow-build-base",strokeWidth:80,stroke:"#bbb"}),a.a.createElement("use",{xlinkHref:"#arrow-build-base",fill:"black"})))}}]),t}(n.PureComponent));ve.arrowDimensions={x:215.81,y:439.04},ve.arrowOffset={x:-20,y:-15},ve.arrowScaling=.75,ve.hammerDimensions={x:564.48,y:501.76},ve.hammerOffset={x:50,y:-50},ve.hammerScaling=.5625;var he=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.constructor,t=e.offsetX,l=e.smallScaling,n=this.props,r=n.from,o=n.to,i=n.colour,s=n.type,c=n.small,u={x:o.x-r.x,y:o.y-r.y},m=this.constructor.rotationMap["".concat(u.x,",").concat(u.y)],y=Math.sqrt(Math.abs(u.x)+Math.abs(u.y));return a.a.createElement("use",{xlinkHref:"#arrow-".concat(s,"-").concat(i),transform:["translate(".concat(100*r.x,",").concat(100*r.y,")"),"rotate(".concat(m,",").concat(50,",").concat(50,")"),"translate(".concat(t,",").concat(50*y,")")].concat(Object(f.a)(c?["translate(".concat(50,",").concat(50,")"),"scale(".concat(l,")"),"translate(".concat(-50,",").concat(-50,")")]:[])).filter(function(e){return e}).join(",")})}}]),t}(n.PureComponent);he.Definition=ve,he.offsetX=10,he.smallScaling=.75,he.rotationMap={"0,1":0,"-1,1":45,"-1,0":90,"-1,-1":135,"0,-1":180,"1,-1":-135,"1,0":-90,"1,1":-45},he.defaultProps={small:!1};var de=he,fe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,l=t.className,r=t.clickable,o=t.undoable,i=t.isCellAvailable,s=t.isCellUndoable,c=t.small,u=t.medium,m=t.makeMove,y=t.onSelect,p=t.selected,v=t.allowControl,h=t.settings,d=t.rowsAndColumns,E=t.transformation,w=t.animated,g=t.showArrows,k=t.game,b=t.arrows,x=h.theme;l=G()("board","svg-board","board-theme-".concat(x.scheme||"default"),{"small-board":c,"medium-board":u,editable:!!m&&(r||o),selectable:!!y,selected:p},l);var O=d.length,C=Math.max.apply(Math,Object(f.a)(d.map(function(e){return e.cells.length})))||0;return a.a.createElement("svg",{className:l,viewBox:"0 0 ".concat(100*C," ").concat(100*O),style:{"--column-count":C,"--row-count":O},preserveAspectRatio:"xMinYMin meet",onClick:y},a.a.createElement("g",{"data-key":"rows"},d.map(function(t){return a.a.createElement("g",{"data-key":"row-".concat(t.y),key:"row-".concat(t.y)},t.cells.map(function(t){return a.a.createElement(be,{key:"".concat(t.x,"-").concat(t.y),cell:t,clickable:r||o&&s(t),available:i(t),undoable:s(t),allowControl:v,settings:h,makeMove:e.props.makeMove,undo:e.props.undo,theme:x,animated:w})}))})),w?a.a.createElement(ge,{rowsAndColumns:d,theme:x,allowControl:v}):null,g?b?b.map(function(e,t){return a.a.createElement(de,Object.assign({key:t},e))}):a.a.createElement(n.Fragment,null,a.a.createElement(we,{game:k,transformation:E})):null)}}]),t}(n.PureComponent);fe.defaultProps={className:"",small:!1,medium:!1,clickable:!1,selected:!1,allowControl:[U.PLAYER_A,U.PLAYER_B],animated:!1,showArrows:!1};var Ee=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(n.Fragment,null,a.a.createElement("svg",{className:G()("board","svg-board"),style:{display:"none"}},a.a.createElement("defs",null,a.a.createElement(pe.Definitions,null),a.a.createElement(ue.Definitions,null),a.a.createElement(de.Definition,null))))}}]),t}(n.PureComponent);fe.Definitions=Ee;var we=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getPlayerMoves",value:function(){var e=this.props.transformation,t=this.getRelevantHistory(),l=t.player,n=t.relevantHistory,a=n.find(function(e){return U.MOVE_TYPES_MOVE_WORKER.includes(e.thisMoveType)}),r=n.find(function(e){return e.thisMoveType===U.MOVE_TYPE_BUILD_AROUND_WORKER}),o={move:a?{from:a.previous.lastMove,to:a.lastMove}:null,build:r?{from:r.previous.lastMove,to:r.lastMove}:null},i=o.move,s=o.build;return e&&(i&&(i.from=e.reverseCoordinates(a.previous.rowsAndColumns,i.from),i.to=e.reverseCoordinates(a.rowsAndColumns,i.to),i.type="move"),s&&(s.from=e.reverseCoordinates(r.previous.rowsAndColumns,s.from),s.to=e.reverseCoordinates(r.rowsAndColumns,s.to),s.type="build")),{player:l,move:i,build:s}}},{key:"getRelevantHistory",value:function(){for(var e=this.props.game,t=[e],l=e.thisPlayer,n=e;n.previous&&(n=n.previous).thisPlayer===l;)t.push(n);return{player:l,relevantHistory:t}}},{key:"render",value:function(){if(!this.props.game)return null;var e=this.getPlayerMoves(),t=e.player,l=e.move,n=e.build;if(!l&&!n)return null;var r=t===U.PLAYER_A?"white":"black",o=null,i=null;return l&&(o=a.a.createElement(de,{key:"move",from:l.from,to:l.to,colour:r,type:"move"})),n&&(i=a.a.createElement(de,{key:"build",from:n.from,to:n.to,colour:r,type:"build"})),[o,i]}}]),t}(n.PureComponent),ge=(n.PureComponent,function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.rowsAndColumns,l=e.theme,n=e.allowControl,r=w.a.sortBy(U.findCells(t,function(e){return e.player}),["player","worker"]);return a.a.createElement("g",{"data-key":"pieces",style:{pointerEvents:"none"}},r.map(function(e){return a.a.createElement(ke,{key:"".concat(e.player,"-").concat(e.worker),cell:e,theme:l,allowControl:n})}))}}]),t}(n.PureComponent)),ke=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={previousPosition:{x:l.props.cell.x,y:l.props.cell.y},position:{x:l.props.cell.x,y:l.props.cell.y}},l.animateTransform=a.a.createRef(),l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,l){var n=this;this.state.position!==t.position&&setTimeout(function(){n.animateTransform.current&&n.animateTransform.current.beginElement()},0)}},{key:"render",value:function(){var e=this.props,t=e.cell,l=e.theme,n=e.allowControl,r=this.state,o=r.previousPosition,i=r.position,s=!n.includes(U.PLAYER_A)&&n.includes(U.PLAYER_B),c=!s;return a.a.createElement("g",{transform:"translate(".concat(100*i.x,",").concat(100*i.y,")")},a.a.createElement(ue,{style:l.pieces||"king",colour:t.player===U.PLAYER_A?"white":"black",rotated:l.rotateOpponent&&(t.player===U.PLAYER_A?s:c)}),a.a.createElement("animateTransform",{ref:this.animateTransform,attributeName:"transform",attributeType:"XML",type:"translate",from:"".concat(100*o.x," ").concat(100*o.y),to:"".concat(100*i.x," ").concat(100*i.y),dur:"0.1s",repeatCount:1,fill:"freeze"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.cell.x!==t.position.x||e.cell.y!==t.position.y?{previousPosition:t.position,position:{x:e.cell.x,y:e.cell.y}}:null}}]),t}(n.PureComponent),be=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).makeMove=function(){l.props.available&&l.props.makeMove?l.props.makeMove(l.props.cell):l.props.undoable&&l.props.undo&&l.props.undo()},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cell,l=e.clickable,n=e.available,r=e.undoable,o=e.settings.theme,i=e.makeMove,s=e.undo,c=e.animated,u=e.allowControl;return a.a.createElement(pe,{x:t.x,y:t.y,available:n,undoable:r,level:t.level,player:t.player,allowControl:u,animated:c,theme:o,onClick:(i&&n||s&&r)&&l?this.makeMove:null})}}]),t}(n.PureComponent);be.defaultProps={clickable:!1,available:!1,undoable:!1,animated:!1,allowControl:[U.PLAYER_A,U.PLAYER_B]};var xe=fe,Oe=(l(383),l(384),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.renderer,l=void 0===t?"svg":t,n=Object(W.a)(e,["renderer"]),r={html:K,svg:xe}[l];return a.a.createElement(r,n)}}]),t}(n.Component));Oe.defaultProps={className:"",small:!1,medium:!1,clickable:!1,selected:!1,allowControl:[U.PLAYER_A,U.PLAYER_B],animated:!1,showArrows:!1};var Ce=Oe,Ae=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).makeMove=function(e){l.props.makeMove(l.props.game.makeMove({x:e.x,y:e.y}))},l.undo=function(){l.props.makeMove(l.props.game.canUndo?l.props.game.undo():l.props.game.takeMoveBack())},l.onSelect=function(){l.props.onSelect(l.props.game)},l.isCellAvailable=function(e){return l.props.game.isMoveAvailable(e)},l.isCellUndoable=function(e){if(void 0===l.props.minChainCount||null===l.props.minChainCount){if(2===l.props.allowControl.length)return!0;if(!l.props.game.canUndo)return!1}else if(l.props.game.chainCount<=l.props.minChainCount)return!1;var t=l.props.game.lastMove;return!!t&&(t.x===e.x&&t.y===e.y)},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"isGameUndoable",value:function(){return!!this.props.game.findCell(this.isCellUndoable)}},{key:"render",value:function(){var e=this.props,t=e.game,l=e.transformation,n=e.allowControl,r=e.onSelect,o=e.makeMove,i=e.animated,s=t.rowsAndColumns;return l&&(s=l(s)),a.a.createElement(Ce,Object.assign({},this.props,{isCellAvailable:i?this.isCellAvailable:function(){return!1},isCellUndoable:i?this.isCellUndoable:function(){return!1},clickable:n.includes(t.nextPlayer),undoable:!!i&&this.isGameUndoable(),onSelect:r?this.onSelect:null,makeMove:o?this.makeMove:null,undo:o?this.undo:null,rowsAndColumns:s,transformation:l,game:t,animated:i}))}}]),t}(n.PureComponent);Ae.defaultProps={className:"",small:!1,medium:!1,selected:!1,allowControl:[U.PLAYER_A,U.PLAYER_B],animated:!1};var Re=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={rotations:0,flippedHorizontally:!1},l.updateOrientation=function(e){l.setState(e,function(){if(l.props.onChange){var e=l.state,t=e.rotations,n=e.flippedHorizontally,a=l.constructor.transformationMap["".concat(t,",").concat(n)];l.props.onChange({rotations:t,flippedHorizontally:n,transformation:a})}})},l.rotateCounterClockwise=function(){l.updateOrientation(function(e){return{rotations:(e.rotations+3)%4}})},l.rotateClockwise=function(){l.updateOrientation(function(e){return{rotations:(e.rotations+1)%4}})},l.flipHorizontally=function(){l.updateOrientation(function(e){return{flippedHorizontally:!e.flippedHorizontally}})},l.flipVertically=function(){l.updateOrientation(function(e){return{rotations:(e.rotations+2)%4,flippedHorizontally:!e.flippedHorizontally}})},l.reset=function(){l.updateOrientation(function(e){return{rotations:0,flippedHorizontally:!1}})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.rotations,l=e.flippedHorizontally;return a.a.createElement(R.a,{size:"massive",items:[{key:"rotate-counter-clockwise",icon:"undo",onClick:this.rotateCounterClockwise},{key:"rotate-clockwise",icon:"redo",onClick:this.rotateClockwise},{key:"flip-horizontal",icon:"arrows alternate horizontal",onClick:this.flipHorizontally},{key:"flip-vertical",icon:"arrows alternate vertical",onClick:this.flipVertically},{key:"home",icon:"home",onClick:this.reset,disabled:!t&&!l}]})}}],[{key:"makeTransformRowsAndColumns",value:function(e){var t=this,l=function(l){return t.transformRowsAndColumns(l,e)},n=e.transpose^e.flipX^e.flipY,a=e.transpose&&!n?{transpose:e.transpose,flipX:!e.flipX,flipY:!e.flipY}:e;return l.reverseCoordinates=function(e,l){return t.reverseTransformCoordinates(e,l,a)},l}},{key:"transformRowsAndColumns",value:function(e,t){var l=this,n=this.getNewRowAndColumnCount(e,t),a=n.newRowCount,r=n.newColumnCount,o=w.a.range(r);return w.a.range(a).map(function(n){return{y:n,cells:o.map(function(o){var i=l.getOldCoordinates({newX:o,newY:n},{newRowCount:a,newColumnCount:r},t),s=i.oldX,c=i.oldY;return Object(x.a)({},e[c].cells[s],{x:o,y:n})})}})}},{key:"reverseTransformCoordinates",value:function(e,t,l){var n=this.getNewRowAndColumnCount(e,l),a=n.newRowCount,r=n.newColumnCount,o=t.x,i=t.y,s=this.getOldCoordinates({newX:o,newY:i},{newRowCount:a,newColumnCount:r},l);return{x:s.oldX,y:s.oldY}}},{key:"getNewRowAndColumnCount",value:function(e,t){var l,n,a=e.length,r=Math.max.apply(Math,Object(f.a)(e.map(function(e){return e.cells.length})))||0;return t.transpose?(n=a,l=r):(n=r,l=a),{newRowCount:l,newColumnCount:n}}},{key:"getOldCoordinates",value:function(e,t,l){var n,a,r=e.newX,o=e.newY,i=t.newColumnCount,s=t.newRowCount;return l.transpose?(n=o,a=r):(n=r,a=o),l.flipX&&(n=i-1-n),l.flipY&&(a=s-1-a),{oldX:n,oldY:a}}}]),t}(n.PureComponent);Re.transformationMap={"0,false":null,"1,false":Re.makeTransformRowsAndColumns({transpose:!0,flipX:!1,flipY:!0}),"2,false":Re.makeTransformRowsAndColumns({transpose:!1,flipX:!0,flipY:!0}),"3,false":Re.makeTransformRowsAndColumns({transpose:!0,flipX:!0,flipY:!1}),"0,true":Re.makeTransformRowsAndColumns({transpose:!1,flipX:!0,flipY:!1}),"1,true":Re.makeTransformRowsAndColumns({transpose:!0,flipX:!0,flipY:!0}),"2,true":Re.makeTransformRowsAndColumns({transpose:!1,flipX:!1,flipY:!0}),"3,true":Re.makeTransformRowsAndColumns({transpose:!0,flipX:!1,flipY:!1})};var Pe=Ae,Me=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={rowsAndColumns:l.constructor.demoRowsAndColumns},l.isCellAvailable=function(){return!1},l.isCellUndoable=function(){return!1},l.animate=function(){l.setState(function(e){return{rowsAndColumns:e.rowsAndColumns===l.constructor.demoRowsAndColumns?l.constructor.demoRowsAndColumnsAnimated:l.constructor.demoRowsAndColumns}})},l.animationInterval=l.props.settings.theme.animations?setInterval(l.animate,2e3):null,l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,l){this.props.settings.theme.animations!==e.settings.theme.animations&&(this.props.settings.theme.animations?this.animationInterval||(this.animationInterval=setInterval(this.animate,2e3)):this.animationInterval&&(clearInterval(this.animationInterval),this.animationInterval=null))}},{key:"componentWillUnmount",value:function(){this.animationInterval&&(clearInterval(this.animationInterval),this.animationInterval=null)}},{key:"render",value:function(){var e=this.props,t=e.small,l=e.medium,n=e.settings,r=this.state.rowsAndColumns;return a.a.createElement(Ce,{small:t,medium:l,allowControl:[U.PLAYER_A,U.PLAYER_B],rowsAndColumns:r,undoable:!1,isCellAvailable:this.isCellAvailable,isCellUndoable:this.isCellUndoable,arrows:n.theme.arrows?this.constructor.arrows:void 0,settings:n,animated:n.theme.animations,showArrows:n.theme.arrows})}}]),t}(n.Component);Me.demoRowsAndColumns=[{y:0,cells:[{x:0,y:0,player:null,worker:null,level:0},{x:1,y:0,player:null,worker:null,level:1},{x:2,y:0,player:null,worker:null,level:2},{x:3,y:0,player:null,worker:null,level:3},{x:4,y:0,player:null,worker:null,level:4},{x:5,y:0,player:U.PLAYER_A,worker:U.WORKER_FIRST,level:0},{x:6,y:0,player:U.PLAYER_B,worker:U.WORKER_FIRST,level:0}]}],Me.demoRowsAndColumnsAnimated=[{y:0,cells:[{x:0,y:0,player:null,worker:null,level:0},{x:1,y:0,player:null,worker:null,level:1},{x:2,y:0,player:null,worker:null,level:2},{x:3,y:0,player:null,worker:null,level:3},{x:4,y:0,player:U.PLAYER_A,worker:U.WORKER_FIRST,level:3},{x:5,y:0,player:null,worker:null,level:0},{x:6,y:0,player:U.PLAYER_B,worker:U.WORKER_FIRST,level:0}]}],Me.arrows=[{from:{x:5,y:0},to:{x:4,y:0},colour:"white",type:"build"},{from:{x:4,y:0},to:{x:5,y:0},colour:"white",type:"move"}],Me.defaultProps={className:"",small:!1,medium:!1};var _e,Se=Me,Te=Pe,Ie=l(255),je=l(479),Le=l(476),Ne=l(471),Ye=l(459),Ue=l(467),We=l(95),Fe=l(472),Ge=l(49),Be=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).isCellAvailable=function(){return!1},l.isCellUndoable=function(){return!1},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.small,l=e.medium,n=e.player,r=e.settings,o=e.allowControl;return a.a.createElement(Ce,{small:t,medium:l,rowsAndColumns:this.constructor.colours[n],undoable:!1,isCellAvailable:this.isCellAvailable,isCellUndoable:this.isCellUndoable,settings:r,allowControl:o})}}]),t}(n.Component);Be.colours=(_e={},Object(T.a)(_e,U.PLAYER_A,[{y:0,cells:[{x:0,y:0,player:U.PLAYER_A,worker:U.WORKER_FIRST,level:0}]}]),Object(T.a)(_e,U.PLAYER_B,[{y:0,cells:[{x:0,y:0,player:U.PLAYER_B,worker:U.WORKER_FIRST,level:0}]}]),_e),Be.defaultProps={small:!1,medium:!1};var De,Ke,Ve,ze=Be,He=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedGame:null,game:l.props.game,transformation:null},l.autoSubmitModal=a.a.createRef(),l.makeMove=function(e){l.props.submit?l.setState({game:e}):l.props.makeMove(e),l.props.onDisplayPositionChange&&l.props.onDisplayPositionChange(e)},l.takeMoveBack=function(){l.makeMove(l.state.game.takeMoveBack())},l.undo=function(){l.makeMove(l.state.game.undo())},l.newGame=function(){l.makeMove(U.create())},l.selectGame=function(e){var t=e===l.state.game?null:e;l.setState({selectedGame:t}),l.props.onSelectedGameChange&&l.props.onSelectedGameChange(t)},l.makeMoveToSelected=function(e){l.selectGame(e)},l.takeMoveBackToSelected=function(){l.selectGame(l.state.selectedGame.takeMoveBack())},l.undoToSelected=function(){l.selectGame(l.state.selectedGame.undo())},l.deselectGame=function(){l.selectGame(null)},l.submit=function(){var e=l.getMovesToSubmit();e.length&&l.props.submit(e,l.state.game)},l.resignOrAbort=function(){l.props.submit("resign")},l.changeAutoSubmitMoves=function(){l.props.user.settings.autoSubmitMoves?l.props.changeSettings(Object(x.a)({},l.props.user.settings,{autoSubmitMoves:!1})):l.autoSubmitModal.current.handleOpen()},l.doAutoSubmitMoves=function(){l.props.changeSettings(Object(x.a)({},l.props.user.settings,{autoSubmitMoves:!0})),l.canSubmit()&&l.submit()},l.onTransformationChange=function(e){var t=e.transformation;l.setState({transformation:t})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getMovesToSubmit",value:function(){var e=this.props.game,t=this.state.game.fullHistory,l=t.findIndex(function(t){return t.compressedFullNotation===e.compressedFullNotation});return l<0?(console.error("Could not find live game in history"),[]):t.slice(l+1).map(function(e){return e.lastMove})}},{key:"componentDidUpdate",value:function(e,t){this.props.game!==e.game&&((!this.props.game||!e.game||this.props.game.compressedFullNotation!==e.game.compressedFullNotation||this.props.game.positionNotation!==e.game.positionNotation)&&(this.selectGame(null),this.setState({game:this.props.game,resigning:!1})));this.props.user&&this.props.user.settings.autoSubmitMoves&&!this.canSubmit(e,t)&&this.canSubmit()&&this.submit()}},{key:"canSubmit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,l=e.submit,n=t.selectedGame,a=t.game;return!!l&&!n&&a!==e.game&&!!this.getMovesToSubmit().length&&(a.finished||a.nextPlayer!==e.game.nextPlayer)}},{key:"render",value:function(){var e=this.props,t=e.user,l=e.defaultSettings,r=e.names,o=e.allowControl,i=e.matchGame,s=e.children,c=this.state,u=c.selectedGame,m=c.game,y=c.transformation,h=u||m,d=o.length>0,f=this.canSubmit(),E=!!i&&i.tooShortToResign,w=t?t.settings:l,g=o.includes(U.PLAYER_A),k=a.a.createElement(n.Fragment,null,a.a.createElement(Ie.a.Row,null,a.a.createElement(qe,{player:g?U.PLAYER_B:U.PLAYER_A,canSubmit:!1,submit:this.props.submit?this.submit:null,changeAutoSubmitMoves:this.changeAutoSubmitMoves,game:f?m.previous:m,settings:w,names:r,allowControl:o})),a.a.createElement(Ie.a.Row,null,a.a.createElement(qe,{player:g?U.PLAYER_A:U.PLAYER_B,canSubmit:f,submit:this.props.submit?this.submit:null,changeAutoSubmitMoves:this.changeAutoSubmitMoves,game:f?m.previous:m,settings:w,names:r,allowControl:o})),a.a.createElement(Ie.a.Row,null,a.a.createElement(Xe,{game:m,selectedGame:u,selectGame:this.selectGame})),a.a.createElement(Ie.a.Row,null,a.a.createElement(Re,{onChange:this.onTransformationChange})),s),b=a.a.createElement(Te,{game:h,transformation:y,makeMove:u?this.makeMoveToSelected:this.makeMove,minChainCount:this.props.submit?this.props.game.chainCount:this.props.game.canUndo?this.props.game.previous.chainCount:this.props.game.chainCount,allowControl:h===m?o:void 0,settings:w,animated:w.theme.animations,showArrows:w.theme.arrows});return a.a.createElement(n.Fragment,null,a.a.createElement(p.a,{style:{textAlign:"center"}},a.a.createElement(Ie.a,{centered:!0,columns:"equal",textAlign:"center"},a.a.createElement(je.a,{as:Ie.a.Row,minWidth:800},a.a.createElement(Ie.a.Column,null,k),a.a.createElement(Ie.a.Column,null,b)),a.a.createElement(je.a,{as:n.Fragment,maxWidth:800},a.a.createElement(Ie.a.Row,null,a.a.createElement(Ie.a.Column,{stretched:!1,textAlign:"center"},b)),a.a.createElement(Ie.a.Row,null,a.a.createElement(Ie.a.Column,{stretched:!1,textAlign:"center"},k))))),this.props.submit&&d?a.a.createElement(p.a,null,a.a.createElement(Le.a.Group,{widths:"two",size:"tiny"},a.a.createElement(Le.a,{value:a.a.createElement(Ne.a,{trigger:a.a.createElement(Ye.a,{negative:!0,disabled:!!u||this.props.game.finished},E?"Abort":"Resign"),header:E?"Abort?":"Resign?",content:"Are you sure you want to ".concat(E?"abort":"forfeit","?").concat(E?" This game is too short to resign.":""),actions:[{key:"resign",content:E?"Abort":"Resign",negative:!0,onClick:this.resignOrAbort},{key:"continue",content:"Continue",inverted:!0,secondary:!0}]})}),a.a.createElement(Le.a,{value:a.a.createElement(Ye.a,{negative:!0,onClick:this.props.submit?this.takeMoveBack:this.undo,disabled:!!u||(this.props.submit?m.chainCount<=this.props.game.chainCount:!m.canUndo)},"Undo")}))):null,this.props.submit?null:a.a.createElement(p.a,null,a.a.createElement(Le.a.Group,{widths:"two",size:"small"},a.a.createElement(Le.a,{value:a.a.createElement(Ye.a,{negative:!0,onClick:this.takeMoveBack,disabled:!!u||!m.previous},"Take Back a Move")}),a.a.createElement(Le.a,{value:a.a.createElement(Ye.a,{negative:!0,onClick:this.newGame,disabled:!!u||!m.previous},"New Game")}))),a.a.createElement(Je,{game:m,selectedGame:u,selectGame:this.selectGame,user:t,defaultSettings:l}),u?a.a.createElement(p.a,{textAlign:"center"},a.a.createElement(v.a,{as:"h2"},"Reviewing previous move"),a.a.createElement(Le.a.Group,{widths:"three",size:"small"},u.finished?a.a.createElement(Le.a,{color:"green",value:r[u.winner],label:"Won!"}):a.a.createElement(Le.a,{value:r[u.nextPlayer],label:this.constructor.MOVE_TYPE_NAMES[u.moveType]}),a.a.createElement(Le.a,{value:u.moveCount,label:"Move"}),a.a.createElement(Le.a,{value:a.a.createElement(Ye.a,{negative:!0,onClick:this.undoToSelected,disabled:!u.canUndo},"Undo")})),a.a.createElement(Le.a.Group,{widths:"two",size:"small"},a.a.createElement(Le.a,{value:a.a.createElement(Ye.a,{negative:!0,onClick:this.takeMoveBackToSelected,disabled:!u.previous},"Take Back a Move")}),a.a.createElement(Le.a,{value:a.a.createElement(Ye.a,{negative:!0,onClick:this.deselectGame},"Stop reviewing")}))):null,a.a.createElement(Ne.a,{ref:this.autoSubmitModal,header:"Auto submit moves",content:"Are you sure you want to be auto submitting your moves?",actions:[{key:"yes",content:"Auto submit",onClick:this.doAutoSubmitMoves,primary:!0},{key:"no",content:"No, manually submit moves",secondary:!0}]}))}}]),t}(n.Component);He.MOVE_TYPE_NAMES=(Ke={},Object(T.a)(Ke,U.MOVE_TYPE_PLACE_FIRST_WORKER,"Place a worker"),Object(T.a)(Ke,U.MOVE_TYPE_PLACE_SECOND_WORKER,"Place a worker"),Object(T.a)(Ke,U.MOVE_TYPE_SELECT_WORKER_TO_MOVE,"Select a worker"),Object(T.a)(Ke,U.MOVE_TYPE_MOVE_FIRST_WORKER,"Move worker"),Object(T.a)(Ke,U.MOVE_TYPE_MOVE_SECOND_WORKER,"Move worker"),Object(T.a)(Ke,U.MOVE_TYPE_BUILD_AROUND_WORKER,"Build"),Ke),He.defaultProps={names:(De={},Object(T.a)(De,U.PLAYER_A,"Player A"),Object(T.a)(De,U.PLAYER_B,"Player B"),De),allowControl:[U.PLAYER_A,U.PLAYER_B]};var qe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.game,l=e.player,r=e.allowControl,o=e.names,i=e.settings,s=e.canSubmit,c=e.submit,u=e.changeAutoSubmitMoves,m=r.includes(l),y=t.nextPlayer===l,p=t.winner===l;return a.a.createElement(R.a,{stackable:!0,className:G()({attention:!t.finished&&m&&y&&!s}),size:"massive",inverted:t.finished||l===U.PLAYER_B,color:t.finished?p?"green":"red":void 0,items:[{key:"icon",icon:t.finished?p?"trophy":"thumbs down":y?"play":"hourglass",content:a.a.createElement(n.Fragment,null,a.a.createElement(ze,{medium:!0,settings:i,player:l,allowControl:r}),o[l])},{key:"instructions",content:t.finished?p?"Won":"Lost":s?i.autoSubmitMoves?"Auto-submitting":a.a.createElement(Ye.a,{positive:!0,onClick:c,className:"attention"},"Submit"):y?this.constructor.MOVE_TYPE_NAMES[t.moveType]:"Waiting for opponent"},!t.finished&&c&&r.includes(l)?{key:"auto-submit",content:a.a.createElement(Ue.a,{label:"Auto submit moves",toggle:!0,checked:i.autoSubmitMoves,onChange:u})}:null].filter(function(e){return e})})}}]),t}(n.Component);qe.MOVE_TYPE_NAMES=(Ve={},Object(T.a)(Ve,U.MOVE_TYPE_PLACE_FIRST_WORKER,"Place a worker"),Object(T.a)(Ve,U.MOVE_TYPE_PLACE_SECOND_WORKER,"Place a worker"),Object(T.a)(Ve,U.MOVE_TYPE_SELECT_WORKER_TO_MOVE,"Select a worker"),Object(T.a)(Ve,U.MOVE_TYPE_MOVE_FIRST_WORKER,"Move worker"),Object(T.a)(Ve,U.MOVE_TYPE_MOVE_SECOND_WORKER,"Move worker"),Object(T.a)(Ve,U.MOVE_TYPE_BUILD_AROUND_WORKER,"Build"),Ve);var Je=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={activePage:1},l.onPageChange=function(e,t){var n=t.activePage;l.setState({activePage:n})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.game,l=e.selectedGame,r=e.user,o=e.defaultSettings,i=e.selectGame,s=e.pageSize,c=this.state.activePage,u=Math.ceil((t.history.length-1)/s),m=Object(f.a)(t.history).slice(1+(u-c)*s,1+(u-c)*s+s).reverse(),y=m[m.length-1];return a.a.createElement(p.a,null,a.a.createElement(Ie.a,{centered:!0},a.a.createElement(Ie.a.Row,null,a.a.createElement(Xe,{game:t,selectedGame:l,selectGame:i})),a.a.createElement(Ie.a.Row,null,m.map(function(e){return a.a.createElement(n.Fragment,{key:e.chainCount},e.moveCount%2===1?a.a.createElement(We.a,{content:e.moveCount-1}):null,a.a.createElement(Te,{game:e,small:!0,onSelect:i,selected:e===l,settings:r?r.settings:o}))}),y&&y.moveCount%2===0?a.a.createElement(We.a,{content:y.moveCount-2}):null),a.a.createElement(Ie.a.Row,null,a.a.createElement(Fe.a,{totalPages:u,activePage:c,onPageChange:this.onPageChange,pointing:!0,secondary:!0}))))}}]),t}(n.Component);Je.defaultProps={pageSize:10};var Xe=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).goToCurrentMove=function(){l.canGoToCurrentMove()&&l.props.selectGame(l.props.game)},l.goToNextMove=function(){if(l.canGoToNextMove()){var e=l.props.game.history.indexOf(l.props.selectedGame||l.props.game);l.props.selectGame(l.props.game.history[e+1])}},l.goToAncestor=function(){var e=l.gameIndexes.mostRecentAncestorGameIndex;l.props.selectGame(l.props.game.history[e])},l.goToPreviousMove=function(){l.canGoToPreviousMove()&&l.props.selectGame((l.props.selectedGame||l.props.game).previousInHistory)},l.goToPreviousVariationMove=function(){l.props.selectGame(l.props.selectedGame.previousInHistory)},l.goToFirstMove=function(){l.canGoToFirstMove()&&l.props.selectGame(l.props.game.history[0])},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.keydown;if(t.event){var l=t.event,n=l.which,a=l.shiftKey;n===Ge.a.left&&a?this.goToCurrentMove():n===Ge.a.home?this.goToCurrentMove():n!==Ge.a.left||a?n!==Ge.a.right||a?n===Ge.a.right&&a?this.goToFirstMove():n===Ge.a.home&&this.goToFirstMove():this.goToPreviousMove():this.goToNextMove()}}},{key:"canGoToCurrentMove",value:function(){var e=this.gameIndexes;return e.selectedGameIndex!==e.lastGameIndex}},{key:"canGoToNextMove",value:function(){var e=this.gameIndexes,t=e.selectedGameIndex,l=e.lastGameIndex;return t>=0&&t!==l}},{key:"canGoToPreviousMove",value:function(){var e=this.gameIndexes.selectedGameIndex;return e>=0&&0!==e}},{key:"canGoToFirstMove",value:function(){return 0!==this.gameIndexes.selectedGameIndex}},{key:"render",value:function(){var e=this.props,t=e.game,l=e.selectedGame,n=this.gameIndexes,r=n.selectedGameIndex,o=n.mostRecentAncestorGameIndex;return a.a.createElement(R.a,{size:"massive",items:[{key:"current",icon:"fast backward",onClick:this.goToCurrentMove,disabled:!this.canGoToCurrentMove()}].concat(Object(f.a)(r>=0?[{key:"previous",icon:"backward",onClick:this.goToNextMove,disabled:!this.canGoToNextMove()},{key:"moveCount",content:r>=0?"".concat((l||t).moveCount,"/").concat(t.moveCount):l.moveCount,disabled:t.finished},{key:"next",icon:"forward",onClick:this.goToPreviousMove,disabled:!this.canGoToPreviousMove()}]:[{key:"goToAncestor",content:"Return to ".concat(o,"/").concat(t.moveCount),onClick:this.goToAncestor}]),[{key:"first",icon:"fast forward",onClick:this.goToFirstMove,disabled:!this.canGoToFirstMove()}],Object(f.a)(r>=0?[]:[{key:"ancestor",content:"Variation ".concat(l.moveCount,"/").concat(o),disabled:!0},{key:"next",icon:"forward",onClick:this.goToPreviousVariationMove,disabled:l.moveCount<=1}]))})}},{key:"gameIndexes",get:function(){for(var e=this.props,t=e.game,l=e.selectedGame,n=t.history.indexOf(l||t),a=n,r=l;-1===a&&r;)r=r.previousInHistory,a=t.history.indexOf(r);return{selectedGameIndex:n,lastGameIndex:t.history.length-1,mostRecentAncestorGameIndex:a}}}]),t}(n.Component);Xe.keys=["left","right","shift+left","shift+right","home","end"],Xe=Object(Ge.b)(Xe.keys)(Xe);var $e=He,Qe=function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)},Ze=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={connected:k.connected,available:k.available,disconnected:k.disconnected,user:k.user,username:k.user?k.user.name:null,usersInfo:k.usersInfo,gamesInfo:k.gamesInfo,tournamentsInfo:k.tournamentsInfo},l.connectionChanged=function(e){l.setState({connected:e,disconnected:k.disconnected,available:k.available})},l.gotUser=function(e){l.setState({user:e})},l.gotUsers=function(e){l.setState({usersInfo:e})},l.gotGames=function(e){l.setState({gamesInfo:e})},l.gotTournaments=function(e){l.setState({tournamentsInfo:e})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){k.subscribe({onConnect:this.connectionChanged,onDisconnect:this.connectionChanged,onUser:this.gotUser,onUsers:this.gotUsers,onGames:this.gotGames,onTournaments:this.gotTournaments})}},{key:"componentWillUnmount",value:function(){k.unsubscribe({onUser:this.gotUser,onUsers:this.gotUsers,onGames:this.gotGames,onTournaments:this.gotTournaments})}},{key:"render",value:function(){var e=this.state,t=e.connected,l=e.disconnected,n=e.available,r=e.user,o=e.usersInfo,i=e.gamesInfo,s=e.tournamentsInfo,c=this.constructor.SubComponent;return a.a.createElement(c,Object.assign({},this.props,{connected:t,disconnected:l,available:n,client:k,user:r,usersInfo:o,gamesInfo:i,tournamentsInfo:s}))}}],[{key:"forComponent",value:function(e){var t=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),t}(this);return t.SubComponent=e,t}}]),t}(n.Component);Ze.SubComponent=null;var et=function(e){return Ze.forComponent(e)},tt=et(function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state=Object(x.a)({selectedGame:null,error:!1},l.constructor.getGameAndErrorFromUrlPosition()),l.dismissUrlPositionError=function(){l.setState({error:null})},l.makeMove=function(e){l.setState({game:e})},l.share=function(){var e=l.props.location.pathname;if(navigator.share){var t=l.state.game;navigator.share({title:"Thyra Online - Game after ".concat(t.moveCount," moves"),text:"Review Santorini game between after ".concat(t.moveCount," moves"),url:e}).catch(function(){Qe(e),alert("Link copied to clipboard")})}else Qe(e),alert("Link copied to clipboard")},l.onSelectedGameChange=function(e){l.setState({selectedGame:e})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.game,l=e.error,r=e.selectedGame,o=this.props,i=o.user,s=o.client;return a.a.createElement(n.Fragment,null,a.a.createElement(Ne.a,{open:l,size:"mini",onClose:this.dismissUrlPositionError,header:"Could not load shared position",content:"".concat(l,". Please check that you copied the full URL"),actions:[{key:"ok",content:"OK",positive:!0}]}),a.a.createElement(Ie.a,{centered:!0},a.a.createElement(Ie.a.Row,null,a.a.createElement(R.a,{inverted:!0,size:"massive",items:[{key:"share",icon:"share",content:"Share position",color:"green",active:!0,as:"a",href:"?position=".concat((r||t).compressedFullNotation),title:navigator.share?"Click to open the sharing menu":"Click to copy URL to game"}]}))),a.a.createElement($e,{user:i,defaultSettings:s.settings,game:t,makeMove:this.makeMove,onSelectedGameChange:this.onSelectedGameChange}))}}],[{key:"getGameAndErrorFromUrlPosition",value:function(){var e=new URLSearchParams(window.location.search).get("position");if(e){var t,l;try{(t=U.fromCompressedMoveNotation(e))||(l="The position was not valid")}catch(n){t=null,l="The series of moves where not valid"}return t?{game:t,error:!1}:{game:U.create(),error:l}}return{game:U.create(),error:!1}}}]),t}(n.Component)),lt=l(474),nt=l(64),at=l(468),rt=l(245),ot=l.n(rt),it=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).ref=a.a.createRef(),l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateIcon()}},{key:"updateIcon",value:function(){this.ref.current&&ot.a.update(this.ref.current)}},{key:"componentDidUpdate",value:function(e){e.hash!==this.props&&this.updateIcon()}},{key:"render",value:function(){var e,t=this.props,l=t.hash,n=t.floated,r=t.size,o=t.textSized;return a.a.createElement("svg",{ref:this.ref,className:G()(["ui","mini","right","floated","image"],(e={floated:!!n},Object(T.a)(e,n,!!n),Object(T.a)(e,r,!!r),Object(T.a)(e,"text-sized",o),e)),"data-jdenticon-value":l})}}]),t}(n.Component);it.defaultProps={textSized:!1};var st=it,ct=l(127),ut=l.n(ct),mt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).selectLiveGame=function(){l.props.selectLiveGame(l.props.game)},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,l=e.usersById,n=e.tournamentsById,r=e.game,o=e.terse,i=e.live,s=e.currentGameId,c=n[r.tournamentId],u=U.deserialize(r.game),m=l[r.userIds[0]],y=l[r.userIds[1]],p=u.nextPlayer===U.PLAYER_A?m:y,v=p===m,h=p===y,d=!!t&&m.id===t.id,f=!!t&&y.id===t.id,E=r.finished?r.winner===U.PLAYER_A?m:y:null,w=d||f,g=d&&v||f&&h,k=!o||!w||f,b=!o||!w||d;return a.a.createElement(lt.a,{as:C.b,to:"/game/".concat(r.id),style:Object(x.a)({},o?{width:"auto"}:{},r.id===s?{backgroundColor:"lightgreen"}:{}),className:G()({attention:i&&g})},a.a.createElement(lt.a.Content,null,o?null:a.a.createElement(Te,{className:"ui image floated right mini",game:u,small:!0,settings:t?t.settings:void 0}),a.a.createElement(lt.a.Header,null,k&&b?null:" vs ",k?a.a.createElement(We.a,{color:E===m||g?"green":void 0},E===m?a.a.createElement(nt.a,{name:"trophy"}):null,v?a.a.createElement(nt.a,{name:"caret right"}):null,m.name,a.a.createElement(st,{floated:"right",size:"mini",textSized:!0,hash:m.id})):null,k&&b?" vs ":null,b?a.a.createElement(We.a,{color:E===y||g?"green":void 0},E===y?a.a.createElement(nt.a,{name:"trophy"}):null,h?a.a.createElement(nt.a,{name:"caret right",color:"green"}):null,y.name,a.a.createElement(st,{floated:"right",size:"mini",textSized:!0,hash:y.id})):null),o?c?a.a.createElement(We.a,{icon:"sitemap"}):null:a.a.createElement(lt.a.Meta,null,w?a.a.createElement(We.a,{icon:{name:"user",color:"green"},content:"My game"}):null," ",r.finished?null:a.a.createElement(We.a,{icon:{name:"circle",color:"green"},content:"Live"})," ",a.a.createElement(We.a,{content:"Move ".concat(r.move),icon:"play"})," ",a.a.createElement(We.a,{content:ut()(r.endDatetime||r.startDatetime).from(),icon:"calendar"})," ",c?a.a.createElement(We.a,{content:c.name,icon:"sitemap"}):null)))}}]),t}(n.Component);mt.defaultProps={terse:!1,live:!1};var yt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={activePage:1},l.onPageChange=function(e,t){var n=t.activePage;l.setState({activePage:n})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,l=e.usersById,r=e.tournamentsById,o=e.games,i=e.terse,s=e.live,c=e.selectLiveGame,u=e.currentGameId,m=e.pageSize;if(!Object.values(l).length)return null;var y=this.state.activePage,p=Math.ceil(o.length/m);y>p&&(y=p);var v=o.slice((p-y)*m,(p-y)*m+m).reverse();return a.a.createElement(n.Fragment,null,a.a.createElement(lt.a.Group,{style:{maxHeight:"300px",overflowY:"auto",flexWrap:i?"unset":void 0}},v.map(function(e){return a.a.createElement(mt,{key:e.id,user:t,usersById:l,tournamentsById:r,game:e,selectLiveGame:c,terse:i,live:s,currentGameId:u})})),p>1?a.a.createElement(Ie.a,{centered:!0},a.a.createElement(Ie.a.Row,null,a.a.createElement(Fe.a,{totalPages:p,activePage:y,onPageChange:this.onPageChange,pointing:!0,secondary:!0}))):null)}}]),t}(n.Component);yt.defaultProps={terse:!1,live:!1,pageSize:10};var pt=yt,vt=l(470),ht=et(function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={name:"",gameCount:"1"},l.createTournament=function(){var e=l.props.client,t=l.state,n=t.name,a=t.gameCount;e.createTournament({name:n,gameCount:parseInt(a,10)})},l.onClose=function(){l.setState({name:"",gameCount:1})},l.setValue=function(e,t){var n=t.name,a=t.value;l.setState(Object(T.a)({},n,a))},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(Ne.a,{size:"mini",trigger:a.a.createElement(Ye.a,{color:"yellow",icon:"sitemap",content:"Create tournament"}),header:"Create tournament",content:a.a.createElement(p.a,null,a.a.createElement(vt.a,null,a.a.createElement(vt.a.Field,{name:"name",control:at.a,label:"Name",placeholder:"Tournament name",onChange:this.setValue,required:!0,defaultValue:this.state.name}),a.a.createElement(vt.a.Field,{name:"gameCount",control:at.a,label:"".concat(this.state.gameCount," game(s) between each pair of players"),placeholder:"Game count between each pair of players",onChange:this.setValue,type:"range",min:1,max:5,defaultValue:this.state.gameCount,required:!0}))),actions:[{key:"cancel",content:"Cancel"},{key:"create",positive:!0,content:"Create Tournament",onClick:this.createTournament,disabled:!this.state.name}],onClose:this.onClose})}}]),t}(n.Component)),dt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).selectLiveTournament=function(){l.props.selectLiveTournament(l.props.tournament)},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,l=e.usersById,n=e.currentTournamentId,r=e.tournament,o=e.terse,i=!!t&&r.userIds.includes(t.id),s=!!t&&r.creatorUserId===t.id,c=!!r.finished&&r.winnerUserId===t.id,u=l[r.creatorUserId],m=a.a.createElement(We.a,{content:r.started?r.finished?"Finished":"Round ".concat(r.round,"/").concat(r.rounds):"Waiting",icon:{name:r.started?r.finished?"trophy":"play":"hourglass",colour:r.started?"green":void 0}});return a.a.createElement(lt.a,{as:C.b,to:"/tournament/".concat(r.id),style:Object(x.a)({},o?{width:"auto"}:{},r.id===n?{backgroundColor:"lightgreen"}:{})},a.a.createElement(lt.a.Content,null,a.a.createElement(lt.a.Header,null,a.a.createElement(We.a,{content:r.name})," by",a.a.createElement(We.a,{color:s?"green":void 0,content:u.name}),o?m:null),o?null:a.a.createElement(lt.a.Meta,null,i?a.a.createElement(We.a,{icon:{name:"user",color:"green"},content:"Participating"}):null," ",c?a.a.createElement(We.a,{icon:{name:"trophy",color:"yellow"},content:"Won"}):r.finished?a.a.createElement(We.a,{icon:"trophy",content:l[r.winnerUserId]?l[r.winnerUserId].name:r.winnerUserId}):null," ",r.started&&!r.finished?a.a.createElement(We.a,{icon:{name:"circle",color:"green"},content:"Live"}):null," ",m," ",a.a.createElement(We.a,{content:"".concat(r.userIds.length," players"),icon:"users"})," ",a.a.createElement(We.a,{content:ut()(r.endDatetime||r.startDatetime||r.createdDate).from(),icon:"calendar"}))))}}]),t}(n.Component);dt.defaultProps={terse:!1};var ft=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={activePage:1},l.onPageChange=function(e,t){var n=t.activePage;l.setState({activePage:n})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,l=e.usersById,r=e.tournaments,o=e.terse,i=e.selectLiveTournament,s=e.currentTournamentId,c=e.pageSize;if(!Object.values(l).length)return null;var u=this.state.activePage,m=Math.ceil(r.length/c);u>m&&(u=m);var y=r.slice((m-u)*c,(m-u)*c+c).reverse();return a.a.createElement(n.Fragment,null,a.a.createElement(lt.a.Group,{style:{maxHeight:"300px",overflowY:"auto",flexWrap:o?"unset":void 0}},y.map(function(e){return a.a.createElement(dt,{key:e.id,user:t,usersById:l,tournament:e,currentTournamentId:s,selectLiveTournament:i,terse:o})})),m>1?a.a.createElement(Ie.a,{centered:!0},a.a.createElement(Ie.a.Row,null,a.a.createElement(Fe.a,{totalPages:m,activePage:u,onPageChange:this.onPageChange,pointing:!0,secondary:!0}))):null)}}]),t}(n.Component);ft.defaultProps={terse:!1,pageSize:10};var Et=ft,wt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.client,l=e.user,n=e.users,r=e.challengedUser,o=e.readyToPlayUsers,i=e.readyToPlayMeUsers;return a.a.createElement(lt.a.Group,{style:{maxHeight:"300px",overflowY:"auto"}},n.map(function(e){return a.a.createElement(gt,{key:e.id,client:t,user:l,otherUser:e,challengedUser:r,readyToPlayUsers:o,readyToPlayMeUsers:i})}))}}]),t}(n.Component),gt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).changeReadyToPlay=function(){l.props.client.changeReadyToPlay(!l.props.user.readyToPlay)},l.challengeUser=function(){l.props.client.changeReadyToPlay(l.props.user.readyToPlay!==l.props.otherUser.id&&l.props.otherUser.id)},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t,l,n,r,o=this.props,i=o.client,s=o.user,c=o.otherUser,u=o.challengedUser,m=o.readyToPlayUsers,y=o.readyToPlayMeUsers;return i&&s&&(s.id===c.id?(n=this.changeReadyToPlay,s.readyToPlay?(e="green",l={loading:!0,name:"circle notch"},r=u?"Waiting for ".concat(u.name,"..."):"Waiting for opponent..."):(e="yellow",l={name:"play"},y&&y.length?1===y.length?(r="".concat(y[0].name," has challenged you"),t=!0):(r="".concat(y.length," users have challenged you"),t=!0):r=m&&m.length?1===m.length?"Play ".concat(m[0].name):"".concat(m.length," users ready to play"):"Play")):(n=this.challengeUser,u&&u.id===c.id?(e="green",l={loading:!0,name:"circle notch"},r="Waiting for ".concat(c.name,"...")):c.online?(e="yellow",l={name:"play"},c.readyToPlay===s.id?(r="".concat(c.name," has challenged you"),t=!0):r=!0===c.readyToPlay?"".concat(c.name," is ready to Play"):"Challenge ".concat(c.name)):(r=null,n=null))),a.a.createElement(lt.a,null,a.a.createElement(lt.a.Content,null,a.a.createElement(st,{floated:"right",size:"mini",hash:c.id}),a.a.createElement(lt.a.Header,null,c.name," ",i&&s&&s.id===c.id?a.a.createElement(kt,{client:i,user:s,trigger:a.a.createElement(We.a,{as:"a",icon:"edit",content:"Edit"})}):null),a.a.createElement(lt.a.Meta,null,s&&c.id===s.id?a.a.createElement(We.a,null,a.a.createElement(nt.a,{name:"user",color:"green"}),"Me"):null," ",s&&c.id===s.id?a.a.createElement(kt,{client:i,user:s,trigger:a.a.createElement(We.a,{as:"a"},a.a.createElement(nt.a,{name:"lock",color:s.hasPassword?"green":"red"}),s.hasPassword?"":"No password")}):null," ",c.readyToPlay?a.a.createElement(We.a,null,a.a.createElement(nt.a,{loading:!0,name:"circle notch",color:"green"}),"Ready"):null," ",c.online?a.a.createElement(We.a,null,a.a.createElement(nt.a,{name:"circle",color:"green"}),"Online"):null," ",a.a.createElement(We.a,{title:"".concat(c.isUserRatingProvisional?"Provisional - ":"","Won ").concat(c.winCount," out of ").concat(c.gameCount),color:{1:"yellow",2:"grey",3:"brown"}[c.rank]},a.a.createElement(nt.a,{name:c.isUserRatingProvisional?"question":"star outline",color:c.isUserRatingProvisional?"orange":void 0})," ",c.score)," ",a.a.createElement(We.a,{icon:"trophy",content:" ".concat(c.winCount,"/").concat(c.gameCount)})," ",c.tournamentWinCount?a.a.createElement(We.a,{icon:{name:"sitemap",color:"yellow"},content:c.tournamentWinCount,title:"Won ".concat(c.tournamentWinCount,"/").concat(c.tournamentCount," tournaments entered")}):null)),r?a.a.createElement(lt.a.Content,{extra:!0},a.a.createElement("div",{className:"ui two buttons"},a.a.createElement(Ye.a,{className:G()({attention:t}),color:e,onClick:n},a.a.createElement(nt.a,l),r))):null)}}]),t}(n.Component),kt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={user:l.props.user,username:l.props.user.name,password:""},l.changeUsername=function(e){var t=e.target.value;l.setState({username:t})},l.changePassword=function(e){var t=e.target.value;l.setState({password:t})},l.updateUsername=function(){l.props.client.changeUsername(l.state.username)},l.updatePassword=function(){l.props.client.changePassword(l.state.password),l.setState({password:""})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,l=e.password,n=this.props,r=n.user,o=n.trigger;return a.a.createElement(Ne.a,{trigger:o,size:"small",header:"Edit user",content:a.a.createElement(p.a,null,a.a.createElement(at.a,{label:"Name",value:t,onChange:this.changeUsername,action:{content:"Change",onClick:this.updateUsername}}),a.a.createElement("br",null),a.a.createElement(at.a,{label:{content:r.hasPassword?"Password is set":"Set a password",color:r.hasPassword?"green":"red"},value:l,onChange:this.changePassword,action:{content:"Change",color:r.hasPassword?void 0:"green",onClick:this.updatePassword}})),actions:[{key:"cancel",negative:!0,content:"Cancel"}]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.user!==t.user?{user:e.user,username:e.user?e.user.name:null}:null}}]),t}(n.Component),bt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={username:"",password:"",mergeUsers:!1},l.changeUsername=function(e){var t=e.target.value;l.setState({username:t})},l.changePassword=function(e){var t=e.target.value;l.setState({password:t})},l.changeMergeUsers=function(e){var t=e.target.checked;l.setState({mergeUsers:t})},l.logIn=function(){l.props.client.logIn(l.state.username,l.state.password,l.mergeUsers),l.setState({username:"",password:""})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,l=e.password,n=e.mergeUsers;return a.a.createElement(Ne.a,{ref:this.modal,trigger:a.a.createElement(We.a,{as:"a",icon:"sign in",content:"Log In",float:"left"}),size:"small",header:"Log In",content:a.a.createElement(p.a,null,a.a.createElement(at.a,{label:"Name",value:t,onChange:this.changeUsername}),a.a.createElement("br",null),a.a.createElement(at.a,{label:"Password",value:l,onChange:this.changePassword}),a.a.createElement("br",null),a.a.createElement(Ue.a,{label:"Merge users",checked:n,onChange:this.changeMergeUsers})),actions:[{key:"cancel",negative:!0,content:"Cancel"},{key:"logIn",positive:!0,content:"Log In",onClick:this.logIn}]})}}]),t}(n.Component),xt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).logOut=function(){l.props.client.logOut()},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(We.a,{as:"a",icon:"log out",content:"Log Out",onClick:this.logOut})}}]),t}(n.Component),Ot=et(function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).changeReadyToPlay=function(){l.props.client.changeReadyToPlay(!l.props.user.readyToPlay)},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.client,l=e.user,r=e.usersInfo,o=r.byId,i=r.users,s=r.online,c=r.offline,u=r.challengedUser,m=r.readyToPlay,y=r.readyToPlayMe,v=e.gamesInfo,h=v.myLive,f=v.otherLive,E=v.myFinished,w=v.otherFinished,g=e.selectLiveGame,k=e.selectLiveTournament,b=e.tournamentsInfo,x=b.byId;return l?a.a.createElement(n.Fragment,null,a.a.createElement(lt.a.Group,{centered:!0},l?a.a.createElement(gt,{client:t,otherUser:l,user:l,challengedUser:u,readyToPlayUsers:m,readyToPlayMeUsers:y}):null),a.a.createElement(p.a,null,a.a.createElement(d.a,{menu:{pointing:!0},panes:[{key:"my-live",label:"My Live games",items:h,color:"green"},{key:"other-live",label:"Other Live games",items:f,color:"green"},{key:"my-past",label:"My Past games",items:E},{key:"other-past",label:"Other Past games",items:w}].filter(function(e){return e.items.length}).map(function(e){var t=e.key,r=e.label,i=e.items,s=e.color;return{menuItem:{key:t,content:a.a.createElement(n.Fragment,null,r," ",a.a.createElement(We.a,{content:i.length,color:s}))},render:function(){return a.a.createElement(pt,{user:l,usersById:o,tournamentsById:x,games:i,selectLiveGame:g})}}})})),a.a.createElement(p.a,null,a.a.createElement(ht,null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(d.a,{menu:{pointing:!0},panes:[{key:"my-live",label:"My Future & Running tournaments",items:b.myFutureAndLive,color:"green"},{key:"other-live",label:"Other Future and Running tournaments",items:b.otherFutureAndLive,color:"green"},{key:"my-past",label:"My Past tournaments",items:b.myFinished},{key:"other-past",label:"Other Past tournaments",items:b.otherFinished}].filter(function(e){return e.items.length}).map(function(e){var t=e.key,r=e.label,i=e.items,s=e.color;return{menuItem:{key:t,content:a.a.createElement(n.Fragment,null,r," ",a.a.createElement(We.a,{content:i.length,color:s}))},render:function(){return a.a.createElement(Et,{user:l,usersById:o,tournaments:i,selectLiveTournament:k})}}})})),a.a.createElement(p.a,null,a.a.createElement(d.a,{menu:{pointing:!0},panes:[{key:"online",label:"Online Users",items:s,color:"green"},{key:"offline",label:"Offline Users",items:c},{key:"all",label:"All Users",items:i}].filter(function(e){return e.items.length}).map(function(e){var r=e.key,o=e.label,i=e.items,s=e.color;return{menuItem:{key:r,content:a.a.createElement(n.Fragment,null,o," ",a.a.createElement(We.a,{content:i.length,color:s}))},render:function(){return a.a.createElement(wt,{client:t,users:i,user:l,challengedUser:u,readyToPlayUsers:m,readyToPlayMeUsers:y})}}})}))):a.a.createElement(d.a.Pane,null,"Connecting to server...")}}]),t}(n.Component)),Ct=l(75),At=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).themeSchemeOptions=[{value:"",label:"Default"},{value:"subtle",label:"Subtle"},{value:"pastel",label:"Pastel"},{value:"green",label:"Green"}],l.themePiecesOptions=[{value:"pawn",label:"Pawn"},{value:"king",label:"King"},{value:"circle",label:"Circle"},{value:"certificate",label:"Star"},{value:"sun",label:"Sun"},{value:"rocket",label:"Rocket"},{value:"bug",label:"Bug"},{value:"eye",label:"Eye"},{value:"user",label:"User"}],l.themeNumbersOptions=[{value:"",label:"None"},{value:"obvious",label:"Obvious"},{value:"subtle",label:"Subtle"},{value:"very-subtle",label:"Very subtle"}],l.themeDemoBoard=function(e){var t=l.props.settings.theme;return a.a.createElement(Se,{medium:!0,settings:{theme:Object(x.a)({},t,{animations:!1},e)}})},l.updateAutoSubmitMove=function(e,t){var n=t.checked;l.props.updateSettings({autoSubmitMoves:n})},l.updateEnableNotifications=function(e,t){var n=t.checked;l.props.updateSettings({enableNotifications:n})},l.updateThemeRotateOpponent=function(e,t){var n=t.checked;l.props.updateSettings({theme:{rotateOpponent:n}})},l.updateAnimations=function(e,t){var n=t.checked;l.props.updateSettings({theme:{animations:n}})},l.updateArrows=function(e,t){var n=t.checked;l.props.updateSettings({theme:{arrows:n}})},l.updateThemeNumbers=function(e,t){var n=t.value;l.props.updateSettings({theme:{numbers:n}})},l.updateThemeScheme=function(e,t){var n=t.value;l.props.updateSettings({theme:{scheme:n}})},l.updateThemePieces=function(e,t){var n=t.value;l.props.updateSettings({theme:{pieces:n}})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.settings,l=t.autoSubmitMoves,n=t.enableNotifications,r=t.theme,o=r.pieces,i=void 0===o?"king":o,s=r.scheme,c=r.rotateOpponent,u=r.animations,m=r.arrows,y=r.numbers;return a.a.createElement(d.a,{menu:{pointing:!0,attached:!1},panes:[{menuItem:"Playing",render:function(){return a.a.createElement(p.a,null,a.a.createElement(vt.a,null,a.a.createElement(vt.a.Group,null,a.a.createElement(Ue.a,{label:"Auto-submit online moves",name:"autoSubmitMoves",checked:l,onChange:e.updateAutoSubmitMove})),a.a.createElement(vt.a.Group,null,a.a.createElement(Ue.a,{label:"Enable notifications",name:"enableNotifications",checked:n,onChange:e.updateEnableNotifications}))))}},{menuItem:"Theme",render:function(){return a.a.createElement(p.a,null,a.a.createElement(Ie.a,{stackable:!0,columns:"equal",verticalAlign:"middle"},a.a.createElement(Ie.a.Row,null,a.a.createElement(Ie.a.Column,{textAlign:"center"},e.themeDemoBoard({animations:r.animations}))),a.a.createElement(Ie.a.Row,null,a.a.createElement(d.a,{menu:{pointing:!0,attached:!1},panes:[{menuItem:"Pieces",render:function(){return a.a.createElement(d.a.Pane,null,a.a.createElement(Ie.a,{stackable:!0,columns:"equal",verticalAlign:"middle"},a.a.createElement(Ie.a.Row,null,a.a.createElement(Ie.a.Column,{width:4},a.a.createElement(Ue.a,{label:"Rotate Opponent",name:"theme.rotateOpponent",checked:c,onChange:e.updateThemeRotateOpponent})),a.a.createElement(Ie.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({rotateOpponent:!0}))),a.a.createElement(Ie.a.Row,null,a.a.createElement(Ie.a.Column,{width:4},a.a.createElement(Ue.a,{label:"Animation",name:"theme.animations",checked:u,onChange:e.updateAnimations})),a.a.createElement(Ie.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({animations:!0}))),a.a.createElement(Ie.a.Row,null,a.a.createElement(Ie.a.Column,{width:4},a.a.createElement(Ue.a,{label:"Arrows",name:"theme.arrows",checked:m,onChange:e.updateArrows})),a.a.createElement(Ie.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({arrows:!0}))),a.a.createElement(Ie.a.Row,null,a.a.createElement(Ie.a.Column,{textAlign:"center"},a.a.createElement(vt.a.Field,null,a.a.createElement(v.a,{as:"h2"},"Pieces:")))),e.themePiecesOptions.map(function(t){return a.a.createElement(Ie.a.Row,{key:"theme-pieces-".concat(t.value)},a.a.createElement(Ie.a.Column,{width:4},a.a.createElement(Ue.a,{radio:!0,label:t.label,name:"theme.pieces",value:t.value,checked:i===t.value,onChange:e.updateThemePieces})),a.a.createElement(Ie.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({pieces:t.value})))})))}},{menuItem:"Board",render:function(){return a.a.createElement(d.a.Pane,null,a.a.createElement(Ie.a,{stackable:!0,columns:"equal",verticalAlign:"middle"},e.themeSchemeOptions.map(function(t){return a.a.createElement(Ie.a.Row,{key:"theme-scheme-".concat(t.value)},a.a.createElement(Ie.a.Column,{width:4},a.a.createElement(Ue.a,{radio:!0,label:t.label,name:"theme.scheme",value:t.value,checked:s===t.value,onChange:e.updateThemeScheme})),a.a.createElement(Ie.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({scheme:t.value})))})))}},{menuItem:"Level Indicators",render:function(){return a.a.createElement(d.a.Pane,null,a.a.createElement(Ie.a,{stackable:!0,columns:"equal",verticalAlign:"middle"},e.themeNumbersOptions.map(function(t){return a.a.createElement(Ie.a.Row,{key:"theme-numbers-".concat(t.value)},a.a.createElement(Ie.a.Column,{width:4},a.a.createElement(Ue.a,{radio:!0,label:t.label,name:"theme.numbers",value:t.value,checked:y===t.value,onChange:e.updateThemeNumbers})),a.a.createElement(Ie.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({numbers:t.value})))})))}}]}))))}}]})}}]),t}(n.Component),Rt=et(function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={user:null,settings:b.getDefaultSettings()},l.updateSettings=function(e){l.setState(function(t){return{settings:Object(x.a)({},t.settings,e,{theme:Object(x.a)({},t.settings.theme,e.theme)})}})},l.save=function(){l.props.client.updateSettings(l.state.settings)},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.settings;return a.a.createElement(Ne.a,{trigger:a.a.createElement(We.a,{as:"a",icon:"cog",content:"Settings"}),size:"small",header:"Settings",actions:[{key:"cancel",content:"Cancel"},{key:"save",content:"Save",positive:!0,onClick:this.save}],content:{scrolling:!0,content:a.a.createElement(At,{settings:e,updateSettings:this.updateSettings})}})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.user&&e.user!==t.user?{user:e.user,settings:e.user.settings||b.getDefaultSettings()}:{}}}]),t}(n.Component)),Pt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t,l=this.props,r=l.game,o=l.player;r?r.initialPlayerA.id===o.id?(e=r.initialPlayerA,t=r.resultingPlayerAScore):r.initialPlayerB.id===o.id?(e=r.initialPlayerB,t=r.resultingPlayerBScore):(e=null,t=null):(e=null,t=null);var i=r&&r.winnerUserId===o.id;return a.a.createElement(n.Fragment,null,i?a.a.createElement(nt.a,{name:"trophy",color:"green"}):null," ",a.a.createElement("span",{style:i?{color:"#21BA45"}:void 0},o.name,e&&!r.tournamentId?a.a.createElement(n.Fragment,null," ","(",t?a.a.createElement(n.Fragment,null,i?"+".concat(e.winPoints):e.losePoints," ",a.a.createElement(nt.a,{name:"long arrow alternate right"})," ",t):a.a.createElement(n.Fragment,null,e.score," ","+",e.winPoints,"/",e.losePoints),")"):null),a.a.createElement(st,{floated:"right",size:"mini",hash:o.id}))}}]),t}(n.Component),Mt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={selectedGame:null},l.gameSelector=Object(Ct.a)([function(e){return e.match.params.id},function(e){return e.gamesInfo.byId}],function(e,t){return t[e]}),l.playersInfoSelector=Object(Ct.a)([function(e){return e.user},function(e){return e.usersInfo},function(){return l.game}],function(e,t,l){var n=t.byId,a=n[l.userIds[0]],r=n[l.userIds[1]],o=!!e&&a.id===e.id,i=!!e&&r.id===e.id;return{playerA:a,playerB:r,isUserPlayerA:o,isUserPlayerB:i,userPlayer:o?U.PLAYER_A:i?U.PLAYER_B:null,otherUser:o?r:i?a:null}}),l.gameGameSelector=Object(Ct.a)([function(){return l.game}],function(e){return e?U.deserialize(e.game):null}),l.dismissUrlGameError=function(){l.props.selectLiveGame(null)},l.submit=function(e){l.props.client.submitGameMove(l.game,e)},l.close=function(){l.props.selectLiveGame(null)},l.changeSettings=function(e){l.props.client.updateSettings(e)},l.shareGame=function(e){var t=l.props.location.pathname;if(navigator.share){var n=l.game,a=l.playersInfo,r=a.playerA,o=a.playerB;navigator.share({title:"Thyra Online - ".concat(n.finished?"Review":"Live"," ").concat(r.name," vs ").concat(o.name),text:"".concat(n.finished?"Review finished":"Watch live"," Santorini game between ").concat(r.name," and ").concat(o.name),url:t}).catch(function(){Qe(t),alert("Link copied to clipboard")})}else Qe(t),alert("Link copied to clipboard");e.preventDefault()},l.challengeUser=function(){var e=l.playersInfo.otherUser;e&&l.props.client.changeReadyToPlay(e.id)},l.stopChallengeUser=function(){l.props.client.changeReadyToPlay(!1)},l.onSelectedGameChange=function(e){l.setState({selectedGame:e})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.game;e&&this.props.selectLiveGame(e)}},{key:"componentDidUpdate",value:function(){var e=this.game;e&&this.props.selectLiveGame(e)}},{key:"render",value:function(){var e,t=this.props,l=t.location,r=t.user,o=t.client,i=t.game,s=t.selectLiveGame,c=t.usersInfo,u=c.challengedUser,m=c.byId,y=t.gamesInfo,v=y.otherLive,h=y.myLive,d=t.tournamentsInfo.byId,f=this.state.selectedGame,E=this.gameGame;if(!E)return a.a.createElement(n.Fragment,null,a.a.createElement(Ne.a,{open:!0,size:"mini",onClose:this.dismissUrlGameError,header:"Could not find game",content:"This game cannot be found. Please check that you copied the full URL, or perhaps the game was aborted",actions:[{key:"ok",content:"OK",positive:!0}]}),"Could not find game");var w=this.playersInfo,g=w.otherUser,k=w.playerA,b=w.playerB,x=w.isUserPlayerA,O=w.isUserPlayerB,A=w.userPlayer;if(!k||!b)return null;var P=a.a.createElement(p.a,null,a.a.createElement(pt,{user:r,selectLiveGame:s,games:h,usersById:m,tournamentsById:d,terse:!0,live:!0,currentGameId:i?i.id:null}),v.length?a.a.createElement(pt,{user:r,selectLiveGame:s,games:v,usersById:m,tournamentsById:d,terse:!0,live:!0,currentGameId:i?i.id:null}):null),M=i?d[i.tournamentId]:null;return a.a.createElement(n.Fragment,null,a.a.createElement(Rt,null),a.a.createElement(Ie.a,{centered:!0},a.a.createElement(Ie.a.Row,null,a.a.createElement(R.a,{stackable:!0,size:"massive",inverted:!0,items:[{key:"close",content:"Close",icon:"x",onClick:this.close,color:"red",active:!0},{key:"share",content:"Share Game",icon:"share",onClick:this.shareGame,as:C.b,to:l.pathname,color:"green",active:!0,title:navigator.share?"Click to open the sharing menu":"Click to copy URL to game"},{key:"play",content:"Play position",icon:"retweet",as:C.b,to:"/hotseat?position=".concat((f||E).compressedFullNotation),color:"green",active:!0,title:"Click to open hotseat with this game",target:"_blank"},{key:"edit",content:"Edit position",icon:"edit",as:C.b,to:"/edit-position?position=".concat((f||E).positionNotation),color:"green",active:!0,title:"Click to edit the position for this game",target:"_blank"}]})),a.a.createElement(Ie.a.Row,null,a.a.createElement(R.a,{stackable:!0,size:"massive",items:[{key:"player-a",content:a.a.createElement(n.Fragment,null,x?a.a.createElement(We.a,{color:"green",icon:"user",content:"Me"}):null,a.a.createElement(Pt,{game:i,player:k})),color:x?"green":void 0},{key:"player-b",content:a.a.createElement(n.Fragment,null,O?a.a.createElement(We.a,{color:"green",icon:"user",content:"Me"}):null,a.a.createElement(Pt,{game:i,player:b})),color:O?"green":void 0},M?{key:"tournament",content:a.a.createElement(C.b,{to:"/tournament/".concat(M.id)},a.a.createElement(nt.a,{name:"sitemap"})," ",M.name),as:"span"}:null].filter(function(e){return e})}))),a.a.createElement(je.a,{as:n.Fragment,maxWidth:800},P),a.a.createElement($e,{user:r,defaultSettings:o.settings,otherUser:g,changeSettings:this.changeSettings,game:E,matchGame:i,names:(e={},Object(T.a)(e,U.PLAYER_A,k.name),Object(T.a)(e,U.PLAYER_B,b.name),e),allowControl:[A].filter(function(e){return e}),submit:this.submit,challengeUser:this.challengeUser,stopChallengeUser:this.stopChallengeUser,challengedUser:u,onSelectedGameChange:this.onSelectedGameChange},a.a.createElement(je.a,{as:Ie.a.Row,minWidth:800},P)))}},{key:"game",get:function(){return this.gameSelector(this.props)}},{key:"playersInfo",get:function(){return this.playersInfoSelector(this.props)}},{key:"gameGame",get:function(){return this.gameGameSelector(this.props)}}]),t}(n.Component);Mt=Object(A.g)(et(Mt));var _t=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).gameGameSelector=Object(Ct.a)([function(e){return e.game}],function(e){return e?U.deserialize(e.game):null}),l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectLiveGame,l=e.game,r=e.user,o=e.usersInfo.byId,i=e.gamesInfo,s=i.myLive,c=i.otherLive,u=i.myFinished,m=i.otherFinished,y=e.tournamentsInfo.byId;if(!Object.values(o).length)return null;var v=this.gameGame;return a.a.createElement(A.d,null,a.a.createElement(A.b,{exact:!0,path:this.props.match.path},a.a.createElement(p.a,null,a.a.createElement(d.a,{menu:{pointing:!0},panes:[{key:"my-live",label:"My Live games",items:s,color:"green"},{key:"other-live",label:"Other Live games",items:c,color:"green"},{key:"my-past",label:"My Past games",items:u},{key:"other-past",label:"Other Past games",items:m}].filter(function(e){return e.items.length}).map(function(e){var l=e.key,i=e.label,s=e.items,c=e.color;return{menuItem:{key:l,content:a.a.createElement(n.Fragment,null,i," ",a.a.createElement(We.a,{content:s.length,color:c}))},render:function(){return a.a.createElement(pt,{user:r,usersById:o,tournamentsById:y,games:s,selectLiveGame:t})}}})}))),a.a.createElement(A.b,{path:"".concat(this.props.match.path,"/:id")},a.a.createElement(Mt,{game:l,gameGame:v,selectLiveGame:t})))}},{key:"gameGame",get:function(){return this.gameGameSelector(this.props)}}]),t}(n.Component),St=Object(A.g)(et(_t)),Tt=l(124),It=l(96),jt=l.n(It),Lt=l(166),Nt={notifications:new(function(){function e(){var t=this;Object(i.a)(this,e),this.onUser=function(e){t.user=e},this.user=k.user,k.subscribe({onUser:this.onUser})}return Object(s.a)(e,[{key:"requestPermission",value:function(){var e=Object(Lt.a)(jt.a.mark(function e(){return jt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.Notification||"denied"===window.Notification.permission){e.next=3;break}return e.next=3,window.Notification.requestPermission();case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"notify",value:function(){var e=Object(Lt.a)(jt.a.mark(function e(){var t=arguments;return jt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user&&this.user.settings.enableNotifications){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.requestPermission();case 4:if(window.Notification&&"granted"===window.Notification.permission)try{Object(Tt.a)(Notification,Array.prototype.slice.call(t))}catch(l){console.error("Could not send notification",l)}case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}())},Yt=l(53),Ut=l(473),Wt=(l(456),function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).tournamentSelector=Object(Ct.a)([function(e){return e.match.params.id},function(e){return e.tournamentsInfo.byId}],function(e,t){return t[e]}),l.dismissUrlTournamentError=function(){l.props.selectLiveTournament(null)},l.close=function(){l.props.selectLiveTournament(null)},l.shareTournament=function(e){var t=l.props.location.pathname;if(navigator.share){var n=Object(Yt.a)(l).tournament;navigator.share({title:"Thyra Online - ".concat(n.started?n.finished?"Past":"Live":"Future"," tournament ").concat(n.name),text:"".concat(n.started?n.finished?"Review Past":"Watch Live":"Future"," Santorini tournament ").concat(n.name),url:t}).catch(function(){Qe(t),alert("Link copied to clipboard")})}else Qe(t),alert("Link copied to clipboard");e.preventDefault()},l.toggleParticipation=function(){var e=Object(Yt.a)(l).tournament;l.props.toggleParticipation(e)},l.startTournament=function(){var e=Object(Yt.a)(l).tournament;l.props.startTournament(e)},l.abortTournament=function(){var e=Object(Yt.a)(l).tournament;l.props.abortTournament(e)},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.tournament;e&&this.props.selectLiveTournament(e)}},{key:"componentDidUpdate",value:function(){var e=this.tournament;e&&this.props.selectLiveTournament(e)}},{key:"render",value:function(){var e=this.props,t=e.location,l=e.user,r=e.selectLiveGame,o=e.usersInfo.byId,i=e.gamesInfo.byId,s=e.tournamentsInfo.byId,c=this.tournament;if(!c)return a.a.createElement(n.Fragment,null,a.a.createElement(Ne.a,{open:!0,size:"mini",onClose:this.dismissUrlTournamentError,header:"Could not find tournament",content:"This tournament cannot be found. Please check that you copied the full URL, or perhaps the tournament was aborted",actions:[{key:"ok",content:"OK",positive:!0}]}),"Could not find tournament");var u=w.a.orderBy(c.userIds.map(function(e){return o[e]}),[function(e){return c.userStats?c.userStats[e.id].points:0},function(e){return c.userStats?c.userStats[e.id].initialScore.score:0},"id"],["desc","desc","desc"]),m=!!l&&c.userIds.includes(l.id),y=!!l&&c.creatorUserId===l.id;return a.a.createElement(n.Fragment,null,a.a.createElement(Ie.a,{centered:!0},a.a.createElement(Ie.a.Row,null,a.a.createElement(R.a,{stackable:!0,size:"massive",inverted:!0,items:[{key:"close",content:"Close",icon:"x",onClick:this.close,color:"red",active:!0},{key:"share",content:"Share Tournament",icon:"share",onClick:this.shareTournament,as:C.b,to:t.pathname,color:"green",active:!0,title:navigator.share?"Click to open the sharing menu":"Click to copy URL to tournament"}]}))),a.a.createElement(p.a,null,a.a.createElement(Le.a.Group,{widths:"three",size:"tiny"},a.a.createElement(Le.a,{value:c.started?c.finished?"Finished":"".concat(c.round,"/").concat(c.rounds):"Waiting",label:c.started?c.finished?"Status":"Rounds":"Status"}),a.a.createElement(Le.a,{value:c.userIds.length,label:"Users"}),a.a.createElement(Le.a,{value:c.gameCount,label:"Games between each pair"})),a.a.createElement(Ie.a,{columns:"equal"},a.a.createElement(Ie.a.Column,{textAlign:"left"},a.a.createElement(Ye.a,{negative:!0,onClick:this.close},"Close")),a.a.createElement(Ie.a.Column,null,a.a.createElement(Ye.a,{positive:!0,icon:!0,onClick:this.shareTournament,style:{width:"100%"},as:C.b,to:t.pathname,title:navigator.share?"Click to open the sharing menu":"Click to copy URL to tournament"},a.a.createElement(nt.a,{name:"share"})," Share Tournament")))),c.started?null:a.a.createElement(p.a,null,a.a.createElement(Ie.a,{columns:"equal"},a.a.createElement(Ie.a.Column,{textAlign:"left"},a.a.createElement(Ye.a,{disabled:c.started,style:{width:"100%"},color:m?"yellow":"green",onClick:this.toggleParticipation},c.started?null:a.a.createElement(nt.a,{name:m?"hourglass":"play"}),m?"Participating":c.started?c.finished?"Tournament finished":"Tournament started":"Join the tournament")),a.a.createElement(Ie.a.Column,null,a.a.createElement(Ye.a,{disabled:!y||u.length<2||c.started,positive:!0,icon:!0,onClick:this.startTournament,style:{width:"100%"},color:u.length>=2&&y?"green":"yellow"},c.finished?null:a.a.createElement(nt.a,{name:u.length>=2?y?"play":"hourglass":"play"}),c.started?c.finished?"Finished":"Started":u.length>=2?y?"Start tournament":"Waiting for tournament to start":"Needs at least participants")))),a.a.createElement(p.a,null,c.started?a.a.createElement(d.a,{menu:{pointing:!0,attached:!1},panes:[{menuItem:"Rankings",render:function(){return a.a.createElement(Ut.a,{celled:!0,collapsing:!0,unstackable:!0},a.a.createElement(Ut.a.Header,null,a.a.createElement(Ut.a.Row,null,c.finished?a.a.createElement(Ut.a.HeaderCell,null," "):null,a.a.createElement(Ut.a.HeaderCell,null,"Rank"),a.a.createElement(Ut.a.HeaderCell,null,"User"),a.a.createElement(Ut.a.HeaderCell,null,"Score (TB)"),a.a.createElement(Ut.a.HeaderCell,null,"Expected Score"),c.started&&!c.finished?a.a.createElement(Ut.a.HeaderCell,null,"Game"):null,c.finished?a.a.createElement(Ut.a.HeaderCell,null,"Score difference"):null)),a.a.createElement(Ut.a.Body,null,u.map(function(e){var t=c.userStats[e.id];return a.a.createElement(Ut.a.Row,{key:e.id},c.finished?a.a.createElement(Ut.a.Cell,null,t.rank<=3?a.a.createElement(nt.a,{name:{1:"trophy",2:"certificate",3:"certificate"}[t.rank],color:{1:"yellow",2:"grey",3:"brown"}[t.rank]}):null):null,a.a.createElement(Ut.a.Cell,null,t.rank),a.a.createElement(Ut.a.Cell,null,a.a.createElement(st,{floated:"left",size:"mini",hash:e.id}),e.name),a.a.createElement(Ut.a.Cell,null,t.points===t.ratedPoints?t.points:"".concat(t.ratedPoints," (").concat(t.points,")")),a.a.createElement(Ut.a.Cell,null,t.initialScore.expectedPoints.toFixed(1)),c.started&&!c.finished?a.a.createElement(Ut.a.Cell,null,t.waitingForNextRound?"Waiting for next round":t.currentGameId?a.a.createElement(mt,{user:null,usersById:o,tournamentsById:s,game:i[t.currentGameId],selectLiveGame:r,terse:!0,live:!0}):"Finished"):null,c.finished?a.a.createElement(Ut.a.Cell,null,t.scoreDifference>0?"+".concat(t.scoreDifference):t.scoreDifference):null)})))}},{menuItem:"Games",render:function(){return a.a.createElement(Ut.a,{celled:!0,collapsing:!0,unstackable:!0},a.a.createElement(Ut.a.Header,null,a.a.createElement(Ut.a.Row,null,a.a.createElement(Ut.a.HeaderCell,{colSpan:2},"White"),a.a.createElement(Ut.a.HeaderCell,{colSpan:2},"Black"),a.a.createElement(Ut.a.HeaderCell,null,"Game"))),c.schedule.map(function(e,t){return a.a.createElement(n.Fragment,{key:t},a.a.createElement(Ut.a.Header,null,a.a.createElement(Ut.a.Row,null,a.a.createElement(Ut.a.HeaderCell,{colSpan:5},"playoff"===e.type?"Playoffs - ":null,"Round ",e.round))),a.a.createElement(Ut.a.Body,null,e.pairings.map(function(e,t){var l=Object(O.a)(e.userIds,2),c=l[0],u=l[1],m=e.gameId,y=i[m],p=y&&y.finished&&y.winnerUserId===c,v=y&&y.finished&&y.winnerUserId===u;return a.a.createElement(Ut.a.Row,{key:t},a.a.createElement(Ut.a.Cell,{className:G()("tournament-game","player-a",{"player-a-won":p,"player-b-won":v})},c?a.a.createElement(n.Fragment,null,a.a.createElement(st,{floated:"left",size:"mini",hash:c}),o[c].name):"Sitting out this round"),a.a.createElement(Ut.a.Cell,{className:G()("tournament-game","player-a",{"player-a-won":p,"player-b-won":v})},y&&y.finished?y.winnerUserId===c?"1":"0":"-"),a.a.createElement(Ut.a.Cell,{className:G()("tournament-game","player-b",{"player-a-won":p,"player-b-won":v})},u?a.a.createElement(n.Fragment,null,a.a.createElement(st,{floated:"left",size:"mini",hash:u}),o[u].name):"Sitting out this round"),a.a.createElement(Ut.a.Cell,{className:G()("tournament-game","player-b",{"player-a-won":p,"player-b-won":v})},y&&y.finished?y.winnerUserId===u?"1":"0":"-"),a.a.createElement(Ut.a.Cell,null,c&&u?y?a.a.createElement(mt,{user:null,usersById:o,tournamentsById:s,game:y,selectLiveGame:r,terse:!0,live:!0}):"Not started yet":null))})))}))}}]}):a.a.createElement(Ut.a,{celled:!0,collapsing:!0,unstackable:!0},a.a.createElement(Ut.a.Header,null,a.a.createElement(Ut.a.Row,null,a.a.createElement(Ut.a.HeaderCell,null,"User"),a.a.createElement(Ut.a.HeaderCell,null,"Rating"))),a.a.createElement(Ut.a.Body,null,u.map(function(e){return a.a.createElement(Ut.a.Row,{key:e.id},a.a.createElement(Ut.a.Cell,null,a.a.createElement(st,{floated:"left",size:"mini",hash:e.id}),e.name),a.a.createElement(Ut.a.Cell,null,e.score))})))),y&&!c.started?a.a.createElement(p.a,null,a.a.createElement(Ie.a,{columns:"equal"},a.a.createElement(Ie.a.Column,{textAlign:"left"}),a.a.createElement(Ie.a.Column,null,a.a.createElement(Ne.a,{size:"mini",trigger:a.a.createElement(Ye.a,{disabled:!y,negative:!0,icon:!0,style:{width:"100%"}},a.a.createElement(nt.a,{name:"stop"}),"Abort tournament"),header:"Abort tournament",content:"Are you sure you want to abort the tournament?",actions:[{key:"yes",content:"Abort",onClick:this.abortTournament,negative:!0},{key:"no",content:"No, keep tournament",secondary:!0}]})))):null)}},{key:"tournament",get:function(){return this.tournamentSelector(this.props)}}]),t}(n.Component));Wt=Object(A.g)(et(Wt));var Ft=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectLiveGame,l=e.selectLiveTournament,r=e.toggleParticipation,o=e.startTournament,i=e.abortTournament,s=e.tournament,c=e.user,u=e.usersInfo.byId,m=e.tournamentsInfo;return Object.values(u).length?a.a.createElement(A.d,null,a.a.createElement(A.b,{exact:!0,path:this.props.match.path},a.a.createElement(p.a,null,a.a.createElement(ht,null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(d.a,{menu:{pointing:!0},panes:[{key:"my-live",label:"My Future & Running tournaments",items:m.myFutureAndLive,color:"green"},{key:"other-live",label:"Other Future and Running tournaments",items:m.otherFutureAndLive,color:"green"},{key:"my-past",label:"My Past tournaments",items:m.myFinished},{key:"other-past",label:"Other Past tournaments",items:m.otherFinished}].filter(function(e){return e.items.length}).map(function(e){var t=e.key,r=e.label,o=e.items,i=e.color;return{menuItem:{key:t,content:a.a.createElement(n.Fragment,null,r," ",a.a.createElement(We.a,{content:o.length,color:i}))},render:function(){return a.a.createElement(Et,{user:c,usersById:u,tournaments:o,selectLiveTournament:l})}}})}))),a.a.createElement(A.b,{path:"".concat(this.props.match.path,"/:id")},a.a.createElement(Wt,{tournament:s,selectLiveGame:t,selectLiveTournament:l,toggleParticipation:r,startTournament:o,abortTournament:i}))):null}}]),t}(n.Component),Gt=Object(A.g)(et(Ft)),Bt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={rowsAndColumns:l.props.rowsAndColumns,arrows:null,selectedMoveCell:null,movedFromCell:null,selectedBuildCell:null,won:!1},l.isCellAvailable=function(e){var t=l.props,n=t.canMove,a=t.canBuild;if(!n&&!a)return!1;var r=l.state,o=r.selectedMoveCell,i=r.selectedBuildCell;return!r.won&&(n&&!a?l.isCellAvailableForMoving(e,o):a&&!n?l.isCellAvailableForBuilding(e,i):n&&a?o||i?o?l.isCellAvailableForMoving(e,o):!!i&&l.isCellAvailableForBuilding(e,i):l.isCellAvailableForMoving(e,o):void 0)},l.makeMove=function(e){var t=l.state,n=t.selectedMoveCell,a=t.selectedBuildCell;if(!t.won){var r=l.props,o=r.canMove,i=r.canBuild;o&&!i?l.makeMoveMoving(e,n):i&&!o?l.makeMoveBuilding(e,a):o&&i&&(n||a?n?(l.makeMoveMoving(e,n),3!==e.level&&(l.setState({movedFromCell:n}),l.makeMoveBuilding(e,a))):a&&(l.makeMoveBuilding(e,a),l.setState({movedFromCell:null})):l.makeMoveMoving(e,n))}},l.isCellUndoable=function(e){if(!l.props.canMove&&!l.props.canBuild)return!1;var t=l.state,n=t.selectedMoveCell,a=t.selectedBuildCell;if(t.won)return!1;var r=l.props,o=r.canMove,i=r.canBuild;return o&&!i?null!==n&&n.x===e.x&&n.y===e.y:i&&!o?null!==a&&a.x===e.x&&a.y===e.y:o&&i?n?n.x===e.x&&n.y===e.y:!!a&&(a.x===e.x&&a.y===e.y):void 0},l.undo=function(){var e=l.props,t=e.canMove,n=e.canBuild,a=l.state,r=a.selectedMoveCell,o=a.movedFromCell,i=a.selectedBuildCell;a.won||(t&&!n?l.setState({selectedMoveCell:null}):n&&!t?l.setState({selectedBuildCell:null}):t&&n&&(r?l.setState({selectedMoveCell:null}):i&&l.makeMoveUndoMoving(o,i)))},l.reset=function(){var e=l.props.rowsAndColumns;l.setState({rowsAndColumns:e,arrows:null,won:!1,selectedMoveCell:null,movedFromCell:null,selectedBuildCell:null})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,l){e.rowsAndColumns!==this.props.rowsAndColumns&&this.reset()}},{key:"isCellAvailableForMoving",value:function(e,t){return t?3!==t.level&&(1===Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))&&(!(e.level-t.level>1)&&!e.player)):e.player===U.PLAYER_A}},{key:"isCellAvailableForBuilding",value:function(e,t){return t?1===Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))&&(!(e.level>3)&&!e.player):e.player===U.PLAYER_A}},{key:"makeMoveMoving",value:function(e,t){t?this.setState(function(l){var n=l.rowsAndColumns;return{selectedMoveCell:null,rowsAndColumns:U.updateCells.apply(U,[n].concat([{x:t.x,y:t.y,player:null,worker:null},{x:e.x,y:e.y,player:t.player,worker:t.worker}])),arrows:[{from:t,to:e,type:"move",colour:"white"}],won:3===e.level}}):this.setState({selectedMoveCell:e})}},{key:"makeMoveUndoMoving",value:function(e,t){this.setState(function(l){var n=l.rowsAndColumns;return{selectedMoveCell:e,selectedBuildCell:null,rowsAndColumns:U.updateCells.apply(U,[n].concat([{x:t.x,y:t.y,player:null,worker:null},{x:e.x,y:e.y,player:e.player,worker:e.worker}])),arrows:null,won:!1}})}},{key:"makeMoveBuilding",value:function(e,t){t?this.setState(function(l){var n=l.rowsAndColumns;return{selectedBuildCell:null,rowsAndColumns:U.updateCells(n,{x:e.x,y:e.y,level:n[e.y].cells[e.x].level+1}),arrows:[{from:t,to:e,type:"build",colour:"white"}]}}):this.setState({selectedBuildCell:e})}},{key:"render",value:function(){var e=this.props,t=e.user,l=e.board,r=e.canMove,o=e.canBuild,i=e.rowsAndColumns,s=this.state,c=s.rowsAndColumns,u=s.arrows,m=s.won,y=s.selectedMoveCell,p=s.selectedBuildCell,v=t?t.settings:b.getDefaultSettings(),h=Object(x.a)({},v,{theme:Object(x.a)({},v.theme,{numbers:"obvious"})});return a.a.createElement(n.Fragment,null,r||o?a.a.createElement(n.Fragment,null,a.a.createElement("br",null),a.a.createElement(We.a,{color:m?"green":"blue",icon:m?"trophy":void 0,content:m?"You won! Press reset to start again":y||p?y?"Select a square to move to, or click on your piece to do something else":"Select a square to build on, or click on your piece to do something else":"Select one of your pieces"}),a.a.createElement("br",null)):null,a.a.createElement(Ce,Object.assign({medium:!0,allowControl:[],clickable:r||o,undoable:r||o,isCellAvailable:this.isCellAvailable,isCellUndoable:this.isCellUndoable,makeMove:this.makeMove,undo:this.undo,settings:h,animated:!0,showArrows:!0,rowsAndColumns:c},u?Object(x.a)({},l,{arrows:u}):l)),r||o?a.a.createElement("div",null,a.a.createElement(Ye.a,{onClick:this.reset,disabled:c===i,primary:!0},"Reset")):null)}}]),t}(n.Component);Bt.defaultProps={canMove:!1,canBuild:!1},Bt=et(Bt);var Dt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={stepIndex:0},l.goToFirstStep=function(){l.setState({stepIndex:0})},l.goToPreviousStep=function(){l.setState(function(e){return{stepIndex:e.stepIndex-1}})},l.goToNextStep=function(){l.setState(function(e){return{stepIndex:e.stepIndex+1}})},l.goToLastStep=function(){l.setState({stepIndex:l.constructor.steps.length-1})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.stepIndex,t=this.constructor.steps,l=t[e];return a.a.createElement(h.a,null,a.a.createElement(h.a.Content,null,a.a.createElement(Ie.a,{columns:"equal",verticalAlign:"middle",textAlign:"center"},a.a.createElement(Ie.a.Row,null,a.a.createElement(R.a,{size:"massive",items:[{key:"first",icon:"fast backward",onClick:this.goToFirstStep,disabled:0===e},{key:"previous",icon:"backward",onClick:this.goToPreviousStep,disabled:0===e},{key:"next",icon:"forward",onClick:this.goToNextStep,disabled:e===t.length-1},{key:"last",icon:"fast forward",onClick:this.goToLastStep,disabled:e===t.length-1}]})),a.a.createElement(Ie.a.Row,null,a.a.createElement(h.a.Header,null,e+1,".  ",l.title)),a.a.createElement(Ie.a.Row,null,a.a.createElement(h.a,{content:a.a.createElement(n.Fragment,{key:e},l.body)})),a.a.createElement(Ie.a.Row,null,e<t.length-1?a.a.createElement(Ye.a,{primary:!0,onClick:this.goToNextStep,icon:"forward",content:"Go to next step"}):a.a.createElement(n.Fragment,null,a.a.createElement(Ye.a,{positive:!0,as:C.b,to:"/lobby",icon:"play",content:"Play with someone online"}),a.a.createElement(Ye.a,{positive:!0,as:C.b,to:"/hotseat",icon:"retweet",content:"Play with a friend on the same screen"}))))))}}]),t}(n.Component);Dt.steps=[{title:"Introduction",body:a.a.createElement(n.Fragment,null,a.a.createElement("div",null,"In this website, you can play ",a.a.createElement("strong",null,"Santorini\xa9")," games with people around the world."),a.a.createElement("div",null,"The board consists of a ",a.a.createElement("strong",null,"5x5 square grid"),", and each player, ",a.a.createElement("strong",null,"black")," and",a.a.createElement("strong",null,"white"),", has two ",a.a.createElement("strong",null,"pieces")," each:"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:2,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST},{x:2,y:2,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement("div",null,"The ",a.a.createElement("strong",null,"objective")," of the game is to move one of your pieces to the ",a.a.createElement("strong",null,"3rd level"),", and of course, to ",a.a.createElement("strong",null,"prevent your opponent")," from doing so before you:"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:1,y:0,level:1,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:3,player:null,worker:null},{x:1,y:1,level:2,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:0},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:0},to:{x:1,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:U.PLAYER_A,worker:U.WORKER_FIRST}]},{y:1,cells:[{x:0,y:1,level:3,player:null,worker:null},{x:1,y:1,level:2,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:0},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:0},to:{x:1,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:3,player:null,worker:null},{x:1,y:1,level:2,player:U.PLAYER_A,worker:U.WORKER_FIRST}]}],board:{arrows:[{from:{x:0,y:0},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:0},to:{x:1,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:3,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:1,y:1,level:2,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:0},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:0},to:{x:1,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}))},{title:"Moving",body:a.a.createElement(n.Fragment,null,a.a.createElement("div",null,"You can ",a.a.createElement("strong",null,"move 1 square")," in any direction, ",a.a.createElement("strong",null,"horizontally"),",",a.a.createElement("strong",null,"vertically"),", or ",a.a.createElement("strong",null,"diagonally"),"."),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:2},type:"move",colour:"white"}]}}),a.a.createElement("div",null,"But you ",a.a.createElement("strong",null,"can't move in a square that has another piece"),", your's or the opponent's:"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST}]},{y:1,cells:[{x:0,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:2},type:"move",colour:"white"}]}}),a.a.createElement("div",null,"Beneath, you can ",a.a.createElement("strong",null,"try moving your pieces"),". Notice that you need to ",a.a.createElement("strong",null,"click on a piece to select it"),", and then ",a.a.createElement("strong",null,"click on the target square")," to move it. To ",a.a.createElement("strong",null,"deselect")," a selected piece ",a.a.createElement("strong",null,"click on it again"),":"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST}]},{y:1,cells:[{x:0,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND},{x:2,y:2,level:0,player:null,worker:null}]}],canMove:!0}))},{title:"Levels",body:a.a.createElement(n.Fragment,null,a.a.createElement("div",null,"In the game there are ",a.a.createElement("strong",null,"five levels"),": ",a.a.createElement(We.a,{color:"green"},"ground"),",",a.a.createElement(We.a,{color:"grey"},"level 1"),", ",a.a.createElement(We.a,{color:"yellow"},"level 2"),",",a.a.createElement(We.a,{color:"red"},"level 3"),", and the ",a.a.createElement(We.a,{color:"blue"},"blocked level (level 4)"),":"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null},{x:2,y:0,level:2,player:null,worker:null},{x:3,y:0,level:3,player:null,worker:null},{x:4,y:0,level:4,player:null,worker:null}]}]}),a.a.createElement("div",null,"You can go ",a.a.createElement("strong",null,"up one level"),", go ",a.a.createElement("strong",null,"down any number of levels"),", and ",a.a.createElement("strong",null,"move to the same level"),". You can ",a.a.createElement("strong",null,"never move to a blocked level"),":"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:2,player:null,worker:null},{x:2,y:0,level:3,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:1,player:null,worker:null},{x:1,y:2,level:1,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"move",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:2,player:null,worker:null},{x:2,y:0,level:3,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:1,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:1,player:null,worker:null},{x:1,y:2,level:1,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"move",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:2,player:null,worker:null},{x:2,y:0,level:3,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:2,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:1,player:null,worker:null},{x:1,y:2,level:1,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"move",colour:"white"}]}}),a.a.createElement("div",null,"Try it yourself below:"),a.a.createElement(Bt,{canMove:!0,rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:2,player:null,worker:null},{x:2,y:0,level:3,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:1,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:1,player:null,worker:null},{x:1,y:2,level:1,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}]}))},{title:"Building",body:a.a.createElement(n.Fragment,null,a.a.createElement("div",null,"After you've moved one of your pieces, you ",a.a.createElement("strong",null,"must build on 1 nearby square"),", horizontally, vertically, or diagonally:"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:2,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:2,y:2},type:"build",colour:"white"}]}}),a.a.createElement("div",null,"You can ",a.a.createElement("strong",null,"build at any square")," next to the piece you moved: it ",a.a.createElement("strong",null,"doesn't matter which level your are"),", and which level you want to build. But you can never build more than the blocked level:"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null},{x:2,y:0,level:2,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:null,worker:null},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:3,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:2,player:null,worker:null},{x:1,y:2,level:3,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:2,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"build",colour:"white"}]}}),a.a.createElement("div",null,"Try it yourself below, by selecting your player and then building:"),a.a.createElement(Bt,{canBuild:!0,rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null},{x:2,y:0,level:2,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:null,worker:null},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:3,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:2,player:null,worker:null},{x:1,y:2,level:3,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}]}))},{title:"Winning",body:a.a.createElement(n.Fragment,null,a.a.createElement("div",null,"If there was no opponent on the board (you wish!), you would do something like the following moves ",a.a.createElement("strong",null,"to win"),":"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}]}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:1,player:null,worker:null},{x:2,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:2,y:1},to:{x:1,y:1},type:"build",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:1,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:2,y:1},to:{x:1,y:1},type:"move",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:null,worker:null},{x:1,y:1,level:1,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:1},type:"build",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:1,y:1,level:1,player:null,worker:null},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}),a.a.createElement("br",null),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:1,y:1,level:2,player:null,worker:null},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:1},to:{x:1,y:1},type:"build",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:null,worker:null},{x:1,y:1,level:2,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:1},to:{x:1,y:1},type:"move",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:2,player:null,worker:null},{x:1,y:1,level:2,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:1},type:"build",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:2,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:1,y:1,level:2,player:null,worker:null},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:2,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:1,y:1,level:3,player:null,worker:null},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:1},to:{x:1,y:1},type:"build",colour:"white"}]}}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:2,player:null,worker:null},{x:1,y:1,level:3,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:1},to:{x:1,y:1},type:"move",colour:"white"}]}}),a.a.createElement("div",null,"Why don't you try this below?"),a.a.createElement(Bt,{canMove:!0,canBuild:!0,rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}]}))},{title:"Good starting positions",body:a.a.createElement(n.Fragment,null,a.a.createElement("div",null,"To start the game, the first player puts their pieces anywhere on the board, and then second player does the same. Here are some good examples:"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST},{x:2,y:2,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:3,y:2,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:3,y:1,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST},{x:2,y:2,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST},{x:2,y:2,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:3,y:2,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}))},{title:"Disadvantaged starting positions",body:a.a.createElement(n.Fragment,null,a.a.createElement("div",null,"In these starting positions the both players have their pieces near the center, and they can move easily to any square on the board. In contrast, these starting positions would probably put the black players at a disadvantage, since his pieces are too far away from the opponent's:"),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST},{x:1,y:0,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST},{x:1,y:0,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(Bt,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:U.PLAYER_A,worker:U.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:U.PLAYER_B,worker:U.WORKER_SECOND}]}]}))},{title:"You're ready to play!",body:a.a.createElement(n.Fragment,null,a.a.createElement("div",null,"You're now ready to play! You can now ",a.a.createElement(C.b,{to:"./hotseat"},"play with a friend on the same screen")," or play online ",a.a.createElement(C.b,{to:"./lobby"},"at the lobby"),"."))}];var Kt=Dt,Vt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state=Object(x.a)({paletteSelectedItem:{x:0,y:1},paletteUpdate:{player:U.PLAYER_A,worker:U.WORKER_FIRST},position:U.getInitialRowsAndColumns(),positionError:null,urlError:!1},l.constructor.getGameAndErrorFromUrlPosition(),{selectedGame:null,previousPosition:null}),l.dismissUrlPositionError=function(){l.setState({error:null})},l.onPaletteSelectedItemChange=function(e,t){l.setState({paletteSelectedItem:e,paletteUpdate:t})},l.onPositionChange=function(e){var t,n;try{t=U.fromRowsAndColumns(e),n=null}catch(a){t=U.create(),n=a.message}l.setState(function(l){return{position:e,game:t,positionError:n,previousPosition:l.position}})},l.makeMove=function(e){l.setState({game:e})},l.onSelectedGameChange=function(e){l.setState({selectedGame:e})},l.copyGame=function(){var e=l.state,t=e.game,n=e.selectedGame||t;l.onPositionChange(n.rowsAndColumns)},l.resetBoard=function(){l.onPositionChange(U.getInitialRowsAndColumns())},l.undo=function(){l.onPositionChange(l.state.previousPosition)},l.copyPosition=function(){Qe(U.getPositionNotation(l.state.position)),alert("Position copied to clipboard")},l.copyPlayPosition=function(){Qe((l.state.selectedGame||l.state.game).positionNotation),alert("Play position copied to clipboard")},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,l=e.client,r=e.keydown,o=this.state,i=o.paletteSelectedItem,s=o.position,c=o.paletteUpdate,u=o.positionError,m=o.urlError,y=o.game,v=o.selectedGame,d=o.previousPosition,f=t?t.settings:l.settings,E=U.getPositionNotation(s);return a.a.createElement(n.Fragment,null,a.a.createElement(Ne.a,{open:!!m,size:"mini",onClose:this.dismissUrlPositionError,header:"Could not load shared position",content:"".concat(m,". Please check that you copied the full URL"),actions:[{key:"ok",content:"OK",positive:!0}]}),a.a.createElement(Ie.a,{centered:!0},a.a.createElement(Ie.a.Row,null,a.a.createElement(R.a,{inverted:!0,size:"massive",items:[{key:"share",icon:"share",content:"Share position",color:"green",active:!0,as:"a",href:"?position=".concat(E),title:navigator.share?"Click to open the sharing menu":"Click to copy URL to position"},{key:"copy",icon:"clipboard",content:"Copy position",color:"green",active:!0,title:"Click to copy position to position",onClick:this.copyPosition},{key:"copy-play",icon:"clipboard",content:"Copy play position",color:"green",active:!0,title:"Click to copy play position to position",onClick:this.copyPlayPosition}]}))),a.a.createElement(p.a,null,u?a.a.createElement(h.a,{error:!0,content:u}):null,a.a.createElement($e,{user:t,settings:f,defaultSettings:l.settings,game:y,makeMove:this.makeMove,onSelectedGameChange:this.onSelectedGameChange},a.a.createElement(zt,{selectedItem:i,onSelectedItemChange:this.onPaletteSelectedItemChange,keydown:r}),a.a.createElement("div",null,a.a.createElement(Ye.a,{content:"Copy from game",primary:!0,disabled:(v||y).positionNotation===E,onClick:this.copyGame}),a.a.createElement(Ye.a,{content:"Reset",negative:!0,disabled:E===this.constructor.initialPositionNotation,onClick:this.resetBoard}),a.a.createElement(Ye.a,{content:"Undo",secondary:!0,disabled:!d,onClick:this.undo})),a.a.createElement(Ht,{position:s,update:c,onPositionChange:this.onPositionChange}))))}}],[{key:"getGameAndErrorFromUrlPosition",value:function(){var e=new URLSearchParams(window.location.search).get("position");if(e){var t,l;try{(t=U.fromCompressedPositionNotation(e))||(l="The position was not valid")}catch(n){t=null,l="The board position was not valid: ".concat(n.message)}return t?{game:t,urlError:!1,position:t.rowsAndColumns}:{game:U.create(),urlError:l,position:U.getInitialRowsAndColumns()}}return{game:U.create(),urlError:!1,position:U.getInitialRowsAndColumns()}}}]),t}(n.Component);Vt.initialPositionNotation=U.getPositionNotation(U.getInitialRowsAndColumns());var zt=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={selectedItem:{x:0,y:1}},l.isCellAvailable=function(e){return!l.isCellUndoable(e)&&(0===e.y||e.x<=1)},l.isCellUndoable=function(e){var t=Object(Yt.a)(l).selectedItem;return e.x===t.x&&e.y===t.y},l.makeMove=function(e){var t={x:e.x,y:e.y};if(void 0===l.props.selectedItem&&l.setState({selectedItem:t}),l.props.onSelectedItemChange){var n=e.player?{player:e.player}:{level:e.level};l.props.onSelectedItemChange(t,n)}},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.keydown;if(t.event){var l=t.event.key,n=this.constructor.moveFromKey[l];if(n){var a=n.x,r=n.y,o=this.constructor.rowsAndColumns[r].cells[a];this.makeMove(o)}}}},{key:"componentDidUpdate",value:function(e,t,l){void 0!==e.selectedItem&&void 0===this.props.selectedItem&&this.setState({selectedItem:e.selectedItem})}},{key:"render",value:function(){var e=this.props,t=e.user,l=e.client,n=t?t.settings:l.settings;return a.a.createElement(Ce,{medium:!0,allowControl:[U.PLAYER_A,U.PLAYER_B],rowsAndColumns:this.constructor.rowsAndColumns,clickable:!0,undoable:!1,isCellAvailable:this.isCellAvailable,isCellUndoable:this.isCellUndoable,makeMove:this.makeMove,settings:n,animated:!1,showArrows:!1})}},{key:"selectedItem",get:function(){return void 0===this.props.selectedItem?this.state.selectedItem:this.props.selectedItem}}]),t}(n.Component);zt.rowsAndColumns=[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null},{x:2,y:0,level:2,player:null,worker:null},{x:3,y:0,level:3,player:null,worker:null},{x:4,y:0,level:4,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:U.PLAYER_A,worker:U.WORKER_FIRST},{x:1,y:1,level:0,player:U.PLAYER_B,worker:U.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]}],zt.keys=["q","0","1","2","3","4","a","b"],zt.moveFromKey={q:{x:0,y:0},0:{x:0,y:0},1:{x:1,y:0},2:{x:2,y:0},3:{x:3,y:0},4:{x:4,y:0},a:{x:0,y:1},b:{x:1,y:1}},zt=et(zt);var Ht=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={position:U.getInitialRowsAndColumns()},l.isCellAvailable=function(){return!0},l.isCellUndoable=function(){return!1},l.makeMove=function(e){var t=l.props.update;"level"in t?e.level!==t.level&&l.updatePosition({x:e.x,y:e.y,level:t.level}):"player"in t&&(e.player!==t.player?l.updatePosition({x:e.x,y:e.y,player:t.player,worker:U.WORKER_FIRST}):l.updatePosition({x:e.x,y:e.y,player:null,worker:null}))},l.updatePosition=function(e){var t=U.updateCells(l.position,e);void 0===l.props.position&&l.setState({position:t}),l.props.onPositionChange&&l.props.onPositionChange(t)},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,l){void 0!==e.position&&void 0===this.props.position&&this.setState({position:e.position})}},{key:"render",value:function(){var e=this.position,t=this.props,l=t.user,n=t.client,r=l?l.settings:n.settings;return a.a.createElement(Ce,{medium:!0,allowControl:[U.PLAYER_A,U.PLAYER_B],rowsAndColumns:e,clickable:!0,undoable:!1,isCellAvailable:this.isCellAvailable,isCellUndoable:this.isCellUndoable,makeMove:this.makeMove,settings:r,animated:!1,showArrows:!1})}},{key:"position",get:function(){return void 0===this.props.position?this.state.position:this.props.position}}]),t}(n.Component);Ht=et(Ht);var qt=Object(Ge.b)(zt.SubComponent.keys)(et(Vt)),Jt=(l(457),function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={challenge:l.constructor.challenges[0],challengePlayerResponses:l.constructor.challenges[0].playerResponses,game:U.fromCompressedPositionNotation(l.constructor.challenges[0].position),wrongMove:!1,won:!1},l.submit=function(e,t){var n=l.state,a=n.challengePlayerResponses;if(!n.won){var r=a.find(function(e){return e.playerMoves.includes(t.positionNotation)});if(!r)return console.log(w.a.flatten(a.map(function(e){return e.playerMoves})),t.positionNotation),void l.setState({wrongMove:!0});var o=r.response?t.makeMoves(r.response):t;l.setState({game:o,challengePlayerResponses:r.playerResponses||null,wrongMove:!1,won:!r.response})}},l.onDisplayPositionChange=function(){l.state.wrongMove&&l.setState({wrongMove:!1})},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getDifficultyStars",value:function(e,t){return w.a.range(t).map(function(t){return a.a.createElement(nt.a,{key:t,name:e>t?"star":"star outline",color:"yellow"})})}},{key:"render",value:function(){var e,t=this.state,l=t.challenge,r=t.game,o=t.wrongMove,i=t.won,s=this.props,c=s.user,u=s.client;return a.a.createElement(n.Fragment,null,a.a.createElement(Ie.a,{centered:!0},a.a.createElement(Ie.a.Row,null,a.a.createElement(p.a,null,a.a.createElement(v.a,{as:"h1"},"mate"===l.type?"Find mate in ".concat(l.options.mateIn):"Unknown challenge"),a.a.createElement(v.a,{as:"h4",className:"difficulty-header"},this.getDifficultyStars(l.meta.difficulty,l.meta.maxDifficulty)),a.a.createElement(v.a,{as:"h4"},l.meta.source))),o||i?a.a.createElement(Ie.a.Row,null,o?a.a.createElement(h.a,{error:!0,icon:"warning",content:"That's not the right answer"}):null,i?a.a.createElement(h.a,{success:!0,icon:"check",content:"Correct! You solved it!"}):null):null),a.a.createElement($e,{user:c,defaultSettings:u.settings,changeSettings:this.changeSettings,game:r,matchGame:r,allowControl:[l.player],names:(e={},Object(T.a)(e,l.player,"You"),Object(T.a)(e,U.OTHER_PLAYER[l.player],"Challenge"),e),submit:this.submit,onDisplayPositionChange:this.onDisplayPositionChange},o?a.a.createElement(h.a,{error:!0,icon:"warning",content:"That's not the right answer"}):null,i?a.a.createElement(h.a,{success:!0,icon:"check",content:"Correct! You solved it!"}):null))}}]),t}(n.Component));Jt.challenges=[{position:"AABMAAAJAIAAEFMAJADMADAAD",player:U.PLAYER_B,type:"mate",options:{mateIn:5},meta:{source:"From the first tournament on Thyra Online, Tommy vs Costas",difficulty:4,maxDifficulty:5},playerResponses:[{playerMoves:["AABMDAAJCGAAEFMAJADMADAAD"],response:[{x:2,y:0},{x:1,y:1},{x:1,y:2}],playerResponses:[{playerMoves:["AAAMGABJCIADEDMAJADMADAAD"],response:[{x:1,y:1},{x:0,y:2},{x:1,y:2}],playerResponses:[{playerMoves:["AAAMGAAMCGBGEFMAJADMADAAD","AAAMGAAMAIBGEFMAJADMADAAD"],response:[{x:2,y:2},{x:1,y:2},{x:1,y:1}],playerResponses:[{playerMoves:["AAAMGADMAIBHFDMAMADMADAAD","AAAMGADMAGBHFFMAMADMADAAD"],response:[{x:0,y:2},{x:0,y:1},{x:1,y:1}],playerResponses:[{playerMoves:["AAAMJBGMAIAHFDMAMADMADAAD"]},{playerMoves:["AAAMJBGMCIAHDDMAMADMADAAD"]},{playerMoves:["AAAMIBGMAJAHFDMAMADMADAAD"]}]}]}]}]}]}];var Xt=et(Jt),$t=function(e){function t(){var e,l;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(l=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={liveGame:null,liveTournament:null},l.selectLiveGame=function(e){var t;(t=e?l.getLiveGameUrl(e):"".concat(l.props.match.url.endsWith("/")?l.props.match.url.slice(0,-1):l.props.match.url,"/lobby"))!==l.props.location.pathname&&l.props.history.push(t),l.state.liveGame!==e&&l.setState({liveGame:e})},l.selectLiveTournament=function(e){var t;(t=e?l.getLiveTournamentUrl(e):"".concat(l.props.match.url.endsWith("/")?l.props.match.url.slice(0,-1):l.props.match.url,"/lobby"))!==l.props.location.pathname&&l.props.history.push(t),l.state.liveTournament!==e&&l.setState({liveTournament:e})},l.toggleParticipation=function(e){var t=l.props,n=t.user,a=t.client;e.userIds.includes(n.id)?a.leaveTournament(e):a.joinTournament(e)},l.startTournament=function(e){l.props.client.startTournament(e)},l.abortTournament=function(e){l.props.client.abortTournament(e)},l}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getLiveGameUrl",value:function(e){return"".concat(this.props.match.url.endsWith("/")?this.props.match.url.slice(0,-1):this.props.match.url,"/game/").concat(e.id)}},{key:"getLiveTournamentUrl",value:function(e){return"".concat(this.props.match.url.endsWith("/")?this.props.match.url.slice(0,-1):this.props.match.url,"/tournament/").concat(e.id)}},{key:"componentDidUpdate",value:function(e){this.askForNotificationPermissionOnWaitForGame(e),this.navigateToMyNewGame(e),this.notifyAboutMyMove(e)}},{key:"askForNotificationPermissionOnWaitForGame",value:function(e){var t=this.props.user;t&&(e.user&&e.user.readyToPlay||!t||!t.readyToPlay||!t.settings.enableNotifications||Nt.notifications.requestPermission())}},{key:"navigateToMyNewGame",value:function(e){var t=this.props.user;if(t&&e.gamesInfo.myLive!==this.props.gamesInfo.myLive&&(!this.state.liveGame||this.state.liveGame.finished)){var l=new Set(e.gamesInfo.myLive.map(function(e){return e.id})),n=this.props.gamesInfo.myLive.map(function(e){return e.id}).filter(function(e){return!l.has(e)});if(1===n.length){var a=this.props.gamesInfo.byId[n[0]];if(1===a.move){var r=a.userIds[0]===t.id?a.userIds[1]:a.userIds[1]===t.id?a.userIds[0]:null,o=this.props.usersInfo.byId[r];Nt.notifications.notify(o?"New game vs ".concat(o.name," started"):"New game started")}1===a.move&&this.selectLiveGame(a)}}}},{key:"notifyAboutMyMove",value:function(e){var t=this,l=this.props.user;if(l&&this.props.gamesInfo.myLive.length){var n=this.props.gamesInfo.myLive.filter(function(e){return e.nextUserId===l.id}).filter(function(t){var n=e.gamesInfo.byId[t.id];return n&&n.nextUserId!==l.id});if(n.length){var a=n.map(function(e){var n=e.userIds[0]===l.id?e.userIds[1]:e.userIds[1]===l.id?e.userIds[0]:null;return t.props.usersInfo.byId[n]}),r=1===a.length?a[0]:null;Nt.notifications.notify(r?"Your turn at game vs ".concat(r.name):"It's your turn to play in ".concat(n.length),{tag:"your-turn",body:"It's your turn to play in ".concat(n.length," games")})}}}},{key:"render",value:function(){var e=this,t=this.state,l=t.liveGame,n=t.liveTournament,r=this.props,o=r.connected,i=r.disconnected,s=r.available,c=r.user,u=r.usersInfo.byId,m=l?u[l.userIds[0]]:null,f=l?u[l.userIds[1]]:null,E=!(!c||!m)&&m.id===c.id,w=!(!c||!f)&&f.id===c.id,g=E||w,b=l&&m&&f?l.finished?"Review ".concat(E?"you":m.name," vs ").concat(w?"you":f.name):g?"Live Play ".concat(E?"you":m.name," vs ").concat(w?"you":f.name):"Spectate ".concat(E?"you":m.name," vs ").concat(w?"you":f.name):"Live Play/Spectate/Review",x=!(!n||!c)&&n.userIds.includes(c.id),O=n?n.finished?"Review tournament ".concat(n.name):x?"Live tournament ".concat(n.name):"Spectate tournament ".concat(n.name):"Tournaments";return a.a.createElement(y.a,null,a.a.createElement(xe.Definitions,null),a.a.createElement(p.a,{textAlign:"center"},a.a.createElement(v.a,{as:"h1"},"Thyra Online"),a.a.createElement(Rt,null),a.a.createElement(bt,{client:k}),a.a.createElement(xt,{client:k})),o?null:i||!s?a.a.createElement(h.a,{negative:!0,header:"Trying to connect ot server...",content:a.a.createElement("p",null,"The server seems to be experiencing problems, or maybe it's a bit slow. It will connect as soon as possible")}):a.a.createElement(h.a,{header:"Connecting to server...",content:a.a.createElement("p",null,"Please sit tight as we're trying to connect to the server")}),a.a.createElement(S,{menu:{pointing:!0,attached:!1,stackable:!0},panes:[k.available?{menuItem:{icon:"users",content:"Lobby"},path:"lobby",render:function(){return a.a.createElement(d.a.Pane,null,a.a.createElement(Ot,{selectLiveGame:e.selectLiveGame,selectLiveTournament:e.selectLiveTournament}))}}:null,k.available?{menuItem:{icon:"play",content:b},path:"game",navigate:l?"game/".concat(l.id):"game",render:function(){return a.a.createElement(d.a.Pane,null,a.a.createElement(St,{game:l,selectLiveGame:e.selectLiveGame}))}}:null,k.available?{menuItem:{icon:"sitemap",content:O},path:"tournament",navigate:n?"tournament/".concat(n.id):"tournament",render:function(){return a.a.createElement(d.a.Pane,null,a.a.createElement(Gt,{tournament:n,selectLiveTournament:e.selectLiveTournament,selectLiveGame:e.selectLiveGame,toggleParticipation:e.toggleParticipation,startTournament:e.startTournament,abortTournament:e.abortTournament}))}}:null,{menuItem:{icon:"retweet",content:"Hotseat"},path:"hotseat",render:function(){return a.a.createElement(d.a.Pane,null,a.a.createElement(tt,null))}},Object({NODE_ENV:"production",PUBLIC_URL:"/thyra-online",REACT_APP_VERSION:"v1.2.3",REACT_APP_SERVER_URL:"https://thyra.basdekis.io",REACT_APP_PAGE_BASE_PATH:"/thyra-online"}).REACT_APP_DEBUG?{menuItem:{icon:"edit",content:"Edit position"},path:"edit-position",render:function(){return a.a.createElement(d.a.Pane,null,a.a.createElement(qt,null))}}:null,Object({NODE_ENV:"production",PUBLIC_URL:"/thyra-online",REACT_APP_VERSION:"v1.2.3",REACT_APP_SERVER_URL:"https://thyra.basdekis.io",REACT_APP_PAGE_BASE_PATH:"/thyra-online"}).REACT_APP_DEBUG?{menuItem:{icon:"shield",content:"Challenges"},path:"challenges",render:function(){return a.a.createElement(d.a.Pane,null,a.a.createElement(Xt,null))}}:null,{menuItem:{icon:"book",content:"Learn To Play"},path:"learn-to-play",render:function(){return a.a.createElement(d.a.Pane,null,a.a.createElement(Kt,null))}}]}),a.a.createElement(v.a,{as:"h6",style:{color:"#dddddd"}},"v1.2.3"))}}]),t}(n.Component),Qt=Object(A.g)(et($t));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(C.a,{basename:"/thyra-online"},a.a.createElement(A.d,null,a.a.createElement(A.b,null,a.a.createElement(Qt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[268,1,2]]]);
//# sourceMappingURL=main.734b6389.chunk.js.map