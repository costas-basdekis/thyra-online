(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{270:function(e,t,n){e.exports=n(458)},275:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},371:function(e,t,n){},380:function(e,t,n){},381:function(e,t,n){},382:function(e,t,n){},383:function(e,t,n){},455:function(e,t,n){},456:function(e,t,n){},458:function(e,t,n){"use strict";n.r(t);var l=n(0),a=n.n(l),r=n(49),o=n.n(r),i=(n(275),n(6)),s=n(7),c=n(10),u=n(8),m=n(9),p=(n(276),n(470)),y=n(167),v=n(478),h=n(95),d=n(476),f=n(479),g=(n(277),n(278),n(32)),b=n(13),E=n(21),w=n.n(E),k=n(34),O=n.n(k),P=function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)},x=[{from:O()("2019-10-28T12:30:00"),until:O()("2019-11-01T00:00:00"),name:"Halloween",override:{theme:{cells:"halloween",pieces:"halloween-ghost",scheme:"halloween"}}}],C=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O()(),t=x.find(function(t){return t.from.isSameOrBefore(e)&&t.until.isSameOrAfter(e)});if(t)return{override:t.override,nextUpdatedDate:t.until,name:t.name};var n=x.find(function(t){return t.from.isSameOrAfter(e)});return n?{override:null,nextUpdatedDate:n.from,name:null}:{override:null,nextUpdatedDate:null,name:null}}(t),l=n.override,a=n.nextUpdatedDate,r=n.name;return e.theme.useTopicalTheme&&l&&(e=w.a.merge({},e,l)),{applicableSettings:e,nextUpdatedDate:a,override:l,name:r}},R=function(e){switch(e.options.type){case"mate":return"Find mate in ".concat(e.options.typeOptions.mateIn);case"avoidMate":return"Avoid mate in ".concat(e.options.typeOptions.mateIn);default:return"Unknown puzzle"}};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}var z=function(){function e(){var t=this;Object(i.a)(this,e),this.scriptIoReloadInterval=null,this.reloadScriptIo=function(){if(!window.io.unavailable)return clearInterval(t.scriptIoReloadInterval),t.scriptIoReloadInterval=null,t.bindSocket(),void console.log("Loaded script.io!");var e=document.getElementById("socket-io-script"),n=document.createElement("script");n.id=e.id,n.type=e.type,n.src=e.src,e.remove(),document.head.append(n),console.warn("Retrying socket.io script download...")},this.reload=function(){window.location.reload(!0)},this.justConnected=function(){t.getUser(),t.connected=!0,t.onConnect.map(function(e){return e(t.connected)})},this.justDisconnected=function(){t.connected=!1,t.disconnected=!0,t.onDisconnect.map(function(e){return e(t.connected)})},this.gotUser=function(e){e&&(t.id=e.id,t.username=e.name,t.token=e.token,t.setSettings(e.settings),localStorage.setItem("user-id",t.id),localStorage.setItem("user-name",t.username),localStorage.setItem("user-token",t.token),localStorage.setItem("user-settings",JSON.stringify(t.settings))),t.user=e,t.onUser.map(function(t){return t(e)}),t.gotUsers(t.usersInfo.users),t.gotPuzzles(t.puzzlesInfo.puzzles)},this.gotUsers=function(e){(e=w.a.orderBy(e,[function(e){return e.isUserRatingProvisional?1:0},"score","maxScore"],["asc","desc","desc"])).forEach(function(e,t){e.rank=t+1}),t.usersInfo=t.prepareUsers(e),t.onUsers.map(function(e){return e(t.usersInfo)})},this.gotGames=function(e){e=w.a.sortBy(e,["startDatetime","id"],["desc","desc"]),t.gamesInfo=t.prepareGames(e),t.onGames.map(function(e){return e(t.gamesInfo)})},this.gotGame=function(e){var n=t.gamesInfo.games.filter(function(t){return t.id!==e.id}).concat([e]);A.gotGames(n)},this.gotDeletedGame=function(e){var n=t.gamesInfo.games.filter(function(t){return t.id!==e});A.gotGames(n)},this.gotOpeningsDatabase=function(e){t.openingsDatabase=e,t.gamesInfo=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t.gamesInfo,{openingsDatabase:t.openingsDatabase}),t.onGames.map(function(e){return e(t.gamesInfo)})},this.gotTournaments=function(e){e=w.a.sortBy(e,["startDatetime","endDatetime","createdDatetime","id"],["desc","desc","desc","desc"]),t.tournamentsInfo=t.prepareTournaments(e),t.onTournaments.map(function(e){return e(t.tournamentsInfo)})},this.gotPuzzles=function(e){var n=!0,l=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var i=r.value;i.meta.publishDatetime=i.meta.publishDatetime?O()(i.meta.publishDatetime):null,i.meta.createdDatetime=i.meta.createdDatetime?O()(i.meta.createdDatetime):null}}catch(s){l=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(l)throw a}}e=w.a.sortBy(e,[function(e){return e.meta.publishDatetime?e.meta.publishDatetime.toISOString():null},function(e){return e.meta.createdDatetime?e.meta.createdDatetime.toISOString():null},"id"],["desc","desc","desc"]),t.puzzlesInfo=t.preparePuzzles(e),t.onPuzzles.map(function(e){return e(t.puzzlesInfo)})},this.gotNonPersonalPuzzles=function(e){var n=t.puzzlesInfo.mine.map(function(e){return e.id});t.gotPuzzles(e.filter(function(e){return!n.includes(e.id)}).concat(t.puzzlesInfo.mine))},this.gotPersonalPuzzles=function(e){var n=e.map(function(e){return e.id});t.gotPuzzles(e.concat(t.puzzlesInfo.other.filter(function(e){return!n.includes(e.id)})))},this.id=localStorage.getItem("user-id")||null,this.username=localStorage.getItem("user-name")||null;var n=localStorage.getItem("user-password")||null;localStorage.removeItem("user-password"),this.token=localStorage.getItem("user-token")||n;var l,a=localStorage.getItem("user-settings")||"null";try{l=JSON.parse(a)}catch(r){l=null}this.updateApplicableSettingsTimeout=null,this.setSettings(l),window.io||(window.io=function(){return{on:function(){return console.warn("Socket script was missing")},emit:function(){return console.warn("Socket script was missing")},unavailable:!0}},window.io.unavailable=!0,this.scriptIoReloadInterval=setInterval(this.reloadScriptIo,1e3)),this.disconnected=!1,this.onConnect=[],this.onDisconnect=[],this.onUser=[],this.onUsers=[],this.onGames=[],this.onTournaments=[],this.onPuzzles=[],this.bindSocket()}return Object(s.a)(e,null,[{key:"getDefaultSettings",value:function(){return{autoSubmitMoves:!1,confirmSubmitMoves:!0,enableNotifications:!1,theme:{useTopicalTheme:!0,cells:"original",pieces:"king",scheme:"",rotateOpponent:!0,animations:!0,arrows:!0,numbers:"obvious"}}}}]),Object(s.a)(e,[{key:"setSettings",value:function(e){var t=this;this.settings=e?w.a.merge(this.constructor.getDefaultSettings(),e):this.constructor.getDefaultSettings();var n=C(this.settings),l=n.applicableSettings,a=n.nextUpdatedDate,r=n.override,o=n.name;if(this.applicableSettings=l,this.applicableSettingsName=o,this.applicableSettingsOverride=r,this.updateApplicableSettingsTimeout&&(clearTimeout(this.updateApplicableSettingsTimeout),this.updateApplicableSettingsTimeout=null),a){var i=a.diff(O()());this.updateApplicableSettingsTimeout=setTimeout(function(){t.setSettings(t.settings),t.onUser.map(function(e){return e(t.user)})},i)}}},{key:"bindSocket",value:function(){this.socket=window.io("https://thyra.basdekis.io"),this.available=!this.socket.unavailable,this.connected=!1,this.socket.on("connect",this.justConnected),this.socket.on("disconnect",this.justDisconnected),this.socket.on("reload",this.reload),this.user=null,this.socket.on("user",this.gotUser),this.usersInfo=this.prepareUsers([]),this.socket.on("users",this.gotUsers),this.openingsDatabase=null,this.gamesInfo=this.prepareGames([]),this.socket.on("games",this.gotGames),this.socket.on("game",this.gotGame),this.socket.on("deleted-game",this.gotDeletedGame),this.socket.on("openings-database",this.gotOpeningsDatabase),this.tournamentsInfo=this.prepareTournaments([]),this.socket.on("tournaments",this.gotTournaments),this.puzzlesInfo=this.preparePuzzles([]),this.socket.on("puzzles",this.gotNonPersonalPuzzles),this.socket.on("personal-puzzles",this.gotPersonalPuzzles),this.getUser()}},{key:"subscribe",value:function(e){for(var t=0,n=["onConnect","onDisconnect","onUser","onUsers","onGames","onTournaments","onPuzzles"];t<n.length;t++){var l=n[t],a=e[l];a&&this[l].push(a)}}},{key:"unsubscribe",value:function(e){for(var t=0,n=["onConnect","onDisconnect","onUser","onUsers","onGames","onPuzzles"];t<n.length;t++){var l=n[t],a=e[l];a&&w.a.pull(this[l],a)}}},{key:"getUser",value:function(){this.socket.emit("create-user",{appVersion:14,id:this.id,name:this.username,token:this.token,settings:this.settings})}},{key:"logIn",value:function(e,t,n){this.socket.emit("log-in",{appVersion:14,name:e,password:t,mergeUsers:n})}},{key:"logOut",value:function(){this.socket.emit("log-out")}},{key:"changeUsername",value:function(e){this.socket.emit("change-username",e)}},{key:"changePassword",value:function(e){this.socket.emit("change-password",e)}},{key:"updateSettings",value:function(e){this.socket.emit("update-settings",e)}},{key:"changeReadyToPlay",value:function(e){this.socket.emit("change-ready-to-play",e)}},{key:"prepareUsers",value:function(e){var t,n=this;if(this.user){var l=e.findIndex(function(e){return e.id===n.user.id});l>=0?(t=e.slice(0,l).concat(e.slice(l+1)),e=[e[l]].concat(Object(g.a)(t))):t=e}else t=e;var a=w.a.fromPairs(e.map(function(e){return[e.id,e]})),r=e.filter(function(e){return e.online}),o=r.filter(function(e){return[!0,!n.user||n.user.id].includes(e.readyToPlay)});return{users:e,byId:a,other:t,online:r,offline:e.filter(function(e){return!e.online}),readyToPlay:o,readyToPlayMe:o.filter(function(e){return n.user&&n.user.id===e.readyToPlay}),challengedUser:this.user&&a[this.user.readyToPlay]||null}}},{key:"prepareGames",value:function(e){var t=this,n=e.filter(function(e){return!e.finished}),l=e.filter(function(e){return e.finished});return{games:e,byId:w.a.fromPairs(e.map(function(e){return[e.id,e]})),live:n,myLive:this.user?n.filter(function(e){return e.userIds.includes(t.user.id)}):[],otherLive:this.user?n.filter(function(e){return!e.userIds.includes(t.user.id)}):n,finished:l,myFinished:this.user?l.filter(function(e){return e.userIds.includes(t.user.id)}):[],otherFinished:this.user?l.filter(function(e){return!e.userIds.includes(t.user.id)}):n,mine:this.user?e.filter(function(e){return e.userIds.includes(t.user.id)}):[],openingsDatabase:this.openingsDatabase}}},{key:"submitGameMove",value:function(e,t){this.socket.emit("submit-game-moves",{id:e.id,moves:t})}},{key:"createTournament",value:function(e){this.socket.emit("create-tournament",e)}},{key:"joinTournament",value:function(e){this.socket.emit("join-tournament",e.id)}},{key:"leaveTournament",value:function(e){this.socket.emit("leave-tournament",e.id)}},{key:"startTournament",value:function(e){this.socket.emit("start-tournament",e.id)}},{key:"abortTournament",value:function(e){this.socket.emit("abort-tournament",e.id)}},{key:"prepareTournaments",value:function(e){var t=this,n=e.filter(function(e){return!e.started}),l=e.filter(function(e){return e.started&&!e.finished}),a=n.concat(l),r=e.filter(function(e){return e.finished});return{tournaments:e,byId:w.a.fromPairs(e.map(function(e){return[e.id,e]})),future:n,live:l,futureAndLive:a,finished:r,myFuture:this.user?n.filter(function(e){return e.userIds.includes(t.user.id)}):[],myLive:this.user?l.filter(function(e){return e.userIds.includes(t.user.id)}):[],myFutureAndLive:this.user?a.filter(function(e){return e.userIds.includes(t.user.id)}):[],myFinished:this.user?r.filter(function(e){return e.userIds.includes(t.user.id)}):[],otherFuture:this.user?l.filter(function(e){return!e.userIds.includes(t.user.id)}):l,otherLive:this.user?n.filter(function(e){return!e.userIds.includes(t.user.id)}):n,otherFutureAndLive:this.user?a.filter(function(e){return!e.userIds.includes(t.user.id)}):n,otherFinished:this.user?r.filter(function(e){return!e.userIds.includes(t.user.id)}):r,mine:this.user?e.filter(function(e){return e.userIds.includes(t.user.id)}):[]}}},{key:"createPuzzle",value:function(e){this.socket.emit("create-puzzle",e)}},{key:"updatePuzzle",value:function(e){this.socket.emit("update-puzzle",e)}},{key:"submitPuzzleMove",value:function(e,t){this.socket.emit("submit-puzzle-moves",{id:e.id,path:t})}},{key:"preparePuzzles",value:function(e){var t=this,n=this.user?e.filter(function(e){return e.userId!==t.user.id}):e,l=this.user?e.filter(function(e){return e.userId===t.user.id}):[];return{puzzles:e,public:e.filter(function(e){return e.meta.public&&e.meta.publishDatetime.isSameOrBefore()}),private:e.filter(function(e){return!e.meta.public||e.meta.publishDatetime.isAfter()}),byId:w.a.fromPairs(e.map(function(e){return[e.id,e]})),byGameId:this.user?w.a.groupBy(e.filter(function(e){return e.meta.gameId&&(e.userId===t.user.id||t.user.puzzlesStats[e.id]&&t.user.puzzlesStats[e.id].meta.won)}),function(e){return e.meta.gameId}):{},mine:l,myPublic:l.filter(function(e){return e.meta.public&&e.meta.publishDatetime.isSameOrBefore()}),myPublicUnattempted:l.filter(function(e){return e.meta.public&&e.meta.publishDatetime.isSameOrBefore()&&!e.usersStats.attempted}),myPrivate:l.filter(function(e){return!e.meta.public||e.meta.publishDatetime.isAfter()}),other:n,otherSolved:this.user?n.filter(function(e){return t.user.puzzles[e.id]&&t.user.puzzles[e.id].meta.won}):[],otherUnsolved:this.user?n.filter(function(e){return!t.user.puzzles[e.id]||!t.user.puzzles[e.id].meta.won}):n,otherStarted:this.user?n.filter(function(e){return t.user.puzzles[e.id]&&t.user.puzzles[e.id].meta.started&&!t.user.puzzles[e.id].meta.won}):[],otherNotStarted:this.user?n.filter(function(e){return!t.user.puzzles[e.id]||!t.user.puzzles[e.id].meta.started}):n}}}]),e}(),A=new z;window.client=A;var j=z,I=n(26),M=n(23),_=n(65),T=n(256);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}var N=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"constructUrl",value:function(e){var t=this.props.match;return"".concat(t.url.endsWith("/")?t.url.slice(0,-1):t.url).concat(e?"/".concat(e):"")}},{key:"getPreparedPanesDefaultToAndActiveIndex",value:function(){var e=this,t=this.props,n=t.panes,l=t.defaultIndex,r=t.match,o=t.location,i=null,s=null,c=r.url;return{preparedPanes:n.map(function(e,t){return[e,t]}).filter(function(e){return Object(I.a)(e,1)[0]}).map(function(t,n){var r=Object(I.a)(t,2),u=r[0],m=r[1];if(!u)return null;var p=e.constructUrl(u.path);m===l&&(i=p);var y=void 0!==u.navigate?e.constructUrl(u.navigate):p;o.pathname.startsWith(y)&&(s=n,c=p);var v="string"===typeof u.menuItem?{content:u.menuItem}:u.menuItem;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({to:p},u,{menuItem:a.a.createElement(T.a.Item,Object.assign({key:u.path,as:M.c,to:y},v,{icon:u.icon||v.icon}))})}).filter(function(e){return e}),defaultTo:i,activeIndex:s,activeTo:c}}},{key:"render",value:function(){var e=this.props,t=e.tab,n=e.menu,r=e.match,o=e.renderActiveOnly,i=e.className,s=this.getPreparedPanesDefaultToAndActiveIndex(),c=s.preparedPanes,u=s.defaultTo,m=s.activeIndex,p=s.activeTo;return a.a.createElement(l.Fragment,null,null!==u?a.a.createElement(_.d,null,a.a.createElement(_.a,{exact:!0,from:r.url,to:u})):null,a.a.createElement(_.b,{path:p},a.a.createElement(f.a,Object.assign({menu:n,renderActiveOnly:o},t,{panes:c,activeIndex:m,className:i}))))}}]),t}(l.Component);N.defaultProps={renderActiveOnly:!0,defaultIndex:0};var D,G,Y=Object(_.g)(N),U=(n(371),n(258)),B=n(42),F=n.n(B);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),t}(Object(U.a)(Error)),H=function(){function e(t,n,l,a,r){if(Object(i.a)(this,e),!t||!n)throw new Error("You need to pass rowsAndColumns, status, and previous game");this.previous=l,this.rowsAndColumns=t;var o=["nextPlayer","moveType","availableMovesMatrix","canUndo","resignedPlayer"].filter(function(e){return void 0===n[e]});if(o.length)throw new Error("Some status keys were missing: ".concat(o.join(", ")));this.status=n,this.moveType=this.status.moveType,this.availableMovesMatrix=this.status.availableMovesMatrix,this.resignedPlayer=this.status.resignedPlayer,this.nextPlayer=this.status.nextPlayer,this.canUndo=this.status.canUndo,this.lastMove=a||(this.resignedPlayer?{resign:this.resignedPlayer}:a),this.isNextMove=r,this.winner=this.getWinner(),this.winner?this.finished=!0:this.constructor.hasAvailableMove(this.availableMovesMatrix)?this.finished=!1:(this.finished=!0,this.winner=this.constructor.OTHER_PLAYER[this.nextPlayer]),this.finished&&(this.availableMovesMatrix=this.constructor.noMovesAreAvailable())}return Object(s.a)(e,[{key:"createStep",value:function(e,t,n){return new this.constructor(e,t,this,n,!1)}},{key:"createNext",value:function(e,t,n){return new this.constructor(e,t,this,n,!0)}}],[{key:"create",value:function(){return new this(this.getInitialRowsAndColumns(),this.getInitialStatus(),null,null,!1)}},{key:"fromMoves",value:function(e){var t=this.create();return t=t.makeMoves(e)}},{key:"fromRowsAndColumns",value:function(e){var t=this;if(5!==e.length)throw new Error("Expected 5 rows but got ".concat(e.length));if(e.find(function(e){return 5!==e.cells.length}))throw new Error("Expected 5 columns but some rows had a different number");if(e.find(function(e,t){return e.y!==t}))throw new Error("Some rows had invalid `y`");if(e.find(function(e){return e.cells.find(function(t,n){return t.x!==n||t.y!==e.y})}))throw new Error("Some cells had invalid `x` or `y`");if(this.findCell(e,function(e){return e.player&&!t.PLAYERS.includes(e.player)||e.worker&&!t.WORKERS.includes(e.worker)}))throw new Error("Some cells had invalid player or worker");if(this.findCell(e,function(e){return![0,1,2,3,4].includes(e.level)}))throw new Error("Some cells have invalid level");var n,l=this.findCells(e,function(e){return e.player===t.PLAYER_A}).length,a=this.findCells(e,function(e){return e.player===t.PLAYER_B}).length;if(l>2||a>2)throw new Error("Players can have at most 2 workers, but player A has ".concat(l," and player B has ").concat(a));if(0===Math.max.apply(Math,Object(g.a)(w.a.flatten(e.map(function(e){return e.cells.map(function(e){return e.level})})))))if(0===a)if(0===l)n={nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_PLACE_FIRST_WORKER,availableMovesMatrix:this.allMovesAreAvailableMatrix(),canUndo:!1,resignedPlayer:null};else if(1===l)n={nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_PLACE_SECOND_WORKER,availableMovesMatrix:this.getEmptyCellsAvailableMovesMatrix(e),canUndo:!1,resignedPlayer:null};else{var r=this.findCell(e,function(e){return e.player===t.PLAYER_A&&e.worker===t.WORKER_FIRST}),o=this.findCell(e,function(e){return e.player===t.PLAYER_A&&e.worker===t.WORKER_SECOND});if(!r||!o)throw new Error("Could not find both workers of player A");n={nextPlayer:this.PLAYER_B,moveType:this.MOVE_TYPE_PLACE_FIRST_WORKER,availableMovesMatrix:this.getEmptyCellsAvailableMovesMatrix(e),canUndo:!1,resignedPlayer:null}}else{if(2!==l)throw new Error("Player A must put both of their workers before player B can place theirs");if(1===a)n={nextPlayer:this.PLAYER_B,moveType:this.MOVE_TYPE_PLACE_SECOND_WORKER,availableMovesMatrix:this.getEmptyCellsAvailableMovesMatrix(e),canUndo:!1,resignedPlayer:null};else{var i=this.findCell(e,function(e){return e.player===t.PLAYER_B&&e.worker===t.WORKER_FIRST}),s=this.findCell(e,function(e){return e.player===t.PLAYER_B&&e.worker===t.WORKER_SECOND});if(!i||!s)throw new Error("Could not find both workers of player B");n={nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_SELECT_WORKER_TO_MOVE,availableMovesMatrix:this.getPlayerAvailableMovesMatrix(e,this.PLAYER_A),canUndo:!1,resignedPlayer:null}}}else{if(2!==l||2!==a)throw new Error("Both players must have placed both of their workers before they can move and build");if(this.findCell(e,function(e){return 4===e.level&&e.player}))throw new Error("Some workers are on the 4th level");if(this.findCells(e,function(e){return 3===e.level&&e.player}).length>1)throw new Error("Too many workers have won");n=w.a.sum(w.a.flatten(e.map(function(e){return e.cells.map(function(e){return e.level})})))%2===0?{nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_SELECT_WORKER_TO_MOVE,availableMovesMatrix:this.getPlayerAvailableMovesMatrix(e,this.PLAYER_A),canUndo:!1,resignedPlayer:null}:{nextPlayer:this.PLAYER_B,moveType:this.MOVE_TYPE_SELECT_WORKER_TO_MOVE,availableMovesMatrix:this.getPlayerAvailableMovesMatrix(e,this.PLAYER_B),canUndo:!1,resignedPlayer:null}}return new this(e,n,null,null,!1)}},{key:"fromMoveNotation",value:function(e){var t=this,n=e.split("").map(function(e){return t.MOVE_REVERSE_NOTATION[e]});if(n.filter(function(e){return!e}).length)return null;try{return this.fromMoves(n,!0)}catch(l){return this.fromMoves(n,!1)}}},{key:"fromCompressedMoveNotation",value:function(e){var t=this,n=e.split("").map(function(e){return t.MOVE_NOTATION_DECOMPRESSION[e]});if(n.filter(function(e){return!e}).length)return null;try{return this.fromMoves(n,!0)}catch(l){return this.fromMoves(n,!1)}}},{key:"getPositionNotation",value:function(e){var t=this;return w.a.flatten(e.map(function(e){return e.cells.map(function(e){return t.POSITION_NOTATION_COMPRESSION[e.level][e.player]})})).join("")}},{key:"fromPositionNotation",value:function(e){var t=this,n=this.ROWS.map(function(n){return{y:n,cells:t.COLUMNS.map(function(l){return K({x:l,y:n},t.POSITION_REVERSE_NOTATION[e[5*n+l]])})}});return this.fromPosition(n)}},{key:"fromCompressedPositionNotation",value:function(e){var t=this,n=this.ROWS.map(function(n){return{y:n,cells:t.COLUMNS.map(function(l){return K({x:l,y:n},t.POSITION_NOTATION_DECOMPRESSION[e[5*n+l]])})}});return this.fromPosition(n)}},{key:"isValidCompressedPositionNotation",value:function(e){try{return this.fromCompressedPositionNotation(e),!0}catch(t){return!1}}},{key:"fromPosition",value:function(e){var t=0,n=0,l=!0,a=!1,r=void 0;try{for(var o,i=this.ROWS[Symbol.iterator]();!(l=(o=i.next()).done);l=!0){var s=o.value,c=!0,u=!1,m=void 0;try{for(var p,y=this.COLUMNS[Symbol.iterator]();!(c=(p=y.next()).done);c=!0){var v=e[p.value].cells[s];v.player===this.PLAYER_A?(v.worker=this.WORKERS[t%2],t+=1):v.player===this.PLAYER_B&&(v.worker=this.WORKERS[n%2],n+=1)}}catch(h){u=!0,m=h}finally{try{c||null==y.return||y.return()}finally{if(u)throw m}}}}catch(h){a=!0,r=h}finally{try{l||null==i.return||i.return()}finally{if(a)throw r}}return this.fromRowsAndColumns(e)}}]),Object(s.a)(e,[{key:"_getProperty",value:function(e,t){return this.hasOwnProperty(e)||(this[e]=t()),this[e]}},{key:"serialize",value:function(){return{moves:this.moves}}},{key:"getPrintout",value:function(){var t,n,l,a,r,o,i=(a={},Object(b.a)(a,e.PLAYER_A,(t={},Object(b.a)(t,0,"a"),Object(b.a)(t,1,F.a.bgWhite("b")),Object(b.a)(t,2,F.a.bgYellow("c")),Object(b.a)(t,3,F.a.bgRed("d")),t)),Object(b.a)(a,e.PLAYER_B,(n={},Object(b.a)(n,0,"w"),Object(b.a)(n,1,F.a.bgWhite("x")),Object(b.a)(n,2,F.a.bgYellow("y")),Object(b.a)(n,3,F.a.bgRed("z")),n)),Object(b.a)(a,null,(l={},Object(b.a)(l,0," "),Object(b.a)(l,1,F.a.bgWhite(" ")),Object(b.a)(l,2,F.a.bgYellow(" ")),Object(b.a)(l,3,F.a.bgRed(" ")),Object(b.a)(l,4,F.a.bgBlue(" ")),l)),a),s=this.rowsAndColumns.map(function(e){return e.cells.map(function(e){return i[e.player][e.level]}).join("")}).join("\n"),c=(r={},Object(b.a)(r,e.PLAYER_A,"A"),Object(b.a)(r,e.PLAYER_B,"B"),r)[this.nextPlayer],u=(o={},Object(b.a)(o,e.PLAYER_A,"A"),Object(b.a)(o,e.PLAYER_B,"B"),Object(b.a)(o,null,"+"),o)[this.winner];return"".concat(c,"-----").concat(u,"\n")+s.split("\n").map(function(e){return"|".concat(F.a.black(e),"|")}).join("\n")+"\n+-----+"}},{key:"checkCoordinatesAreValid",value:function(e){var t=e.x,n=e.y;if(Math.floor(t)!==t||Math.floor(n)!==n)throw new V("Coordinates '".concat(JSON.stringify({x:t,y:n}),"' are not valid"));if(void 0===this.availableMovesMatrix[n]||void 0===this.availableMovesMatrix[n][t])throw new V("Coordinates '".concat(JSON.stringify({x:t,y:n}),"' are out of bounds"))}},{key:"isMoveAvailable",value:function(e){var t=e.x,n=e.y;return this.availableMovesMatrix[n][t]}},{key:"findCell",value:function(e){return this.constructor.findCell(this.rowsAndColumns,e)}},{key:"findCells",value:function(e){return this.constructor.findCells(this.rowsAndColumns,e)}},{key:"getWinner",value:function(){if(this.resignedPlayer)return this.constructor.OTHER_PLAYER[this.resignedPlayer];var e=this.findCell(function(e){return e.player&&3===e.level});return e?e.player:!this.canUndo&&this.constructor.canPlayerWin(this.rowsAndColumns,this.nextPlayer)?this.nextPlayer:null}},{key:"checkCanMakeMove",value:function(e,t,n){if(this.finished)throw new V("The game has already finished");if(this.moveType!==e)throw new V('You cannot perform move of type "'.concat(e,'": you need to perform "').concat(this.moveType,'"'));if(this.checkCoordinatesAreValid(t),n&&this.checkCoordinatesAreValid(n),!this.availableMovesMatrix[t.y][t.x])throw new V("Move ".concat(JSON.stringify(t)," is not one of the available ones"))}},{key:"resign",value:function(e){return this.createStep(this.rowsAndColumns,{nextPlayer:this.nextPlayer,moveType:this.moveType,availableMovesMatrix:this.availableMovesMatrix,canUndo:!1,resignedPlayer:e},{resign:e})}},{key:"makeMoves",value:function(e){var t=this,n=!0,l=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var i=r.value;t=t.makeMove(i)}}catch(s){l=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(l)throw a}}return t}},{key:"makeMove",value:function(e){var t;if(e.resign)return this.resign(e.resign);var n=(t={},Object(b.a)(t,this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER,this.placeFirstWorker),Object(b.a)(t,this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER,this.placeSecondWorker),Object(b.a)(t,this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE,this.selectWorkerToMove),Object(b.a)(t,this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER,this.moveFirstWorker),Object(b.a)(t,this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER,this.moveSecondWorker),Object(b.a)(t,this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER,this.buildAroundWorker),t)[this.moveType];if(!n)throw new V("Don't know how to perform move of type \"".concat(this.moveType,'"'));return n.bind(this)(e)}},{key:"undo",value:function(){if(!this.canUndo)throw new Error("Cannot undo");return this.previous}},{key:"takeMoveBack",value:function(){if(!this.canTakeMoveBack)throw new Error("Cannot take move back");return this.previous}},{key:"placeFirstWorker",value:function(e){var t=e.x,n=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER,{x:t,y:n});var l=this.constructor.updateCells(this.rowsAndColumns,{x:t,y:n,player:this.nextPlayer,worker:this.constructor.WORKER_FIRST});return this.createStep(l,{nextPlayer:this.nextPlayer,moveType:this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER,availableMovesMatrix:this.constructor.getEmptyCellsAvailableMovesMatrix(l),canUndo:!0,resignedPlayer:null},{x:t,y:n})}},{key:"placeSecondWorker",value:function(e){var t=e.x,n=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER,{x:t,y:n});var l=this.constructor.updateCells(this.rowsAndColumns,{x:t,y:n,player:this.nextPlayer,worker:this.constructor.WORKER_SECOND}),a=this.constructor.OTHER_PLAYER[this.nextPlayer];return this.createNext(l,{nextPlayer:a,moveType:a===this.constructor.PLAYER_A?this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE:this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER,availableMovesMatrix:a===this.constructor.PLAYER_A?this.constructor.getPlayerAvailableMovesMatrix(l,a):this.constructor.getEmptyCellsAvailableMovesMatrix(l),canUndo:!1,resignedPlayer:null},{x:t,y:n})}},{key:"selectWorkerToMove",value:function(e){var t=e.x,n=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE,{x:t,y:n});var l=this.rowsAndColumns[n].cells[t];return this.createStep(this.rowsAndColumns,{nextPlayer:this.nextPlayer,moveType:l.worker===this.constructor.WORKER_FIRST?this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER:this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER,availableMovesMatrix:this.constructor.getMovableAvailableMovesMatrix(this.rowsAndColumns,{x:t,y:n}),canUndo:!0,resignedPlayer:null},{x:t,y:n})}},{key:"moveWorker",value:function(e,t){var n,l=this,a=this.findCell(function(e){return e.player===l.nextPlayer&&e.worker===t}),r=this.rowsAndColumns[e.y].cells[e.x],o=(n=this.constructor).updateCells.apply(n,[this.rowsAndColumns].concat([{x:a.x,y:a.y,player:null,worker:null},{x:r.x,y:r.y,player:a.player,worker:a.worker}]));return this.createStep(o,{nextPlayer:this.nextPlayer,moveType:this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER,availableMovesMatrix:this.constructor.getBuildableAvailableMovesMatrix(o,e),canUndo:!0,resignedPlayer:null},{x:e.x,y:e.y})}},{key:"moveFirstWorker",value:function(e){var t=e.x,n=e.y;return this.checkCanMakeMove(this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER,{x:t,y:n}),this.moveWorker({x:t,y:n},this.constructor.WORKER_FIRST)}},{key:"moveSecondWorker",value:function(e){var t=e.x,n=e.y;return this.checkCanMakeMove(this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER,{x:t,y:n}),this.moveWorker({x:t,y:n},this.constructor.WORKER_SECOND)}},{key:"buildAroundWorker",value:function(e){var t=e.x,n=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER,{x:t,y:n});var l=this.constructor.updateCells(this.rowsAndColumns,{x:t,y:n,level:this.rowsAndColumns[n].cells[t].level+1}),a=this.constructor.OTHER_PLAYER[this.nextPlayer];return this.createNext(l,{nextPlayer:a,moveType:this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE,availableMovesMatrix:this.constructor.getPlayerAvailableMovesMatrix(l,a),canUndo:!1,resignedPlayer:null},{x:t,y:n})}},{key:"getAvailableMoves",value:function(){return this.finished?[]:w.a.flatten(this.availableMovesMatrix.map(function(e,t){return e.map(function(e,n){return[n,t,e]}).filter(function(e){return Object(I.a)(e,3)[2]}).map(function(e){var t=Object(I.a)(e,2);return{x:t[0],y:t[1]}})}))}},{key:"getNextGames",value:function(){var e=this;return this.getAvailableMoves().map(function(t){return e.makeMove(t)})}},{key:"getNextFullMoveGames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nextPlayer;return this.nextPlayer!==e?[this]:w.a.flatten(this.getNextGames().map(function(t){return t.getNextFullMoveGames(e)}))}},{key:"getSearchState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.finished?this.winner===this.nextPlayer?"won":"lost":null;return K({game:this,result:n,nextGamesLeft:this.getNextFullMoveGames(),results:{won:"won"===n,lost:"lost"===n,undetermined:!1}},!t||t.loseLeaves?{winLeaves:"won"===n?[this]:[]}:{loseLeaves:"lost"===n?[this]:[]},{previous:t,moves:null,maxDepth:e})}},{key:"history",get:function(){var e=this;return this._getProperty("_history",function(){return(e.previous?e.previous.history:[]).filter(function(e){return!e.canUndo}).concat([e])})}},{key:"previousInHistory",get:function(){var e=this;return this._getProperty("_previousInHistory",function(){return e.history[e.history.length-2]})}},{key:"fullHistory",get:function(){var e=this;return this._getProperty("_fullHistory",function(){return(e.previous?e.previous.fullHistory:[]).concat(e)})}},{key:"moveCount",get:function(){var e=this;return this._getProperty("_moveCount",function(){return e.previous?e.isNextMove?e.previous.moveCount+1:e.previous.moveCount:1})}},{key:"chainCount",get:function(){var e=this;return this._getProperty("_chainCount",function(){return e.previous?e.previous.chainCount+1:0})}},{key:"moves",get:function(){var e=this;return this._getProperty("_moves",function(){return e.previous?e.previous.moves.concat([e.lastMove]):[]})}},{key:"lastMovesInHistory",get:function(){var e=this;return this._getProperty("_lastMovesInHistory",function(){return e.fullHistory.slice(e.fullHistory.indexOf(e.previousInHistory)+1).map(function(e){return e.lastMove})})}},{key:"path",get:function(){var e=this;return this._getProperty("_path",function(){return e.previousInHistory?e.previousInHistory.path.concat([e.lastMovesInHistory]):[]})}},{key:"thisPlayer",get:function(){var t=this;return this._getProperty("_thisPlayer",function(){return t.previous?t.previous.nextPlayer:e.PLAYER_A})}},{key:"thisMoveType",get:function(){var e=this;return this._getProperty("_thisMoveType",function(){return e.previous?e.previous.moveType:null})}},{key:"canTakeMoveBack",get:function(){var e=this;return this._getProperty("_canTakeMoveBack",function(){return!!e.previous})}},{key:"moveNotation",get:function(){var e=this;return this._getProperty("_moveNotation",function(){return e.resignedPlayer?e.constructor.MOVE_RESIGNED_NOTATION[e.resignedPlayer]:e.lastMove?e.constructor.MOVE_NOTATION[e.lastMove.y][e.lastMove.x]:""})}},{key:"fullNotation",get:function(){var e=this;return this._getProperty("_fullNotation",function(){return"".concat(e.previous?e.previous.fullNotation:"").concat(e.moveNotation)})}},{key:"compressedFullNotation",get:function(){var e=this;return this._getProperty("_compressedFullNotation",function(){return e.fullNotation.split(/(..)/).filter(function(e){return e}).map(function(t){return e.constructor.MOVE_NOTATION_COMPRESSION[t]}).join("")})}},{key:"positionNotation",get:function(){var e=this;return this._getProperty("_positionNotation",function(){return e.constructor.getPositionNotation(e.rowsAndColumns)})}},{key:"startingWorkersPositionGame",get:function(){var e=this;return this._getProperty("_startingWorkersPositionGame",function(){return e.history.length<3?null:e.history[2]})}},{key:"startingWorkersPositionNormalisedPositionNotation",get:function(){var e=this;return this._getProperty("_startingWorkersPositionNormalisedPositionNotation",function(){return e.startingWorkersPositionGame?e.startingWorkersPositionGame.normalisedPositionNotation:null})}},{key:"normalisedPositionNotation",get:function(){var e=this;return this._getProperty("_normalisedPositionNotation",function(){return Object(I.a)(e.normalisedPositionNotationAndTransformationName,1)[0]})}},{key:"normalisedPositionNotationAndTransformationName",get:function(){var e=this;return this._getProperty("_normalisedPositionNotationAndTransformationName",function(){var t=e.allPositionNotations[0];return[t,e.transformationNameByPositionNotation[t]]})}},{key:"transformationNameByPositionNotation",get:function(){var t=this;return this._getProperty("_transformationNameByPositionNotation",function(){return w.a.fromPairs(Object.entries(t.constructor.transformationMap).map(function(e){var n=Object(I.a)(e,2);return[n[0],n[1]||t.constructor.noTransformation]}).map(function(n){var l=Object(I.a)(n,2),a=l[0],r=l[1];return[e.Classic.fromRowsAndColumns(r(t.rowsAndColumns)).positionNotation,a]}))})}},{key:"allPositionNotations",get:function(){var e=this;return this._getProperty("_allPositionNotations",function(){return Object.keys(e.transformationNameByPositionNotation).sort().reverse()})}}],[{key:"getAvailableMoves",value:function(e){return w.a.flatten(e.map(function(e,t){return e.map(function(e,n){return e?{x:n,y:t}:null})})).filter(function(e){return e})}},{key:"deserialize",value:function(e){var t=e.moves;return this.fromMoves(t)}},{key:"getInitialRowsAndColumns",value:function(){var e=this;return this.ROWS.map(function(t){return{y:t,cells:e.COLUMNS.map(function(e){return{x:e,y:t,level:0,player:null,worker:null}})}})}},{key:"getInitialStatus",value:function(){return{nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_PLACE_FIRST_WORKER,availableMovesMatrix:this.allMovesAreAvailableMatrix(),canUndo:!1,resignedPlayer:null}}},{key:"hasAvailableMove",value:function(e){return this.getAvailableMoves(e).length>0}},{key:"findCell",value:function(e,t){return e.map(function(e){return e.cells.find(t)}).find(function(e){return e})}},{key:"findCells",value:function(e,t){return w.a.flatten(e.map(function(e){return e.cells.filter(t)}))}},{key:"areCellsNeighbours",value:function(e,t){throw new Error("Not implemented `areCellsNeighbours`")}},{key:"canPlayerWin",value:function(e,t){var n=this,l=this.findCells(e,function(e){return e.player===t&&2===e.level});return!!l.length&&this.findCells(e,function(e){return 3===e.level&&l.find(function(t){return n.areCellsNeighbours(e,t)})}).length>0}},{key:"allMovesAreAvailableMatrix",value:function(){var e=this;return this.ROWS.map(function(){return e.COLUMNS.map(function(){return!0})})}},{key:"noMovesAreAvailable",value:function(){var e=this;return this.ROWS.map(function(){return e.COLUMNS.map(function(){return!1})})}},{key:"getEmptyCellsAvailableMovesMatrix",value:function(e){return this.getAvailableMovesMatrix(e,function(e){return!e.player})}},{key:"getPlayerAvailableMovesMatrix",value:function(e,t){var n=this;return this.getAvailableMovesMatrix(e,function(l){return l.player===t&&n.hasAvailableMove(n.getMovableAvailableMovesMatrix(e,l))})}},{key:"getMovableAvailableMovesMatrix",value:function(e,t){var n=this,l=e[t.y].cells[t.x],a=l.level+1;return this.getAvailableMovesMatrix(e,function(r){return n.areCellsNeighbours(r,t)&&!r.player&&r.level<=3&&r.level<=a&&n.hasAvailableMove(n.getBuildableAvailableMovesMatrix(n.updateCells.apply(n,[e].concat([{x:l.x,y:l.y,player:null,worker:null},{x:r.x,y:r.y,player:l.player,worker:l.worker}])),r))})}},{key:"getBuildableAvailableMovesMatrix",value:function(e,t){var n=this,l=e[t.y].cells[t.x];return this.getAvailableMovesMatrix(e,function(a){return n.areCellsNeighbours(a,t)&&!a.player&&a.level<4&&!n.canPlayerWin(n.updateCells.apply(n,[e].concat([{x:a.x,y:a.y,level:a.level+1}])),n.OTHER_PLAYER[l.player])})}},{key:"getAvailableMovesMatrix",value:function(e,t){return e.map(function(e){return e.cells.map(t)})}},{key:"updateCells",value:function(e){for(var t={},n=arguments.length,l=new Array(n>1?n-1:0),a=1;a<n;a++)l[a-1]=arguments[a];for(var r=0,o=l;r<o.length;r++){var i=o[r];t[i.y]=t[i.y]||{},t[i.y][i.x]=i}return e.map(function(e){return t[e.y]?K({},e,{cells:e.cells.map(function(e){return t[e.y][e.x]?K({},e,{},t[e.y][e.x]):e})}):e})}},{key:"advanceSearchState",value:function(e){if(null!==e.result){if(console.log("got result",e.result,"with",e.maxDepth,"depth"),e.previous){if("won"===e.result){var t;if(e.previous.results.lost=!0,e.winLeaves)(t=e.previous.loseLeaves).push.apply(t,Object(g.a)(e.winLeaves))}else{if("lost"!==e.result)throw new Error("Unknown result '".concat(e.result,"'"));var n;e.previous.results.won=!0,e.loseLeaves&&(n=e.previous.winLeaves).push.apply(n,Object(g.a)(e.loseLeaves))}return e.previous}return e}if(e.maxDepth<=0)return e.results.undetermined=!0,e.previous?(e.previous.results.undetermined=!0,e.previous):(console.log("finished"),e);if(!e.nextGamesLeft.length){if(e.results.won)return e.result="won",e;if(e.results.undetermined)return e.previous?(e.previous.results.undetermined=!0,e.previous):(console.log("finished"),e);if(e.results.lost)return e.result="lost",e;throw console.log(e),new Error("Result is null, there are no next games, and there are no results")}return e.nextGamesLeft.shift().getSearchState(e.maxDepth-1,e)}},{key:"advanceSearchStateSteps",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=e;n.previous;)n=n.previous;for(var l=0;l<t&&null===n.result;l++)e=this.advanceSearchState(e);return e}}]),e}();H.PLAYER_A="player-a",H.PLAYER_B="player-b",H.PLAYERS=[H.PLAYER_A,H.PLAYER_B],H.OTHER_PLAYER=(D={},Object(b.a)(D,H.PLAYER_A,H.PLAYER_B),Object(b.a)(D,H.PLAYER_B,H.PLAYER_A),D),H.WORKER_FIRST="first-worker",H.WORKER_SECOND="second-worker",H.WORKERS=[H.WORKER_FIRST,H.WORKER_SECOND],H.MOVE_TYPE_PLACE_FIRST_WORKER="place-first-worker",H.MOVE_TYPE_PLACE_SECOND_WORKER="place-second-worker",H.MOVE_TYPE_SELECT_WORKER_TO_MOVE="select-worker-to-move",H.MOVE_TYPE_MOVE_FIRST_WORKER="move-first-worker",H.MOVE_TYPE_MOVE_SECOND_WORKER="move-second-worker",H.MOVE_TYPE_BUILD_AROUND_WORKER="build-around-worker",H.MOVE_TYPES_START_OF_TURN=[H.MOVE_TYPE_PLACE_FIRST_WORKER,H.MOVE_TYPE_SELECT_WORKER_TO_MOVE],H.MOVE_TYPES_PLACE_WORKER=[H.MOVE_TYPE_PLACE_FIRST_WORKER,H.MOVE_TYPE_PLACE_SECOND_WORKER],H.MOVE_TYPES_MOVE_WORKER=[H.MOVE_TYPE_MOVE_FIRST_WORKER,H.MOVE_TYPE_MOVE_SECOND_WORKER],H.MOVE_TYPES_MOVE_OR_BUILD=[].concat(Object(g.a)(H.MOVE_TYPES_MOVE_WORKER),[H.MOVE_TYPE_BUILD_AROUND_WORKER]),H.ROWS=Array.from({length:5},function(e,t){return t}),H.COLUMNS=Array.from({length:5},function(e,t){return t}),H.MOVE_NOTATION=H.ROWS.map(function(e){return H.COLUMNS.map(function(t){return"".concat(["A","B","C","D","E"][t]).concat(["1","2","3","4","5"][e])})}),H.MOVE_RESIGNED_NOTATION=(G={},Object(b.a)(G,H.PLAYER_A,"RA"),Object(b.a)(G,H.PLAYER_B,"RB"),G),H.MOVE_REVERSE_NOTATION=K({},w.a.fromPairs(w.a.flatten(H.ROWS.map(function(e){return H.COLUMNS.map(function(t){return["".concat(["A","B","C","D","E"][t]).concat(["1","2","3","4","5"][e]),{x:t,y:e}]})}))),{RA:[{resign:H.PLAYER_A}],RB:[{resign:H.PLAYER_B}]}),H.MOVE_NOTATION_COMPRESSION=w.a.fromPairs(Object.keys(H.MOVE_REVERSE_NOTATION).sort().map(function(e,t){return[e,String.fromCharCode(t<26?65+t:t-26+48)]})),H.MOVE_NOTATION_DECOMPRESSION=w.a.fromPairs(Object.keys(H.MOVE_REVERSE_NOTATION).sort().map(function(e,t){return[String.fromCharCode(t<26?65+t:t-26+48),H.MOVE_REVERSE_NOTATION[e]]})),H.POSITION_NOTATION=w.a.fromPairs([0,1,2,3,4].map(function(e){return[e,w.a.fromPairs([null,H.PLAYER_A,H.PLAYER_B].map(function(t){return[t,"".concat(e,"-").concat(t)]}))]})),H.POSITION_REVERSE_NOTATION=w.a.fromPairs(w.a.flatten(Object.entries(H.POSITION_NOTATION).map(function(e){var t=Object(I.a)(e,2),n=t[0],l=t[1];return Object.entries(l).map(function(e){var t=Object(I.a)(e,2),l=t[0];return[t[1],{level:parseInt(n),player:"null"===l?null:l}]})}))),H.POSITION_NOTATION_COMPRESSION_MAP=w.a.fromPairs(w.a.flatten(Object.entries(H.POSITION_NOTATION).map(function(e){var t=Object(I.a)(e,2)[1];return Object.entries(t).map(function(e){return Object(I.a)(e,2)[1]})})).map(function(e,t){return[e,String.fromCharCode(65+t)]})),H.POSITION_NOTATION_COMPRESSION=w.a.fromPairs(Object.entries(H.POSITION_NOTATION).map(function(e){var t=Object(I.a)(e,2),n=t[0],l=t[1];return[n,w.a.fromPairs(Object.entries(l).map(function(e){var t=Object(I.a)(e,2),n=t[0],l=t[1];return[n,H.POSITION_NOTATION_COMPRESSION_MAP[l]]}))]})),H.POSITION_NOTATION_DECOMPRESSION=w.a.fromPairs(Object.entries(H.POSITION_NOTATION_COMPRESSION_MAP).map(function(e){var t=Object(I.a)(e,2),n=t[0];return[t[1],H.POSITION_REVERSE_NOTATION[n]]}));var q=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getSucceedingEquivalentPositionNotationAndMoves",value:function(e){var t=e.allPositionNotations,n=!0,l=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var i=r.value,s=this.constructor.fromCompressedPositionNotation(i),c=this.inferMoves(s).moves;if(c)return{position:i,moves:c}}}catch(u){l=!0,a=u}finally{try{n||null==o.return||o.return()}finally{if(l)throw a}}return{position:null,moves:null}}},{key:"inferMoves",value:function(e){var t,n=this.rowsAndColumns,l=e.rowsAndColumns,a=null,r=null,o=!1,i=null,s=!0,c=!0,u=!1,m=void 0;try{for(var p,y=this.constructor.ROWS[Symbol.iterator]();!(c=(p=y.next()).done);c=!0){var v=p.value,h=!0,d=!1,f=void 0;try{for(var g,b=this.constructor.COLUMNS[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var E=g.value,w=n[v].cells[E],k=l[v].cells[E];if(w.player!==k.player){if(w.player&&k.player)return{moves:null,error:["Both cells had different players",w,k]};if(w.player){if(a)return{moves:null,error:["There was a from coordinates",w,a]};a={x:E,y:v}}else{if(!k.player)return{moves:null,error:["Both cells had different false players",w,k]};if(r){if(!s)return{moves:null,error:["There was a to coordinates",k,r]};if(o)return{moves:null,error:["Trying to place too many workers",k,a,r]};o=!0,a=r}r={x:E,y:v}}}if(w.level>0||k.level>0){if(o)return{moves:null,error:["There are levels, while placing initial workers",w,k,a,r]};s=!1}if(w.level!==k.level){if(i)return{moves:null,error:["There was a build coordinates",w,k,i]};if(w.level!==k.level-1)return{moves:null,error:["The build was too high or too low",w,k]};i={x:E,y:v}}}}catch(O){d=!0,f=O}finally{try{h||null==b.return||b.return()}finally{if(d)throw f}}}}catch(O){u=!0,m=O}finally{try{c||null==y.return||y.return()}finally{if(u)throw m}}if(!a||!r)return{moves:null,error:["There was either no from or no to coordinates",a,r]};if(!s&&!i)return{moves:null,error:["It couldn't be missing build move but it did",s,i]};t=s?[a,r]:[a,r,i];try{this.makeMoves(t)}catch(P){if(P instanceof V)return{moves:null,error:["The moves were invalid",t]};throw P}return{moves:t,error:null}}}],[{key:"areCellsNeighbours",value:function(e,t){return Math.abs(e.x-t.x)<=1&&Math.abs(e.y-t.y)<=1}},{key:"makeTransformRowsAndColumns",value:function(e){var t=this,n=function(n){return t.transformRowsAndColumns(n,e)};n.coordinates=function(n,l){return t.reverseTransformCoordinates(n,l,e)};var l=e.transpose^e.flipX^e.flipY,a=e.transpose&&!l?{transpose:e.transpose,flipX:!e.flipX,flipY:!e.flipY}:e;return n.reverseCoordinates=function(e,n){return t.reverseTransformCoordinates(e,n,a)},n}},{key:"transformRowsAndColumns",value:function(e,t){var n=this,l=this.getTransformationNewRowAndColumnCount(e,t),a=l.newRowCount,r=l.newColumnCount,o=w.a.range(r);return w.a.range(a).map(function(l){return{y:l,cells:o.map(function(o){var i=n.getTransformationOldCoordinates({newX:o,newY:l},{newRowCount:a,newColumnCount:r},t),s=i.oldX,c=i.oldY;return K({},e[c].cells[s],{x:o,y:l})})}})}},{key:"reverseTransformCoordinates",value:function(e,t,n){var l=this.getTransformationNewRowAndColumnCount(e,n),a=l.newRowCount,r=l.newColumnCount,o=t.x,i=t.y,s=this.getTransformationOldCoordinates({newX:o,newY:i},{newRowCount:a,newColumnCount:r},n);return{x:s.oldX,y:s.oldY}}},{key:"getTransformationNewRowAndColumnCount",value:function(e,t){var n,l,a=e.length,r=Math.max.apply(Math,Object(g.a)(e.map(function(e){return e.cells.length})))||0;return t.transpose?(l=a,n=r):(l=r,n=a),{newRowCount:n,newColumnCount:l}}},{key:"getTransformationOldCoordinates",value:function(e,t,n){var l,a,r=e.newX,o=e.newY,i=t.newColumnCount,s=t.newRowCount;return n.transpose?(l=o,a=r):(l=r,a=o),n.flipX&&(l=i-1-l),n.flipY&&(a=s-1-a),{oldX:l,oldY:a}}}]),t}(H);q.transformationMaxRotations=4,q.transformationMap={"0,false":null,"1,false":q.makeTransformRowsAndColumns({transpose:!0,flipX:!1,flipY:!0}),"2,false":q.makeTransformRowsAndColumns({transpose:!1,flipX:!0,flipY:!0}),"3,false":q.makeTransformRowsAndColumns({transpose:!0,flipX:!0,flipY:!1}),"0,true":q.makeTransformRowsAndColumns({transpose:!1,flipX:!0,flipY:!1}),"1,true":q.makeTransformRowsAndColumns({transpose:!0,flipX:!0,flipY:!0}),"2,true":q.makeTransformRowsAndColumns({transpose:!1,flipX:!1,flipY:!0}),"3,true":q.makeTransformRowsAndColumns({transpose:!0,flipX:!1,flipY:!1})},q.noTransformation=q.makeTransformRowsAndColumns({transpose:!1,flipX:!1,flipY:!1}),H.Classic=q;var X=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,null,[{key:"areCellsNeighbours",value:function(e,t){return Math.abs(e.x-t.x)<=1&&Math.abs(e.y-t.y)<=1&&(e.x===t.x||(e.x%2===0?t.y>=e.y:t.y<=e.y))}}]),t}(H);H.Hex=X,H.GAME_TYPES=[H.Classic,H.Hex],window.Game=H;var J=H,$=n(259),Q=n(4),Z=n.n(Q),ee=(n(380),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,l=t.clickable,r=t.undoable,o=t.isCellAvailable,i=t.isCellUndoable,s=t.small,c=t.medium,u=t.makeMove,m=t.onSelect,p=t.selected,y=t.settings,v=t.rowsAndColumns,h=y.theme,d=h.scheme,f=h.numbers;return n=Z()("board","html-board",{"small-board":s,"medium-board":c,editable:!!u&&(l||r),selectable:!!m,selected:p,"board-theme-default":""===d,"board-theme-subtle":"subtle"===d,"board-theme-pastel":"pastel"===d,"board-theme-green":"green"===d,"numbered-levels":["obvious","subtle","very-subtle"].includes(f),"obvious-levels":"obvious"===f,"subtle-levels":"subtle"===f,"very-subtle-levels":"very-subtle"===f},n),a.a.createElement("div",{className:n,onClick:m},v.map(function(t){return a.a.createElement("div",{key:"row-".concat(t.y),className:"row"},t.cells.map(function(t){return a.a.createElement(te,{key:"".concat(t.x,"-").concat(t.y),cell:t,clickable:l||r&&i(t),available:o(t),undoable:i(t),settings:y,makeMove:e.props.makeMove,undo:e.props.undo})}))}))}}]),t}(l.Component));ee.defaultProps={className:"",small:!1,medium:!1,clickable:!1,selected:!1,animated:!1};var te=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).makeMove=function(){n.props.available&&n.props.makeMove?n.props.makeMove(n.props.cell):n.props.undoable&&n.props.undo&&n.props.undo()},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cell,n=e.clickable,l=e.available,r=e.undoable,o=e.settings.theme.numbers,i=e.makeMove,s=e.undo,c=["obvious","subtle","very-subtle"].includes(o)&&t.level>0&&t.level<4?t.level:null;return a.a.createElement("div",{key:"row-".concat(t.x,"-").concat(t.y),className:Z()("cell","level-".concat(t.level),{available:l,undoable:r}),onClick:(i&&l||s&&r)&&n?this.makeMove:null},a.a.createElement("div",{className:Z()("level","level-1")},a.a.createElement("div",{className:Z()("level","level-2")},a.a.createElement("div",{className:Z()("level","level-3")},t.player?a.a.createElement("div",{className:Z()("worker","player-".concat(t.player))},c):4===t.level?a.a.createElement("div",{className:Z()("level","level-4")}):c))))}}]),t}(l.Component);te.defaultProps={clickable:!1,available:!1,undoable:!1};var ne=ee,le=function(e,t){return ae(e)(t)},ae=function(e){if(e===J.Classic)return re;if(e===J.Hex)return oe;throw new Error("Unknown game type of type '".concat(e?e.constructor.name:e,"'"))},re=function(e){return{x:100*e.x,y:100*e.y}},oe=function(e){return{x:100*e.x,y:100*(e.y+(e.x%2===0?.25:-.25))}},ie=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.level;return e?a.a.createElement("g",{transform:"translate(".concat(10,",").concat(10,")")},a.a.createElement("text",{dominantBaseline:"central",textAnchor:"middle",style:{fontSize:"".concat(15,"px")}},e)):null}}]),t}(l.PureComponent),se=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.level;return e?a.a.createElement("g",{transform:"translate(22,22)"},a.a.createElement("circle",{r:15,fill:"#bbb",stroke:"#111",strokeWidth:2}),a.a.createElement("text",{dominantBaseline:"central",textAnchor:"middle",style:{fontSize:"".concat(25,"px")}},e)):null}}]),t}(l.PureComponent),ce=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.level;return e?a.a.createElement("g",{transform:"translate(".concat(50,",").concat(50,")")},a.a.createElement("text",{dominantBaseline:"central",textAnchor:"middle",stroke:"#eee",strokeWidth:6,paintOrder:"stroke",style:{fontSize:"".concat(45,"px")}},e)):null}}]),t}(l.PureComponent),ue=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.level,n=e.type,l=this.constructor.indicatorMap[n];return l?a.a.createElement(l,{level:t}):null}}]),t}(l.PureComponent);ue.indicatorMap={"very-subtle":ie,subtle:se,obvious:ce};var me=ue,pe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.path,r=e.dimensions,o=e.offset;return a.a.createElement(l.Fragment,null,a.a.createElement("g",{id:"piece-".concat(t,"-base"),transform:["translate(".concat(50,",").concat(50,")"),"scale(".concat(.1,",").concat(.1,")"),"translate(".concat(-r.x/2+o.x,",").concat(-r.y/2+o.y,")")].join(",")},n),a.a.createElement("g",{id:"piece-".concat(t,"-white")},a.a.createElement("use",{xlinkHref:"#piece-".concat(t,"-base"),strokeWidth:80,stroke:"#111"}),a.a.createElement("use",{xlinkHref:"#piece-".concat(t,"-base"),fill:"white"})),a.a.createElement("g",{id:"piece-".concat(t,"-black")},a.a.createElement("use",{xlinkHref:"#piece-".concat(t,"-base"),strokeWidth:80,stroke:"#bbb"}),a.a.createElement("use",{xlinkHref:"#piece-".concat(t,"-base"),fill:"black"})))}}]),t}(l.PureComponent),ye=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.colour,l=e.rotated;return a.a.createElement("use",{xlinkHref:"#piece-".concat(t,"-").concat(n),transform:l?this.constructor.rotateTransform:void 0})}}]),t}(l.PureComponent);ye.rotateTransform="rotate(180,".concat(50,",").concat(50,")");var ve=function(e,t){var n=t.path,r=t.dimensions,o=t.offset,p=void 0===o?{x:0,y:0}:o,y=function(t){function l(){return Object(i.a)(this,l),Object(c.a)(this,Object(u.a)(l).apply(this,arguments))}return Object(m.a)(l,t),Object(s.a)(l,[{key:"render",value:function(){return a.a.createElement(pe,{name:e,path:n,dimensions:r,offset:p})}}]),l}(l.PureComponent);y.displayName="".concat(e,"Definition");var v=function(t){function n(){return Object(i.a)(this,n),Object(c.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,t),Object(s.a)(n,[{key:"render",value:function(){var t=this.props,n=t.colour,l=t.rotated;return a.a.createElement(ye,{name:e,colour:n,rotated:l})}}]),n}(l.PureComponent);return v.Definition=y,v.displayName=e,v},he=ve("PiecePawn",{path:a.a.createElement("path",{d:"M105.1 224H80a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h16v5.49c0 44-4.14 86.6-24 122.51h176c-19.89-35.91-24-78.51-24-122.51V288h16a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-25.1c29.39-18.38 49.1-50.78 49.1-88a104 104 0 0 0-208 0c0 37.22 19.71 69.62 49.1 88zM304 448H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"}),dimensions:{x:320,y:480},offset:{x:0,y:-38}}),de=ve("PieceKing",{path:a.a.createElement("path",{d:"M400 448H48a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h352a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm16-288H256v-48h40a8 8 0 0 0 8-8V56a8 8 0 0 0-8-8h-40V8a8 8 0 0 0-8-8h-48a8 8 0 0 0-8 8v40h-40a8 8 0 0 0-8 8v48a8 8 0 0 0 8 8h40v48H32a32 32 0 0 0-30.52 41.54L74.56 416h298.88l73.08-214.46A32 32 0 0 0 416 160z"}),dimensions:{x:448,y:512}}),fe=ve("PieceCircle",{path:a.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"}),dimensions:{x:512,y:512}}),ge=ve("PieceCertificate",{path:a.a.createElement("path",{d:"M458.622 255.92l45.985-45.005c13.708-12.977 7.316-36.039-10.664-40.339l-62.65-15.99 17.661-62.015c4.991-17.838-11.829-34.663-29.661-29.671l-61.994 17.667-15.984-62.671C337.085.197 313.765-6.276 300.99 7.228L256 53.57 211.011 7.229c-12.63-13.351-36.047-7.234-40.325 10.668l-15.984 62.671-61.995-17.667C74.87 57.907 58.056 74.738 63.046 92.572l17.661 62.015-62.65 15.99C.069 174.878-6.31 197.944 7.392 210.915l45.985 45.005-45.985 45.004c-13.708 12.977-7.316 36.039 10.664 40.339l62.65 15.99-17.661 62.015c-4.991 17.838 11.829 34.663 29.661 29.671l61.994-17.667 15.984 62.671c4.439 18.575 27.696 24.018 40.325 10.668L256 458.61l44.989 46.001c12.5 13.488 35.987 7.486 40.325-10.668l15.984-62.671 61.994 17.667c17.836 4.994 34.651-11.837 29.661-29.671l-17.661-62.015 62.65-15.99c17.987-4.302 24.366-27.367 10.664-40.339l-45.984-45.004z"}),dimensions:{x:512,y:512}}),be=ve("PieceSun",{path:a.a.createElement("path",{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"}),dimensions:{x:512,y:512}}),Ee=ve("PieceRocket",{path:a.a.createElement("path",{d:"M505.05 19.1a15.89 15.89 0 0 0-12.2-12.2C460.65 0 435.46 0 410.36 0c-103.2 0-165.1 55.2-211.29 128H94.87A48 48 0 0 0 52 154.49l-49.42 98.8A24 24 0 0 0 24.07 288h103.77l-22.47 22.47a32 32 0 0 0 0 45.25l50.9 50.91a32 32 0 0 0 45.26 0L224 384.16V488a24 24 0 0 0 34.7 21.49l98.7-49.39a47.91 47.91 0 0 0 26.5-42.9V312.79c72.59-46.3 128-108.4 128-211.09.1-25.2.1-50.4-6.85-82.6zM384 168a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"}),dimensions:{x:512,y:512}}),we=ve("PieceBug",{path:a.a.createElement("path",{d:"M511.988 288.9c-.478 17.43-15.217 31.1-32.653 31.1H424v16c0 21.864-4.882 42.584-13.6 61.145l60.228 60.228c12.496 12.497 12.496 32.758 0 45.255-12.498 12.497-32.759 12.496-45.256 0l-54.736-54.736C345.886 467.965 314.351 480 280 480V236c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v244c-34.351 0-65.886-12.035-90.636-32.108l-54.736 54.736c-12.498 12.497-32.759 12.496-45.256 0-12.496-12.497-12.496-32.758 0-45.255l60.228-60.228C92.882 378.584 88 357.864 88 336v-16H32.666C15.23 320 .491 306.33.013 288.9-.484 270.816 14.028 256 32 256h56v-58.745l-46.628-46.628c-12.496-12.497-12.496-32.758 0-45.255 12.498-12.497 32.758-12.497 45.256 0L141.255 160h229.489l54.627-54.627c12.498-12.497 32.758-12.497 45.256 0 12.496 12.497 12.496 32.758 0 45.255L424 197.255V256h56c17.972 0 32.484 14.816 31.988 32.9zM257 0c-61.856 0-112 50.144-112 112h224C369 50.144 318.856 0 257 0z"}),dimensions:{x:512,y:512}}),ke=ve("PieceEye",{path:a.a.createElement("path",{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}),dimensions:{x:512,y:512}}),Oe=ve("PieceUser",{path:a.a.createElement("path",{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}),dimensions:{x:512,y:512}}),Pe=ve("PieceHalloweenWitchHat",{path:a.a.createElement("path",{d:"m503.15112,306.14207c-0.08158,-19.00159 -17.54216,-60.97152 -168.51607,-65.22834l-56.26328,-124.83471l76.29825,31.88264l-114.45191,-123.15047c-15.62768,-10.96294 -68.47535,146.47597 -90.00964,213.1728l0,0c-15.14543,2.38948 -62.92045,11.0826 -99.71439,30.45222c-35.89653,18.84568 -54.83104,35.48317 -49.64961,58.60561c-3.7637,26.02861 5.74707,103.14994 246.53844,113.09401c77.45129,3.20712 270.97346,-48.42768 255.7682,-133.99376zm-240.39978,5.43162c-121.8814,8.58253 -132.04665,-25.29799 -132.04665,-25.29799l11.06991,-24.04705c0,0 33.36383,22.50785 101.67601,21.3258c68.31218,-1.19474 96.66319,-31.58713 96.66319,-31.58713l17.99721,21.89507c-4.4073,28.55043 -95.35967,37.7113 -95.35967,37.7113z"}),dimensions:{x:512,y:512}}),xe=ve("PieceHalloweenCauldron",{path:a.a.createElement("path",{d:"M403.886,427.092c31.805-31.675,51.156-72.843,51.156-117.982c0-39.184-14.643-75.351-39.282-104.954 c2.02-6.265,3.149-12.751,3.149-19.456c0-37.186-32.559-68.257-83.059-85.193l28.483-65.848c5.268-12.211-0.35-26.389-12.568-31.673 c-12.2-5.284-26.376,0.345-31.663,12.554l-32.024,74.065c-13.741-1.849-28.121-2.939-43.145-2.939 c-99.2,0-173.995,42.572-173.995,99.034c0,6.705,1.129,13.191,3.15,19.456c-24.64,29.604-39.289,65.771-39.289,104.954 c0,45.14,19.371,86.317,51.175,117.988l-17.909,24.225c-7.902,10.695-5.643,25.775,5.053,33.689 c4.297,3.184,9.314,4.721,14.299,4.721c7.374,0,14.668-3.379,19.39-9.772l17.154-23.22c34.224,20.78,75.895,33.1,120.973,33.1 c45.072,0,86.731-12.32,120.935-33.09l17.155,23.21c4.74,6.393,12.016,9.772,19.401,9.772c4.974,0,9.99-1.537,14.306-4.715 c10.696-7.911,12.968-22.99,5.065-33.695L403.886,427.092z M244.915,236c-78.418,0-125.798-29.477-125.798-51.3 c0-20.734,49.014-50.853,125.816-50.853c8.044,0,15.73,0.399,23.128,1.01l-12.19,28.209c-3.218,7.447-2.473,16.014,1.983,22.794 c4.456,6.78,12.024,10.862,20.138,10.862c9.611,0,18.303-5.711,22.118-14.532l16.543-38.252 c34.191,10.619,54.079,27.573,54.079,40.762C370.731,207.889,320.981,236,244.915,236z"}),dimensions:{x:512,y:512}}),Ce=ve("PieceHalloweenBat",{path:a.a.createElement("path",{d:"m520.84272,171.44399c-8.83353,-12.69106 -16.6399,-27.11688 -22.85989,-42.92364c-9.91775,-25.0968 -14.56277,-50.31915 -14.5057,-73.25893c0.01141,-8.66234 -10.44274,-13.31877 -16.87957,-7.50964c-28.86304,25.99842 -77.48168,46.1763 -136.24632,55.95709c5.66076,-27.88153 5.47816,-60.38526 -10.4998,-91.3825c-2.86462,-5.55805 -10.62534,-6.19716 -14.28886,-1.14128c-4.65643,6.42542 -9.55254,15.94372 -9.55254,27.61904l-68.13457,0c0,-11.67532 -4.88469,-21.19362 -9.54112,-27.61904c-3.66352,-5.06729 -11.41283,-4.42818 -14.28886,1.14128c-15.97796,30.98582 -16.14915,63.4439 -10.48839,91.32544c-58.76464,-9.78079 -107.3947,-29.94726 -136.24632,-55.93426c-6.43683,-5.79772 -16.87957,-1.12987 -16.87957,7.53247c0.06848,22.93978 -4.58796,48.17354 -14.5057,73.25893c-6.21999,15.80676 -14.02636,30.24399 -22.85989,42.92364c-6.6765,9.56395 -1.92877,22.98543 9.19874,26.50058c10.19165,3.207 20.60015,7.74931 30.81463,13.60409c35.3227,20.23494 56.25382,50.76425 60.5108,76.28333c1.17552,7.0303 3.62928,9.74655 13.30736,8.19441c24.05824,-3.90319 56.71033,-1.27824 88.11843,16.71979c17.29043,9.91775 31.5907,22.26642 41.93072,35.25422c3.36678,4.22275 7.79496,6.99606 15.00787,6.99606c7.07595,0 11.54978,-2.79614 14.90515,-7.00748c10.35143,-12.99921 24.69736,-25.32506 41.9992,-35.23139c31.41951,-18.00944 64.07161,-20.63439 88.15267,-16.7312c9.67808,1.56356 12.12042,-1.17552 13.30736,-8.20582c4.25698,-25.50767 25.19952,-56.03698 60.52222,-76.28333c10.22589,-5.86619 20.65722,-10.39708 30.81463,-13.60409c11.11609,-3.49232 15.85242,-16.91381 9.18733,-26.47776z"}),dimensions:{x:512,y:512},offset:{x:0,y:100}}),Re=ve("PieceHalloweenSpider",{path:a.a.createElement("path",{d:"M392.236,256.85c-3.204-3.473-7.704-5.451-12.436-5.451h-20.374c-3.501-15.538-8.927-30.108-16.075-43.152 l44.043-13.528l68.976,73.267c3.34,3.542,7.826,5.325,12.339,5.325c4.169,0,8.332-1.528,11.608-4.603 c6.798-6.41,7.109-17.127,0.712-23.938l-76.206-80.945c-4.416-4.697-11.13-6.464-17.299-4.581l-65.142,20.012 c-6.842-7.334-14.321-13.819-22.387-19.144l79.475-60.708l63.803,37.227c8.073,4.703,18.425,1.968,23.151-6.096 c4.713-8.08,1.987-18.447-6.086-23.161l-73.59-42.94c-5.917-3.447-13.362-2.994-18.82,1.176l-61.323,46.84 c-2.544-8.789-7.769-16.651-14.916-23.168l9.129-19.879c3.903-8.5,0.168-18.554-8.333-22.448c-8.532-3.92-18.554-0.182-22.445,8.325 l-8.448,18.416c-5.988-1.463-12.204-2.49-18.769-2.49s-12.786,1.026-18.768,2.49l-8.455-18.416 c-3.885-8.507-13.938-12.23-22.439-8.325c-8.501,3.894-12.236,13.948-8.338,22.448l9.135,19.879 c-6.785,6.177-11.744,13.593-14.405,21.838l-61.835-47.231c-5.456-4.151-12.901-4.629-18.82-1.167l-73.597,42.94 c-8.066,4.713-10.798,15.085-6.085,23.161c4.713,8.08,15.085,10.814,23.157,6.095l63.802-37.227l80.732,61.669 c-8.054,5.166-15.577,11.384-22.439,18.555l-66.347-20.384c-6.17-1.884-12.87-0.107-17.298,4.58L4.613,243.058 c-6.402,6.814-6.085,17.528,0.712,23.938c3.27,3.086,7.439,4.607,11.608,4.607c4.5,0,8.993-1.787,12.333-5.326l68.981-73.271 l44.916,13.794c-7.296,12.955-12.916,27.402-16.586,42.888h-20.736c-4.733,0-9.232,1.978-12.437,5.451L4.496,351.453 c-6.35,6.872-5.923,17.587,0.958,23.927c3.256,3.006,7.375,4.49,11.478,4.49c4.565,0,9.11-1.835,12.45-5.447l83.879-90.868h8.72 c-0.103,2.606-0.317,5.17-0.317,7.808c0,82.225,54.247,148.879,121.156,148.879c66.91,0,121.156-66.654,121.156-148.879 c0-2.059-0.181-4.06-0.252-6.095h8.649l83.878,90.867c3.341,3.612,7.892,5.448,12.456,5.448c4.098,0,8.215-1.489,11.478-4.49 c6.876-6.341,7.31-17.059,0.959-23.928L392.236,256.85z"}),dimensions:{x:512,y:512}}),Se=ve("PieceHalloweenCat",{path:a.a.createElement("path",{d:"M535.892,69.273c-1.147-7.46-7.924-12.77-15.396-12.135c-18.883,1.568-36.254,5.171-53.12,11.036 c-26.556,9.215-50.526,22.663-71.3,39.987l-0.308-0.086c-14.421-3.867-29.328-7.866-44.305-11.164 c-22.579-4.957-45.793-7.843-68.993-8.569c-21.208-0.665-43.206,0.343-67.381,3.097c-24.638,2.791-49.336,8.058-73.413,15.628 c-0.21,0.065-0.397,0.119-0.567,0.166c-1.97-1.857-3.953-3.192-5.603-4.301c-0.621-0.429-1.265-0.84-1.849-1.304 c-21.19-16.97-46.129-29.802-74.134-38.137c-13.444-4.004-26.71-6.356-40.545-7.206C11.8,55.825,5.42,60.755,4.011,67.791 c-0.182,0.913-0.383,1.801-0.574,2.681c-0.497,2.28-1.013,4.632-1.363,7.236c-3.068,22.953-2.728,46.419,0.99,69.745 c4.587,28.742,13.229,55.232,25.692,78.808c-6.198,14.209-10.097,30.103-11.889,48.472c-3.624,37.075,3.206,72.854,20.302,106.335 c13.562,26.546,33.085,49.106,58.047,67.047c22.906,16.461,44.463,24.021,70.319,31.83c25.86,7.812,52.794-18.394,103.458-18.053 c47.781,0.304,59.902,19.845,93.234,19.845c0,0,1.218-0.275,1.204-0.275c18.337-5.021,34.737-11.397,50.143-19.49 c27.872-14.626,51.054-34.909,68.896-60.294c19.695-28.012,31.298-59.897,34.504-94.77c2.525-27.56-1.115-54.252-10.889-79.539 l1.956-4.331c5.596-12.405,11.383-25.219,16.186-38.447c7.761-21.406,12.134-44.354,13.366-70.146 C538.166,102.325,538.497,86.233,535.892,69.273z M228.288,339.606c0,0-55.298,5.619-85.933-25.015 c-30.635-30.645-25.013-85.936-25.013-85.936s55.293-5.612,85.928,25.022C233.909,284.311,228.288,339.606,228.288,339.606z  M401.251,314.591c-30.635,30.634-85.93,25.015-85.93,25.015s-5.614-55.295,25.02-85.928 c30.631-30.635,85.926-25.022,85.926-25.022S431.891,283.957,401.251,314.591z"}),dimensions:{x:512,y:512}}),ze=ve("PieceHalloweenTombstone",{path:a.a.createElement("g",null,a.a.createElement("path",{d:"m310.57959,214.18901c18.11361,-19.31361 -3.7406,-43.37905 -25.98583,-38.09752l0,42.67408c9.2552,1.74895 18.77428,3.11653 25.98583,-4.57656z"}),a.a.createElement("path",{d:"m129.70544,175.71203l0,42.67408c1.4138,0.01734 2.82568,0.04045 4.23563,0.07705c40.18933,0.00193 36.10009,-50.48851 -4.23563,-42.75112z"}),a.a.createElement("path",{d:"m413.15147,392.28371l-16.74989,0l0,-215.12898c0,-40.68243 -13.72389,-78.15395 -36.78388,-108.06144l-22.93479,7.21154l9.8003,27.57684l0.81284,2.2748l-1.54285,1.56597l-23.05228,23.42789c-1.05361,1.07287 -2.77752,1.08443 -3.85232,0.03274c-1.02472,-1.01509 -1.07865,-2.65617 -0.13676,-3.7329l20.04555,-22.91938l-12.48344,-29.52418l-1.64687,-3.89277l4.24718,-2.15345l21.51906,-10.90592c-32.4115,-35.66478 -79.16711,-58.05447 -131.15032,-58.05447c-47.67246,0 -90.9398,18.83399 -122.78115,49.45994l25.07861,12.71458l2.53097,1.28282l0.31589,2.24205l7.99742,56.33826c0.2138,1.48892 -0.8244,2.86613 -2.31332,3.07993c-1.42151,0.20032 -2.74285,-0.74542 -3.04333,-2.12841l-11.27574,-52.83457l-30.02113,-9.43818c-27.17619,31.13831 -43.64679,71.86504 -43.64679,116.44023l0,215.12898l-16.75181,0c-10.63818,0 -19.2616,8.62342 -19.2616,19.2616l0,18.9226c0,10.63433 8.62342,19.2616 19.2616,19.2616l387.82079,0c10.63818,0 19.2616,-8.62727 19.2616,-19.2616l0,-18.9226c-0.00193,-10.63818 -8.62535,-19.26353 -19.26353,-19.26353zm-144.04211,-222.43298c5.59164,-0.28122 11.37783,-0.57207 17.23143,-0.57207c13.94155,0 31.1229,1.44847 40.31261,12.73577c0.00385,0.00385 0.0077,0.0077 0.01156,0.01156l0.0077,0.01541c0.00385,0.00578 0.01156,0.01156 0.01541,0.01734c0.0077,0.0077 0.01541,0.01541 0.01926,0.02504c0.00385,0.00578 0.0077,0.01156 0.01541,0.01926c6.75697,8.36531 8.55408,16.01602 5.34124,22.74025c-5.38362,11.27959 -23.59931,17.36819 -37.99736,17.36819c-3.28025,0 -9.09533,-0.89374 -9.09533,-0.89374s-4.54959,37.16719 2.2382,44.46541c1.52745,1.63724 3.37078,2.8199 5.51267,3.54221l-32.98549,0c10.84621,-4.50721 15.75406,-26.9778 15.75406,-49.26732c0,-22.61312 -4.91171,-45.40923 -15.76947,-49.79509c2.96629,-0.09246 6.11556,-0.2504 9.3881,-0.4122zm-59.43938,0.48154l34.88854,0c-3.75794,1.56019 -7.90881,5.69758 -11.09468,15.3149c-2.9085,8.77944 -3.1069,20.6677 -3.1069,33.48244c0,22.0006 3.46516,45.50553 14.04749,50.19381l-34.89624,0c3.74253,-1.55826 7.88955,-5.69373 11.05616,-15.3149c2.89117,-8.77173 3.13001,-20.66192 3.13001,-33.46896c0.00385,-22.00831 -3.48635,-45.51709 -14.02437,-50.20729zm-104.76,-0.05201c3.66741,-0.07705 7.46002,-0.23692 11.41443,-0.40257c5.73803,-0.23884 11.6629,-0.48732 17.50109,-0.48732c11.63979,0 20.4173,1.0305 27.62114,3.24558c11.07542,3.40545 17.20446,10.95407 16.81538,20.71393c-0.47769,12.00961 -10.52647,23.21986 -23.3701,26.07636c-0.59518,0.13098 -1.08443,0.55088 -1.29823,1.1191c-0.2138,0.56629 -0.13483,1.20578 0.22151,1.69887l21.18006,29.4298c6.29854,8.78714 12.74155,15.2263 22.73062,17.64748l-21.625,0l-34.1932,-47.22752c-0.35056,-0.48732 -0.92263,-0.76276 -1.5313,-0.74542c-1.7374,0.06742 -3.79646,0.13676 -5.89598,0.13676c-1.68154,0 -3.20898,-0.04238 -4.66516,-0.13483c-0.48924,-0.02889 -0.98619,0.14446 -1.35024,0.48539c-0.36212,0.34286 -0.56822,0.81862 -0.56822,1.31749c0,2.50016 -0.22921,5.6398 -0.46228,8.96435c-0.84558,11.75536 -1.89919,26.37876 4.88667,33.66735c1.52359,1.63531 3.36308,2.81605 5.50304,3.53643l-32.95275,0c10.89051,-4.50721 15.8157,-26.97973 15.8157,-49.27118c0,-22.57652 -4.91363,-45.33411 -15.77718,-49.77005z"})),dimensions:{x:512,y:512},offset:{x:50,y:50}}),Ae=ve("PieceHalloweenPumpkin",{path:a.a.createElement("path",{d:"m468.74161,145.38332c-25.52721,-31.3253 -52.92613,-46.95841 -82.22343,-46.95841c-20.72406,0 -40.16348,8.29877 -58.36017,25.00115c-12.62923,-9.61583 -26.26865,-16.44316 -40.93732,-20.48009c-3.03246,-39.3801 -20.45722,-67.93597 -52.29333,-85.65997l-33.33805,23.54115c21.70947,14.12736 34.34823,33.82218 37.88389,59.08636c-21.72472,2.535 -41.93416,10.61267 -60.63213,24.23112c-18.68273,-17.16363 -38.64438,-25.72163 -59.85448,-25.72163c-29.81764,0 -56.60092,15.63311 -80.33839,46.95841c-25.77309,32.32024 -38.6482,70.49765 -38.6482,114.44265c0,11.10824 1.014,22.26984 3.01722,33.35139c7.58211,45.47172 28.81127,85.15297 63.6646,118.97324c31.32339,30.84689 60.38435,46.24556 87.16381,46.24556c0.6328,0 1.28465,-0.02287 1.93651,-0.06671c30.65438,-9.40998 63.19572,-14.48378 96.93403,-14.48378c28.17847,0 55.52974,3.54137 81.64019,10.18954l-0.14104,-0.18679l0.61564,0.30496c4.98994,1.27703 9.93032,2.67604 14.82877,4.17988c0.66329,0.04003 1.32658,0.0629 1.98797,0.0629c26.78518,0 55.56786,-15.39867 86.39569,-46.24556l0,-0.00191c33.84124,-33.82027 55.57167,-73.49962 65.16463,-118.97324c2.55406,-12.61017 3.79296,-25.00115 3.79296,-37.12911c0.00191,-42.46213 -12.76075,-79.34345 -38.25937,-110.66113zm-373.25996,61.40407l108.37772,37.1577c-9.0993,24.7305 -25.51387,37.10433 -49.26277,37.10433c-6.56812,0 -12.38717,-1.0159 -17.42666,-3.03056l0,0c-32.34883,-13.12289 -46.2284,-36.88323 -41.68828,-71.23146zm96.2574,231.91396c0.50509,-0.51081 1.26559,-1.27322 2.26244,-2.27578l0.75859,0.77193c-0.50509,0.49938 -1.50956,0.99303 -3.02103,1.50384zm184.91743,-70.48812l-249.34824,0l-18.17954,-50.80093l48.5099,32.62139l39.39535,-32.62139l53.07289,37.14054l55.32199,-39.37439l43.19022,37.12911l50.78568,-31.82467l-22.74825,47.73034zm0.00191,-90.19437c-5.56555,2.01275 -11.36364,3.03056 -17.42095,3.03056c-24.25781,0 -40.68953,-12.37383 -49.27421,-37.10433l108.3701,-37.1596c4.05218,34.34823 -9.8617,58.11048 -41.67494,71.23337z"}),dimensions:{x:512,y:512}}),je=ve("PieceHalloweenGhost",{path:a.a.createElement("g",null,a.a.createElement("path",{d:"m201.144531 256c-17.300781 0-36.574219 30.042969-36.574219 73.144531-.179687 13.222657.574219 26.441407 2.25 39.558594 20.023438-16.175781 48.621094-16.175781 68.644532 0 1.675781-13.117187 2.429687-26.335937 2.25-39.558594 0-43.101562-19.273438-73.144531-36.570313-73.144531zm0 0"}),a.a.createElement("path",{d:"m201.144531 374.855469c-11.320312-.027344-22.007812 5.222656-28.902343 14.199219 6.390624 13.230468 16.449218 13.230468 28.902343 13.230468 12.449219 0 22.507813 0 28.898438-13.230468-6.894531-8.976563-17.582031-14.226563-28.898438-14.199219zm0 0"}),a.a.createElement("path",{d:"m146.285156 178.285156c0-22.722656-8.1875-41.140625-18.285156-41.140625s-18.285156 18.417969-18.285156 41.140625 8.1875 41.144532 18.285156 41.144532 18.285156-18.421876 18.285156-41.144532zm0 0"}),a.a.createElement("path",{d:"m9.390625 137.398438c-6.011719 5.988281-9.390625 14.125-9.390625 22.609374 0 8.488282 3.378906 16.621094 9.390625 22.613282l27.179687 27.234375v-22.691407c.042969-19.089843 2.753907-38.082031 8.046876-56.421874-12.015626-5.023438-25.871094-2.40625-35.226563 6.65625zm0 0"}),a.a.createElement("path",{d:"m292.570312 178.285156c0-22.722656-8.1875-41.140625-18.285156-41.140625s-18.285156 18.417969-18.285156 41.140625 8.1875 41.144532 18.285156 41.144532 18.285156-18.421876 18.285156-41.144532zm0 0"}),a.a.createElement("path",{d:"m434.707031 387.328125c-9.484375-16.925781-14.359375-36.042969-14.136719-55.441406v-66.40625c-2.863281-1.125-4.96875-3.617188-5.601562-6.632813-.632812-3.011718.296875-6.140625 2.464844-8.324218l67.886718-67.886719c12.472657-12.507813 12.472657-32.75 0-45.257813-12.667968-12.078125-32.589843-12.078125-45.257812 0l-67.882812 67.886719c-3.589844 3.464844-9.292969 3.414063-12.816407-.109375-3.527343-3.527344-3.578125-9.230469-.113281-12.816406l55.351562-55.351563c-20.773437-80.652343-93.511718-137.0117185-176.796874-136.988281h-2.832032c-78.738281 1.859375-147.5 53.765625-170.863281 128.976562-6.140625 18.785157-9.261719 38.425782-9.253906 58.1875v178.550782c.078125 14.484375 3.398437 28.769531 9.71875 41.800781 29.476562 61.511719 121.363281 104.484375 223.425781 104.484375 100.761719 0 178.148438-32.171875 215.863281-88.960938-28.007812 2.40625-54.90625-11.484374-69.15625-35.710937zm-343.277343-209.042969c0-33.882812 15.722656-59.429687 36.570312-59.429687 20.84375 0 36.570312 25.546875 36.570312 59.429687 0 33.882813-15.726562 59.429688-36.570312 59.429688-20.847656 0-36.570312-25.546875-36.570312-59.429688zm157.859374 210.960938c-.171874 1.1875-.578124 2.324218-1.199218 3.347656-9.296875 25.070312-26.128906 27.976562-46.945313 27.976562-20.820312 0-37.652343-2.90625-46.949219-27.976562-.621093-1.023438-1.027343-2.160156-1.199218-3.347656-5.195313-19.589844-7.457032-39.847656-6.710938-60.101563 0-51.265625 24.101563-91.429687 54.859375-91.429687 30.753907 0 54.855469 40.164062 54.855469 91.429687.75 20.253907-1.511719 40.511719-6.710938 60.101563zm24.996094-151.53125c-20.84375 0-36.570312-25.546875-36.570312-59.429688 0-33.882812 15.726562-59.429687 36.570312-59.429687 20.847656 0 36.570313 25.546875 36.570313 59.429687 0 33.882813-15.722657 59.429688-36.570313 59.429688zm0 0"})),dimensions:{x:512,y:512}}),Ie=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.colour,l=e.rotated,r=this.constructor.pieceStyleMap[t];return a.a.createElement(r,{colour:n,rotated:l})}}]),t}(l.PureComponent);Ie.pieceStyleMap={pawn:he,king:de,circle:fe,certificate:ge,sun:be,rocket:Ee,bug:we,eye:ke,user:Oe,"halloween-witch-hat":Pe,"halloween-cauldron":xe,"halloween-bat":Ce,"halloween-spider":Re,"halloween-cat":Se,"halloween-tombstone":ze,"halloween-pumpkin":Ae,"halloween-ghost":je};var Me=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return Object.values(Ie.pieceStyleMap).map(function(e){return a.a.createElement(e.Definition,{key:e.displayName||e.name})})}}]),t}(l.PureComponent);Ie.Definitions=Me;var _e=Ie,Te=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.paths;return a.a.createElement(l.Fragment,null,a.a.createElement("g",{id:"cell-".concat(t,"-border"),className:"cell-border"},n.border),a.a.createElement("g",{id:"cell-".concat(t,"-0"),className:"cell-0"},n.level0),a.a.createElement("g",{id:"cell-".concat(t,"-1"),className:"cell-1"},n.level1),a.a.createElement("g",{id:"cell-".concat(t,"-2"),className:"cell-2"},n.level2),a.a.createElement("g",{id:"cell-".concat(t,"-3"),className:"cell-3"},n.level3),a.a.createElement("g",{id:"cell-".concat(t,"-4"),className:"cell-4"},n.level4))}}]),t}(l.PureComponent);Te.defaultBorder=a.a.createElement("g",null,a.a.createElement("rect",{fill:"transparent",width:100,height:100}),a.a.createElement("path",{className:"border",d:"M0,0h".concat(100,"v").concat(100,"h-").concat(100,"z M").concat(5,",").concat(5,"v").concat(90,"h").concat(90,"v-").concat(90,"z")})),Te.defaultBorderHex=a.a.createElement("g",null,a.a.createElement("rect",{fill:"transparent",width:100,height:100}),a.a.createElement("path",{className:"border",d:"\n        M ".concat(function(){var e=0,t=0;return[0,1,2,3,4,5].map(function(e){return e/6*Math.PI*2}).map(function(n){var l=e+75*Math.cos(n),a=t+75*Math.sin(n);return"".concat(l,",").concat(a)}).join("L")}()," z \n        M ").concat([0,1,2,3,4,5].reverse().map(function(e){return e/6*Math.PI*2}).map(function(e){return"".concat(90*Math.cos(e)*1.5/2,",").concat(90*Math.sin(e)*1.5/2)}).concat("L")," z \n      ")}));var Le=function(e,t,n){var r=function(e){function l(){return Object(i.a)(this,l),Object(c.a)(this,Object(u.a)(l).apply(this,arguments))}return Object(m.a)(l,e),Object(s.a)(l,[{key:"render",value:function(){return a.a.createElement(Te,{name:t,paths:n})}}]),l}(l.PureComponent);return r.displayName=e,r},Ne=Le("OriginalCellDefinitions","original",{border:Te.defaultBorder,level0:a.a.createElement("rect",{className:"border fill",width:90,height:90,transform:"translate(".concat(5,",").concat(5,")")}),level1:a.a.createElement("g",null,a.a.createElement("rect",{className:"border",width:90,height:90,transform:"translate(".concat(5,",").concat(5,")")}),a.a.createElement("rect",{className:"fill",width:80,height:80,transform:"translate(".concat(10,",").concat(10,")")})),level2:a.a.createElement("g",null,a.a.createElement("rect",{className:"border",width:80,height:80,transform:"translate(".concat(10,",").concat(10,")")}),a.a.createElement("rect",{className:"fill",width:70,height:70,transform:"translate(".concat(15,",").concat(15,")")})),level3:a.a.createElement("g",null,a.a.createElement("rect",{className:"border",width:70,height:70,transform:"translate(".concat(15,",").concat(15,")")}),a.a.createElement("rect",{className:"fill",width:60,height:60,transform:"translate(".concat(20,",").concat(20,")")})),level4:a.a.createElement("g",null,a.a.createElement("rect",{className:"border",width:60,height:60,transform:"translate(".concat(20,",").concat(20,")")}),a.a.createElement("rect",{className:"fill",width:50,height:50,transform:"translate(".concat(25,",").concat(25,")")}))}),De=Le("HalloweenCellDefinitions","halloween",{border:Te.defaultBorder,level0:a.a.createElement("path",{className:"fill",transform:"scale(0.21)",d:"m475.484375 292.628906h18.285156c8.34375.027344 15.640625-5.609375 17.71875-13.691406 2.074219-8.082031-1.605469-16.539062-8.933593-20.53125.082031-.433594.132812-.875.148437-1.316406.09375-.339844.164063-.683594.210937-1.035156v-171.820313c6.503907-11.746094 9.664063-25.046875 9.140626-38.464844 0-27.902343-10.832032-45.7148435-18.285157-45.7148435-7.449219 0-18.285156 17.8125005-18.285156 45.7148435-.523437 13.417969 2.636719 26.71875 9.144531 38.464844v109.511719c-11.957031-32.042969-32.140625-60.375-58.515625-82.148438-4.039062-3.027344-9.769531-2.210937-12.800781 1.828125-3.027344 4.042969-2.210938 9.773438 1.828125 12.800781 49.691406 37.265626 67 117.863282 69.332031 129.828126h-27.273437c0-2.53125-.492188-62.117188-43.492188-72.867188-3.179687-.820312-6.550781.125-8.839843 2.476562-2.289063 2.355469-3.140626 5.753907-2.230469 8.90625.90625 3.15625 3.4375 5.578126 6.625 6.355469 29.121093 7.277344 29.652343 54.527344 29.652343 55.128907h-173.488281c2.828125-12.214844 22.457031-88.640626 77.449219-120.0625 4.253906-2.566407 5.679688-8.054688 3.21875-12.363282-2.464844-4.3125-7.917969-5.871094-12.285156-3.507812-33.832032 19.34375-55.425782 52.480468-68.574219 81.003906v-116.890625c6.492187-11.75 9.640625-25.050781 9.105469-38.464844 0-27.902343-10.832032-45.7148435-18.285156-45.7148435-7.449219 0-18.285157 17.8125005-18.285157 45.7148435-.523437 13.417969 2.640625 26.71875 9.144531 38.464844v120.339844c-15.261718-33.203125-38.578124-62.0625-67.832031-83.960938-4.109375-2.933593-9.820312-1.980469-12.753906 2.128907-2.933594 4.113281-1.980469 9.824218 2.128906 12.757812 55.167969 39.402344 75.054688 108.496094 78.171875 120.554688h-173.429687c0-.601563.53125-47.851563 29.648437-55.128907 4.867188-1.257812 7.804688-6.203125 6.585938-11.074219-1.222656-4.875-6.144532-7.851562-11.027344-6.664062-43 10.75-43.492188 70.335938-43.492188 72.867188h-27.429687c.714844-7.988282 9.4375-91.675782 60.34375-129.828126 2.613281-1.960937 3.980469-5.164062 3.589844-8.40625-.390625-3.242187-2.480469-6.03125-5.484375-7.316406-3.003906-1.28125-6.464844-.863281-9.078125 1.09375-22.324219 17.949219-39.382813 41.597656-49.371094 68.445313v-95.808594c6.503906-11.746094 9.667969-25.046875 9.144531-38.464844 0-27.902343-10.835937-45.7148435-18.289062-45.7148435-7.449219 0-18.2851565 17.8125005-18.2851565 45.7148435-.5234375 13.417969 2.6406245 26.71875 9.1445315 38.464844v171.820313c.054687.488281.152343.96875.292969 1.4375 0 .292968 0 .601562.109374.914062-7.320312 3.988281-11 12.433594-8.9375 20.507812 2.0625 8.078126 9.34375 13.722657 17.675782 13.714844h54.859375c20.199219 0 36.570312 16.371094 36.570312 36.570313s-16.371093 36.570312-36.570312 36.570312h-36.570313c-10.101562 0-18.289062 8.1875-18.289062 18.285157 0 10.101562 8.1875 18.285156 18.289062 18.285156h128c20.195313 0 36.570313 16.375 36.570313 36.574218 0 20.195313-16.375 36.570313-36.570313 36.570313h-118.859375c-10.097656 0-18.285156 8.1875-18.285156 18.285156 0 10.101563 8.1875 18.285157 18.285156 18.285157h448c10.101563 0 18.285157-8.183594 18.285157-18.285157 0-10.097656-8.183594-18.285156-18.285157-18.285156h-36.570312c-20.199219 0-36.570313-16.375-36.570313-36.570313 0-20.199218 16.371094-36.574218 36.570313-36.574218h36.570312c10.101563 0 18.285157-8.183594 18.285157-18.285156 0-10.097657-8.183594-18.285157-18.285157-18.285157h-18.285156c-20.199219 0-36.570313-16.371093-36.570313-36.570312s16.371094-36.570313 36.570313-36.570313zm-338.285156 0c0-5.050781 4.09375-9.144531 9.140625-9.144531h64c5.050781 0 9.144531 4.09375 9.144531 9.144531 0 5.046875-4.09375 9.140625-9.144531 9.140625h-64c-5.046875 0-9.140625-4.09375-9.140625-9.140625zm27.429687 54.855469c-5.050781 0-9.144531-4.09375-9.144531-9.144531 0-5.046875 4.09375-9.140625 9.144531-9.140625h228.570313c5.050781 0 9.140625 4.09375 9.140625 9.140625 0 5.050781-4.089844 9.144531-9.140625 9.144531zm27.425782 36.570313c0-5.046876 4.09375-9.140626 9.144531-9.140626h54.855469c5.050781 0 9.144531 4.09375 9.144531 9.140626 0 5.050781-4.09375 9.144531-9.144531 9.144531h-54.855469c-5.050781 0-9.144531-4.09375-9.144531-9.144531zm182.859374 36.574218c5.046876 0 9.140626 4.09375 9.140626 9.140625 0 5.050781-4.09375 9.144531-9.140626 9.144531h-118.859374c-5.046876 0-9.140626-4.09375-9.140626-9.144531 0-5.046875 4.09375-9.140625 9.140626-9.140625zm-64 64h-91.429687c-5.050781 0-9.144531-4.09375-9.144531-9.144531s4.09375-9.144531 9.144531-9.144531h91.429687c5.046876 0 9.140626 4.09375 9.140626 9.144531s-4.09375 9.144531-9.140626 9.144531zm91.425782 0h-54.855469c-5.050781 0-9.144531-4.09375-9.144531-9.144531s4.09375-9.144531 9.144531-9.144531h54.855469c5.050781 0 9.144531 4.09375 9.144531 9.144531s-4.09375 9.144531-9.144531 9.144531zm0-91.429687h-109.710938c-5.050781 0-9.144531-4.09375-9.144531-9.144531 0-5.046876 4.09375-9.140626 9.144531-9.140626h109.710938c5.050781 0 9.144531 4.09375 9.144531 9.140626 0 5.050781-4.09375 9.144531-9.144531 9.144531zm0-91.429688h-82.285156c-5.046876 0-9.140626-4.09375-9.140626-9.140625 0-5.050781 4.09375-9.144531 9.140626-9.144531h82.285156c5.050781 0 9.144531 4.09375 9.144531 9.144531 0 5.046875-4.09375 9.140625-9.144531 9.140625zm0 0"}),level1:a.a.createElement("g",{className:"fill",transform:"translate(-1,6),scale(0.33,0.33)"},a.a.createElement("path",{d:"m221.30057,128.34535c12.80287,-11.57301 -2.64389,-25.9934 -18.36703,-22.82862l0,25.57096c6.54166,1.048 13.26984,1.86747 18.36703,-2.74234z"}),a.a.createElement("path",{d:"m93.457,105.28936l0,25.57096c0.99929,0.01039 1.99722,0.02424 2.99378,0.04617c28.4062,0.00115 25.51589,-30.25349 -2.99378,-25.61713z"}),a.a.createElement("path",{d:"m293.79936,235.06243l-11.83898,0l0,-128.90859c0,-24.37754 -9.70018,-46.83105 -25.9992,-64.75208l-16.21053,4.32127l6.92695,16.52446l0.57452,1.36309l-1.0905,0.93835l-16.29357,14.03835c-0.7447,0.64288 -1.96318,0.64981 -2.72286,0.01962c-0.72428,-0.60826 -0.7624,-1.59162 -0.09666,-2.23681l14.16839,-13.73365l-8.82342,-17.69134l-1.16402,-2.33261l3.00195,-1.29038l15.20988,-6.53499c-22.90876,-21.37089 -55.95607,-34.78713 -92.6983,-34.78713c-33.69535,0 -64.27712,11.28562 -86.78289,29.63716l17.7258,7.61877l1.78892,0.76869l0.22327,1.34347l5.65265,33.75875c0.15112,0.89218 -0.58269,1.71743 -1.63508,1.84554c-1.00473,0.12004 -1.93867,-0.44667 -2.15106,-1.27537l-7.9698,-31.65929l-21.21922,-5.65551c-19.20839,18.65855 -30.84997,43.06264 -30.84997,69.77278l0,128.90859l-11.84034,0c-7.51917,0 -13.61428,5.16729 -13.61428,11.54185l0,11.33871c0,6.37225 6.09511,11.54185 13.61428,11.54185l274.11544,0c7.51917,0 13.61428,-5.16959 13.61428,-11.54185l0,-11.33871c-0.00136,-6.37456 -6.09648,-11.543 -13.61565,-11.543zm-101.81034,-133.28526c3.95223,-0.16851 8.04196,-0.34279 12.17934,-0.34279c9.85402,0 21.99796,0.86795 28.49333,7.63147c0.00272,0.00231 0.00545,0.00462 0.00817,0.00693l0.00545,0.00923c0.00272,0.00346 0.00817,0.00693 0.01089,0.01039c0.00545,0.00462 0.01089,0.00923 0.01361,0.015c0.00272,0.00346 0.00545,0.00693 0.01089,0.01154c4.77589,5.01262 6.0461,9.59705 3.77524,13.62631c-3.80519,6.75891 -16.68022,10.40728 -26.8569,10.40728c-2.31851,0 -6.42866,-0.53554 -6.42866,-0.53554s-3.21569,22.27115 1.58198,26.64436c1.07961,0.98106 2.3825,1.68973 3.89641,2.12255l-23.31446,0c7.6662,-2.70079 11.13512,-16.16551 11.13512,-29.52174c0,-13.55013 -3.47164,-27.20991 -11.14601,-29.83799c2.0966,-0.0554 4.32254,-0.15004 6.6356,-0.247zm-42.01232,0.28855l24.65955,0c-2.65615,0.93489 -5.59002,3.41408 -7.84183,9.17692c-2.05576,5.26077 -2.19598,12.3844 -2.19598,20.06319c0,13.1831 2.44921,27.26762 9.9289,30.0769l-24.665,0c2.64526,-0.93374 5.57641,-3.41177 7.8146,-9.17692c2.0435,-5.25616 2.21232,-12.38094 2.21232,-20.05512c0.00272,-13.18772 -2.46419,-27.27454 -9.91256,-30.08498zm-74.04537,-0.03116c2.59216,-0.04617 5.27281,-0.14196 8.06782,-0.24122c4.0557,-0.14312 8.24345,-0.29201 12.36994,-0.29201c8.22711,0 14.43114,0.61749 19.52288,1.9448c7.82821,2.0406 12.16028,6.56385 11.88527,12.4121c-0.33763,7.19634 -7.44021,13.9137 -16.51821,15.62535c-0.42068,0.07848 -0.76648,0.3301 -0.9176,0.67058c-0.15112,0.33933 -0.0953,0.72252 0.15656,1.01799l14.97027,17.63479c4.45187,5.26539 9.00585,9.12383 16.06622,10.57464l-15.28476,0l-24.16808,-28.29946c-0.24778,-0.29201 -0.65212,-0.45706 -1.08234,-0.44667c-1.22801,0.0404 -2.68338,0.08195 -4.16733,0.08195c-1.18853,0 -2.26814,-0.02539 -3.29738,-0.08079c-0.3458,-0.01731 -0.69705,0.08656 -0.95436,0.29085c-0.25595,0.20544 -0.40162,0.49053 -0.40162,0.78946c0,1.49813 -0.16201,3.37945 -0.32674,5.37158c-0.59767,7.04399 -1.34237,15.80656 3.45394,20.174c1.07689,0.9799 2.37705,1.68742 3.8896,2.11908l-23.29132,0c7.69752,-2.70079 11.17869,-16.16667 11.17869,-29.52405c0,-13.5282 -3.473,-27.16489 -11.15146,-29.82298z"})),level2:a.a.createElement("path",{className:"fill",transform:"translate(9,7),scale(0.3,0.3)",d:"M245.928,84.493c-13.393-16.435-27.768-24.637-43.139-24.637c-10.873,0-21.072,4.354-30.619,13.117   c-6.626-5.045-13.782-8.627-21.478-10.745c-1.591-20.661-10.733-35.643-27.436-44.942l-17.491,12.351   c11.39,7.412,18.021,17.745,19.876,31c-11.398,1.33-22.001,5.568-31.811,12.713c-9.802-9.005-20.275-13.495-31.403-13.495   c-15.644,0-29.696,8.202-42.15,24.637C6.755,101.449,0,121.479,0,144.535c0,5.828,0.532,11.684,1.583,17.498   c3.978,23.857,15.116,44.676,33.402,62.42c16.434,16.184,31.681,24.263,45.731,24.263c0.332,0,0.674-0.012,1.016-0.035   c16.083-4.937,33.156-7.599,50.857-7.599c14.784,0,29.134,1.858,42.833,5.346l-0.074-0.098l0.323,0.16   c2.618,0.67,5.21,1.404,7.78,2.193c0.348,0.021,0.696,0.033,1.043,0.033c14.053,0,29.154-8.079,45.328-24.263v-0.001   c17.755-17.744,29.156-38.562,34.189-62.42c1.34-6.616,1.99-13.117,1.99-19.48C266.002,120.274,259.306,100.924,245.928,84.493z"}),level3:a.a.createElement("path",{className:"fill",transform:"translate(18,10),scale(0.13,0.13)",d:"M403.886,427.092c31.805-31.675,51.156-72.843,51.156-117.982c0-39.184-14.643-75.351-39.282-104.954  c2.02-6.265,3.149-12.751,3.149-19.456c0-37.186-32.559-68.257-83.059-85.193l28.483-65.848c5.268-12.211-0.35-26.389-12.568-31.673  c-12.2-5.284-26.376,0.345-31.663,12.554l-32.024,74.065c-13.741-1.849-28.121-2.939-43.145-2.939  c-99.2,0-173.995,42.572-173.995,99.034c0,6.705,1.129,13.191,3.15,19.456c-24.64,29.604-39.289,65.771-39.289,104.954  c0,45.14,19.371,86.317,51.175,117.988l-17.909,24.225c-7.902,10.695-5.643,25.775,5.053,33.689  c4.297,3.184,9.314,4.721,14.299,4.721c7.374,0,14.668-3.379,19.39-9.772l17.154-23.22c34.224,20.78,75.895,33.1,120.973,33.1  c45.072,0,86.731-12.32,120.935-33.09l17.155,23.21c4.74,6.393,12.016,9.772,19.401,9.772c4.974,0,9.99-1.537,14.306-4.715  c10.696-7.911,12.968-22.99,5.065-33.695L403.886,427.092z"}),level4:a.a.createElement("path",{className:"fill",transform:"translate(15,0),scale(0.25)",d:"M277.531,179.745c-0.045-10.481-9.676-33.631-92.951-35.979l-31.034-68.857l42.085,17.586 l-63.13-67.928c-8.62-6.047-37.77,80.794-49.648,117.583l0,0c-8.354,1.318-34.706,6.113-55.001,16.797 c-19.8,10.395-30.244,19.572-27.386,32.326c-2.076,14.357,3.17,56.896,135.987,62.381 C179.174,255.423,285.918,226.942,277.531,179.745z M144.93,182.741c-67.228,4.734-72.835-13.954-72.835-13.954l6.106-13.264 c0,0,18.403,12.415,56.083,11.763c37.68-0.659,53.318-17.423,53.318-17.423l9.927,12.077 C195.098,177.688,144.93,182.741,144.93,182.741z"})}),Ge=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return Object.values(this.constructor.cellDefinitionsStyleMap).map(function(e){return a.a.createElement(e,{key:e.displayName||e.name})})}}]),t}(l.PureComponent);Ge.cellDefinitionsStyleMap={original:Ne,halloween:De};var Ye=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={previousLevel:n.props.level,currentLevel:n.props.level},n.levelsAnimate=[0,1,2,3,4].map(function(e){return a.a.createRef()}),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){var l=this;this.props.animated&&this.state.currentLevel!==this.state.previousLevel&&setTimeout(function(){l.levelsAnimate.filter(function(e,t){return l.state.previousLevel<=t&&t<=l.state.currentLevel||l.state.currentLevel<=t&&t<=l.state.previousLevel}).filter(function(e){return e.current}).map(function(e){return e.current.beginElement()})},0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.x,r=t.y,o=t.available,i=t.undoable,s=t.level,c=t.player,u=t.onClick,m=t.animated,p=t.allowControl,y=t.gameType,v=t.theme,h=v.cells,d=void 0===h?"original":h,f=v.pieces,g=void 0===f?"king":f,b=v.rotateOpponent,E=void 0===b||b,w=v.numbers,k=this.state,O=k.previousLevel,P=k.currentLevel,x=!p.includes(J.PLAYER_A)&&p.includes(J.PLAYER_B),C=!x,R=le(y,{x:n,y:r});return a.a.createElement("g",{transform:"translate(".concat(R.x,",").concat(R.y,")")},a.a.createElement("g",{className:"cell-contents"},m?[0,1,2,3,4].map(function(t){return a.a.createElement("use",{key:t,xlinkHref:"#cell-".concat(d,"-").concat(t),opacity:t<=s?1:0},a.a.createElement("animate",{ref:e.levelsAnimate[t],attributeName:"opacity",attributeType:"XML",type:"translate",from:O<t?0:1,to:P<t?0:1,dur:"0.2s",repeatCount:1,fill:"freeze"}))}):[0,1,2,3,4].filter(function(e){return e<=s}).map(function(e){return a.a.createElement(l.Fragment,{key:e},a.a.createElement("use",{xlinkHref:"#cell-".concat(d,"-").concat(e)}),c===J.PLAYER_A?a.a.createElement(_e,{style:g,colour:"white",rotated:E&&x}):null,c===J.PLAYER_B?a.a.createElement(_e,{style:g,colour:"black",rotated:E&&C}):null)}),w?a.a.createElement(me,{level:s,type:w}):null),a.a.createElement("use",{xlinkHref:"#cell-".concat(d,"-border"),className:Z()({available:o,undoable:i}),onClick:u}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.animated&&e.level!==t.level?{previousLevel:t.currentLevel,currentLevel:e.level}:null}}]),t}(l.PureComponent);Ye.Definitions=Ge,Ye.defaultProps={animated:!1};var Ue=Ye,Be=(n(381),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.constructor,t=e.arrowDimensions,n=e.arrowOffset,r=e.arrowScaling,o=e.hammerDimensions,i=e.hammerOffset,s=e.hammerScaling;return a.a.createElement(l.Fragment,null,a.a.createElement("path",{id:"arrow-move-base",d:"M168 345.941V44c0-6.627-5.373-12-12-12h-56c-6.627 0-12 5.373-12 12v301.941H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.569 9.373 33.941 0l86.059-86.059c15.119-15.119 4.411-40.971-16.971-40.971H168z",transform:["translate(".concat(50,",").concat(50,")"),"scale(".concat(.1*r,",").concat(.1*r,")"),"translate(".concat(-t.x/2+n.x,",").concat(-t.y/2+n.y,")")].join(",")}),a.a.createElement("path",{id:"arrow-build-base",d:"M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z",transform:["translate(".concat(50,",").concat(50,")"),"scale(".concat(.1*s,",").concat(.1*s,")"),"rotate(135)","translate(".concat(-o.x/2+i.x,",").concat(-o.y/2+i.y,")")].join(",")}),a.a.createElement("g",{id:"arrow-move-white"},a.a.createElement("use",{xlinkHref:"#arrow-move-base",strokeWidth:80,stroke:"#111"}),a.a.createElement("use",{xlinkHref:"#arrow-move-base",fill:"white"})),a.a.createElement("g",{id:"arrow-move-black"},a.a.createElement("use",{xlinkHref:"#arrow-move-base",strokeWidth:80,stroke:"#bbb"}),a.a.createElement("use",{xlinkHref:"#arrow-move-base",fill:"black"})),a.a.createElement("g",{id:"arrow-build-white"},a.a.createElement("use",{xlinkHref:"#arrow-build-base",strokeWidth:80,stroke:"#111"}),a.a.createElement("use",{xlinkHref:"#arrow-build-base",fill:"white"})),a.a.createElement("g",{id:"arrow-build-black"},a.a.createElement("use",{xlinkHref:"#arrow-build-base",strokeWidth:80,stroke:"#bbb"}),a.a.createElement("use",{xlinkHref:"#arrow-build-base",fill:"black"})))}}]),t}(l.PureComponent));Be.arrowDimensions={x:215.81,y:439.04},Be.arrowOffset={x:-20,y:-15},Be.arrowScaling=.75,Be.hammerDimensions={x:564.48,y:501.76},Be.hammerOffset={x:50,y:-50},Be.hammerScaling=.5625;var Fe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.constructor,t=e.offsetX,n=e.smallScaling,l=this.props,r=l.from,o=l.to,i=l.colour,s=l.type,c=l.small,u={x:o.x-r.x,y:o.y-r.y},m=this.constructor.rotationMap["".concat(u.x,",").concat(u.y)],p=Math.sqrt(Math.abs(u.x)+Math.abs(u.y));return a.a.createElement("use",{xlinkHref:"#arrow-".concat(s,"-").concat(i),transform:["translate(".concat(100*r.x,",").concat(100*r.y,")"),"rotate(".concat(m,",").concat(50,",").concat(50,")"),"translate(".concat(t,",").concat(50*p,")")].concat(Object(g.a)(c?["translate(".concat(50,",").concat(50,")"),"scale(".concat(n,")"),"translate(".concat(-50,",").concat(-50,")")]:[])).filter(function(e){return e}).join(",")})}}]),t}(l.PureComponent);Fe.Definition=Be,Fe.offsetX=10,Fe.smallScaling=.75,Fe.rotationMap={"0,1":0,"-1,1":45,"-1,0":90,"-1,-1":135,"0,-1":180,"1,-1":-135,"1,0":-90,"1,1":-45},Fe.defaultProps={small:!1};var We=Fe,Ke=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.clickable,o=t.undoable,i=t.isCellAvailable,s=t.isCellUndoable,c=t.small,u=t.medium,m=t.makeMove,p=t.onSelect,y=t.selected,v=t.allowControl,h=t.settings,d=t.rowsAndColumns,f=t.transformation,b=t.animated,E=t.showArrows,w=t.game,k=t.arrows,O=t.gameType,P=h.theme;n=Z()("board","svg-board","board-theme-".concat(P.scheme||"default"),{"small-board":c,"medium-board":u,editable:!!m&&(r||o),selectable:!!p,selected:y},n);var x=d.length,C=Math.max.apply(Math,Object(g.a)(d.map(function(e){return e.cells.length})))||0;return a.a.createElement("svg",{className:n,viewBox:"0 0 ".concat(100*C," ").concat(100*x),style:{"--column-count":C,"--row-count":x},preserveAspectRatio:"xMinYMin meet",onClick:p},a.a.createElement("g",{"data-key":"rows"},d.map(function(t){return a.a.createElement("g",{"data-key":"row-".concat(t.y),key:"row-".concat(t.y)},t.cells.map(function(t){return a.a.createElement(Je,{key:"".concat(t.x,"-").concat(t.y),gameType:O,cell:t,clickable:r||o&&s(t),available:i(t),undoable:s(t),allowControl:v,settings:h,makeMove:e.props.makeMove,undo:e.props.undo,theme:P,animated:b})}))})),b?a.a.createElement(qe,{gameType:O,rowsAndColumns:d,theme:P,allowControl:v}):null,E?k?k.map(function(e,t){return a.a.createElement(We,Object.assign({key:t},e))}):a.a.createElement(l.Fragment,null,a.a.createElement(He,{game:w,transformation:f})):null)}}]),t}(l.PureComponent);Ke.defaultProps={className:"",small:!1,medium:!1,clickable:!1,selected:!1,allowControl:[J.PLAYER_A,J.PLAYER_B],animated:!1,showArrows:!1};var Ve=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(l.Fragment,null,a.a.createElement("svg",{className:Z()("board","svg-board"),style:{display:"none"}},a.a.createElement("defs",null,a.a.createElement(Ue.Definitions,null),a.a.createElement(_e.Definitions,null),a.a.createElement(We.Definition,null))))}}]),t}(l.PureComponent);Ke.Definitions=Ve;var He=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getPlayerMoves",value:function(){var e=this.props.transformation,t=this.getRelevantHistory(),n=t.player,l=t.relevantHistory,a=l.find(function(e){return J.MOVE_TYPES_MOVE_WORKER.includes(e.thisMoveType)}),r=l.find(function(e){return e.thisMoveType===J.MOVE_TYPE_BUILD_AROUND_WORKER}),o={move:a?{from:a.previous.lastMove,to:a.lastMove}:null,build:r?{from:r.previous.lastMove,to:r.lastMove}:null},i=o.move,s=o.build;return e&&(i&&(i.from=e.reverseCoordinates(a.previous.rowsAndColumns,i.from),i.to=e.reverseCoordinates(a.rowsAndColumns,i.to),i.type="move"),s&&(s.from=e.reverseCoordinates(r.previous.rowsAndColumns,s.from),s.to=e.reverseCoordinates(r.rowsAndColumns,s.to),s.type="build")),{player:n,move:i,build:s}}},{key:"getRelevantHistory",value:function(){for(var e=this.props.game,t=[e],n=e.thisPlayer,l=e;l.previous&&(l=l.previous).thisPlayer===n;)t.push(l);return{player:n,relevantHistory:t}}},{key:"render",value:function(){if(!this.props.game)return null;var e=this.getPlayerMoves(),t=e.player,n=e.move,l=e.build;if(!n&&!l)return null;var r=t===J.PLAYER_A?"white":"black",o=null,i=null;return n&&(o=a.a.createElement(We,{key:"move",from:n.from,to:n.to,colour:r,type:"move"})),l&&(i=a.a.createElement(We,{key:"build",from:l.from,to:l.to,colour:r,type:"build"})),[o,i]}}]),t}(l.PureComponent),qe=(l.PureComponent,function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gameType,n=e.rowsAndColumns,l=e.theme,r=e.allowControl,o=w.a.sortBy(t.findCells(n,function(e){return e.player}),["player","worker"]);return a.a.createElement("g",{"data-key":"pieces",style:{pointerEvents:"none"}},o.map(function(e){return a.a.createElement(Xe,{key:"".concat(e.player,"-").concat(e.worker),gameType:t,cell:e,theme:l,allowControl:r})}))}}]),t}(l.PureComponent)),Xe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={previousPosition:{x:n.props.cell.x,y:n.props.cell.y},position:{x:n.props.cell.x,y:n.props.cell.y}},n.animateTransform=a.a.createRef(),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){var l=this;this.state.position!==t.position&&setTimeout(function(){l.animateTransform.current&&l.animateTransform.current.beginElement()},0)}},{key:"render",value:function(){var e=this.props,t=e.gameType,n=e.cell,l=e.theme,r=e.allowControl,o=this.state,i=o.previousPosition,s=o.position,c=!r.includes(J.PLAYER_A)&&r.includes(J.PLAYER_B),u=!c,m=le(t,s),p=le(t,i);return a.a.createElement("g",{transform:"translate(".concat(m.x,",").concat(m.y,")")},a.a.createElement(_e,{style:l.pieces||"king",colour:n.player===J.PLAYER_A?"white":"black",rotated:l.rotateOpponent&&(n.player===J.PLAYER_A?c:u)}),a.a.createElement("animateTransform",{ref:this.animateTransform,attributeName:"transform",attributeType:"XML",type:"translate",from:"".concat(p.x," ").concat(p.y),to:"".concat(m.x," ").concat(m.y),dur:"0.1s",repeatCount:1,fill:"freeze"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.cell.x!==t.position.x||e.cell.y!==t.position.y?{previousPosition:t.position,position:{x:e.cell.x,y:e.cell.y}}:null}}]),t}(l.PureComponent),Je=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).makeMove=function(){n.props.available&&n.props.makeMove?n.props.makeMove(n.props.cell):n.props.undoable&&n.props.undo&&n.props.undo()},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gameType,n=e.cell,l=e.clickable,r=e.available,o=e.undoable,i=e.settings.theme,s=e.makeMove,c=e.undo,u=e.animated,m=e.allowControl;return a.a.createElement(Ue,{gameType:t,x:n.x,y:n.y,available:r,undoable:o,level:n.level,player:n.player,allowControl:m,animated:u,theme:i,onClick:(s&&r||c&&o)&&l?this.makeMove:null})}}]),t}(l.PureComponent);Je.defaultProps={clickable:!1,available:!1,undoable:!1,animated:!1,allowControl:[J.PLAYER_A,J.PLAYER_B]};var $e=Ke,Qe=(n(382),n(383),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.renderer,n=void 0===t?"svg":t,l=Object($.a)(e,["renderer"]),r={html:ne,svg:$e}[n];return a.a.createElement(r,l)}}]),t}(l.Component));Qe.defaultProps={className:"",small:!1,medium:!1,clickable:!1,selected:!1,allowControl:[J.PLAYER_A,J.PLAYER_B],animated:!1,showArrows:!1};var Ze=Qe,et=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).makeMove=function(e){var t=n.props,l=t.game.rowsAndColumns,a=t.transformation;a&&(e=a.coordinates(l,e)),n.props.makeMove(n.props.game.makeMove({x:e.x,y:e.y}))},n.undo=function(){n.props.makeMove(n.props.game.canUndo?n.props.game.undo():n.props.game.takeMoveBack())},n.onSelect=function(){n.props.onSelect(n.props.game)},n.isCellAvailable=function(e){var t=n.props,l=t.game.rowsAndColumns,a=t.transformation;return a&&(e=a.coordinates(l,e)),n.props.game.isMoveAvailable(e)},n.isCellUndoable=function(e){var t=n.props,l=t.game.rowsAndColumns,a=t.transformation;if(a&&(e=a.coordinates(l,e)),void 0===n.props.minChainCount||null===n.props.minChainCount){if(!n.props.game.canUndo)return!1}else if(n.props.game.chainCount<=n.props.minChainCount)return!1;var r=n.props.game.lastMove;return!!r&&(r.x===e.x&&r.y===e.y)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"isGameUndoable",value:function(){return!!this.props.game.findCell(this.isCellUndoable)}},{key:"render",value:function(){var e=this.props,t=e.game,n=e.transformation,l=e.allowControl,r=e.onSelect,o=e.makeMove,i=e.animated,s=t.rowsAndColumns;return n&&(s=n(s)),a.a.createElement(Ze,Object.assign({},this.props,{isCellAvailable:i?this.isCellAvailable:function(){return!1},isCellUndoable:i?this.isCellUndoable:function(){return!1},clickable:l.includes(t.nextPlayer),undoable:!!i&&this.isGameUndoable(),onSelect:r?this.onSelect:null,makeMove:o?this.makeMove:null,undo:o?this.undo:null,rowsAndColumns:s,transformation:n,game:t,gameType:t.constructor,animated:i}))}}]),t}(l.PureComponent);et.defaultProps={className:"",small:!1,medium:!1,selected:!1,allowControl:[J.PLAYER_A,J.PLAYER_B],animated:!1};var tt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={rotations:0,flippedHorizontally:!1},n.updateOrientation=function(e){n.setState(e,function(){if(n.props.onChange){var e=n.state,t=e.rotations,l=e.flippedHorizontally,a=n.props.gameType.transformationMap?n.props.gameType.transformationMap["".concat(t,",").concat(l)]:null;n.props.onChange({rotations:t,flippedHorizontally:l,transformation:a})}})},n.rotateCounterClockwise=function(){n.updateOrientation(function(e){return{rotations:(e.rotations+n.props.gameType.transformationMaxRotations-1)%n.props.gameType.transformationMaxRotations}})},n.rotateClockwise=function(){n.updateOrientation(function(e){return{rotations:(e.rotations+1)%n.props.gameType.transformationMaxRotations}})},n.flipHorizontally=function(){n.updateOrientation(function(e){return{flippedHorizontally:!e.flippedHorizontally}})},n.flipVertically=function(){n.updateOrientation(function(e){return{rotations:(e.rotations+n.props.gameType.transformationMaxRotations/2)%n.props.gameType.transformationMaxRotations,flippedHorizontally:!e.flippedHorizontally}})},n.reset=function(){n.updateOrientation(function(e){return{rotations:0,flippedHorizontally:!1}})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){e.gameType!==this.props.gameType&&this.reset()}},{key:"render",value:function(){var e=this.state,t=e.rotations,n=e.flippedHorizontally;return this.props.gameType.transformationMap?a.a.createElement(T.a,{size:"massive",items:[{key:"rotate-counter-clockwise",icon:"undo",onClick:this.rotateCounterClockwise},{key:"rotate-clockwise",icon:"redo",onClick:this.rotateClockwise},{key:"flip-horizontal",icon:"arrows alternate horizontal",onClick:this.flipHorizontally},{key:"flip-vertical",icon:"arrows alternate vertical",onClick:this.flipVertically},{key:"home",icon:"home",onClick:this.reset,disabled:!t&&!n}]}):null}}]),t}(l.PureComponent),nt=et,lt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={rowsAndColumns:n.constructor.demoRowsAndColumns},n.isCellAvailable=function(){return!1},n.isCellUndoable=function(){return!1},n.animate=function(){n.setState(function(e){return{rowsAndColumns:e.rowsAndColumns===n.constructor.demoRowsAndColumns?n.constructor.demoRowsAndColumnsAnimated:n.constructor.demoRowsAndColumns}})},n.animationInterval=n.props.settings.theme.animations?setInterval(n.animate,2e3):null,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){this.props.settings.theme.animations!==e.settings.theme.animations&&(this.props.settings.theme.animations?this.animationInterval||(this.animationInterval=setInterval(this.animate,2e3)):this.animationInterval&&(clearInterval(this.animationInterval),this.animationInterval=null))}},{key:"componentWillUnmount",value:function(){this.animationInterval&&(clearInterval(this.animationInterval),this.animationInterval=null)}},{key:"render",value:function(){var e=this.props,t=e.small,n=e.medium,l=e.settings,r=this.state.rowsAndColumns;return a.a.createElement(Ze,{gameType:J.Classic,small:t,medium:n,allowControl:[J.PLAYER_A,J.PLAYER_B],rowsAndColumns:r,undoable:!1,isCellAvailable:this.isCellAvailable,isCellUndoable:this.isCellUndoable,arrows:l.theme.arrows?this.constructor.arrows:void 0,settings:l,animated:l.theme.animations,showArrows:l.theme.arrows})}}]),t}(l.Component);lt.demoRowsAndColumns=[{y:0,cells:[{x:0,y:0,player:null,worker:null,level:0},{x:1,y:0,player:null,worker:null,level:1},{x:2,y:0,player:null,worker:null,level:2},{x:3,y:0,player:null,worker:null,level:3},{x:4,y:0,player:null,worker:null,level:4},{x:5,y:0,player:J.PLAYER_A,worker:J.WORKER_FIRST,level:0},{x:6,y:0,player:J.PLAYER_B,worker:J.WORKER_FIRST,level:0}]}],lt.demoRowsAndColumnsAnimated=[{y:0,cells:[{x:0,y:0,player:null,worker:null,level:0},{x:1,y:0,player:null,worker:null,level:1},{x:2,y:0,player:null,worker:null,level:2},{x:3,y:0,player:null,worker:null,level:3},{x:4,y:0,player:J.PLAYER_A,worker:J.WORKER_FIRST,level:3},{x:5,y:0,player:null,worker:null,level:0},{x:6,y:0,player:J.PLAYER_B,worker:J.WORKER_FIRST,level:0}]}],lt.arrows=[{from:{x:5,y:0},to:{x:4,y:0},colour:"white",type:"build"},{from:{x:4,y:0},to:{x:5,y:0},colour:"white",type:"move"}],lt.defaultProps={className:"",small:!1,medium:!1};var at,rt=lt,ot=nt,it=n(257),st=n(481),ct=n(459),ut=n(477),mt=n(472),pt=n(467),yt=n(473),vt=n(51),ht=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).isCellAvailable=function(){return!1},n.isCellUndoable=function(){return!1},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gameType,n=e.small,l=e.medium,r=e.player,o=e.applicableSettings,i=e.allowControl;return a.a.createElement(Ze,{small:n,medium:l,rowsAndColumns:this.constructor.colours[r],undoable:!1,isCellAvailable:this.isCellAvailable,isCellUndoable:this.isCellUndoable,settings:o,allowControl:i,gameType:t})}}]),t}(l.Component);ht.colours=(at={},Object(b.a)(at,J.PLAYER_A,[{y:0,cells:[{x:0,y:0,player:J.PLAYER_A,worker:J.WORKER_FIRST,level:0}]}]),Object(b.a)(at,J.PLAYER_B,[{y:0,cells:[{x:0,y:0,player:J.PLAYER_B,worker:J.WORKER_FIRST,level:0}]}]),at),ht.defaultProps={small:!1,medium:!1};var dt=ht,ft=n(475),gt=n(69),bt=n(468),Et=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={connected:A.connected,available:A.available,disconnected:A.disconnected,user:A.user,username:A.user?A.user.name:null,usersInfo:A.usersInfo,gamesInfo:A.gamesInfo,tournamentsInfo:A.tournamentsInfo,puzzlesInfo:A.puzzlesInfo},n.connectionChanged=function(e){n.setState({connected:e,disconnected:A.disconnected,available:A.available})},n.gotUser=function(e){n.setState({user:e})},n.gotUsers=function(e){n.setState({usersInfo:e})},n.gotGames=function(e){n.setState({gamesInfo:e})},n.gotTournaments=function(e){n.setState({tournamentsInfo:e})},n.gotPuzzles=function(e){n.setState({puzzlesInfo:e})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){A.subscribe({onConnect:this.connectionChanged,onDisconnect:this.connectionChanged,onUser:this.gotUser,onUsers:this.gotUsers,onGames:this.gotGames,onTournaments:this.gotTournaments,onPuzzles:this.gotPuzzles})}},{key:"componentWillUnmount",value:function(){A.unsubscribe({onUser:this.gotUser,onUsers:this.gotUsers,onGames:this.gotGames,onTournaments:this.gotTournaments,onPuzzles:this.gotPuzzles})}},{key:"render",value:function(){var e=this.state,t=e.connected,n=e.disconnected,l=e.available,r=e.user,o=e.usersInfo,i=e.gamesInfo,s=e.tournamentsInfo,c=e.puzzlesInfo,u=this.constructor.SubComponent;return a.a.createElement(u,Object.assign({},this.props,{connected:t,disconnected:n,available:l,client:A,user:r,usersInfo:o,gamesInfo:i,tournamentsInfo:s,puzzlesInfo:c}))}}],[{key:"forComponent",value:function(e){var t=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),t}(this);return t.SubComponent=e,t}}]),t}(l.Component);Et.SubComponent=null;var wt=function(e){return Et.forComponent(e)},kt=n(234),Ot=n.n(kt),Pt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).ref=a.a.createRef(),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateIcon()}},{key:"updateIcon",value:function(){this.ref.current&&Ot.a.update(this.ref.current)}},{key:"componentDidUpdate",value:function(e){e.hash!==this.props&&this.updateIcon()}},{key:"render",value:function(){var e,t=this.props,n=t.hash,l=t.floated,r=t.size,o=t.textSized;return a.a.createElement("svg",{ref:this.ref,className:Z()(["ui","mini","right","floated","image"],(e={floated:!!l},Object(b.a)(e,l,!!l),Object(b.a)(e,r,!!r),Object(b.a)(e,"text-sized",o),e)),"data-jdenticon-value":n})}}]),t}(l.Component);Pt.defaultProps={textSized:!1};var xt=Pt,Ct=n(33);function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var zt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).gameGameSelector=Object(Ct.a)([function(e){return e.game.game}],function(e){return J.Classic.deserialize(e)}),n.selectLiveGame=function(){n.props.selectLiveGame(n.props.game)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.applicableSettings,l=e.usersById,r=e.tournamentsById,o=e.puzzlesByGameId,i=e.game,s=e.terse,c=e.live,u=e.currentGameId,m=r[i.tournamentId],p=this.gameGame,y=l[i.userIds[0]],v=l[i.userIds[1]],d=p.nextPlayer===J.PLAYER_A?y:v,f=d===y,g=d===v,b=!!t&&y.id===t.id,E=!!t&&v.id===t.id,w=i.finished?i.winner===J.PLAYER_A?y:v:null,k=b||E,P=b&&f||E&&g,x=!s||!k||E,C=!s||!k||b,R=o[i.id]||[];return a.a.createElement(ft.a,{as:M.c,to:"/game/".concat(i.id),onClick:this.selectLiveGame,style:St({},s?{width:"auto"}:{},{},i.id===u?{backgroundColor:"lightgreen"}:{}),className:Z()({attention:c&&P})},a.a.createElement(ft.a.Content,null,s?null:a.a.createElement(ot,{className:"ui image floated right mini",game:p,small:!0,settings:n}),a.a.createElement(ft.a.Header,null,x&&C?null:" vs ",x?a.a.createElement(h.a,{color:w===y||P?"green":void 0},w===y?a.a.createElement(gt.a,{name:"trophy"}):null,f?a.a.createElement(gt.a,{name:"caret right"}):null,y.name,a.a.createElement(xt,{floated:"right",size:"mini",textSized:!0,hash:y.id})):null,x&&C?" vs ":null,C?a.a.createElement(h.a,{color:w===v||P?"green":void 0},w===v?a.a.createElement(gt.a,{name:"trophy"}):null,g?a.a.createElement(gt.a,{name:"caret right",color:"green"}):null,v.name,a.a.createElement(xt,{floated:"right",size:"mini",textSized:!0,hash:v.id})):null),s?m?a.a.createElement(h.a,{icon:"sitemap"}):null:a.a.createElement(ft.a.Meta,null,k?a.a.createElement(h.a,{icon:{name:"user",color:"green"},content:"My game"}):null," ",i.finished?null:a.a.createElement(h.a,{icon:{name:"circle",color:"green"},content:"Live"})," ",a.a.createElement(h.a,{content:"Move ".concat(i.move),icon:"play"})," ",a.a.createElement(h.a,{content:O()(i.endDatetime||i.startDatetime).from(),icon:"calendar"})," ",m?a.a.createElement(h.a,{content:m.name,icon:"sitemap"}):null," ",R.length?a.a.createElement(h.a,{content:"".concat(R.length," puzzles"),icon:"puzzle"}):null)))}},{key:"gameGame",get:function(){return this.gameGameSelector(this.props)}}]),t}(l.Component);zt.defaultProps={terse:!1,live:!1};var At=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={activePage:1},n.onPageChange=function(e,t){var l=t.activePage;n.setState({activePage:l})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.applicableSettings,n=e.user,r=e.usersById,o=e.tournamentsById,i=e.puzzlesByGameId,s=e.games,c=e.terse,u=e.live,m=e.selectLiveGame,p=e.currentGameId,y=e.pageSize,v=e.reverse;if(!Object.values(r).length)return null;var h=this.state.activePage,d=Math.ceil(s.length/y);h>d&&(h=d);var f=s.slice((d-h)*y,(d-h)*y+y);return v&&(f=f.reverse()),a.a.createElement(l.Fragment,null,a.a.createElement(ft.a.Group,{style:{maxHeight:"300px",overflowY:"auto",flexWrap:c?"unset":void 0}},f.map(function(e){return a.a.createElement(zt,{key:e.id,user:n,usersById:r,tournamentsById:o,puzzlesByGameId:i,game:e,selectLiveGame:m,terse:c,live:u,currentGameId:p,applicableSettings:t})})),d>1?a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,a.a.createElement(yt.a,{totalPages:d,activePage:h,onPageChange:this.onPageChange,pointing:!0,secondary:!0}))):null)}}]),t}(l.Component);At.defaultProps={terse:!1,live:!1,pageSize:10,reverse:!0};var jt=At,It=n(471),Mt=wt(function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={name:"",gameCount:"1"},n.createTournament=function(){var e=n.props.client,t=n.state,l=t.name,a=t.gameCount;e.createTournament({name:l,gameCount:parseInt(a,10)})},n.onClose=function(){n.setState({name:"",gameCount:1})},n.setValue=function(e,t){var l=t.name,a=t.value;n.setState(Object(b.a)({},l,a))},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(mt.a,{size:"mini",trigger:a.a.createElement(ct.a,{color:"yellow",icon:"sitemap",content:"Create tournament"}),header:"Create tournament",content:a.a.createElement(y.a,null,a.a.createElement(It.a,null,a.a.createElement(It.a.Field,{name:"name",control:bt.a,label:"Name",placeholder:"Tournament name",onChange:this.setValue,required:!0,defaultValue:this.state.name}),a.a.createElement(It.a.Field,{name:"gameCount",control:bt.a,label:"".concat(this.state.gameCount," game(s) between each pair of players"),placeholder:"Game count between each pair of players",onChange:this.setValue,type:"range",min:1,max:5,defaultValue:this.state.gameCount,required:!0}))),actions:[{key:"cancel",content:"Cancel"},{key:"create",positive:!0,content:"Create Tournament",onClick:this.createTournament,disabled:!this.state.name}],onClose:this.onClose})}}]),t}(l.Component));function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Lt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).selectLiveTournament=function(){n.props.selectLiveTournament(n.props.tournament)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.usersById,l=e.currentTournamentId,r=e.tournament,o=e.terse,i=!!t&&r.userIds.includes(t.id),s=!!t&&r.creatorUserId===t.id,c=!!r.finished&&r.winnerUserId===t.id,u=n[r.creatorUserId],m=a.a.createElement(h.a,{content:r.started?r.finished?"Finished":"Round ".concat(r.round,"/").concat(r.rounds):"Waiting",icon:{name:r.started?r.finished?"trophy":"play":"hourglass",colour:r.started?"green":void 0}});return a.a.createElement(ft.a,{as:M.c,to:"/tournament/".concat(r.id),style:Tt({},o?{width:"auto"}:{},{},r.id===l?{backgroundColor:"lightgreen"}:{})},a.a.createElement(ft.a.Content,null,a.a.createElement(ft.a.Header,null,a.a.createElement(h.a,{content:r.name})," by",a.a.createElement(h.a,{color:s?"green":void 0,content:u.name}),o?m:null),o?null:a.a.createElement(ft.a.Meta,null,i?a.a.createElement(h.a,{icon:{name:"user",color:"green"},content:"Participating"}):null," ",c?a.a.createElement(h.a,{icon:{name:"trophy",color:"yellow"},content:"Won"}):r.finished?a.a.createElement(h.a,{icon:"trophy",content:n[r.winnerUserId]?n[r.winnerUserId].name:r.winnerUserId}):null," ",r.started&&!r.finished?a.a.createElement(h.a,{icon:{name:"circle",color:"green"},content:"Live"}):null," ",m," ",a.a.createElement(h.a,{content:"".concat(r.userIds.length," players"),icon:"users"})," ",a.a.createElement(h.a,{content:O()(r.endDatetime||r.startDatetime||r.createdDatetime).from(),icon:"calendar"}))))}}]),t}(l.Component);Lt.defaultProps={terse:!1};var Nt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={activePage:1},n.onPageChange=function(e,t){var l=t.activePage;n.setState({activePage:l})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.usersById,r=e.tournaments,o=e.terse,i=e.selectLiveTournament,s=e.currentTournamentId,c=e.pageSize;if(!Object.values(n).length)return null;var u=this.state.activePage,m=Math.ceil(r.length/c);u>m&&(u=m);var p=r.slice((m-u)*c,(m-u)*c+c).reverse();return a.a.createElement(l.Fragment,null,a.a.createElement(ft.a.Group,{style:{maxHeight:"300px",overflowY:"auto",flexWrap:o?"unset":void 0}},p.map(function(e){return a.a.createElement(Lt,{key:e.id,user:t,usersById:n,tournament:e,currentTournamentId:s,selectLiveTournament:i,terse:o})})),m>1?a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,a.a.createElement(yt.a,{totalPages:m,activePage:u,onPageChange:this.onPageChange,pointing:!0,secondary:!0}))):null)}}]),t}(l.Component);Nt.defaultProps={terse:!1,pageSize:10};var Dt=Nt;function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ut=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).positionGameSelector=Object(Ct.a)([function(e){return e.puzzle.startingPosition.position}],function(e){return J.Classic.fromCompressedPositionNotation(e)}),n.selectPuzzle=function(){n.props.selectPuzzle(n.props.puzzle)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.applicableSettings,l=e.usersById,r=e.gamesById,o=e.puzzle,i=e.currentPuzzleId,s=this.positionGame,c=this.userPuzzle,u=l[o.userId],m=!!t&&o.userId===t.id,p=r[o.meta.gameId],y=p?l[p.userIds[0]]:null,v=p?l[p.userIds[1]]:null,d=!!c&&c.meta.started&&!c.meta.won,f=!!c&&c.meta.won,g=!!c&&!!c.meta.mistakes;return a.a.createElement(ft.a,{as:M.c,to:"/puzzle/".concat(o.id),onClick:this.selectPuzzle,style:Yt({},o.id===i?{backgroundColor:"lightgreen"}:{})},a.a.createElement(ft.a.Content,null,a.a.createElement(ft.a.Header,null,R(o)),a.a.createElement(ft.a.Meta,null,a.a.createElement(h.a,{icon:{name:{1:"smile outline",2:"meh outline",3:"frown outline"}[o.meta.difficulty],color:{1:"green",2:"orange",3:"red"}[o.meta.difficulty]},content:"".concat(o.meta.difficulty,"/").concat(o.meta.maxDifficulty),title:{1:"Easy",2:"Medium",3:"Hard"}[o.meta.difficulty]}),a.a.createElement(h.a,{icon:"user",content:"By ".concat(u.name)}),d?a.a.createElement(h.a,{icon:{name:"play",color:g?"orange":"green"},content:g?"Started (".concat(c.meta.mistakes," mistakes)"):"Started"}):f?a.a.createElement(h.a,{icon:{name:"trophy",color:g?"orange":"green"},content:g?"Solved with ".concat(c.meta.mistakes," mistakes"):"Perfect"}):g?a.a.createElement(h.a,{icon:{name:"exclamation",color:"orange"},content:"".concat(c.meta.mistakes," mistakes")}):null,t&&o.isMyPuzzle?a.a.createElement(h.a,{icon:o.meta.public&&o.meta.publishDatetime.isSameOrBefore()?{name:"check",color:"green"}:o.meta.public?{name:"pause",color:"yellow"}:{name:"x",color:"red"},content:o.meta.public&&o.meta.publishDatetime.isSameOrBefore()?o.meta.publishDatetime.fromNow():o.meta.public?o.meta.publishDatetime.toNow():"Private"}):a.a.createElement(h.a,{icon:"calendar",content:o.meta.publishDatetime.fromNow()}),o.usersStats&&o.usersStats.attempted?a.a.createElement(h.a,{icon:"user",content:"".concat(null!==o.usersStats.averagePerfectScore?o.usersStats.averagePerfectScore:"No perfect solve"," (").concat(o.usersStats.perfect,"/").concat(o.usersStats.imperfect,"/").concat(o.usersStats.attempted,")"),title:"".concat(null!==o.usersStats.averagePerfectScore?"".concat(o.usersStats.averagePerfectScore," average user score"):"No perfect solve"," (").concat(o.usersStats.perfect," perfect solves, out of ").concat(o.usersStats.imperfect," solves, out of ").concat(o.usersStats.attempted," attempts)")}):null,p?f||m?a.a.createElement(h.a,{icon:"play",content:"".concat(y?y.name:"Unknown"," vs ").concat(v?v.name:"Unknown"),title:"From game between ".concat(y?y.name:"Unknown"," vs ").concat(v?v.name:"Unknown")}):a.a.createElement(h.a,{icon:"play",content:"Solve to see game"}):null,a.a.createElement(ot,{game:s,medium:!0,settings:n}))))}},{key:"positionGame",get:function(){return this.positionGameSelector(this.props)}},{key:"userPuzzle",get:function(){var e=this.props,t=e.user,n=e.puzzle;return t&&n&&t.puzzles[n.id]||null}}]),t}(l.Component),Bt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={activePage:1},n.onPageChange=function(e,t){var l=t.activePage;n.setState({activePage:l})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.client,n=e.user,r=e.usersInfo.byId,o=e.gamesInfo.byId,i=e.puzzles,s=e.selectPuzzle,c=e.currentPuzzleId,u=e.pageSize;if(!Object.values(r).length)return null;var m=this.state.activePage,p=Math.ceil(i.length/u);m>p&&(m=p);var y=i.slice((p-m)*u,(p-m)*u+u).reverse();return a.a.createElement(l.Fragment,null,a.a.createElement(ft.a.Group,{style:{maxHeight:"400px",overflowY:"auto"}},y.map(function(e){return a.a.createElement(Ut,{key:e.id,user:n,usersById:r,gamesById:o,puzzle:e,selectPuzzle:s,currentPuzzleId:c,applicableSettings:t.applicableSettings})})),p>1?a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,a.a.createElement(yt.a,{totalPages:p,activePage:m,onPageChange:this.onPageChange,pointing:!0,secondary:!0}))):null)}}]),t}(l.Component);Bt.defaultProps={pageSize:10};var Ft=wt(Bt),Wt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.client,n=e.user,l=e.users,r=e.challengedUser,o=e.readyToPlayUsers,i=e.readyToPlayMeUsers;return a.a.createElement(ft.a.Group,{style:{maxHeight:"300px",overflowY:"auto"}},l.map(function(e){return a.a.createElement(Xt,{key:e.id,client:t,user:n,otherUser:e,challengedUser:r,readyToPlayUsers:o,readyToPlayMeUsers:i})}))}}]),t}(l.Component),Kt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).changeReadyToPlay=function(){n.props.client.changeReadyToPlay(!n.props.user.readyToPlay)},n.challengeUser=function(){n.props.client.changeReadyToPlay(n.props.user.readyToPlay!==n.props.otherUser.id&&n.props.otherUser.id)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t,n,l,r,o=this.props,i=o.client,s=o.user,c=o.otherUser,u=o.usersInfo,m=u.challengedUser,p=u.readyToPlay,y=u.readyToPlayMe;return i&&s&&c.online?(s.id===c.id?(l=this.changeReadyToPlay,s.readyToPlay?(e="green",n={loading:!0,name:"circle notch"},r=m?"Waiting for ".concat(m.name,"..."):"Waiting for opponent..."):(e="yellow",n={name:"play"},y&&y.length?1===y.length?(r="".concat(y[0].name," has challenged you"),t=!0):(r="".concat(y.length," users have challenged you"),t=!0):r=p&&p.length?1===p.length?"Play ".concat(p[0].name):"".concat(p.length," users ready to play"):"Play")):(l=this.challengeUser,m&&m.id===c.id?(e="green",n={loading:!0,name:"circle notch"},r="Waiting for ".concat(c.name,"...")):(e="yellow",n={name:"play"},c.readyToPlay===s.id?(r="".concat(c.name," has challenged you"),t=!0):r=!0===c.readyToPlay?"".concat(c.name," is ready to Play"):"Challenge ".concat(c.name))),a.a.createElement(ct.a,{className:Z()({attention:t}),color:e,onClick:l},a.a.createElement(gt.a,n),r)):null}}]),t}(l.Component);Kt=wt(Kt);var Vt,Ht,qt,Xt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.client,n=e.user,l=e.otherUser;return a.a.createElement(ft.a,null,a.a.createElement(ft.a.Content,null,a.a.createElement(xt,{floated:"right",size:"mini",hash:l.id}),a.a.createElement(ft.a.Header,null,l.name," ",t&&n&&n.id===l.id?a.a.createElement(Jt,{client:t,user:n,trigger:a.a.createElement(h.a,{as:"a",icon:"edit",content:"Edit"})}):null),a.a.createElement(ft.a.Meta,null,n&&l.id===n.id?a.a.createElement(h.a,null,a.a.createElement(gt.a,{name:"user",color:"green"}),"Me"):null," ",n&&l.id===n.id?a.a.createElement(Jt,{client:t,user:n,trigger:a.a.createElement(h.a,{as:"a"},a.a.createElement(gt.a,{name:"lock",color:n.hasPassword?"green":"red"}),n.hasPassword?"":"No password")}):null," ",l.readyToPlay?a.a.createElement(h.a,null,a.a.createElement(gt.a,{loading:!0,name:"circle notch",color:"green"}),"Ready"):null," ",l.online?a.a.createElement(h.a,null,a.a.createElement(gt.a,{name:"circle",color:"green"}),"Online"):null," ",a.a.createElement(h.a,{title:"".concat(l.isUserRatingProvisional?"Provisional - ":"","Won ").concat(l.winCount," out of ").concat(l.gameCount),color:{1:"yellow",2:"grey",3:"brown"}[l.rank]},a.a.createElement(gt.a,{name:l.isUserRatingProvisional?"question":"star outline",color:l.isUserRatingProvisional?"orange":void 0})," ",l.score)," ",a.a.createElement(h.a,{icon:"trophy",content:" ".concat(l.winCount,"/").concat(l.gameCount)})," ",l.tournamentWinCount?a.a.createElement(h.a,{icon:{name:"sitemap",color:"yellow"},content:l.tournamentWinCount,title:"Won ".concat(l.tournamentWinCount,"/").concat(l.tournamentCount," tournaments entered")}):null,l.puzzlesStats&&l.puzzlesStats.attempted?a.a.createElement(h.a,{icon:"puzzle",content:"".concat(l.puzzlesStats.perfectStars,"\u2b50 (").concat(l.puzzlesStats.perfect,"/").concat(l.puzzlesStats.imperfect,"/").concat(l.puzzlesStats.attempted,")"),title:"".concat(l.puzzlesStats.perfectStars," total perfect stars (").concat(l.puzzlesStats.perfect," perfect puzzles, out of ").concat(l.puzzlesStats.imperfect," solved, out of ").concat(l.puzzlesStats.attempted," attempted)")}):null)),t&&n&&l.online?a.a.createElement(ft.a.Content,{extra:!0},a.a.createElement("div",{className:"ui two buttons"},a.a.createElement(Kt,{otherUser:l}))):null)}}]),t}(l.Component),Jt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={user:n.props.user,username:n.props.user.name,password:""},n.changeUsername=function(e){var t=e.target.value;n.setState({username:t})},n.changePassword=function(e){var t=e.target.value;n.setState({password:t})},n.updateUsername=function(){n.props.client.changeUsername(n.state.username)},n.updatePassword=function(){n.props.client.changePassword(n.state.password),n.setState({password:""})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,l=this.props,r=l.user,o=l.trigger;return a.a.createElement(mt.a,{trigger:o,size:"small",header:"Edit user",content:a.a.createElement(y.a,null,a.a.createElement(bt.a,{label:"Name",value:t,onChange:this.changeUsername,action:{content:"Change",onClick:this.updateUsername}}),a.a.createElement("br",null),a.a.createElement(bt.a,{label:{content:r.hasPassword?"Password is set":"Set a password",color:r.hasPassword?"green":"red"},value:n,onChange:this.changePassword,action:{content:"Change",color:r.hasPassword?void 0:"green",onClick:this.updatePassword}})),actions:[{key:"cancel",negative:!0,content:"Cancel"}]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.user!==t.user?{user:e.user,username:e.user?e.user.name:null}:null}}]),t}(l.Component),$t=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={username:"",password:"",mergeUsers:!1},n.changeUsername=function(e){var t=e.target.value;n.setState({username:t})},n.changePassword=function(e){var t=e.target.value;n.setState({password:t})},n.changeMergeUsers=function(e){var t=e.target.checked;n.setState({mergeUsers:t})},n.logIn=function(){n.props.client.logIn(n.state.username,n.state.password,n.mergeUsers),n.setState({username:"",password:""})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,l=e.mergeUsers;return a.a.createElement(mt.a,{ref:this.modal,trigger:a.a.createElement(h.a,{as:"a",icon:"sign in",content:"Log In",float:"left"}),size:"small",header:"Log In",content:a.a.createElement(y.a,null,a.a.createElement(bt.a,{label:"Name",value:t,onChange:this.changeUsername}),a.a.createElement("br",null),a.a.createElement(bt.a,{label:"Password",value:n,onChange:this.changePassword}),a.a.createElement("br",null),a.a.createElement(pt.a,{label:"Merge users",checked:l,onChange:this.changeMergeUsers})),actions:[{key:"cancel",negative:!0,content:"Cancel"},{key:"logIn",positive:!0,content:"Log In",onClick:this.logIn}]})}}]),t}(l.Component),Qt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).logOut=function(){n.props.client.logOut()},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(h.a,{as:"a",icon:"log out",content:"Log Out",onClick:this.logOut})}}]),t}(l.Component),Zt=wt(function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).changeReadyToPlay=function(){n.props.client.changeReadyToPlay(!n.props.user.readyToPlay)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.client,r=t.user,o=t.usersInfo,i=o.byId,s=o.users,c=o.online,u=o.offline,m=o.challengedUser,p=o.readyToPlay,v=o.readyToPlayMe,d=t.gamesInfo,g=d.byId,b=d.myLive,E=d.otherLive,w=d.myFinished,k=d.otherFinished,O=t.selectLiveGame,P=t.selectLiveTournament,x=t.puzzlesInfo,C=x.otherUnsolved,R=x.puzzles,S=x.otherStarted,z=x.otherNotStarted,A=x.otherSolved,j=x.byGameId,I=t.tournamentsInfo,M=I.byId;return r?a.a.createElement(l.Fragment,null,a.a.createElement(ft.a.Group,{centered:!0},r?a.a.createElement(Xt,{client:n,otherUser:r,user:r,challengedUser:m,readyToPlayUsers:p,readyToPlayMeUsers:v}):null,C.length?a.a.createElement(Ut,{user:r,usersById:i,gamesById:g,puzzle:C[0],selectPuzzle:this.props.selectLivePuzzle,currentPuzzleId:null,applicableSettings:n.applicableSettings}):null),a.a.createElement(y.a,null,a.a.createElement(f.a,{menu:{pointing:!0},panes:[{key:"my-live",label:"My Live games",items:b,color:"green"},{key:"other-live",label:"Other Live games",items:E,color:"green"},{key:"my-past",label:"My Past games",items:w},{key:"other-past",label:"Other Past games",items:k}].filter(function(e){return e.items.length}).map(function(e){var t=e.key,o=e.label,s=e.items,c=e.color;return{menuItem:{key:t,content:a.a.createElement(l.Fragment,null,o," ",a.a.createElement(h.a,{content:s.length,color:c}))},render:function(){return a.a.createElement(jt,{user:r,usersById:i,tournamentsById:M,puzzlesByGameId:j,games:s,selectLiveGame:O,applicableSettings:n.applicableSettings})}}})})),R?a.a.createElement(y.a,null,a.a.createElement(f.a,{menu:{pointing:!0},panes:function(){var e=[{key:"other-started",label:"Started Puzzles",items:S,color:"green"},{key:"other-not-started",label:"New Puzzles",items:z},{key:"other-solved",label:"Solved Puzzles",items:A}].filter(function(e){return e.items.length});return e.length||(e=[{key:"puzzles",label:"Puzzles",items:R}]),e}().map(function(t){var n=t.key,r=t.label,o=t.items,i=t.color;return{menuItem:{key:n,content:a.a.createElement(l.Fragment,null,r," ",a.a.createElement(h.a,{content:o.length,color:i}))},render:function(){return a.a.createElement(Ft,{selectPuzzle:e.props.selectLivePuzzle,puzzles:o})}}})})):null,a.a.createElement(y.a,null,a.a.createElement(Mt,null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(f.a,{menu:{pointing:!0},panes:[{key:"my-live",label:"My Future & Running tournaments",items:I.myFutureAndLive,color:"green"},{key:"other-live",label:"Other Future and Running tournaments",items:I.otherFutureAndLive,color:"green"},{key:"my-past",label:"My Past tournaments",items:I.myFinished},{key:"other-past",label:"Other Past tournaments",items:I.otherFinished}].filter(function(e){return e.items.length}).map(function(e){var t=e.key,n=e.label,o=e.items,s=e.color;return{menuItem:{key:t,content:a.a.createElement(l.Fragment,null,n," ",a.a.createElement(h.a,{content:o.length,color:s}))},render:function(){return a.a.createElement(Dt,{user:r,usersById:i,tournaments:o,selectLiveTournament:P})}}})})),a.a.createElement(y.a,null,a.a.createElement(f.a,{menu:{pointing:!0},panes:[{key:"online",label:"Online Users",items:c,color:"green"},{key:"offline",label:"Offline Users",items:u},{key:"all",label:"All Users",items:s}].filter(function(e){return e.items.length}).map(function(e){var t=e.key,o=e.label,i=e.items,s=e.color;return{menuItem:{key:t,content:a.a.createElement(l.Fragment,null,o," ",a.a.createElement(h.a,{content:i.length,color:s}))},render:function(){return a.a.createElement(Wt,{client:n,users:i,user:r,challengedUser:m,readyToPlayUsers:p,readyToPlayMeUsers:v})}}})}))):a.a.createElement(f.a.Pane,null,"Connecting to server...")}}]),t}(l.Component));function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedGame:null,game:n.props.game,transformation:null},n.autoSubmitModal=a.a.createRef(),n.makeMove=function(e){n.props.submit?n.setState({game:e}):n.props.makeMove(e),n.props.onDisplayPositionChange&&n.props.onDisplayPositionChange(e)},n.takeMoveBack=function(){n.makeMove(n.state.game.takeMoveBack())},n.undo=function(){n.makeMove(n.state.game.undo())},n.newGame=function(){n.makeMove(n.state.game.constructor.create())},n.selectGame=function(e){var t=e===n.state.game?null:e;n.setState({selectedGame:t}),n.props.onSelectedGameChange&&n.props.onSelectedGameChange(t)},n.makeMoveToSelected=function(e){n.selectGame(e)},n.takeMoveBackToSelected=function(){n.selectGame(n.state.selectedGame.takeMoveBack())},n.undoToSelected=function(){n.selectGame(n.state.selectedGame.undo())},n.deselectGame=function(){n.selectGame(null)},n.submit=function(){var e=n.getMovesToSubmit();e.length&&n.props.submit(e,n.state.game)},n.resignOrAbort=function(){n.props.submit("resign")},n.changeAutoSubmitMoves=function(){n.props.client.applicableSettings.autoSubmitMoves?n.props.changeSettings(tn({},n.props.user.settings,{autoSubmitMoves:!1})):n.autoSubmitModal.current.handleOpen()},n.doAutoSubmitMoves=function(){n.props.changeSettings(tn({},n.props.user.settings,{autoSubmitMoves:!0})),n.canSubmit()&&n.submit()},n.onTransformationChange=function(e){var t=e.transformation;n.setState({transformation:t})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getMovesToSubmit",value:function(){var e=this.props.game,t=this.state.game.fullHistory,n=t.findIndex(function(t){return t.compressedFullNotation===e.compressedFullNotation});return n<0?(console.error("Could not find live game in history"),[]):t.slice(n+1).map(function(e){return e.lastMove})}},{key:"componentDidUpdate",value:function(e,t){this.props.game!==e.game&&((!this.props.game||!e.game||this.props.game.constructor!==e.game.constructor||this.props.game.compressedFullNotation!==e.game.compressedFullNotation||this.props.game.positionNotation!==e.game.positionNotation)&&(this.selectGame(null),this.setState({game:this.props.game,resigning:!1})));this.props.client.applicableSettings.autoSubmitMoves&&!this.canSubmit(e,t)&&this.canSubmit()&&this.submit()}},{key:"canSubmit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.submit,l=t.selectedGame,a=t.game;return!!n&&!l&&a!==e.game&&!!this.getMovesToSubmit().length&&(a.finished||a.nextPlayer!==e.game.nextPlayer)}},{key:"render",value:function(){var e=this.props,t=e.client,n=e.names,r=e.allowControl,o=e.matchGame,i=e.children,s=e.usersInfo.byId,c=this.state,u=c.selectedGame,m=c.game,p=c.transformation,h=u||m,d=r.length>0,f=this.canSubmit(),g=!!o&&o.tooShortToResign,b=r.includes(J.PLAYER_A),E=!u&&(this.props.submit?m.chainCount>this.props.game.chainCount:m.canUndo),w=!(this.props.submit||u||!m.previous),k=a.a.createElement(l.Fragment,null,a.a.createElement(it.a.Row,null,a.a.createElement(ln,{player:b?J.PLAYER_A:J.PLAYER_B,playerUser:o?s[o.userIds[b?0:1]]:null,canSubmit:f,canAnyPlayerSubmit:f,canUndo:E,canTakeBack:w,submit:this.props.submit?this.submit:null,undo:this.props.submit?this.takeMoveBack:this.undo,takeBack:this.takeMoveBack,changeAutoSubmitMoves:this.changeAutoSubmitMoves,game:m,applicableSettings:t.applicableSettings,names:n,allowControl:r})),a.a.createElement(it.a.Row,null,a.a.createElement(ln,{player:b?J.PLAYER_B:J.PLAYER_A,playerUser:o?s[o.userIds[b?1:0]]:null,canSubmit:!1,canAnyPlayerSubmit:f,canUndo:E,canTakeBack:w,submit:this.props.submit?this.submit:null,undo:this.props.submit?this.takeMoveBack:this.undo,takeBack:this.takeMoveBack,changeAutoSubmitMoves:this.changeAutoSubmitMoves,game:m,applicableSettings:t.applicableSettings,names:n,allowControl:r})),a.a.createElement(it.a.Row,null,a.a.createElement(an,{game:m,selectedGame:u,selectGame:this.selectGame})),a.a.createElement(it.a.Row,null,a.a.createElement(tt,{onChange:this.onTransformationChange,gameType:m.constructor})),i),O=a.a.createElement(ot,{game:h,transformation:p,makeMove:u?this.makeMoveToSelected:this.makeMove,minChainCount:h===m?this.props.submit?this.props.game.chainCount:this.props.game.canUndo?this.props.game.previous.chainCount:this.props.game.chainCount:0,allowControl:h===m?r:void 0,settings:t.applicableSettings,animated:t.applicableSettings.theme.animations,showArrows:t.applicableSettings.theme.arrows});return a.a.createElement(l.Fragment,null,a.a.createElement(y.a,{style:{textAlign:"center"}},a.a.createElement(it.a,{centered:!0,columns:"equal",textAlign:"center"},a.a.createElement(st.a,{as:it.a.Row,minWidth:800},a.a.createElement(it.a.Column,null,k),a.a.createElement(it.a.Column,null,O)),a.a.createElement(st.a,{as:l.Fragment,maxWidth:800},a.a.createElement(it.a.Row,null,a.a.createElement(it.a.Column,{textAlign:"center"},a.a.createElement(it.a.Row,null,a.a.createElement(tt,{onChange:this.onTransformationChange,gameType:m.constructor})),a.a.createElement(it.a.Row,null,O),a.a.createElement(it.a.Row,null,a.a.createElement(an,{game:m,selectedGame:u,selectGame:this.selectGame})),a.a.createElement(it.a.Row,null,a.a.createElement(ct.a,{negative:!0,content:"Undo",disabled:!E,onClick:this.props.submit?this.takeMoveBack:this.undo}),a.a.createElement(ct.a,{negative:!0,content:"Take move back",disabled:E||!w,onClick:this.takeMoveBack})))),a.a.createElement(it.a.Row,null,a.a.createElement(it.a.Column,{stretched:!1,textAlign:"center"},k))))),this.props.submit&&d?a.a.createElement(y.a,null,a.a.createElement(ut.a.Group,{widths:"two",size:"tiny"},a.a.createElement(ut.a,{value:a.a.createElement(mt.a,{trigger:a.a.createElement(ct.a,{negative:!0,disabled:!!u||this.props.game.finished},g?"Abort":"Resign"),header:g?"Abort?":"Resign?",content:"Are you sure you want to ".concat(g?"abort":"forfeit","?").concat(g?" This game is too short to resign.":""),actions:[{key:"resign",content:g?"Abort":"Resign",negative:!0,onClick:this.resignOrAbort},{key:"continue",content:"Continue",inverted:!0,secondary:!0}]})}),a.a.createElement(ut.a,{value:a.a.createElement(ct.a,{negative:!0,onClick:this.props.submit?this.takeMoveBack:this.undo,disabled:!E},"Undo")}))):null,this.props.submit?null:a.a.createElement(y.a,null,a.a.createElement(ut.a.Group,{widths:"two",size:"small"},a.a.createElement(ut.a,{value:a.a.createElement(ct.a,{negative:!0,onClick:this.takeMoveBack,disabled:!w},"Take Back a Move")}),a.a.createElement(ut.a,{value:a.a.createElement(ct.a,{negative:!0,onClick:this.newGame,disabled:!!u||!m.previous},"New Game")}))),u?a.a.createElement(y.a,{textAlign:"center"},a.a.createElement(v.a,{as:"h2"},"Reviewing previous move"),a.a.createElement(ut.a.Group,{widths:"three",size:"small"},u.finished?a.a.createElement(ut.a,{color:"green",value:n[u.winner],label:"Won!"}):a.a.createElement(ut.a,{value:n[u.nextPlayer],label:this.constructor.MOVE_TYPE_NAMES[u.moveType]}),a.a.createElement(ut.a,{value:u.moveCount,label:"Move"}),a.a.createElement(ut.a,{value:a.a.createElement(ct.a,{negative:!0,onClick:this.undoToSelected,disabled:!u.canUndo},"Undo")})),a.a.createElement(ut.a.Group,{widths:"two",size:"small"},a.a.createElement(ut.a,{value:a.a.createElement(ct.a,{negative:!0,onClick:this.takeMoveBackToSelected,disabled:!u.previous},"Take Back a Move")}),a.a.createElement(ut.a,{value:a.a.createElement(ct.a,{negative:!0,onClick:this.deselectGame},"Stop reviewing")}))):null,a.a.createElement(mt.a,{ref:this.autoSubmitModal,header:"Auto submit moves",content:"Are you sure you want to be auto submitting your moves?",actions:[{key:"yes",content:"Auto submit",onClick:this.doAutoSubmitMoves,primary:!0},{key:"no",content:"No, manually submit moves",secondary:!0}]}))}}]),t}(l.Component);nn.MOVE_TYPE_NAMES=(Ht={},Object(b.a)(Ht,J.MOVE_TYPE_PLACE_FIRST_WORKER,"Place a worker"),Object(b.a)(Ht,J.MOVE_TYPE_PLACE_SECOND_WORKER,"Place a worker"),Object(b.a)(Ht,J.MOVE_TYPE_SELECT_WORKER_TO_MOVE,"Select a worker"),Object(b.a)(Ht,J.MOVE_TYPE_MOVE_FIRST_WORKER,"Move worker"),Object(b.a)(Ht,J.MOVE_TYPE_MOVE_SECOND_WORKER,"Move worker"),Object(b.a)(Ht,J.MOVE_TYPE_BUILD_AROUND_WORKER,"Build"),Ht),nn.defaultProps={names:(Vt={},Object(b.a)(Vt,J.PLAYER_A,"Player A"),Object(b.a)(Vt,J.PLAYER_B,"Player B"),Vt),allowControl:[J.PLAYER_A,J.PLAYER_B]},nn=wt(nn);var ln=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).submitAndDisableConfirm=function(){n.props.submit(),n.props.client.updateSettings(tn({},n.props.user.settings,{confirmSubmitMoves:!1}))},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.game,n=e.player,r=e.allowControl,o=e.names,i=e.applicableSettings,s=e.changeAutoSubmitMoves,c=e.playerUser,u=e.canSubmit,m=e.canAnyPlayerSubmit,p=e.canUndo,y=e.canTakeBack,v=e.submit,h=e.undo,d=e.takeBack,f=r.includes(n),g=m?t.previous:t,b=g.nextPlayer===n,E=g.winner===n,w=g.finished;return a.a.createElement(T.a,{stackable:!0,className:Z()({attention:!w&&f&&b&&!u}),size:"massive",inverted:w||n===J.PLAYER_B,color:w?E?"green":"red":void 0,items:[{key:"icon",icon:w?E?"trophy":"thumbs down":b?"play":"hourglass",content:a.a.createElement(l.Fragment,null,a.a.createElement(dt,{gameType:t.constructor,medium:!0,applicableSettings:i,player:n,allowControl:r}),o[n])},{key:"instructions",content:w?E?"Won":"Lost":u?i.autoSubmitMoves?"Auto-submitting":a.a.createElement(l.Fragment,null,i.confirmSubmitMoves?a.a.createElement(mt.a,{size:"mini",trigger:a.a.createElement(ct.a,{positive:!0,className:"attention"},"Submit..."),header:"Submit move",content:a.a.createElement(mt.a.Content,null,"Are you sure you want to submit these moves?",a.a.createElement("br",null),a.a.createElement(ot,{game:t,medium:!0,settings:i,animated:!0,showArrows:!0})),actions:[{key:"never-ask-again",content:"Never ask again",onClick:this.submitAndDisableConfirm},{key:"cancel",negative:!0,content:"Cancel"},{key:"ok",positive:!0,content:"Submit",onClick:v}]}):a.a.createElement(ct.a,{positive:!0,className:"attention",onClick:v},"Submit"),f&&p?a.a.createElement(l.Fragment,null," or ",a.a.createElement(ct.a,{negative:!0,content:"Undo",disabled:!p,onClick:h})):null):b?f&&p?a.a.createElement(l.Fragment,null,this.constructor.MOVE_TYPE_NAMES[g.moveType]," or ",a.a.createElement(ct.a,{negative:!0,content:"Undo",disabled:!p,onClick:h})):this.constructor.MOVE_TYPE_NAMES[g.moveType]:"Waiting for ".concat(o[J.OTHER_PLAYER[n]])},p||!y||b?null:{key:"take-move-back",content:a.a.createElement(ct.a,{negative:!0,content:"Take move back",onClick:d})},!w&&v&&r.includes(n)?{key:"auto-submit",content:a.a.createElement(pt.a,{label:"Auto submit moves",toggle:!0,checked:i.autoSubmitMoves,onChange:s})}:null,w&&c&&c.online?{key:"challenge",content:a.a.createElement(Kt,{otherUser:c})}:null].filter(function(e){return e})})}}]),t}(l.Component);ln.MOVE_TYPE_NAMES=(qt={},Object(b.a)(qt,J.MOVE_TYPE_PLACE_FIRST_WORKER,"Place a worker"),Object(b.a)(qt,J.MOVE_TYPE_PLACE_SECOND_WORKER,"Place a worker"),Object(b.a)(qt,J.MOVE_TYPE_SELECT_WORKER_TO_MOVE,"Select a worker"),Object(b.a)(qt,J.MOVE_TYPE_MOVE_FIRST_WORKER,"Move worker"),Object(b.a)(qt,J.MOVE_TYPE_MOVE_SECOND_WORKER,"Move worker"),Object(b.a)(qt,J.MOVE_TYPE_BUILD_AROUND_WORKER,"Build"),qt),ln=wt(ln),(function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={activePage:1},n.onPageChange=function(e,t){var l=t.activePage;n.setState({activePage:l})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.game,n=e.applicableSettings,r=e.selectedGame,o=e.selectGame,i=e.pageSize,s=e.moveNotation,c=this.state.activePage,u=Math.ceil((t.history.length-1)/i),m=Object(g.a)(t.history).slice(1+(u-c)*i,1+(u-c)*i+i).reverse(),p=m[m.length-1];return a.a.createElement(y.a,null,a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,a.a.createElement(an,{game:t,selectedGame:r,selectGame:o})),a.a.createElement(it.a.Row,null,m.map(function(e){return a.a.createElement(l.Fragment,{key:e.chainCount},e.moveCount%2===1?a.a.createElement(h.a,{content:e.moveCount-1}):null,a.a.createElement(ot,{game:e,small:!0,onSelect:o,selected:e===r,settings:n}),s?a.a.createElement(h.a,{color:"green"},e.lastMovesInHistory.map(function(e){var t=e.x,n=e.y;return e.resign?"R":"".concat(["A","B","C","D","E"][t]).concat(n+1)}).join("/")):null)}),p&&p.moveCount%2===0?a.a.createElement(h.a,{content:p.moveCount-2}):null),a.a.createElement(it.a.Row,null,a.a.createElement(yt.a,{totalPages:u,activePage:c,onPageChange:this.onPageChange,pointing:!0,secondary:!0}))))}}]),t}(l.Component)).defaultProps={pageSize:10,moveNotation:!1};var an=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).goToCurrentMove=function(){n.canGoToCurrentMove()&&n.props.selectGame(n.props.game)},n.goToNextMove=function(){if(n.canGoToNextMove()){var e=n.props.game.history.indexOf(n.props.selectedGame||n.props.game);n.props.selectGame(n.props.game.history[e+1])}},n.goToAncestor=function(){var e=n.gameIndexes.mostRecentAncestorGameIndex;n.props.selectGame(n.props.game.history[e])},n.goToPreviousMove=function(){n.canGoToPreviousMove()&&n.props.selectGame((n.props.selectedGame||n.props.game).previousInHistory)},n.goToPreviousVariationMove=function(){n.props.selectGame(n.props.selectedGame.previousInHistory)},n.goToFirstMove=function(){n.canGoToFirstMove()&&n.props.selectGame(n.props.game.history[0])},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.keydown;if(t.event){var n=t.event,l=n.which,a=n.shiftKey;l===vt.a.left&&a?this.goToCurrentMove():l===vt.a.home?this.goToCurrentMove():l!==vt.a.left||a?l!==vt.a.right||a?l===vt.a.right&&a?this.goToFirstMove():l===vt.a.home&&this.goToFirstMove():this.goToPreviousMove():this.goToNextMove()}}},{key:"canGoToCurrentMove",value:function(){var e=this.gameIndexes;return e.selectedGameIndex!==e.lastGameIndex}},{key:"canGoToNextMove",value:function(){var e=this.gameIndexes,t=e.selectedGameIndex,n=e.lastGameIndex;return t>=0&&t!==n}},{key:"canGoToPreviousMove",value:function(){var e=this.gameIndexes.selectedGameIndex;return e>=0&&0!==e}},{key:"canGoToFirstMove",value:function(){return 0!==this.gameIndexes.selectedGameIndex}},{key:"render",value:function(){var e=this.props,t=e.game,n=e.selectedGame,l=this.gameIndexes,r=l.selectedGameIndex,o=l.mostRecentAncestorGameIndex;return a.a.createElement(T.a,{size:"massive",items:[{key:"current",icon:"fast backward",onClick:this.goToCurrentMove,disabled:!this.canGoToCurrentMove()}].concat(Object(g.a)(r>=0?[{key:"previous",icon:"backward",onClick:this.goToNextMove,disabled:!this.canGoToNextMove()},{key:"moveCount",content:r>=0?"".concat((n||t).moveCount,"/").concat(t.moveCount):n.moveCount,disabled:t.finished},{key:"next",icon:"forward",onClick:this.goToPreviousMove,disabled:!this.canGoToPreviousMove()}]:[{key:"goToAncestor",content:"Return to ".concat(o,"/").concat(t.moveCount),onClick:this.goToAncestor}]),[{key:"first",icon:"fast forward",onClick:this.goToFirstMove,disabled:!this.canGoToFirstMove()}],Object(g.a)(r>=0?[]:[{key:"ancestor",content:"Variation ".concat(n.moveCount,"/").concat(o),disabled:!0},{key:"next",icon:"forward",onClick:this.goToPreviousVariationMove,disabled:n.moveCount<=1}]))})}},{key:"gameIndexes",get:function(){for(var e=this.props,t=e.game,n=e.selectedGame,l=t.history.indexOf(n||t),a=l,r=n;-1===a&&r;)r=r.previousInHistory,a=t.history.indexOf(r);return{selectedGameIndex:l,lastGameIndex:t.history.length-1,mostRecentAncestorGameIndex:a}}}]),t}(l.Component);an.keys=["left","right","shift+left","shift+right","home","end"],an=Object(vt.b)(an.keys)(an);var rn=nn;function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}var sn=wt(function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({selectedGame:null,error:!1},n.constructor.getGameAndErrorFromUrlPosition()),n.dismissUrlPositionError=function(){n.setState({error:null})},n.makeMove=function(e){n.setState({game:e})},n.share=function(){var e=window.location.href;if(navigator.share){var t=n.state.game;navigator.share({title:"Thyra Online - Game after ".concat(t.moveCount," moves"),text:"Review Santorini game between after ".concat(t.moveCount," moves"),url:e}).catch(function(){P(e),alert("Link copied to clipboard")})}else P(e),alert("Link copied to clipboard")},n.onSelectedGameChange=function(e){n.setState({selectedGame:e})},n.switchToClassic=function(){n.switchTo(J.Classic)},n.switchToHex=function(){n.switchTo(J.Hex)},n.switchTo=function(e){n.setState({selectedGame:null,game:e.create(),error:!1})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.game,n=e.error,r=e.selectedGame,o=this.props.user;return a.a.createElement(l.Fragment,null,a.a.createElement(mt.a,{open:n,size:"mini",onClose:this.dismissUrlPositionError,header:"Could not load shared position",content:"".concat(n,". Please check that you copied the full URL"),actions:[{key:"ok",content:"OK",positive:!0}]}),a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,a.a.createElement(T.a,{inverted:!0,size:"massive",items:[{key:"share",icon:"share",content:"Share position",color:"green",active:!0,as:"a",href:"?position=".concat((r||t).compressedFullNotation),title:navigator.share?"Click to open the sharing menu":"Click to copy URL to game"},{key:"openings-database",icon:"database",content:"See in openings DB",color:"green",active:!0,as:"a",href:"/openings-database?position=".concat((r||t).compressedFullNotation),title:navigator.share?"Click to open the sharing menu":"Click to copy URL to game",target:"_blank"}]}))),a.a.createElement(rn,{user:o,game:t,makeMove:this.makeMove,onSelectedGameChange:this.onSelectedGameChange},a.a.createElement(ct.a,{onClick:this.switchToClassic,content:"Switch to Classic",disabled:t.constructor===J.Classic}),a.a.createElement(ct.a,{onClick:this.switchToHex,content:"Switch to Hex",disabled:t.constructor===J.Hex})))}}],[{key:"getGameAndErrorFromUrlPosition",value:function(){var e=new URLSearchParams(window.location.search).get("position");if(e){var t,n;try{n=(t=J.Classic.fromCompressedMoveNotation(e))?null:"The position was not valid"}catch(l){t=null,n="The series of moves where not valid"}return t?{game:t,error:!1}:{game:J.Classic.create(),error:n}}return{game:J.Classic.create(),error:!1}}}]),t}(l.Component));function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var mn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).themeSchemeOptions=[{value:"",label:"Default"},{value:"subtle",label:"Subtle"},{value:"pastel",label:"Pastel"},{value:"green",label:"Green"},{value:"halloween",label:"Halloween"}],n.themeCellsOptions=[{value:"original",label:"Original"},{value:"halloween",label:"Halloween"}],n.themePiecesOptions=[{value:"pawn",label:"Pawn"},{value:"king",label:"King"},{value:"circle",label:"Circle"},{value:"certificate",label:"Star"},{value:"sun",label:"Sun"},{value:"rocket",label:"Rocket"},{value:"bug",label:"Bug"},{value:"eye",label:"Eye"},{value:"user",label:"User"},{value:"halloween-witch-hat",label:"Halloween: Witch Hat"},{value:"halloween-cauldron",label:"Halloween: Cauldron"},{value:"halloween-bat",label:"Halloween: Bat"},{value:"halloween-spider",label:"Halloween: Spider"},{value:"halloween-cat",label:"Halloween: Cat"},{value:"halloween-tombstone",label:"Halloween: Tombstone"},{value:"halloween-pumpkin",label:"Halloween: Pumpkin"},{value:"halloween-ghost",label:"Halloween: Ghost"}],n.themeNumbersOptions=[{value:"",label:"None"},{value:"obvious",label:"Obvious"},{value:"subtle",label:"Subtle"},{value:"very-subtle",label:"Very subtle"}],n.themeDemoBoard=function(e){var t=n.props.settings.theme;return a.a.createElement(rt,{medium:!0,settings:{theme:un({},t,{animations:!1},e)}})},n.updateAutoSubmitMove=function(e,t){var l=t.checked;n.props.updateSettings({autoSubmitMoves:l})},n.updateConfirmSubmitMoves=function(e,t){var l=t.checked;n.props.updateSettings({confirmSubmitMoves:l})},n.updateEnableNotifications=function(e,t){var l=t.checked;n.props.updateSettings({enableNotifications:l})},n.updateThemeUseTopicalTheme=function(e,t){var l=t.checked;n.props.updateSettings({theme:{useTopicalTheme:l}})},n.updateThemeRotateOpponent=function(e,t){var l=t.checked;n.props.updateSettings({theme:{rotateOpponent:l}})},n.updateAnimations=function(e,t){var l=t.checked;n.props.updateSettings({theme:{animations:l}})},n.updateArrows=function(e,t){var l=t.checked;n.props.updateSettings({theme:{arrows:l}})},n.updateThemeNumbers=function(e,t){var l=t.value;n.props.updateSettings({theme:{numbers:l}})},n.updateThemeScheme=function(e,t){var l=t.value;n.props.updateSettings({theme:{scheme:l}})},n.updateThemePieces=function(e,t){var l=t.value;n.props.updateSettings({theme:{pieces:l}})},n.updateThemeCells=function(e,t){var l=t.value;n.props.updateSettings({theme:{cells:l}})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.settings,r=n.autoSubmitMoves,o=n.confirmSubmitMoves,i=n.enableNotifications,s=n.theme,c=t.applicableSettingsName,u=t.applicableSettingsOverride,m=s.useTopicalTheme,p=s.cells,h=void 0===p?"original":p,d=s.pieces,g=void 0===d?"king":d,b=s.scheme,E=s.rotateOpponent,w=s.animations,k=s.arrows,O=s.numbers;return a.a.createElement(f.a,{menu:{pointing:!0,attached:!1},panes:[{menuItem:"Playing",render:function(){return a.a.createElement(y.a,null,a.a.createElement(It.a,null,a.a.createElement(It.a.Group,null,a.a.createElement(pt.a,{label:"Auto-submit online moves",name:"autoSubmitMoves",checked:r,onChange:e.updateAutoSubmitMove})),a.a.createElement(It.a.Group,null,a.a.createElement(pt.a,{label:"Confirm before submitting online moves",name:"confirmSubmitMoves",checked:o,onChange:e.updateConfirmSubmitMoves})),a.a.createElement(It.a.Group,null,a.a.createElement(pt.a,{label:"Enable notifications",name:"enableNotifications",checked:i,onChange:e.updateEnableNotifications}))))}},{menuItem:"Theme",render:function(){return a.a.createElement(y.a,null,a.a.createElement(it.a,{stackable:!0,columns:"equal",verticalAlign:"middle"},a.a.createElement(it.a.Row,null,a.a.createElement(it.a.Column,{textAlign:"center"},e.themeDemoBoard({animations:s.animations}))),a.a.createElement(it.a.Row,null,a.a.createElement(it.a.Column,{width:4},a.a.createElement(pt.a,{label:"Use topical theme when available",name:"theme.useTopicalTheme",checked:m,onChange:e.updateThemeUseTopicalTheme})),a.a.createElement(it.a.Column,{floated:"right",textAlign:"right"},c?a.a.createElement(l.Fragment,null,c,a.a.createElement("br",null),e.themeDemoBoard(u.theme)):null)),a.a.createElement(it.a.Row,null,a.a.createElement(f.a,{menu:{pointing:!0,attached:!1},panes:[{menuItem:"Pieces",render:function(){return a.a.createElement(f.a.Pane,null,a.a.createElement(it.a,{stackable:!0,columns:"equal",verticalAlign:"middle"},a.a.createElement(it.a.Row,null,a.a.createElement(it.a.Column,{width:4},a.a.createElement(pt.a,{label:"Rotate Opponent",name:"theme.rotateOpponent",checked:E,onChange:e.updateThemeRotateOpponent})),a.a.createElement(it.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({rotateOpponent:!0}))),a.a.createElement(it.a.Row,null,a.a.createElement(it.a.Column,{width:4},a.a.createElement(pt.a,{label:"Animation",name:"theme.animations",checked:w,onChange:e.updateAnimations})),a.a.createElement(it.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({animations:!0}))),a.a.createElement(it.a.Row,null,a.a.createElement(it.a.Column,{width:4},a.a.createElement(pt.a,{label:"Arrows",name:"theme.arrows",checked:k,onChange:e.updateArrows})),a.a.createElement(it.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({arrows:!0}))),a.a.createElement(it.a.Row,null,a.a.createElement(it.a.Column,{textAlign:"center"},a.a.createElement(It.a.Field,null,a.a.createElement(v.a,{as:"h2"},"Pieces:")))),e.themePiecesOptions.map(function(t){return a.a.createElement(it.a.Row,{key:"theme-pieces-".concat(t.value)},a.a.createElement(it.a.Column,{width:4},a.a.createElement(pt.a,{radio:!0,label:t.label,name:"theme.pieces",value:t.value,checked:g===t.value,onChange:e.updateThemePieces})),a.a.createElement(it.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({pieces:t.value})))})))}},{menuItem:"Board",render:function(){return a.a.createElement(f.a.Pane,null,a.a.createElement(it.a,{stackable:!0,columns:"equal",verticalAlign:"middle"},a.a.createElement(it.a.Row,null,a.a.createElement(it.a.Column,{textAlign:"center"},a.a.createElement(It.a.Field,null,a.a.createElement(v.a,{as:"h2"},"Cells:")))),e.themeCellsOptions.map(function(t){return a.a.createElement(it.a.Row,{key:"theme-cells-".concat(t.value)},a.a.createElement(it.a.Column,{width:4},a.a.createElement(pt.a,{radio:!0,label:t.label,name:"theme.cells",value:t.value,checked:h===t.value,onChange:e.updateThemeCells})),a.a.createElement(it.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({cells:t.value})))}),a.a.createElement(it.a.Row,null,a.a.createElement(it.a.Column,{textAlign:"center"},a.a.createElement(It.a.Field,null,a.a.createElement(v.a,{as:"h2"},"Colours:")))),e.themeSchemeOptions.map(function(t){return a.a.createElement(it.a.Row,{key:"theme-scheme-".concat(t.value)},a.a.createElement(it.a.Column,{width:4},a.a.createElement(pt.a,{radio:!0,label:t.label,name:"theme.scheme",value:t.value,checked:b===t.value,onChange:e.updateThemeScheme})),a.a.createElement(it.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({scheme:t.value})))})))}},{menuItem:"Level Indicators",render:function(){return a.a.createElement(f.a.Pane,null,a.a.createElement(it.a,{stackable:!0,columns:"equal",verticalAlign:"middle"},e.themeNumbersOptions.map(function(t){return a.a.createElement(it.a.Row,{key:"theme-numbers-".concat(t.value)},a.a.createElement(it.a.Column,{width:4},a.a.createElement(pt.a,{radio:!0,label:t.label,name:"theme.numbers",value:t.value,checked:O===t.value,onChange:e.updateThemeNumbers})),a.a.createElement(it.a.Column,{floated:"right",textAlign:"right"},e.themeDemoBoard({numbers:t.value})))})))}}]}))))}}]})}}]),t}(l.Component),pn=wt(function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={user:null,settings:j.getDefaultSettings()},n.updateSettings=function(e){n.setState(function(t){return{settings:un({},t.settings,{},e,{theme:un({},t.settings.theme,{},e.theme)})}})},n.save=function(){n.props.client.updateSettings(n.state.settings)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.settings,t=this.props.client;return a.a.createElement(mt.a,{trigger:a.a.createElement(h.a,{as:"a",icon:"cog",content:"Settings"}),size:"small",header:"Settings",actions:[{key:"cancel",content:"Cancel"},{key:"save",content:"Save",positive:!0,onClick:this.save}],content:{scrolling:!0,content:a.a.createElement(mn,{settings:e,updateSettings:this.updateSettings,applicableSettingsName:t.applicableSettingsName,applicableSettingsOverride:t.applicableSettingsOverride})}})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.user&&e.user!==t.user?{user:e.user,settings:e.client.settings}:{}}}]),t}(l.Component)),yn=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t,n=this.props,r=n.game,o=n.player;r?r.initialPlayerA.id===o.id?(e=r.initialPlayerA,t=r.resultingPlayerAScore):r.initialPlayerB.id===o.id?(e=r.initialPlayerB,t=r.resultingPlayerBScore):(e=null,t=null):(e=null,t=null);var i=r&&r.winnerUserId===o.id;return a.a.createElement(l.Fragment,null,i?a.a.createElement(gt.a,{name:"trophy",color:"green"}):null," ",a.a.createElement("span",{style:i?{color:"#21BA45"}:void 0},o.name,e&&!r.tournamentId?a.a.createElement(l.Fragment,null," ","(",t?a.a.createElement(l.Fragment,null,i?"+".concat(e.winPoints):e.losePoints," ",a.a.createElement(gt.a,{name:"long arrow alternate right"})," ",t):a.a.createElement(l.Fragment,null,e.score," ","+",e.winPoints,"/",e.losePoints),")"):null),a.a.createElement(xt,{floated:"right",size:"mini",hash:o.id}))}}]),t}(l.Component),vn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={selectedGame:null},n.gameSelector=Object(Ct.a)([function(e){return e.match.params.id},function(e){return e.gamesInfo.byId}],function(e,t){return t[e]}),n.playersInfoSelector=Object(Ct.a)([function(e){return e.user},function(e){return e.usersInfo},function(){return n.game}],function(e,t,n){var l=t.byId,a=l[n.userIds[0]],r=l[n.userIds[1]],o=!!e&&a.id===e.id,i=!!e&&r.id===e.id;return{playerA:a,playerB:r,isUserPlayerA:o,isUserPlayerB:i,userPlayer:o?J.PLAYER_A:i?J.PLAYER_B:null,otherUser:o?r:i?a:null}}),n.gameGameSelector=Object(Ct.a)([function(){return n.game}],function(e){return e?J.Classic.deserialize(e.game):null}),n.dismissUrlGameError=function(){n.props.selectLiveGame(null)},n.submit=function(e){n.props.client.submitGameMove(n.game,e)},n.close=function(){n.props.selectLiveGame(null)},n.changeSettings=function(e){n.props.client.updateSettings(e)},n.shareGame=function(e){var t=window.location.href;if(navigator.share){var l=n.game,a=n.playersInfo,r=a.playerA,o=a.playerB;navigator.share({title:"Thyra Online - ".concat(l.finished?"Review":"Live"," ").concat(r.name," vs ").concat(o.name),text:"".concat(l.finished?"Review finished":"Watch live"," Santorini game between ").concat(r.name," and ").concat(o.name),url:t}).catch(function(){P(t),alert("Link copied to clipboard")})}else P(t),alert("Link copied to clipboard");e.preventDefault()},n.challengeUser=function(){var e=n.playersInfo.otherUser;e&&n.props.client.changeReadyToPlay(e.id)},n.stopChallengeUser=function(){n.props.client.changeReadyToPlay(!1)},n.onSelectedGameChange=function(e){n.setState({selectedGame:e})},n.copyPlayPosition=function(){P((n.state.selectedGame||n.state.game).positionNotation),alert("Play position copied to clipboard")},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.game;e&&this.props.selectLiveGame(e)}},{key:"componentDidUpdate",value:function(){var e=this.game;e&&this.props.selectLiveGame(e)}},{key:"render",value:function(){var e,t=this.props,n=t.location,r=t.client,o=t.user,i=t.game,s=t.selectLiveGame,c=t.usersInfo,u=c.challengedUser,m=c.byId,p=t.gamesInfo,v=p.otherLive,d=p.myLive,f=t.tournamentsInfo.byId,g=t.puzzlesInfo.byGameId,E=this.state.selectedGame,w=this.gameGame;if(!w)return a.a.createElement(l.Fragment,null,a.a.createElement(mt.a,{open:!0,size:"mini",onClose:this.dismissUrlGameError,header:"Could not find game",content:"This game cannot be found. Please check that you copied the full URL, or perhaps the game was aborted",actions:[{key:"ok",content:"OK",positive:!0}]}),"Could not find game");var k=this.playersInfo,O=k.otherUser,P=k.playerA,x=k.playerB,C=k.isUserPlayerA,S=k.isUserPlayerB,z=k.userPlayer;if(!P||!x)return null;var A=a.a.createElement(y.a,null,a.a.createElement(Kt,{otherUser:o}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(jt,{user:o,selectLiveGame:s,games:d.concat(v),usersById:m,tournamentsById:f,puzzlesByGameId:g,terse:!0,live:!0,currentGameId:i?i.id:null,reverse:!1,applicableSettings:r.applicableSettings})),j=i?f[i.tournamentId]:null,I=i&&g[i.id]||[];return a.a.createElement(l.Fragment,null,a.a.createElement(pn,null),a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,a.a.createElement(T.a,{stackable:!0,size:"massive",inverted:!0,items:[{key:"close",content:"Close",icon:"x",onClick:this.close,color:"red",active:!0},{key:"share",content:"Share Game",icon:"share",onClick:this.shareGame,as:M.c,to:n.pathname,color:"green",active:!0,title:navigator.share?"Click to open the sharing menu":"Click to copy URL to game"},{key:"play",content:"Play position",icon:"retweet",as:M.c,to:"/hotseat?position=".concat((E||w).compressedFullNotation),color:"green",active:!0,title:"Click to open hotseat with this game",target:"_blank"},i&&i.finished?{key:"openings-database",icon:"database",content:"See in openings DB",color:"green",active:!0,as:M.c,to:"/openings-database?position=".concat((E||w).compressedFullNotation),title:navigator.share?"Click to open the sharing menu":"Click to copy URL to game",target:"_blank"}:null,o&&o.admin?{key:"edit",content:"Create Puzzle",icon:"edit",as:M.c,to:"/puzzle/create?position=".concat((E||w).positionNotation,"&gameId=").concat(i?i.id:""),color:"green",active:!0,title:"Click to create a puzzle from this position",target:"_blank"}:null,o&&o.admin?{key:"copy-play",icon:"clipboard",content:"Copy play position",color:"green",active:!0,title:"Click to copy play position to position",onClick:this.copyPlayPosition}:null].filter(function(e){return e})})),a.a.createElement(it.a.Row,null,a.a.createElement(T.a,{stackable:!0,size:"massive",items:[{key:"player-a",content:a.a.createElement(l.Fragment,null,C?a.a.createElement(h.a,{color:"green",icon:"user",content:"Me"}):null,a.a.createElement(yn,{game:i,player:P})),color:C?"green":void 0},{key:"player-b",content:a.a.createElement(l.Fragment,null,S?a.a.createElement(h.a,{color:"green",icon:"user",content:"Me"}):null,a.a.createElement(yn,{game:i,player:x})),color:S?"green":void 0},j?{key:"tournament",content:a.a.createElement(M.c,{to:"/tournament/".concat(j.id)},a.a.createElement(gt.a,{name:"sitemap"})," ",j.name),as:"span"}:null].filter(function(e){return e})})),I.length?a.a.createElement(it.a.Row,null,a.a.createElement(T.a,{stackable:!0,size:"massive",items:I.map(function(e){return{key:e.id,content:a.a.createElement(M.c,{to:"/puzzle/".concat(e.id)},a.a.createElement(gt.a,{name:{1:"smile outline",2:"meh outline",3:"frown outline"}[e.meta.difficulty],color:{1:"green",2:"orange",3:"red"}[e.meta.difficulty]})," ",R(e))}})})):null),a.a.createElement(st.a,{as:l.Fragment,maxWidth:800},A),a.a.createElement(rn,{user:o,otherUser:O,changeSettings:this.changeSettings,game:w,matchGame:i,names:(e={},Object(b.a)(e,J.PLAYER_A,P.name),Object(b.a)(e,J.PLAYER_B,x.name),e),allowControl:[z].filter(function(e){return e}),submit:this.submit,challengeUser:this.challengeUser,stopChallengeUser:this.stopChallengeUser,challengedUser:u,onSelectedGameChange:this.onSelectedGameChange},a.a.createElement(st.a,{as:it.a.Row,minWidth:800},A)))}},{key:"game",get:function(){return this.gameSelector(this.props)}},{key:"playersInfo",get:function(){return this.playersInfoSelector(this.props)}},{key:"gameGame",get:function(){return this.gameGameSelector(this.props)}}]),t}(l.Component);vn=Object(_.g)(wt(vn));var hn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).gameGameSelector=Object(Ct.a)([function(e){return e.game}],function(e){return e?J.Classic.deserialize(e.game):null}),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectLiveGame,n=e.game,r=e.client,o=e.user,i=e.usersInfo.byId,s=e.gamesInfo,c=s.games,u=s.myLive,m=s.otherLive,p=s.myFinished,v=s.otherFinished,d=e.tournamentsInfo.byId,g=e.puzzlesInfo.byGameId;if(!Object.values(i).length)return null;var b=this.gameGame;return a.a.createElement(_.d,null,a.a.createElement(_.b,{exact:!0,path:this.props.match.path},a.a.createElement(y.a,null,a.a.createElement(f.a,{menu:{pointing:!0},panes:[{key:"my-live",label:"My Live games",items:u,color:"green"},{key:"other-live",label:"Other Live games",items:m,color:"green"},{key:"my-past",label:"My Past games",items:p},{key:"other-past",label:"Other Past games",items:v},{key:"all",label:"All games",items:c}].filter(function(e){return e.items.length}).map(function(e){var n=e.key,s=e.label,c=e.items,u=e.color;return{menuItem:{key:n,content:a.a.createElement(l.Fragment,null,s," ",a.a.createElement(h.a,{content:c.length,color:u}))},render:function(){return a.a.createElement(jt,{user:o,usersById:i,tournamentsById:d,puzzlesByGameId:g,games:c,selectLiveGame:t,applicableSettings:r.applicableSettings})}}})}))),a.a.createElement(_.b,{path:"".concat(this.props.match.path,"/:id")},a.a.createElement(vn,{game:n,gameGame:b,selectLiveGame:t})))}},{key:"gameGame",get:function(){return this.gameGameSelector(this.props)}}]),t}(l.Component),dn=Object(_.g)(wt(hn)),fn=n(125),gn=n(96),bn=n.n(gn),En=n(166),wn={notifications:new(function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"requestPermission",value:function(){var e=Object(En.a)(bn.a.mark(function e(){return bn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.Notification||"denied"===window.Notification.permission){e.next=3;break}return e.next=3,window.Notification.requestPermission();case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"notify",value:function(){var e=Object(En.a)(bn.a.mark(function e(){var t=arguments;return bn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A.applicableSettings.enableNotifications){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.requestPermission();case 4:if(window.Notification&&"granted"===window.Notification.permission)try{Object(fn.a)(Notification,Array.prototype.slice.call(t))}catch(n){console.error("Could not send notification",n)}case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}())},kn=n(56),On=n(474),Pn=(n(455),function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).tournamentSelector=Object(Ct.a)([function(e){return e.match.params.id},function(e){return e.tournamentsInfo.byId}],function(e,t){return t[e]}),n.dismissUrlTournamentError=function(){n.props.selectLiveTournament(null)},n.close=function(){n.props.selectLiveTournament(null)},n.shareTournament=function(e){var t=window.location.href;if(navigator.share){var l=Object(kn.a)(n).tournament;navigator.share({title:"Thyra Online - ".concat(l.started?l.finished?"Past":"Live":"Future"," tournament ").concat(l.name),text:"".concat(l.started?l.finished?"Review Past":"Watch Live":"Future"," Santorini tournament ").concat(l.name),url:t}).catch(function(){P(t),alert("Link copied to clipboard")})}else P(t),alert("Link copied to clipboard");e.preventDefault()},n.toggleParticipation=function(){var e=Object(kn.a)(n).tournament;n.props.toggleParticipation(e)},n.startTournament=function(){var e=Object(kn.a)(n).tournament;n.props.startTournament(e)},n.abortTournament=function(){var e=Object(kn.a)(n).tournament;n.props.abortTournament(e)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.tournament;e&&this.props.selectLiveTournament(e)}},{key:"componentDidUpdate",value:function(){var e=this.tournament;e&&this.props.selectLiveTournament(e)}},{key:"render",value:function(){var e=this.props,t=e.location,n=e.client,r=e.user,o=e.selectLiveGame,i=e.usersInfo.byId,s=e.gamesInfo.byId,c=e.tournamentsInfo,u=e.puzzlesInfo.byGameId,m=c.byId,p=this.tournament;if(!p)return a.a.createElement(l.Fragment,null,a.a.createElement(mt.a,{open:!0,size:"mini",onClose:this.dismissUrlTournamentError,header:"Could not find tournament",content:"This tournament cannot be found. Please check that you copied the full URL, or perhaps the tournament was aborted",actions:[{key:"ok",content:"OK",positive:!0}]}),"Could not find tournament");var v=w.a.orderBy(p.userIds.map(function(e){return i[e]}),[function(e){return p.userStats?p.userStats[e.id].points:0},function(e){return p.userStats?p.userStats[e.id].initialScore.score:0},"id"],["desc","desc","desc"]),h=!!r&&p.userIds.includes(r.id),d=!!r&&p.creatorUserId===r.id;return a.a.createElement(l.Fragment,null,a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,a.a.createElement(T.a,{stackable:!0,size:"massive",inverted:!0,items:[{key:"close",content:"Close",icon:"x",onClick:this.close,color:"red",active:!0},{key:"share",content:"Share Tournament",icon:"share",onClick:this.shareTournament,as:M.c,to:t.pathname,color:"green",active:!0,title:navigator.share?"Click to open the sharing menu":"Click to copy URL to tournament"}]}))),a.a.createElement(y.a,null,a.a.createElement(ut.a.Group,{widths:"three",size:"tiny"},a.a.createElement(ut.a,{value:p.started?p.finished?"Finished":"".concat(p.round,"/").concat(p.rounds):"Waiting",label:p.started?p.finished?"Status":"Rounds":"Status"}),a.a.createElement(ut.a,{value:p.userIds.length,label:"Users"}),a.a.createElement(ut.a,{value:p.gameCount,label:"Games between each pair"})),a.a.createElement(it.a,{columns:"equal"},a.a.createElement(it.a.Column,{textAlign:"left"},a.a.createElement(ct.a,{negative:!0,onClick:this.close},"Close")),a.a.createElement(it.a.Column,null,a.a.createElement(ct.a,{positive:!0,icon:!0,onClick:this.shareTournament,style:{width:"100%"},as:M.c,to:t.pathname,title:navigator.share?"Click to open the sharing menu":"Click to copy URL to tournament"},a.a.createElement(gt.a,{name:"share"})," Share Tournament")))),p.started?null:a.a.createElement(y.a,null,a.a.createElement(it.a,{columns:"equal"},a.a.createElement(it.a.Column,{textAlign:"left"},a.a.createElement(ct.a,{disabled:p.started,style:{width:"100%"},color:h?"yellow":"green",onClick:this.toggleParticipation},p.started?null:a.a.createElement(gt.a,{name:h?"hourglass":"play"}),h?"Participating":p.started?p.finished?"Tournament finished":"Tournament started":"Join the tournament")),a.a.createElement(it.a.Column,null,a.a.createElement(ct.a,{disabled:!d||v.length<2||p.started,positive:!0,icon:!0,onClick:this.startTournament,style:{width:"100%"},color:v.length>=2&&d?"green":"yellow"},p.finished?null:a.a.createElement(gt.a,{name:v.length>=2?d?"play":"hourglass":"play"}),p.started?p.finished?"Finished":"Started":v.length>=2?d?"Start tournament":"Waiting for tournament to start":"Needs at least participants")))),a.a.createElement(y.a,null,p.started?a.a.createElement(f.a,{menu:{pointing:!0,attached:!1},panes:[{menuItem:"Rankings",render:function(){return a.a.createElement(On.a,{celled:!0,collapsing:!0,unstackable:!0},a.a.createElement(On.a.Header,null,a.a.createElement(On.a.Row,null,p.finished?a.a.createElement(On.a.HeaderCell,null," "):null,a.a.createElement(On.a.HeaderCell,null,"Rank"),a.a.createElement(On.a.HeaderCell,null,"User"),a.a.createElement(On.a.HeaderCell,null,"Score (TB)"),a.a.createElement(On.a.HeaderCell,null,"Expected Score"),p.started&&!p.finished?a.a.createElement(On.a.HeaderCell,null,"Game"):null,p.finished?a.a.createElement(On.a.HeaderCell,null,"Score difference"):null)),a.a.createElement(On.a.Body,null,v.map(function(e){var t=p.userStats[e.id];return a.a.createElement(On.a.Row,{key:e.id},p.finished?a.a.createElement(On.a.Cell,null,t.rank<=3?a.a.createElement(gt.a,{name:{1:"trophy",2:"certificate",3:"certificate"}[t.rank],color:{1:"yellow",2:"grey",3:"brown"}[t.rank]}):null):null,a.a.createElement(On.a.Cell,null,t.rank),a.a.createElement(On.a.Cell,null,a.a.createElement(xt,{floated:"left",size:"mini",hash:e.id}),e.name),a.a.createElement(On.a.Cell,null,t.points===t.ratedPoints?t.points:"".concat(t.ratedPoints," (").concat(t.points,")")),a.a.createElement(On.a.Cell,null,t.initialScore.expectedPoints.toFixed(1)),p.started&&!p.finished?a.a.createElement(On.a.Cell,null,t.waitingForNextRound?"Waiting for next round":t.currentGameId?a.a.createElement(zt,{user:null,usersById:i,tournamentsById:m,puzzlesByGameId:u,game:s[t.currentGameId],selectLiveGame:o,terse:!0,live:!0,applicableSettings:n.applicableSettings}):"Finished"):null,p.finished?a.a.createElement(On.a.Cell,null,t.scoreDifference>0?"+".concat(t.scoreDifference):t.scoreDifference):null)})))}},{menuItem:"Games",render:function(){return a.a.createElement(On.a,{celled:!0,collapsing:!0,unstackable:!0},a.a.createElement(On.a.Header,null,a.a.createElement(On.a.Row,null,a.a.createElement(On.a.HeaderCell,{colSpan:2},"White"),a.a.createElement(On.a.HeaderCell,{colSpan:2},"Black"),a.a.createElement(On.a.HeaderCell,null,"Game"))),p.schedule.map(function(e,t){return a.a.createElement(l.Fragment,{key:t},a.a.createElement(On.a.Header,null,a.a.createElement(On.a.Row,null,a.a.createElement(On.a.HeaderCell,{colSpan:5},"playoff"===e.type?"Playoffs - ":null,"Round ",e.round))),a.a.createElement(On.a.Body,null,e.pairings.map(function(e,t){var r=Object(I.a)(e.userIds,2),c=r[0],p=r[1],y=e.gameId,v=s[y],h=v&&v.finished&&v.winnerUserId===c,d=v&&v.finished&&v.winnerUserId===p;return a.a.createElement(On.a.Row,{key:t},a.a.createElement(On.a.Cell,{className:Z()("tournament-game","player-a",{"player-a-won":h,"player-b-won":d})},c?a.a.createElement(l.Fragment,null,a.a.createElement(xt,{floated:"left",size:"mini",hash:c}),i[c].name):"Sitting out this round"),a.a.createElement(On.a.Cell,{className:Z()("tournament-game","player-a",{"player-a-won":h,"player-b-won":d})},v&&v.finished?v.winnerUserId===c?"1":"0":"-"),a.a.createElement(On.a.Cell,{className:Z()("tournament-game","player-b",{"player-a-won":h,"player-b-won":d})},p?a.a.createElement(l.Fragment,null,a.a.createElement(xt,{floated:"left",size:"mini",hash:p}),i[p].name):"Sitting out this round"),a.a.createElement(On.a.Cell,{className:Z()("tournament-game","player-b",{"player-a-won":h,"player-b-won":d})},v&&v.finished?v.winnerUserId===p?"1":"0":"-"),a.a.createElement(On.a.Cell,null,c&&p?v?a.a.createElement(zt,{user:null,usersById:i,tournamentsById:m,puzzlesByGameId:u,game:v,selectLiveGame:o,terse:!0,live:!0,applicableSettings:n.applicableSettings}):"Not started yet":null))})))}))}}]}):a.a.createElement(On.a,{celled:!0,collapsing:!0,unstackable:!0},a.a.createElement(On.a.Header,null,a.a.createElement(On.a.Row,null,a.a.createElement(On.a.HeaderCell,null,"User"),a.a.createElement(On.a.HeaderCell,null,"Rating"))),a.a.createElement(On.a.Body,null,v.map(function(e){return a.a.createElement(On.a.Row,{key:e.id},a.a.createElement(On.a.Cell,null,a.a.createElement(xt,{floated:"left",size:"mini",hash:e.id}),e.name),a.a.createElement(On.a.Cell,null,e.score))})))),d&&!p.started?a.a.createElement(y.a,null,a.a.createElement(it.a,{columns:"equal"},a.a.createElement(it.a.Column,{textAlign:"left"}),a.a.createElement(it.a.Column,null,a.a.createElement(mt.a,{size:"mini",trigger:a.a.createElement(ct.a,{disabled:!d,negative:!0,icon:!0,style:{width:"100%"}},a.a.createElement(gt.a,{name:"stop"}),"Abort tournament"),header:"Abort tournament",content:"Are you sure you want to abort the tournament?",actions:[{key:"yes",content:"Abort",onClick:this.abortTournament,negative:!0},{key:"no",content:"No, keep tournament",secondary:!0}]})))):null)}},{key:"tournament",get:function(){return this.tournamentSelector(this.props)}}]),t}(l.Component));Pn=Object(_.g)(wt(Pn));var xn=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectLiveGame,n=e.selectLiveTournament,r=e.toggleParticipation,o=e.startTournament,i=e.abortTournament,s=e.tournament,c=e.user,u=e.usersInfo.byId,m=e.tournamentsInfo;return Object.values(u).length?a.a.createElement(_.d,null,a.a.createElement(_.b,{exact:!0,path:this.props.match.path},a.a.createElement(y.a,null,a.a.createElement(Mt,null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(f.a,{menu:{pointing:!0},panes:[{key:"my-live",label:"My Future & Running tournaments",items:m.myFutureAndLive,color:"green"},{key:"other-live",label:"Other Future and Running tournaments",items:m.otherFutureAndLive,color:"green"},{key:"my-past",label:"My Past tournaments",items:m.myFinished},{key:"other-past",label:"Other Past tournaments",items:m.otherFinished}].filter(function(e){return e.items.length}).map(function(e){var t=e.key,r=e.label,o=e.items,i=e.color;return{menuItem:{key:t,content:a.a.createElement(l.Fragment,null,r," ",a.a.createElement(h.a,{content:o.length,color:i}))},render:function(){return a.a.createElement(Dt,{user:c,usersById:u,tournaments:o,selectLiveTournament:n})}}})}))),a.a.createElement(_.b,{path:"".concat(this.props.match.path,"/:id")},a.a.createElement(Pn,{tournament:s,selectLiveGame:t,selectLiveTournament:n,toggleParticipation:r,startTournament:o,abortTournament:i}))):null}}]),t}(l.Component),Cn=Object(_.g)(wt(xn));function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var zn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={rowsAndColumns:n.props.rowsAndColumns,arrows:null,selectedMoveCell:null,movedFromCell:null,selectedBuildCell:null,won:!1},n.isCellAvailable=function(e){var t=n.props,l=t.canMove,a=t.canBuild;if(!l&&!a)return!1;var r=n.state,o=r.selectedMoveCell,i=r.selectedBuildCell;return!r.won&&(l&&!a?n.isCellAvailableForMoving(e,o):a&&!l?n.isCellAvailableForBuilding(e,i):l&&a?o||i?o?n.isCellAvailableForMoving(e,o):!!i&&n.isCellAvailableForBuilding(e,i):n.isCellAvailableForMoving(e,o):void 0)},n.makeMove=function(e){var t=n.state,l=t.selectedMoveCell,a=t.selectedBuildCell;if(!t.won){var r=n.props,o=r.canMove,i=r.canBuild;o&&!i?n.makeMoveMoving(e,l):i&&!o?n.makeMoveBuilding(e,a):o&&i&&(l||a?l?(n.makeMoveMoving(e,l),3!==e.level&&(n.setState({movedFromCell:l}),n.makeMoveBuilding(e,a))):a&&(n.makeMoveBuilding(e,a),n.setState({movedFromCell:null})):n.makeMoveMoving(e,l))}},n.isCellUndoable=function(e){if(!n.props.canMove&&!n.props.canBuild)return!1;var t=n.state,l=t.selectedMoveCell,a=t.selectedBuildCell;if(t.won)return!1;var r=n.props,o=r.canMove,i=r.canBuild;return o&&!i?null!==l&&l.x===e.x&&l.y===e.y:i&&!o?null!==a&&a.x===e.x&&a.y===e.y:o&&i?l?l.x===e.x&&l.y===e.y:!!a&&(a.x===e.x&&a.y===e.y):void 0},n.undo=function(){var e=n.props,t=e.canMove,l=e.canBuild,a=n.state,r=a.selectedMoveCell,o=a.movedFromCell,i=a.selectedBuildCell;a.won||(t&&!l?n.setState({selectedMoveCell:null}):l&&!t?n.setState({selectedBuildCell:null}):t&&l&&(r?n.setState({selectedMoveCell:null}):i&&n.makeMoveUndoMoving(o,i)))},n.reset=function(){var e=n.props.rowsAndColumns;n.setState({rowsAndColumns:e,arrows:null,won:!1,selectedMoveCell:null,movedFromCell:null,selectedBuildCell:null})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){e.rowsAndColumns!==this.props.rowsAndColumns&&this.reset()}},{key:"isCellAvailableForMoving",value:function(e,t){return t?3!==t.level&&(1===Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))&&(!(e.level-t.level>1)&&!e.player)):e.player===J.PLAYER_A}},{key:"isCellAvailableForBuilding",value:function(e,t){return t?1===Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))&&(!(e.level>3)&&!e.player):e.player===J.PLAYER_A}},{key:"makeMoveMoving",value:function(e,t){t?this.setState(function(n){var l,a=n.rowsAndColumns;return{selectedMoveCell:null,rowsAndColumns:(l=J.Classic).updateCells.apply(l,[a].concat([{x:t.x,y:t.y,player:null,worker:null},{x:e.x,y:e.y,player:t.player,worker:t.worker}])),arrows:[{from:t,to:e,type:"move",colour:"white"}],won:3===e.level}}):this.setState({selectedMoveCell:e})}},{key:"makeMoveUndoMoving",value:function(e,t){this.setState(function(n){var l,a=n.rowsAndColumns;return{selectedMoveCell:e,selectedBuildCell:null,rowsAndColumns:(l=J.Classic).updateCells.apply(l,[a].concat([{x:t.x,y:t.y,player:null,worker:null},{x:e.x,y:e.y,player:e.player,worker:e.worker}])),arrows:null,won:!1}})}},{key:"makeMoveBuilding",value:function(e,t){t?this.setState(function(n){var l=n.rowsAndColumns;return{selectedBuildCell:null,rowsAndColumns:J.Classic.updateCells(l,{x:e.x,y:e.y,level:l[e.y].cells[e.x].level+1}),arrows:[{from:t,to:e,type:"build",colour:"white"}]}}):this.setState({selectedBuildCell:e})}},{key:"render",value:function(){var e=this.props,t=e.client,n=e.board,r=e.canMove,o=e.canBuild,i=e.rowsAndColumns,s=this.state,c=s.rowsAndColumns,u=s.arrows,m=s.won,p=s.selectedMoveCell,y=s.selectedBuildCell,v=t.applicableSettings,d=Sn({},v,{theme:Sn({},v.theme,{numbers:"obvious"})});return a.a.createElement(l.Fragment,null,r||o?a.a.createElement(l.Fragment,null,a.a.createElement("br",null),a.a.createElement(h.a,{color:m?"green":"blue",icon:m?"trophy":void 0,content:m?"You won! Press reset to start again":p||y?p?"Select a square to move to, or click on your piece to do something else":"Select a square to build on, or click on your piece to do something else":"Select one of your pieces"}),a.a.createElement("br",null)):null,a.a.createElement(Ze,Object.assign({gameType:J.Classic,medium:!0,allowControl:[],clickable:r||o,undoable:r||o,isCellAvailable:this.isCellAvailable,isCellUndoable:this.isCellUndoable,makeMove:this.makeMove,undo:this.undo,settings:d,animated:!0,showArrows:!0,rowsAndColumns:c},u?Sn({},n,{arrows:u}):n)),r||o?a.a.createElement("div",null,a.a.createElement(ct.a,{onClick:this.reset,disabled:c===i,primary:!0},"Reset")):null)}}]),t}(l.Component);zn.defaultProps={canMove:!1,canBuild:!1},zn=wt(zn);var An=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={stepIndex:0},n.goToFirstStep=function(){n.setState({stepIndex:0})},n.goToPreviousStep=function(){n.setState(function(e){return{stepIndex:e.stepIndex-1}})},n.goToNextStep=function(){n.setState(function(e){return{stepIndex:e.stepIndex+1}})},n.goToLastStep=function(){n.setState({stepIndex:n.constructor.steps.length-1})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.stepIndex,t=this.constructor.steps,n=t[e];return a.a.createElement(d.a,null,a.a.createElement(d.a.Content,null,a.a.createElement(it.a,{columns:"equal",verticalAlign:"middle",textAlign:"center"},a.a.createElement(it.a.Row,null,a.a.createElement(T.a,{size:"massive",items:[{key:"first",icon:"fast backward",onClick:this.goToFirstStep,disabled:0===e},{key:"previous",icon:"backward",onClick:this.goToPreviousStep,disabled:0===e},{key:"next",icon:"forward",onClick:this.goToNextStep,disabled:e===t.length-1},{key:"last",icon:"fast forward",onClick:this.goToLastStep,disabled:e===t.length-1}]})),a.a.createElement(it.a.Row,null,a.a.createElement(d.a.Header,null,e+1,".  ",n.title)),a.a.createElement(it.a.Row,null,a.a.createElement(d.a,{content:a.a.createElement(l.Fragment,{key:e},n.body)})),a.a.createElement(it.a.Row,null,e<t.length-1?a.a.createElement(ct.a,{primary:!0,onClick:this.goToNextStep,icon:"forward",content:"Go to next step"}):a.a.createElement(l.Fragment,null,a.a.createElement(ct.a,{positive:!0,as:M.c,to:"/lobby",icon:"play",content:"Play with someone online"}),a.a.createElement(ct.a,{positive:!0,as:M.c,to:"/hotseat",icon:"retweet",content:"Play with a friend on the same screen"}))))))}}]),t}(l.Component);An.steps=[{title:"Introduction",body:a.a.createElement(l.Fragment,null,a.a.createElement("div",null,"In this website, you can play ",a.a.createElement("strong",null,"Santorini\xa9")," games with people around the world."),a.a.createElement("div",null,"The board consists of a ",a.a.createElement("strong",null,"5x5 square grid"),", and each player, ",a.a.createElement("strong",null,"black")," and ",a.a.createElement("strong",null,"white"),", has two ",a.a.createElement("strong",null,"pieces")," each:"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:2,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST},{x:2,y:2,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement("div",null,"The ",a.a.createElement("strong",null,"objective")," of the game is to move one of your pieces to the ",a.a.createElement("strong",null,"3rd level"),", and of course, to ",a.a.createElement("strong",null,"prevent your opponent")," from doing so before you:"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:1,y:0,level:1,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:3,player:null,worker:null},{x:1,y:1,level:2,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:0},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:0},to:{x:1,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:J.PLAYER_A,worker:J.WORKER_FIRST}]},{y:1,cells:[{x:0,y:1,level:3,player:null,worker:null},{x:1,y:1,level:2,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:0},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:0},to:{x:1,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:3,player:null,worker:null},{x:1,y:1,level:2,player:J.PLAYER_A,worker:J.WORKER_FIRST}]}],board:{arrows:[{from:{x:0,y:0},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:0},to:{x:1,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:3,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:1,y:1,level:2,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:0},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:0},to:{x:1,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}))},{title:"Moving",body:a.a.createElement(l.Fragment,null,a.a.createElement("div",null,"You can ",a.a.createElement("strong",null,"move 1 square")," in any direction, ",a.a.createElement("strong",null,"horizontally"),",",a.a.createElement("strong",null,"vertically"),", or ",a.a.createElement("strong",null,"diagonally"),"."),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:2},type:"move",colour:"white"}]}}),a.a.createElement("div",null,"But you ",a.a.createElement("strong",null,"can't move in a square that has another piece"),", your's or the opponent's:"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST}]},{y:1,cells:[{x:0,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:2},type:"move",colour:"white"}]}}),a.a.createElement("div",null,"Beneath, you can ",a.a.createElement("strong",null,"try moving your pieces"),". Notice that you need to ",a.a.createElement("strong",null,"click on a piece to select it"),", and then ",a.a.createElement("strong",null,"click on the target square")," to move it. To ",a.a.createElement("strong",null,"deselect")," a selected piece ",a.a.createElement("strong",null,"click on it again"),":"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST}]},{y:1,cells:[{x:0,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND},{x:2,y:2,level:0,player:null,worker:null}]}],canMove:!0}))},{title:"Levels",body:a.a.createElement(l.Fragment,null,a.a.createElement("div",null,"In the game there are ",a.a.createElement("strong",null,"five levels"),": ",a.a.createElement(h.a,{color:"green"},"ground"),",",a.a.createElement(h.a,{color:"grey"},"level 1"),", ",a.a.createElement(h.a,{color:"yellow"},"level 2"),",",a.a.createElement(h.a,{color:"red"},"level 3"),", and the ",a.a.createElement(h.a,{color:"blue"},"blocked level (level 4)"),":"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null},{x:2,y:0,level:2,player:null,worker:null},{x:3,y:0,level:3,player:null,worker:null},{x:4,y:0,level:4,player:null,worker:null}]}]}),a.a.createElement("div",null,"You can go ",a.a.createElement("strong",null,"up one level"),", go ",a.a.createElement("strong",null,"down any number of levels"),", and ",a.a.createElement("strong",null,"move to the same level"),". You can ",a.a.createElement("strong",null,"never move to a blocked level"),":"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:2,player:null,worker:null},{x:2,y:0,level:3,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:1,player:null,worker:null},{x:1,y:2,level:1,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"move",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:2,player:null,worker:null},{x:2,y:0,level:3,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:1,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:1,player:null,worker:null},{x:1,y:2,level:1,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"move",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:2,player:null,worker:null},{x:2,y:0,level:3,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:2,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:1,player:null,worker:null},{x:1,y:2,level:1,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:0},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"move",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"move",colour:"white"}]}}),a.a.createElement("div",null,"Try it yourself below:"),a.a.createElement(zn,{canMove:!0,rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:2,player:null,worker:null},{x:2,y:0,level:3,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:1,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:1,player:null,worker:null},{x:1,y:2,level:1,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}]}))},{title:"Building",body:a.a.createElement(l.Fragment,null,a.a.createElement("div",null,"After you've moved one of your pieces, you ",a.a.createElement("strong",null,"must build on 1 nearby square"),", horizontally, vertically, or diagonally:"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:2,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:2,y:2},type:"build",colour:"white"}]}}),a.a.createElement("div",null,"You can ",a.a.createElement("strong",null,"build at any square")," next to the piece you moved: it ",a.a.createElement("strong",null,"doesn't matter which level your are"),", and which level you want to build. But you can never build more than the blocked level:"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null},{x:2,y:0,level:2,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:null,worker:null},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:3,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:2,player:null,worker:null},{x:1,y:2,level:3,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:1,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:2,y:0},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:0,y:1},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:2,y:1},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:0,y:2},type:"build",colour:"white"},{from:{x:1,y:1},to:{x:1,y:2},type:"build",colour:"white"}]}}),a.a.createElement("div",null,"Try it yourself below, by selecting your player and then building:"),a.a.createElement(zn,{canBuild:!0,rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null},{x:2,y:0,level:2,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:null,worker:null},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:3,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:2,player:null,worker:null},{x:1,y:2,level:3,player:null,worker:null},{x:2,y:2,level:4,player:null,worker:null}]}]}))},{title:"Winning",body:a.a.createElement(l.Fragment,null,a.a.createElement("div",null,"If there was no opponent on the board (you wish!), you would do something like the following moves ",a.a.createElement("strong",null,"to win"),":"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}]}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:2,y:1},type:"move",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:1,player:null,worker:null},{x:2,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:2,y:1},to:{x:1,y:1},type:"build",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:1,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:2,y:1},to:{x:1,y:1},type:"move",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:null,worker:null},{x:1,y:1,level:1,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:1},type:"build",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:1,y:1,level:1,player:null,worker:null},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}),a.a.createElement("br",null),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:1,y:1,level:2,player:null,worker:null},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:1},to:{x:1,y:1},type:"build",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:1,player:null,worker:null},{x:1,y:1,level:2,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:1},to:{x:1,y:1},type:"move",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:2,player:null,worker:null},{x:1,y:1,level:2,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:1},type:"build",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:2,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:1,y:1,level:2,player:null,worker:null},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:1,y:1},to:{x:0,y:1},type:"move",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:2,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:1,y:1,level:3,player:null,worker:null},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:1},to:{x:1,y:1},type:"build",colour:"white"}]}}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:2,player:null,worker:null},{x:1,y:1,level:3,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}],board:{arrows:[{from:{x:0,y:1},to:{x:1,y:1},type:"move",colour:"white"}]}}),a.a.createElement("div",null,"Why don't you try this below?"),a.a.createElement(zn,{canMove:!0,canBuild:!0,rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:null,worker:null}]}]}))},{title:"Good starting positions",body:a.a.createElement(l.Fragment,null,a.a.createElement("div",null,"To start the game, the first player puts their pieces anywhere on the board, and then second player does the same. Here are some good examples:"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST},{x:2,y:2,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:3,y:2,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:3,y:1,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST},{x:2,y:2,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST},{x:2,y:2,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:3,y:2,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}))},{title:"Disadvantaged starting positions",body:a.a.createElement(l.Fragment,null,a.a.createElement("div",null,"In these starting positions the both players have their pieces near the center, and they can move easily to any square on the board. In contrast, these starting positions would probably put the black players at a disadvantage, since his pieces are too far away from the opponent's:"),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST},{x:1,y:0,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST},{x:1,y:0,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:null,worker:null}]}]}),a.a.createElement(zn,{rowsAndColumns:[{y:0,cells:[{x:0,y:0,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST},{x:1,y:0,level:0,player:null,worker:null},{x:2,y:0,level:0,player:null,worker:null},{x:3,y:0,level:0,player:null,worker:null},{x:4,y:0,level:0,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:null,worker:null},{x:1,y:1,level:0,player:null,worker:null},{x:2,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]},{y:2,cells:[{x:0,y:2,level:0,player:null,worker:null},{x:1,y:2,level:0,player:null,worker:null},{x:2,y:2,level:0,player:J.PLAYER_A,worker:J.WORKER_SECOND},{x:3,y:2,level:0,player:null,worker:null},{x:4,y:2,level:0,player:null,worker:null}]},{y:3,cells:[{x:0,y:3,level:0,player:null,worker:null},{x:1,y:3,level:0,player:null,worker:null},{x:2,y:3,level:0,player:null,worker:null},{x:3,y:3,level:0,player:null,worker:null},{x:4,y:3,level:0,player:null,worker:null}]},{y:4,cells:[{x:0,y:4,level:0,player:null,worker:null},{x:1,y:4,level:0,player:null,worker:null},{x:2,y:4,level:0,player:null,worker:null},{x:3,y:4,level:0,player:null,worker:null},{x:4,y:4,level:0,player:J.PLAYER_B,worker:J.WORKER_SECOND}]}]}))},{title:"You're ready to play!",body:a.a.createElement(l.Fragment,null,a.a.createElement("div",null,"You're now ready to play! You can now ",a.a.createElement(M.c,{to:"./hotseat"},"play with a friend on the same screen")," or play online ",a.a.createElement(M.c,{to:"./lobby"},"at the lobby"),"."))}];var jn=An;n(456);function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}var Mn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({paletteSelectedItem:{x:0,y:1},paletteUpdate:{player:J.PLAYER_A,worker:J.WORKER_FIRST},position:J.Classic.getInitialRowsAndColumns(),positionError:null,urlError:!1},n.getGameAndErrorFromUrlPosition(),{selectedGame:null,previousPosition:null}),n.dismissUrlPositionError=function(){n.setState({error:null})},n.onPaletteSelectedItemChange=function(e,t){n.setState({paletteSelectedItem:e,paletteUpdate:t})},n.onPositionChange=function(e){var t,l;try{t=J.Classic.fromPosition(e),l=null}catch(a){t=J.Classic.create(),l=a.message}n.setState(function(n){return{position:e,game:t,positionError:l,previousPosition:n.position}})},n.makeMove=function(e){n.setState({game:e})},n.onSelectedGameChange=function(e){n.setState({selectedGame:e})},n.copyGame=function(){var e=n.state,t=e.game,l=e.selectedGame||t;n.onPositionChange(l.rowsAndColumns)},n.resetBoard=function(){n.onPositionChange(J.Classic.getInitialRowsAndColumns())},n.undo=function(){n.onPositionChange(n.state.previousPosition)},n.resetGame=function(){n.onPositionChange(n.state.position)},n.copyPosition=function(){P(J.Classic.getPositionNotation(n.state.position)),alert("Position copied to clipboard")},n.copyPlayPosition=function(){P((n.state.selectedGame||n.state.game).positionNotation),alert("Play position copied to clipboard")},n.usePosition=function(){n.props.usePosition(J.Classic.fromPosition(n.state.position).positionNotation)},n.discard=function(){n.props.discard()},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getGameAndErrorFromUrlPosition",value:function(){var e=new URLSearchParams(window.location.search).get("position")||this.props.initialPositionNotation;if(e){var t,n;try{(t=J.Classic.fromCompressedPositionNotation(e))||(n="The position was not valid")}catch(l){t=null,n="The board position was not valid: ".concat(l.message)}return t?{game:t,urlError:!1,position:t.rowsAndColumns}:{game:J.Classic.create(),urlError:n,position:J.Classic.getInitialRowsAndColumns()}}return{game:J.Classic.create(),urlError:!1,position:J.Classic.getInitialRowsAndColumns()}}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.client,r=e.keydown,o=e.usePosition,i=e.discard,s=this.state,c=s.paletteSelectedItem,u=s.position,m=s.paletteUpdate,p=s.positionError,v=s.urlError,h=s.game,f=s.selectedGame,g=s.previousPosition,b=n.applicableSettings,E=J.Classic.getPositionNotation(u);return a.a.createElement(l.Fragment,null,a.a.createElement(mt.a,{open:!!v,size:"mini",onClose:this.dismissUrlPositionError,header:"Could not load shared position",content:"".concat(v,". Please check that you copied the full URL"),actions:[{key:"ok",content:"OK",positive:!0}]}),a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,a.a.createElement(T.a,{inverted:!0,size:"massive",items:[{key:"share",icon:"share",content:"Share position",color:"green",active:!0,as:"a",href:"?position=".concat(E),title:navigator.share?"Click to open the sharing menu":"Click to copy URL to position"},{key:"copy",icon:"clipboard",content:"Copy position",color:"green",active:!0,title:"Click to copy position to position",onClick:this.copyPosition},{key:"copy-play",icon:"clipboard",content:"Copy play position",color:"green",active:!0,title:"Click to copy play position to position",onClick:this.copyPlayPosition}]}))),a.a.createElement(y.a,null,a.a.createElement(d.a,{error:!!p,content:p||"Position ready to use"}),a.a.createElement(rn,{user:t,settings:b,game:h,makeMove:this.makeMove,onSelectedGameChange:this.onSelectedGameChange},a.a.createElement("div",null,a.a.createElement(ct.a,{content:"Reset game",primary:!0,onClick:this.resetGame})),a.a.createElement(_n,{selectedItem:c,onSelectedItemChange:this.onPaletteSelectedItemChange,keydown:r}),a.a.createElement("div",null,a.a.createElement(ct.a,{content:"Copy from game",primary:!0,disabled:(f||h).positionNotation===E,onClick:this.copyGame}),a.a.createElement(ct.a,{content:"Reset",negative:!0,disabled:E===this.constructor.initialPositionNotation,onClick:this.resetBoard}),a.a.createElement(ct.a,{content:"Undo",secondary:!0,disabled:!g,onClick:this.undo})),a.a.createElement(Tn,{position:u,update:m,onPositionChange:this.onPositionChange}),o||i?a.a.createElement("div",null,o?a.a.createElement(ct.a,{content:"Use position",primary:!0,onClick:this.usePosition,disabled:!!p}):null,i?a.a.createElement(ct.a,{content:"Discard",negative:!0,onClick:this.discard}):null):null)))}}]),t}(l.Component);Mn.initialPositionNotation=J.Classic.getPositionNotation(J.Classic.getInitialRowsAndColumns());var _n=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={selectedItem:{x:0,y:1}},n.isCellAvailable=function(e){return!n.isCellUndoable(e)&&(0===e.y||e.x<=1)},n.isCellUndoable=function(e){var t=Object(kn.a)(n).selectedItem;return e.x===t.x&&e.y===t.y},n.makeMove=function(e){var t={x:e.x,y:e.y};if(void 0===n.props.selectedItem&&n.setState({selectedItem:t}),n.props.onSelectedItemChange){var l=e.player?{player:e.player}:{level:e.level};n.props.onSelectedItemChange(t,l)}},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.keydown;if(t.event){var n=t.event.key,l=this.constructor.moveFromKey[n];if(l){var a=l.x,r=l.y,o=this.constructor.rowsAndColumns[r].cells[a];this.makeMove(o)}}}},{key:"componentDidUpdate",value:function(e,t,n){void 0!==e.selectedItem&&void 0===this.props.selectedItem&&this.setState({selectedItem:e.selectedItem})}},{key:"render",value:function(){var e=this.props.client.applicableSettings;return a.a.createElement(Ze,{gameType:J.Classic,medium:!0,allowControl:[J.PLAYER_A,J.PLAYER_B],rowsAndColumns:this.constructor.rowsAndColumns,clickable:!0,undoable:!1,isCellAvailable:this.isCellAvailable,isCellUndoable:this.isCellUndoable,makeMove:this.makeMove,settings:e,animated:!1,showArrows:!1})}},{key:"selectedItem",get:function(){return void 0===this.props.selectedItem?this.state.selectedItem:this.props.selectedItem}}]),t}(l.Component);_n.rowsAndColumns=[{y:0,cells:[{x:0,y:0,level:0,player:null,worker:null},{x:1,y:0,level:1,player:null,worker:null},{x:2,y:0,level:2,player:null,worker:null},{x:3,y:0,level:3,player:null,worker:null},{x:4,y:0,level:4,player:null,worker:null}]},{y:1,cells:[{x:0,y:1,level:0,player:J.PLAYER_A,worker:J.WORKER_FIRST},{x:1,y:1,level:0,player:J.PLAYER_B,worker:J.WORKER_FIRST},{x:2,y:1,level:0,player:null,worker:null},{x:3,y:1,level:0,player:null,worker:null},{x:4,y:1,level:0,player:null,worker:null}]}],_n.keys=["q","0","1","2","3","4","a","b"],_n.moveFromKey={q:{x:0,y:0},0:{x:0,y:0},1:{x:1,y:0},2:{x:2,y:0},3:{x:3,y:0},4:{x:4,y:0},a:{x:0,y:1},b:{x:1,y:1}},_n=wt(_n);var Tn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={position:J.Classic.getInitialRowsAndColumns()},n.isCellAvailable=function(){return!0},n.isCellUndoable=function(){return!1},n.makeMove=function(e){var t=n.props.update;"level"in t?e.level!==t.level&&n.updatePosition({x:e.x,y:e.y,level:t.level}):"player"in t&&(e.player!==t.player?n.updatePosition({x:e.x,y:e.y,player:t.player,worker:J.WORKER_FIRST}):n.updatePosition({x:e.x,y:e.y,player:null,worker:null}))},n.updatePosition=function(e){var t=J.Classic.updateCells(n.position,e);void 0===n.props.position&&n.setState({position:t}),n.props.onPositionChange&&n.props.onPositionChange(t)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){void 0!==e.position&&void 0===this.props.position&&this.setState({position:e.position})}},{key:"render",value:function(){var e=this.position,t=this.props.client.applicableSettings;return a.a.createElement(Ze,{gameType:J.Classic,medium:!0,allowControl:[J.PLAYER_A,J.PLAYER_B],rowsAndColumns:e,clickable:!0,undoable:!1,isCellAvailable:this.isCellAvailable,isCellUndoable:this.isCellUndoable,makeMove:this.makeMove,settings:t,animated:!1,showArrows:!1})}},{key:"position",get:function(){return void 0===this.props.position?this.state.position:this.props.position}}]),t}(l.Component);Tn=wt(Tn);var Ln=Object(vt.b)(_n.SubComponent.keys)(wt(Mn));function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,l)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(n,!0).forEach(function(t){Object(b.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Gn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={editing:!0,puzzle:null,currentStep:null,tree:null,game:null},n.onCreatePuzzle=function(e){n.setState({editing:!1,puzzle:e,currentStep:e.startingPosition,tree:n.getTree(e.startingPosition),game:e.startingPosition.game})},n.onDiscardPuzzle=function(){n.setState({editing:!1})},n.makeMove=function(e){n.setState({game:e})},n.submit=function(e){var t=n.state.currentStep.game.makeMoves(e),l=n.getExistingResponse(t);if(l)n.setState({currentStep:l,game:l.game});else{var a=n.getPathIndexes(),r=n.duplicatePuzzle(a),o=r.newPuzzle,i=r.newModifyingStep,s=n.addGameToStep(i,t);n.setState({puzzle:o,currentStep:s,tree:n.getTree(o.startingPosition),game:s.game})}},n.getNextTreePath=function(e){var t=e[e.length-1];return t.playerResponses?t.playerResponses.length?t.playerResponses.map(function(t){return e.concat(t)}):[e]:t.puzzleResponse?[e.concat(t.puzzleResponse)]:[e]},n.deleteCurrentStep=function(){var e=n.state.currentStep,t=n.getPathIndexes().slice(0,-1),l=n.duplicatePuzzle(t),a=l.newPuzzle,r=l.newModifyingStep,o=n.removeStep(r,e);n.setState({puzzle:a,currentStep:o,tree:n.getTree(a.startingPosition),game:o.game})},n.editPuzzle=function(){n.setState({editing:!0})},n.createPuzzle=function(){var e=JSON.parse(JSON.stringify(n.state.puzzle,function(e,t){return t instanceof J?void 0:t}));n.props.client.createPuzzle(e)},n.updatePuzzle=function(){var e=JSON.parse(JSON.stringify(n.state.puzzle,function(e,t){return t instanceof J?void 0:t}));n.props.client.updatePuzzle(e)},n.createOrUpdatePuzzle=function(){n.state.puzzle.id?n.updatePuzzle():n.createPuzzle()},n.discardPuzzle=function(){n.state.puzzle.id?n.props.history.push("/puzzle/".concat(n.state.puzzle.id)):n.setState({editing:!0,puzzle:null,currentStep:null,tree:null,game:null})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.initialPuzzle&&this.onCreatePuzzle(this.fillGames(this.props.initialPuzzle))}},{key:"componentDidUpdate",value:function(e,t,n){if(e.puzzlesInfo.mine!==this.props.puzzlesInfo.mine&&this.state.puzzle&&!this.state.puzzle.id){var l=this.getMatchingPuzzles(e.puzzlesInfo.mine),a=this.getMatchingPuzzles(this.props.puzzlesInfo.mine);if(0===l.length&&1===a.length){var r=Object(I.a)(a,1)[0];this.props.history.push("/puzzle/".concat(r.id,"/edit"))}}}},{key:"getMatchingPuzzles",value:function(e){var t=this.state.puzzle;return e.filter(function(e){return e.isMyPuzzle&&e.startingPosition.position===t.startingPosition.position&&e.options.type===t.options.type&&e.meta.source===t.meta.source&&e.meta.gameId===t.meta.gameId&&e.meta.public===t.meta.public})}},{key:"fillGames",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(e=Dn({},e)).game&&e.position&&(n&&e.moves?e.game=n.makeMoves(e.moves):e.game=J.Classic.fromCompressedPositionNotation(e.position)),e.startingPosition)e.startingPosition=this.fillGames(e.startingPosition,e.game);else if(e.playerResponses)e.playerResponses=e.playerResponses.map(function(n){return t.fillGames(n,e.game)});else{if(!("puzzleResponse"in e))throw new Error("Cannot find type of step");e.puzzleResponse&&(e.puzzleResponse=this.fillGames(e.puzzleResponse,e.game))}return e}},{key:"getExistingResponse",value:function(e){var t=this.state.currentStep;return t.playerResponses?t.playerResponses.find(function(t){return t.position===e.positionNotation}):t.puzzleResponse&&t.puzzleResponse.position===e.positionNotation?t.puzzleResponse:null}},{key:"getPathIndexes",value:function(){var e=this.state,t=e.currentStep,n=e.tree.find(function(e){return e.find(function(e){return e===t})});return(n=n.slice(0,n.findIndex(function(e){return e===t})+1)).map(function(e,t){return 0===t?["puzzle","startingPosition"]:n[t-1].playerResponses?["playerResponses",n[t-1].playerResponses.indexOf(e)]:["puzzleResponse"]})}},{key:"duplicatePuzzle",value:function(e){var t=this.state.puzzle,n=Dn({},t,{startingPosition:Dn({},t.startingPosition)}),l=n.startingPosition,a=!0,r=!1,o=void 0;try{for(var i,s=w.a.flatten(e.slice(1))[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var c=i.value,u=l[c],m=Array.isArray(u)?u.slice():Dn({},u);l[c]=m,l=m}}catch(p){r=!0,o=p}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return{newPuzzle:n,newModifyingStep:l}}},{key:"addGameToStep",value:function(e,t){var n=null;return e.playerResponses?(e.playerResponses=e.playerResponses.slice(),e=e.playerResponses,n={position:t.positionNotation,moves:t.lastMovesInHistory,game:t,puzzleResponse:null},e.push(n)):(n={position:t.positionNotation,moves:t.lastMovesInHistory,game:t,playerResponses:[]},e.puzzleResponse=n),n}},{key:"removeStep",value:function(e,t){return e.playerResponses?e.playerResponses=e.playerResponses.filter(function(e){return e!==t}):e.puzzleResponse=null,e}},{key:"getTree",value:function(){for(var e=[[arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.puzzle.startingPosition]];e!==(e=this.getNextTree(e)););return e}},{key:"getNextTree",value:function(e){var t=w.a.flatten(e.map(this.getNextTreePath));return t.length!==e.length?t:e.find(function(e,n){return e!==t[n]})?t:e}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.user,o=n.client,i=n.gamesInfo.byId,s=n.selectLiveGame,c=this.state,u=c.editing,m=c.puzzle,p=c.game,h=c.tree,d=c.currentStep,f=o.applicableSettings;return!u||m&&!m.isMyPuzzle?m?a.a.createElement(l.Fragment,null,a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,a.a.createElement(Vn,{puzzle:m,won:!1,selectLiveGame:s})),a.a.createElement(it.a.Row,null,a.a.createElement(ct.a,{secondary:!0,onClick:this.editPuzzle},"Edit"),a.a.createElement(ct.a,{positive:!0,onClick:this.createOrUpdatePuzzle},m.id?"Update":"Create"),a.a.createElement(ct.a,{negative:!0,onClick:this.discardPuzzle},"Discard"))),a.a.createElement(y.a,null,a.a.createElement(v.a,{as:"h3"},"Tree"),a.a.createElement("table",null,a.a.createElement("tbody",null,h.map(function(e,n){return a.a.createElement("tr",{key:n},e.map(function(e,l){return a.a.createElement("td",{key:l},0===n||e!==h[n-1][l]?a.a.createElement(ot,{small:!0,selected:p===e.game,onSelect:function(){t.setState({currentStep:e,game:e.game})},settings:f,game:e.game}):null)}))})))),d.game?a.a.createElement(y.a,null,a.a.createElement(v.a,{as:"h3"},"Current step"),a.a.createElement(rn,{user:r,changeSettings:this.changeSettings,game:p,allowControl:[d.game.nextPlayer],names:(e={},Object(b.a)(e,m.options.initialPlayer,"Player"),Object(b.a)(e,J.OTHER_PLAYER[m.options.initialPlayer],"Puzzle"),e),submit:this.submit,onDisplayPositionChange:this.onDisplayPositionChange,makeMove:this.makeMove},a.a.createElement(ct.a,{negative:!0,disabled:d===m,onClick:this.deleteCurrentStep},a.a.createElement(gt.a,{name:"delete"}),"Delete response"))):null):null:a.a.createElement(Yn,{initialPuzzle:m,onCreatePuzzle:this.onCreatePuzzle,onDiscardPuzzle:this.onDiscardPuzzle,gamesById:i})}}]),t}(l.Component),Yn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={puzzle:n.props.initialPuzzle||{isMyPuzzle:!0,options:{initialPlayer:J.PLAYER_A,type:"mate",typeOptions:{mateIn:1}},meta:{source:"",gameId:null,game:null,difficulty:1,maxDifficulty:3,public:!0,publishDatetime:null},startingPosition:{position:J.Classic.create().positionNotation,game:J.Classic.create(),playerResponses:[]}},error:{position:null,gameId:null},editingPosition:!1},n.setValue=function(e,t){var l=t.name,a=t.value,r=t.checked;void 0===a&&typeof r===typeof!0&&(a=r);var o=a;l in n.constructor.valueConversion&&(o=n.constructor.valueConversion[l](o)),n.setState(function(e){var t=Dn({},e.puzzle),n=t,a=l.split("."),r=!0,i=!1,s=void 0;try{for(var c,u=a.slice(0,a.length-1)[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){n=n[c.value]||{}}}catch(m){i=!0,s=m}finally{try{r||null==u.return||u.return()}finally{if(i)throw s}}return n[a[a.length-1]]=o,{puzzle:t}}),n.onValueSet(l,o)},n.onValueSet=function(e){"startingPosition.position"===e?n.setState(function(e){var t=e.puzzle.startingPosition.position,n=!!t&&J.Classic.isValidCompressedPositionNotation(t),l=n?J.Classic.fromCompressedPositionNotation(t):null;return{error:Dn({},e.error,{position:!t||n?null:"This is not a valid position"}),puzzle:Dn({},e.puzzle,{options:Dn({},e.puzzle.options,{initialPlayer:l?l.nextPlayer:null}),startingPosition:Dn({},e.puzzle.startingPosition,{game:l})})}}):"options.type"===e?n.setState(function(e){switch(e.puzzle.options.type){case"mate":case"avoidMate":return w.a.merge({},{puzzle:e.puzzle},{puzzle:{options:{typeOptions:{mateIn:1}}}});default:return null}}):"meta.gameId"===e&&n.setState(function(e){var t=n.props.gamesById[e.puzzle.meta.gameId];return w.a.merge({},{puzzle:e.puzzle},{error:{gameId:!t&&e.puzzle.meta.gameId?"There is no game with such an ID":null},puzzle:{meta:{game:t?J.Classic.deserialize(t.game):null}}})})},n.createPuzzle=function(){var e=n.state,t=e.puzzle;e.error.position||n.props.onCreatePuzzle(t)},n.discardPuzzle=function(){n.props.onDiscardPuzzle()},n.usePosition=function(e){n.setState({editingPosition:!1}),n.setValue(null,{name:"startingPosition.position",value:e})},n.discardPosition=function(){n.setState({editingPosition:!1})},n.editPosition=function(){n.setState({editingPosition:!0})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search);if(!this.props.initialPuzzle){var t=e.get("position");t&&this.setValue(null,{name:"startingPosition.position",value:t})}var n=e.get("gameId");n&&this.setValue(null,{name:"meta.gameId",value:n})}},{key:"componentDidUpdate",value:function(e,t,n){e.gamesById!==this.props.gamesById&&this.onValueSet("meta.gameId")}},{key:"render",value:function(){var e=this.props,t=e.client,n=e.initialPuzzle,r=this.state,o=r.editingPosition,i=r.puzzle,s=r.error,c=t.applicableSettings;return o?a.a.createElement(Ln,{usePosition:this.usePosition,discard:this.discardPosition,initialPositionNotation:i.startingPosition.position}):a.a.createElement(l.Fragment,null,a.a.createElement(v.a,null,"Create a puzzle"),a.a.createElement(y.a,null,a.a.createElement(It.a,{onSubmit:this.createPuzzle},a.a.createElement(It.a.Group,null,a.a.createElement(It.a.Field,{name:"startingPosition.position",control:bt.a,label:"Initial position",placeholder:"Game position",onChange:this.setValue,value:i.startingPosition.position,required:!0,error:s.position}),a.a.createElement(ct.a,{content:"Edit position",secondary:!0,onClick:this.editPosition})),a.a.createElement(It.a.Group,{inline:!0},a.a.createElement("label",null,"Starting player"),a.a.createElement(It.a.Radio,{name:"options.initialPlayer",label:"Player A",onChange:this.setValue,value:J.PLAYER_A,checked:i.options.initialPlayer===J.PLAYER_A,disabled:i.options.initialPlayer!==J.PLAYER_A}),a.a.createElement(It.a.Radio,{name:"options.initialPlayer",label:"Player B",onChange:this.setValue,value:J.PLAYER_B,checked:i.options.initialPlayer===J.PLAYER_B,disabled:i.options.initialPlayer!==J.PLAYER_B})),i.startingPosition.game?a.a.createElement(ot,{medium:!0,settings:c,game:i.startingPosition.game}):null,a.a.createElement(It.a.Select,{options:[{key:"mate",value:"mate",text:"Mate"},{key:"avoidMate",value:"avoidMate",text:"Avoid Mate"}],name:"options.type",label:"Type",onChange:this.setValue,required:!0,value:i.options.type}),"mate"===i.options.type?a.a.createElement(It.a.Group,null,a.a.createElement(It.a.Field,{control:bt.a,type:"range",label:"Mate In: ".concat(i.options.typeOptions.mateIn),min:1,max:10,name:"options.typeOptions.mateIn",onChange:this.setValue,required:!0,value:i.options.typeOptions.mateIn})):"avoidMate"===i.options.type?a.a.createElement(It.a.Group,null,a.a.createElement(It.a.Field,{control:bt.a,type:"range",label:"Avoid Mate In: ".concat(i.options.typeOptions.mateIn),min:1,max:10,name:"options.typeOptions.mateIn",onChange:this.setValue,required:!0,value:i.options.typeOptions.mateIn})):"Unknown puzzle type",a.a.createElement(It.a.Group,null,a.a.createElement(It.a.Field,{control:bt.a,label:"Source",name:"meta.source",onChange:this.setValue,value:i.meta.source}),a.a.createElement(It.a.Field,{control:bt.a,type:"range",label:"Difficulty: ".concat(i.meta.difficulty,"/").concat(i.meta.maxDifficulty),min:1,max:i.meta.maxDifficulty,name:"meta.difficulty",onChange:this.setValue,required:!0,value:i.meta.difficulty})),a.a.createElement(It.a.Group,null,a.a.createElement(It.a.Field,{name:"meta.gameId",control:bt.a,label:"From game",placeholder:"Game ID",onChange:this.setValue,value:i.meta.gameId||"",error:s.gameId})),i.meta.game?a.a.createElement(ot,{medium:!0,settings:c,game:i.meta.game}):null,a.a.createElement(It.a.Group,null,a.a.createElement(It.a.Field,{control:pt.a,label:"Public",name:"meta.public",onChange:this.setValue,checked:i.meta.public}),a.a.createElement(It.a.Field,{control:bt.a,type:"datetime-local",label:"Publish On",name:"meta.publishDatetime",onChange:this.setValue,value:i.meta.publishDatetime?i.meta.publishDatetime.format("YYYY-MM-DDTHH:mm"):""})),a.a.createElement(It.a.Button,{primary:!0,content:n?"Update":"Create"})),a.a.createElement(ct.a,{negative:!0,content:"Discard",onClick:this.discardPuzzle})))}}]),t}(l.Component);Yn.valueConversion={"options.typeOptions.mateIn":parseInt,"meta.difficulty":parseInt,"meta.publishDatetime":function(e){return e?O()(e):null}},Yn=wt(Yn);var Un=Object(_.g)(wt(Gn)),Bn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).dismissUrlPuzzleError=function(){n.props.history.push("/puzzle")},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.puzzle,t=this.props.selectLiveGame;return e&&e.isMyPuzzle?a.a.createElement(Un,{initialPuzzle:e,selectLiveGame:t}):a.a.createElement(l.Fragment,null,a.a.createElement(mt.a,{open:!0,size:"mini",onClose:this.dismissUrlPuzzleError,header:"Could not find puzzle",content:"This puzzle cannot be found. Please check that you copied the full URL, or perhaps the puzzle was deleted",actions:[{key:"ok",content:"OK",positive:!0}]}),"Could not find puzzle")}},{key:"puzzle",get:function(){var e=this.props,t=e.match;return e.puzzlesInfo.byId[t.params.id]}}]),t}(l.Component),Fn=Object(_.g)(wt(Bn)),Wn=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.puzzlesInfo,o=r.otherStarted,i=r.otherNotStarted,s=r.otherSolved,c=r.myPublic,u=r.myPublicUnattempted,m=r.myPrivate,p=t.selectLiveGame;return a.a.createElement(_.d,null,a.a.createElement(_.b,{exact:!0,path:this.props.match.path},a.a.createElement(l.Fragment,null,n&&n.admin?a.a.createElement(y.a,null,a.a.createElement(M.b,{to:"".concat(this.props.match.path,"/create")},a.a.createElement(ct.a,{content:"Create Puzzle"}))):null,a.a.createElement(f.a,{menu:{pointing:!0},panes:[{key:"other-started",label:"Started Puzzles",items:o,color:"green"},{key:"other-not-started",label:"New Puzzles",items:i},{key:"other-solved",label:"Solved Puzzles",items:s},{key:"my-public",label:"My Public Puzzles",items:c},{key:"my-public-unattempted",label:"My Public Unattempted Puzzles",items:u},{key:"my-private",label:"My Private Puzzles",items:m}].filter(function(e){return e.items.length}).map(function(t){var n=t.key,r=t.label,o=t.items,i=t.color;return{menuItem:{key:n,content:a.a.createElement(l.Fragment,null,r," ",a.a.createElement(h.a,{content:o.length,color:i}))},render:function(){return a.a.createElement(Ft,{selectPuzzle:e.props.selectLivePuzzle,puzzles:o})}}})}))),n&&n.admin?a.a.createElement(_.b,{exact:!0,path:"".concat(this.props.match.path,"/create")},a.a.createElement(Un,{selectLiveGame:p})):null,n&&n.admin?a.a.createElement(_.b,{exact:!0,path:"".concat(this.props.match.path,"/:id/edit")},a.a.createElement(Fn,{selectLiveGame:p})):null,a.a.createElement(_.b,{exact:!0,path:"".concat(this.props.match.path,"/:id")},a.a.createElement(Kn,{selectLiveGame:this.props.selectLiveGame,selectLivePuzzle:this.props.selectLivePuzzle})))}}]),t}(l.Component),Kn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={puzzleId:n.puzzle?n.puzzle.id:null,game:n.getResumedPuzzleGame(),submittedGame:null,path:n.puzzle?[]:null,wrongMove:!1,won:!1},n.submit=function(e,t){n.state.won||n.updatePuzzle(t,{askServer:!0})},n.onDisplayPositionChange=function(){n.state.wrongMove&&n.setState({wrongMove:!1,submittedGame:null})},n.dismissUrlPuzzleError=function(){n.props.selectLivePuzzle(null)},n.close=function(){n.props.selectLivePuzzle(null)},n.sharePuzzle=function(e){var t=window.location.href;if(navigator.share){var l=n.puzzle;navigator.share({title:"Thyra Online - Solve puzzle ".concat(R(l)),text:"Solve Santorini puzzle",url:t}).catch(function(){P(t),alert("Link copied to clipboard")})}else P(t),alert("Link copied to clipboard");e.preventDefault()},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.puzzle;e&&this.props.selectLivePuzzle(e)}},{key:"componentDidUpdate",value:function(e,t){var n=this.puzzle;n&&t.puzzleId!==n.id&&(this.props.selectLivePuzzle(n),this.setState({puzzleId:n.id,game:this.getResumedPuzzleGame(),submittedGame:null,path:[],wrongMove:!1,won:!1})),!n&&this.state.puzzleId&&this.setState({puzzleId:null,game:null,submittedGame:null,path:[],wrongMove:!1,won:!1}),n&&this.props.user&&this.state.submittedGame&&this.updatePuzzle(this.state.submittedGame,{askServer:!1})}},{key:"getResumedPuzzleGame",value:function(){var e=this.userPuzzle;if(!e)return null;for(var t=J.Classic.fromCompressedPositionNotation(e.startingPosition.position),n=e.startingPosition;n;){var l=n.playerResponses[n.playerResponses.length-1];if(!l)break;if(t=t.makeMoves(l.moves),!l.puzzleResponse)break;t=t.makeMoves(l.puzzleResponse.moves),n=l.puzzleResponse}return t}},{key:"updatePuzzle",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).askServer,l=void 0===n||n;if(this.props.user){var a=this.puzzle,r=this.userPuzzle,o=e.history,i=r.startingPosition,s=o.slice(1).filter(function(e,t){return t%2===0});if(s.length){for(var c=function(){var n=s.shift();if(i.invalidPlayerPositions.includes(n.positionNotation))return t.setState({wrongMove:!0,won:!1,submittedGame:null}),{v:void 0};var r=i.playerResponses.find(function(e){return e.position===n.positionNotation});return r?r.puzzleResponse?void(i=r.puzzleResponse):(t.setState({wrongMove:!1,won:!0,game:n.positionNotation!==t.state.game.positionNotation?n:t.state.game,submittedGame:null}),{v:void 0}):(l&&(t.props.client.submitPuzzleMove(a,e.path.filter(function(e,t){return t%2===0})),t.setState({submittedGame:e})),{v:void 0})};s.length;){var u=c();if("object"===typeof u)return u.v}this.setState({game:e.makeMoves(i.moves),wrongMove:!1,won:!1,submittedGame:null})}}}},{key:"render",value:function(){var e;if(!this.props.user)return null;var t=this.puzzle;if(!t)return a.a.createElement(l.Fragment,null,a.a.createElement(mt.a,{open:!0,size:"mini",onClose:this.dismissUrlPuzzleError,header:"Could not find puzzle",content:"This puzzle cannot be found. Please check that you copied the full URL, or perhaps the puzzle was removed",actions:[{key:"ok",content:"OK",positive:!0}]}),"Could not find puzzle");var n=this.state,r=n.game,o=n.wrongMove,i=n.won;if(!r)return null;var s=this.props,c=s.user,u=s.location,m=s.selectLiveGame,p=o?a.a.createElement(d.a,{error:!0,icon:"warning",content:"That's not the right answer"}):i?a.a.createElement(d.a,{success:!0,icon:"check",content:"Correct! You solved it!"}):a.a.createElement(d.a,{content:R(t)});return a.a.createElement(l.Fragment,null,a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,a.a.createElement(T.a,{stackable:!0,size:"massive",inverted:!0,items:[{key:"close",content:"Close",icon:"x",onClick:this.close,color:"red",active:!0},{key:"share",content:"Share Game",icon:"share",onClick:this.sharePuzzle,as:M.c,to:u.pathname,color:"green",active:!0,title:navigator.share?"Click to open the sharing menu":"Click to copy URL to puzzle"},t.isMyPuzzle?{key:"edit",content:"Edit puzzle",icon:"edit",as:M.c,to:"/puzzle/".concat(t.id,"/edit"),color:"green",active:!0,title:"Click to edit the puzzle"}:null].filter(function(e){return e})})),a.a.createElement(it.a.Row,null,a.a.createElement(Vn,{puzzle:t,won:i,selectLiveGame:m})),a.a.createElement(it.a.Row,null,p)),a.a.createElement(rn,{user:c,changeSettings:this.changeSettings,game:r,allowControl:[t.options.initialPlayer],names:(e={},Object(b.a)(e,t.options.initialPlayer,"You"),Object(b.a)(e,J.OTHER_PLAYER[t.options.initialPlayer],"Puzzle"),e),submit:this.submit,onDisplayPositionChange:this.onDisplayPositionChange},p))}},{key:"puzzle",get:function(){var e=this.props,t=e.match;return e.puzzlesInfo.byId[t.params.id]}},{key:"userPuzzle",get:function(){var e=this.puzzle;return e?this.props.user.puzzles[e.id]||{meta:{started:!1,mistakes:0,won:!1},startingPosition:{position:e.startingPosition.position,invalidPlayerPositions:[],playerResponses:[]}}:null}}]),t}(l.Component);Kn=Object(_.g)(wt(Kn));var Vn=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getDifficultyStars",value:function(e,t){return w.a.range(t).map(function(t){return a.a.createElement(gt.a,{key:t,name:e>t?"star":"star outline",color:"yellow"})})}},{key:"render",value:function(){var e=this.props,t=e.client,n=e.user,r=e.usersInfo.byId,o=e.gamesInfo.byId,i=e.tournamentsInfo.byId,s=e.puzzlesInfo.byGameId,c=e.puzzle,u=e.won,m=e.selectLiveGame,p=!c.id||!!n&&c.userId===n.id;return a.a.createElement(y.a,null,a.a.createElement(v.a,{as:"h1"},R(c)),a.a.createElement(v.a,{as:"h4",className:"difficulty-header"},this.getDifficultyStars(c.meta.difficulty,c.meta.maxDifficulty)),c.meta.source?a.a.createElement(v.a,{as:"h4"},c.meta.source):null,c.meta.gameId?a.a.createElement(v.a,{as:"h4"},u||p?a.a.createElement(l.Fragment,null,"From"," ",a.a.createElement(zt,{user:null,usersById:r,tournamentsById:i,puzzlesByGameId:s,game:o[c.meta.gameId],selectLiveGame:m,terse:!0,live:!0,applicableSettings:t.applicableSettings})):"Solve puzzle to see source game"):null,c.usersStats?a.a.createElement(v.a,{as:"h4"},c.usersStats.attempted?a.a.createElement(l.Fragment,null,c.usersStats.perfect," perfectly solved, out of ",c.usersStats.imperfect," solved, out of ",c.usersStats.attempted," attempted"):"Not attempted yet"):null)}}]),t}(l.Component);Vn=wt(Vn);var Hn=Object(_.g)(wt(Wn)),qn=n(469),Xn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={step:n.props.gamesInfo.openingsDatabase,path:[],urlError:null},n.selectStep=function(e){n.setState(function(t){return{step:e,path:[].concat(Object(g.a)(t.path.slice(0,t.path.indexOf(t.step)+1)),[e])}})},n.selectStepIndex=function(e){n.setState(function(t){return{step:t.path[e]||n.props.gamesInfo.openingsDatabase}})},n.goToStart=function(){n.setState({step:n.props.gamesInfo.openingsDatabase})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.selectPathFromUrlPosition()}},{key:"componentDidUpdate",value:function(e,t,n){if(e.gamesInfo.openingsDatabase!==this.props.gamesInfo.openingsDatabase){var l=this.getPathForNewOpeningsDatabase();this.setState({step:l.length?l[l.length-1]:this.props.gamesInfo.openingsDatabase,path:l})}}},{key:"selectPathFromUrlPosition",value:function(){var e=this.constructor.getGameAndErrorFromUrlPosition(),t=e.game,n=e.error;if(n)this.setState({urlError:n});else if(t){var l=t.history.map(function(e){return{position:e.normalisedPositionNotation,displayPosition:e.normalisedPositionNotation}});this.props.gamesInfo.openingsDatabase?this.setState({path:this.getPathForPositions(l)}):this.setState({path:l,urlError:null})}}},{key:"getPathForNewOpeningsDatabase",value:function(){return this.getPathForPositions(this.state.path.map(function(e){return e.position}))}},{key:"getPathForPositions",value:function(e){var t=this.props.gamesInfo.openingsDatabase,n=[],l=!0,a=!1,r=void 0;try{for(var o,i=function(){var e=o.value;if(!(t=t.next.find(function(t){return t.position===e})))return"break";n.push(t)},s=e[Symbol.iterator]();!(l=(o=s.next()).done);l=!0){if("break"===i())break}}catch(c){a=!0,r=c}finally{try{l||null==s.return||s.return()}finally{if(a)throw r}}return n}},{key:"render",value:function(){var e=this,t=this.props,n=t.client,r=t.usersInfo.byId,o=t.gamesInfo,i=o.games,s=o.openingsDatabase,c=t.tournamentsInfo.byId,u=t.puzzlesInfo.byId,m=t.selectLiveGame,p=this.state,y=p.step,d=p.path;return y?a.a.createElement(l.Fragment,null,a.a.createElement(it.a,{centered:!0},a.a.createElement(it.a.Row,null,d.map(function(e,t){return[e,t]}).reverse().map(function(t){var l=Object(I.a)(t,2),r=l[0],o=l[1];return a.a.createElement($n,{key:o,step:r,index:o,applicableSettings:n.applicableSettings,selectStepIndex:e.selectStepIndex,selected:r===y})}),a.a.createElement(h.a,{icon:"play",color:"green",content:"Initial",onClick:this.goToStart,as:"a"}))),a.a.createElement(v.a,{as:"h2"},y.next.length," Continuations"),a.a.createElement(ft.a.Group,null,y.next.map(function(t){return a.a.createElement(Jn,{key:t.displayPosition,openingsDatabase:s,step:y,nextStep:t,applicableSettings:n.applicableSettings,selectStep:e.selectStep})})),a.a.createElement(v.a,{as:"h2"},y.gameIds.length," Games"),a.a.createElement(jt,{puzzlesByGameId:u,tournamentsById:c,selectLiveGame:m,games:i.filter(function(e){return y.gameIds.includes(e.id)}),applicableSettings:n.applicableSettings,usersById:r})):null}}],[{key:"getGameAndErrorFromUrlPosition",value:function(){var e=new URLSearchParams(window.location.search).get("position");if(e){var t,n;try{n=(t=J.Classic.fromCompressedMoveNotation(e))?null:"The position was not valid"}catch(l){t=null,n="The series of moves where not valid"}return t?{game:t,error:!1}:{game:J.Classic.create(),error:n}}return{game:null,error:!1}}}]),t}(l.Component),Jn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).gameSelector=Object(Ct.a)([function(e){return e.step},function(e){return e.nextStep}],function(e,t){return t.allMoves?J.Classic.fromMoves(t.allMoves):t.moves?J.Classic.fromCompressedPositionNotation(e.displayPosition).makeMoves(t.moves):J.Classic.fromCompressedPositionNotation(t.displayPosition)}),n.onClick=function(){n.props.selectStep(n.props.nextStep)},n.winPercentageColourSelector=Object(Ct.a)([function(e){return e.nextStep}],function(e){var t=100*e.winCount[J.PLAYER_A]/e.gameIds.length;return n.getValueByLevel(t,n.constructor.winPercentageColours)}),n.winDiffPercentageIconSelector=Object(Ct.a)([function(e){return e.step},function(e){return e.nextStep}],function(e,t){var l=100*e.winCount[J.PLAYER_A]/e.gameIds.length,a=100*t.winCount[J.PLAYER_A]/t.gameIds.length-l;return n.getValueByLevel(a,n.constructor.winDiffPercentageIcons)}),n.winDiffPercentageColourSelector=Object(Ct.a)([function(e){return e.step},function(e){return e.nextStep}],function(e,t){var l=100*e.winCount[J.PLAYER_A]/e.gameIds.length,a=100*t.winCount[J.PLAYER_A]/t.gameIds.length-l;return n.getValueByLevel(a,n.constructor.winDiffPercentageColours)}),n.gameCountSizesSelector=Object(Ct.a)([function(e){return e.nextStep.gameIds.length}],function(e){return n.getValueByLevel(e,n.constructor.gameCountSizes)}),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getValueByLevel",value:function(e,t){var n=!0,l=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var i=r.value,s=Object(I.a)(i,2),c=s[0],u=s[1];if(e<=c)return u}}catch(m){l=!0,a=m}finally{try{n||null==o.return||o.return()}finally{if(l)throw a}}return Object(I.a)(t[t.length-1],2)[1]}},{key:"render",value:function(){var e=this.props,t=e.openingsDatabase,n=e.step,l=e.nextStep,r=e.applicableSettings,o=this.game,i=100*n.winCount[J.PLAYER_A]/n.gameIds.length,s=100*l.winCount[J.PLAYER_A]/l.gameIds.length,c=s-i,u=100*l.winCount[J.PLAYER_B]/l.gameIds.length,m=this.winPercentageColour,p=this.winDiffPercentageIcon,y=this.winDiffPercentageColour,v=this.gameCountSize;return a.a.createElement(ft.a,{as:M.c,to:"/openings-database?position=".concat(o.compressedFullNotation),onClick:this.onClick},a.a.createElement(ft.a.Content,null,a.a.createElement(ft.a.Meta,null,a.a.createElement(h.a,{icon:"play",content:"".concat(l.gameIds.length," games")+" (".concat((100*l.gameIds.length/n.gameIds.length).toFixed(),"%")+", ".concat((100*l.gameIds.length/t.gameIds.length).toFixed(),"% tot.)")}),a.a.createElement(h.a,{icon:{name:"chess king",color:"grey"},content:"".concat(s.toFixed(),"%")}),a.a.createElement(h.a,{icon:{name:"chess king",color:"black"},content:"".concat(u.toFixed(),"%")}),a.a.createElement(h.a,{icon:{name:p,color:y},content:"".concat(c>0?"+":"").concat(c.toFixed(),"%")}),a.a.createElement(qn.a,{percent:s.toFixed(),color:m,progress:"percent",size:v}),a.a.createElement(ot,{game:o,medium:!0,settings:r,showArrows:r.theme.arrows}))))}},{key:"game",get:function(){return this.gameSelector(this.props)}},{key:"winPercentageColour",get:function(){return this.winPercentageColourSelector(this.props)}},{key:"winDiffPercentageIcon",get:function(){return this.winDiffPercentageIconSelector(this.props)}},{key:"winDiffPercentageColour",get:function(){return this.winDiffPercentageColourSelector(this.props)}},{key:"gameCountSize",get:function(){return this.gameCountSizesSelector(this.props)}}]),t}(l.Component);Jn.winPercentageColours=[[25,"red"],[45,"orange"],[55,"yellow"],[75,"olive"],[100,"green"]],Jn.winDiffPercentageColours=[[-20,"red"],[-5,"orange"],[5,"yellow"],[20,"olive"],[35,"green"]],Jn.winDiffPercentageIcons=[[-20,"angle double down"],[-5,"angle down"],[5,"angle right"],[20,"angle up"],[35,"angle double up"]],Jn.gameCountSizes=[[4,"tiny"],[14,"small"],[34,"medium"],[35,"large"]];var $n=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).gameSelector=Object(Ct.a)([function(e){return e.step.displayPosition},function(e){return e.step.allMoves}],function(e,t){return t?J.Classic.fromMoves(t):J.Classic.fromCompressedPositionNotation(e)}),n.onSelect=function(){n.props.selectStepIndex(n.props.index)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.applicableSettings,l=this.game;return a.a.createElement(M.c,{to:"/openings-database?position=".concat(l.compressedFullNotation)},a.a.createElement(ot,{game:l,small:!0,onSelect:this.onSelect,selected:t,settings:n}))}},{key:"game",get:function(){return this.gameSelector(this.props)}}]),t}(l.Component),Qn=wt(Xn),Zn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={liveGame:null,liveTournament:null,livePuzzle:null},n.selectLiveGame=function(e){var t;(t=e?"/game/".concat(e.id):"/game")!==n.props.location.pathname&&n.props.history.push(t),n.state.liveGame!==e&&n.setState({liveGame:e})},n.selectLiveTournament=function(e){var t;(t=e?"/tournament/".concat(e.id):"/tournament")!==n.props.location.pathname&&n.props.history.push(t),n.state.liveTournament!==e&&n.setState({liveTournament:e})},n.selectLivePuzzle=function(e){var t;(t=e?"/puzzle/".concat(e.id):"/puzzle")!==n.props.location.pathname&&n.props.history.push(t),n.state.livePuzzle!==e&&n.setState({livePuzzle:e})},n.toggleParticipation=function(e){var t=n.props,l=t.user,a=t.client;e.userIds.includes(l.id)?a.leaveTournament(e):a.joinTournament(e)},n.startTournament=function(e){n.props.client.startTournament(e)},n.abortTournament=function(e){n.props.client.abortTournament(e)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){this.askForNotificationPermissionOnWaitForGame(e),this.navigateToMyNewGame(e),this.notifyAboutMyMove(e)}},{key:"askForNotificationPermissionOnWaitForGame",value:function(e){var t=this.props.user;t&&(e.user&&e.user.readyToPlay||!t||!t.readyToPlay||!t.settings.enableNotifications||wn.notifications.requestPermission())}},{key:"navigateToMyNewGame",value:function(e){var t=this.props.user;if(t&&e.gamesInfo.myLive!==this.props.gamesInfo.myLive&&(!this.state.liveGame||this.state.liveGame.finished)){var n=new Set(e.gamesInfo.myLive.map(function(e){return e.id})),l=this.props.gamesInfo.myLive.map(function(e){return e.id}).filter(function(e){return!n.has(e)});if(1===l.length){var a=this.props.gamesInfo.byId[l[0]];if(1===a.move){var r=a.userIds[0]===t.id?a.userIds[1]:a.userIds[1]===t.id?a.userIds[0]:null,o=this.props.usersInfo.byId[r];wn.notifications.notify(o?"New game vs ".concat(o.name," started"):"New game started")}1===a.move&&O()(a.startDatetime).isSameOrAfter(O()().subtract(10,"s"))&&this.selectLiveGame(a)}}}},{key:"notifyAboutMyMove",value:function(e){var t=this,n=this.props.user;if(n&&this.props.gamesInfo.myLive.length){var l=this.props.gamesInfo.myLive.filter(function(e){return e.nextUserId===n.id}).filter(function(t){var l=e.gamesInfo.byId[t.id];return l&&l.nextUserId!==n.id});if(l.length){var a=l.map(function(e){var l=e.userIds[0]===n.id?e.userIds[1]:e.userIds[1]===n.id?e.userIds[0]:null;return t.props.usersInfo.byId[l]}),r=1===a.length?a[0]:null;wn.notifications.notify(r?"Your turn at game vs ".concat(r.name):"It's your turn to play in ".concat(l.length),{tag:"your-turn",body:"It's your turn to play in ".concat(l.length," games")})}}}},{key:"render",value:function(){var e=this,t=this.state,n=t.liveGame,l=t.liveTournament,r=t.livePuzzle,o=this.props,i=o.connected,s=o.disconnected,c=o.available,u=o.user,m=o.usersInfo.byId,g=n?m[n.userIds[0]]:null,b=n?m[n.userIds[1]]:null,E=!(!u||!g)&&g.id===u.id,w=!(!u||!b)&&b.id===u.id,k=E||w,O=n&&g&&b?n.finished?"Review ".concat(E?"you":g.name," vs ").concat(w?"you":b.name):k?"Live Play ".concat(E?"you":g.name," vs ").concat(w?"you":b.name):"Spectate ".concat(E?"you":g.name," vs ").concat(w?"you":b.name):"Live Play/Spectate/Review",P=!(!l||!u)&&l.userIds.includes(u.id),x=l?l.finished?"Review tournament ".concat(l.name):P?"Live tournament ".concat(l.name):"Spectate tournament ".concat(l.name):"Tournaments";return a.a.createElement(p.a,null,a.a.createElement($e.Definitions,null),a.a.createElement(y.a,{textAlign:"center"},a.a.createElement(v.a,{as:"h1"},"Thyra Online"),a.a.createElement(pn,null),a.a.createElement($t,{client:A}),u?a.a.createElement(Jt,{client:A,user:u,trigger:a.a.createElement(h.a,{as:"a",icon:"edit",content:"Edit"})}):null,a.a.createElement(Qt,{client:A})),i?null:s||!c?a.a.createElement(d.a,{negative:!0,header:"Trying to connect ot server...",content:a.a.createElement("p",null,"The server seems to be experiencing problems, or maybe it's a bit slow. It will connect as soon as possible")}):a.a.createElement(d.a,{header:"Connecting to server...",content:a.a.createElement("p",null,"Please sit tight as we're trying to connect to the server")}),a.a.createElement(Y,{menu:{pointing:!0,attached:!1,stackable:!0},panes:[A.available?{menuItem:{icon:"users",content:"Lobby"},path:"lobby",render:function(){return a.a.createElement(f.a.Pane,null,a.a.createElement(Zt,{selectLiveGame:e.selectLiveGame,selectLiveTournament:e.selectLiveTournament,selectLivePuzzle:e.selectLivePuzzle}))}}:null,A.available?{menuItem:{icon:"play",content:O},path:"game",navigate:n?"game/".concat(n.id):"game",render:function(){return a.a.createElement(f.a.Pane,null,a.a.createElement(dn,{game:n,selectLiveGame:e.selectLiveGame}))}}:null,{menuItem:{icon:"database",content:"Openings Database"},path:"openings-database",render:function(){return a.a.createElement(f.a.Pane,null,a.a.createElement(Qn,{selectLiveGame:e.selectLiveGame}))}},A.available?{menuItem:{icon:"sitemap",content:x},path:"tournament",navigate:l?"tournament/".concat(l.id):"tournament",render:function(){return a.a.createElement(f.a.Pane,null,a.a.createElement(Cn,{tournament:l,selectLiveTournament:e.selectLiveTournament,selectLiveGame:e.selectLiveGame,toggleParticipation:e.toggleParticipation,startTournament:e.startTournament,abortTournament:e.abortTournament}))}}:null,{menuItem:{icon:"retweet",content:"Hotseat"},path:"hotseat",render:function(){return a.a.createElement(f.a.Pane,null,a.a.createElement(sn,null))}},{menuItem:{icon:"puzzle",content:r?R(r):"Puzzles"},path:"puzzle",navigate:r?"puzzle/".concat(r.id):"puzzle",render:function(){return a.a.createElement(f.a.Pane,null,a.a.createElement(Hn,{puzzle:r,selectLiveGame:e.selectLiveGame,selectLivePuzzle:e.selectLivePuzzle}))}},{menuItem:{icon:"book",content:"Learn To Play"},path:"learn-to-play",render:function(){return a.a.createElement(f.a.Pane,null,a.a.createElement(jn,null))}}]}),a.a.createElement(v.a,{as:"h6",style:{color:"#dddddd"}},"v1.3.12"))}}]),t}(l.Component),el=Object(_.g)(wt(Zn));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(M.a,{basename:"/thyra-online"},a.a.createElement(_.d,null,a.a.createElement(_.b,null,a.a.createElement(el,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[270,1,2]]]);
//# sourceMappingURL=main.7ff4bf43.chunk.js.map