(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,r){e.exports=r(19)},17:function(e,t,r){},18:function(e,t,r){},19:function(e,t,r){"use strict";r.r(t);var a,n=r(1),o=r.n(n),i=r(10),l=r.n(i),c=(r(17),r(0)),s=r(5),u=r(3),v=r(7),h=r(6),E=r(8),O=(r(18),r(2)),_=function(){function e(t,r,a,n){var o=this;if(Object(s.a)(this,e),!t||!r)throw new Error("You need to pass cells, status, and previous game");this.previous=a,this.moveCount=this.previous?n?this.previous.moveCount+1:this.previous.moveCount:1,this.chainCount=this.previous?this.previous.chainCount+1:0,this.cells=t,this.allCells=Object.values(this.cells).map(function(e){return Object.values(e)}).reduce(function(e,t){return e.concat(t)}),this.rowsAndColumns=this.constructor.ROWS.map(function(e){return{y:e,cells:o.constructor.COLUMNS.map(function(t){return o.cells[e][t]})}});var i=r.nextPlayer,l=r.moveType,c=r.availableMoves,u=r.canUndo;this.nextPlayer=i,this.moveType=l,this.availableMoves=c,this.canUndo=u,this.winner=this.getWinner(),this.winner?this.finished=!0:this.hasAvailableMove(this.availableMoves)?this.finished=!1:(this.finished=!0,this.winner=this.constructor.OTHER_PLAYER[this.nextPlayer]),this.finished&&(this.availableMoves=this.constructor.noMovesAreAvailable())}return Object(u.a)(e,[{key:"createStep",value:function(e,t){return new this.constructor(e,t,this,!1)}},{key:"createNext",value:function(e,t){return new this.constructor(e,t,this,!0)}}],[{key:"create",value:function(){return new this(this.getInitialCells(),this.getInitialStatus(),null,!1)}}]),Object(u.a)(e,[{key:"checkCoordinatesAreValid",value:function(e){var t=e.x,r=e.y;if(Math.floor(t)!==t||Math.floor(r)!==r)throw new Error("Coordinates '".concat(JSON.stringify({x:t,y:r}),"' are not valid"));if(void 0===this.availableMoves[r]||void 0===this.availableMoves[r][t])throw new Error("Coordinates '".concat(JSON.stringify({x:t,y:r}),"' are out of bounds"))}},{key:"getAvailableCoordinates",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.availableMoves).map(function(e,t){return e.map(function(e,r){return e?{x:r,y:t}:null}).filter(function(e){return e})}).reduce(function(e,t){return e.concat(t)})}},{key:"hasAvailableMove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.availableMoves;return this.getAvailableCoordinates(e).length>0}},{key:"getWinner",value:function(){var e=this.allCells.find(function(e){return e.player&&3===e.level});return e?e.player:null}},{key:"getEmptyCellsAvailableMoves",value:function(e){var t=this;return this.constructor.ROWS.map(function(r){return t.constructor.COLUMNS.map(function(t){return!e[r][t].player})})}},{key:"getPlayerAvailableMoves",value:function(e,t){var r=this;return this.constructor.ROWS.map(function(a){return r.constructor.COLUMNS.map(function(n){return e[a][n].player===t&&r.hasAvailableMove(r.getMovableAvailableMoves(e,{x:n,y:a}))})})}},{key:"getMovableAvailableMoves",value:function(e,t){var r=this,a=e[t.y][t.x].level+1;return this.constructor.ROWS.map(function(n){return r.constructor.COLUMNS.map(function(r){return Math.abs(r-t.x)<=1&&Math.abs(n-t.y)<=1&&!e[n][r].player&&e[n][r].level<=3&&e[n][r].level<=a})})}},{key:"getBuildableAvailableMoves",value:function(e,t){var r=this;return this.constructor.ROWS.map(function(a){return r.constructor.COLUMNS.map(function(r){return Math.abs(r-t.x)<=1&&Math.abs(a-t.y)<=1&&!e[a][r].player&&e[a][r].level<4})})}},{key:"checkCanMakeMove",value:function(e,t,r){if(this.finished)throw new Error("The game has already finished");if(this.moveType!==e)throw new Error('You cannot perform move of type "'.concat(e,'": you need to perform "').concat(this.moveType,'"'));if(this.checkCoordinatesAreValid(t),r&&this.checkCoordinatesAreValid(r),!this.availableMoves[t.y][t.x])throw new Error("Move ".concat(JSON.stringify(t)," is not one of the available ones"))}},{key:"makeMove",value:function(e){var t,r=(t={},Object(c.a)(t,this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER,this.placeFirstWorker),Object(c.a)(t,this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER,this.placeSecondWorker),Object(c.a)(t,this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE,this.selectWorkerToMove),Object(c.a)(t,this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER,this.moveFirstWorker),Object(c.a)(t,this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER,this.moveSecondWorker),Object(c.a)(t,this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER,this.buildAroundWorker),t)[this.moveType];if(!r)throw new Error("Don't know how to perform move of type \"".concat(this.moveType,'"'));return r.bind(this)(e)}},{key:"undo",value:function(){if(!this.canUndo)throw new Error("Cannot undo");return this.previous}},{key:"placeFirstWorker",value:function(e){var t=e.x,r=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER,{x:t,y:r});var a=Object(O.a)({},this.cells,Object(c.a)({},r,Object(O.a)({},this.cells[r],Object(c.a)({},t,Object(O.a)({},this.cells[r][t],{player:this.nextPlayer,worker:this.constructor.WORKER_FIRST})))));return this.createStep(a,{nextPlayer:this.nextPlayer,moveType:this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER,availableMoves:this.getEmptyCellsAvailableMoves(a),canUndo:!0})}},{key:"placeSecondWorker",value:function(e){var t=e.x,r=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER,{x:t,y:r});var a=Object(O.a)({},this.cells,Object(c.a)({},r,Object(O.a)({},this.cells[r],Object(c.a)({},t,Object(O.a)({},this.cells[r][t],{player:this.nextPlayer,worker:this.constructor.WORKER_SECOND}))))),n=this.constructor.OTHER_PLAYER[this.nextPlayer];return this.createStep(a,{nextPlayer:n,moveType:n===this.constructor.PLAYER_A?this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE:this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER,availableMoves:n===this.constructor.PLAYER_A?this.getPlayerAvailableMoves(a,n):this.getEmptyCellsAvailableMoves(a),canUndo:!1})}},{key:"selectWorkerToMove",value:function(e){var t=e.x,r=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE,{x:t,y:r});var a=this.cells[r][t];return this.createStep(this.cells,{nextPlayer:this.nextPlayer,moveType:a.worker===this.constructor.WORKER_FIRST?this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER:this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER,availableMoves:this.getMovableAvailableMoves(this.cells,{x:t,y:r}),canUndo:!0})}},{key:"moveWorker",value:function(e,t){var r=this,a=this.allCells.find(function(e){return e.player===r.nextPlayer&&e.worker===t}),n=this.cells[e.y][e.x],o=Object(O.a)({},this.cells,Object(c.a)({},a.y,Object(O.a)({},this.cells[a.y],Object(c.a)({},a.x,Object(O.a)({},a,{player:null,worker:null})))));return o=Object(O.a)({},o,Object(c.a)({},e.y,Object(O.a)({},o[e.y],Object(c.a)({},e.x,Object(O.a)({},n,{player:a.player,worker:a.worker}))))),this.createStep(o,{nextPlayer:this.nextPlayer,moveType:this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER,availableMoves:this.getBuildableAvailableMoves(o,e),canUndo:!0})}},{key:"moveFirstWorker",value:function(e){var t=e.x,r=e.y;return this.checkCanMakeMove(this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER,{x:t,y:r}),this.moveWorker({x:t,y:r},this.constructor.WORKER_FIRST)}},{key:"moveSecondWorker",value:function(e){var t=e.x,r=e.y;return this.checkCanMakeMove(this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER,{x:t,y:r}),this.moveWorker({x:t,y:r},this.constructor.WORKER_SECOND)}},{key:"buildAroundWorker",value:function(e){var t=e.x,r=e.y;this.checkCanMakeMove(this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER,{x:t,y:r});var a=Object(O.a)({},this.cells,Object(c.a)({},r,Object(O.a)({},this.cells[r],Object(c.a)({},t,Object(O.a)({},this.cells[r][t],{level:this.cells[r][t].level+1}))))),n=this.constructor.OTHER_PLAYER[this.nextPlayer];return this.createNext(a,{nextPlayer:n,moveType:this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE,availableMoves:this.getPlayerAvailableMoves(a,n),canUndo:!1})}}],[{key:"getInitialCells",value:function(){var e={},t=!0,r=!1,a=void 0;try{for(var n,o=this.ROWS[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;e[i]={};var l=!0,c=!1,s=void 0;try{for(var u,v=this.COLUMNS[Symbol.iterator]();!(l=(u=v.next()).done);l=!0){var h=u.value;e[i][h]={x:h,y:i,player:null,worker:null,level:0}}}catch(E){c=!0,s=E}finally{try{l||null==v.return||v.return()}finally{if(c)throw s}}}}catch(E){r=!0,a=E}finally{try{t||null==o.return||o.return()}finally{if(r)throw a}}return e}},{key:"getInitialStatus",value:function(){return{nextPlayer:this.PLAYER_A,moveType:this.MOVE_TYPE_PLACE_FIRST_WORKER,finished:!1,winner:null,availableMoves:this.allMovesAreAvailable(),canUndo:!1}}},{key:"allMovesAreAvailable",value:function(){var e=this;return this.ROWS.map(function(){return e.COLUMNS.map(function(){return!0})})}},{key:"noMovesAreAvailable",value:function(){var e=this;return this.ROWS.map(function(){return e.COLUMNS.map(function(){return!1})})}}]),e}();_.PLAYER_A="player-a",_.PLAYER_B="player-b",_.PLAYERS=[_.PLAYER_A,_.PLAYER_B],_.OTHER_PLAYER=(a={},Object(c.a)(a,_.PLAYER_A,_.PLAYER_B),Object(c.a)(a,_.PLAYER_B,_.PLAYER_A),a),_.WORKER_FIRST="first-worker",_.WORKER_SECOND="second-worker",_.MOVE_TYPE_PLACE_FIRST_WORKER="place-first-worker",_.MOVE_TYPE_PLACE_SECOND_WORKER="place-second-worker",_.MOVE_TYPE_SELECT_WORKER_TO_MOVE="select-worker-to-move",_.MOVE_TYPE_MOVE_FIRST_WORKER="move-first-worker",_.MOVE_TYPE_MOVE_SECOND_WORKER="move-second-worker",_.MOVE_TYPE_BUILD_AROUND_WORKER="build-around-worker",_.ROWS=Array.from({length:5},function(e,t){return t}),_.COLUMNS=Array.from({length:5},function(e,t){return t});var y,M,R=_,f=r(4),b=r.n(f),m=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).makeMove=function(e){r.props.makeMove(r.props.game.makeMove({x:e.x,y:e.y}))},r}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.game;return o.a.createElement("div",{className:"background"},t.rowsAndColumns.map(function(r){return o.a.createElement("div",{key:"row-".concat(r.y),className:"row"},r.cells.map(function(r){var a=t.availableMoves[r.y][r.x];return o.a.createElement("div",{key:"row-".concat(r.x,"-").concat(r.y),className:b()("cell","level-".concat(r.level),{available:a}),onClick:e.props.makeMove&&a?function(){return e.makeMove(r)}:null},o.a.createElement("div",{className:b()("level","level-1")},o.a.createElement("div",{className:b()("level","level-2")},o.a.createElement("div",{className:b()("level","level-3")},r.player?o.a.createElement("div",{className:b()("worker","player-".concat(r.player))}):4===r.level?o.a.createElement("div",{className:b()("level","level-4")}):null))))}))}))}}]),t}(n.Component),k=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={game:R.create()},r.makeMove=function(e){r.setState({game:e})},r.undo=function(){r.setState(function(e){return{game:e.game.undo()}})},r}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.game;return o.a.createElement(n.Fragment,null,o.a.createElement("div",null,"Move: ",e.moveCount,o.a.createElement("br",null),e.finished?o.a.createElement(n.Fragment,null,this.constructor.PLAYER_NAMES[e.winner]," won!"):o.a.createElement(n.Fragment,null,"Next player: ",this.constructor.PLAYER_NAMES[e.nextPlayer],o.a.createElement("br",null),this.constructor.MOVE_TYPE_NAMES[e.moveType],e.canUndo?o.a.createElement("button",{onClick:this.undo},"Undo"):null)),o.a.createElement(m,{game:e,makeMove:this.makeMove}))}}]),t}(n.Component);k.PLAYER_NAMES=(y={},Object(c.a)(y,R.PLAYER_A,"Player A"),Object(c.a)(y,R.PLAYER_B,"Player B"),y),k.MOVE_TYPE_NAMES=(M={},Object(c.a)(M,R.MOVE_TYPE_PLACE_FIRST_WORKER,"Place your first worker"),Object(c.a)(M,R.MOVE_TYPE_PLACE_SECOND_WORKER,"Place your second worker"),Object(c.a)(M,R.MOVE_TYPE_SELECT_WORKER_TO_MOVE,"Select a worker to move"),Object(c.a)(M,R.MOVE_TYPE_MOVE_FIRST_WORKER,"Move one of your workers"),Object(c.a)(M,R.MOVE_TYPE_MOVE_SECOND_WORKER,"Move one of your workers"),Object(c.a)(M,R.MOVE_TYPE_BUILD_AROUND_WORKER,"Build around the moved worker"),M);var p=k;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.ac16a160.chunk.js.map