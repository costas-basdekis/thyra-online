{"version":3,"sources":["client/client.js","components/NavigationalTab.js","game/game.js","components/Board/HtmlBoardBackground.js","components/Board/SvgBoardBackground/LevelIndicator.js","components/Board/SvgBoardBackground/Piece.js","components/Board/SvgBoardBackground/constants.js","components/Board/SvgBoardBackground/Cell.js","components/Board/SvgBoardBackground/Arrow.js","components/Board/SvgBoardBackground/SvgBoardBackground.js","components/Board/SvgBoardBackground/index.js","components/Board/BoardBackground.js","components/Board/Board.js","components/Board/ThemeDemoBoard.js","components/Board/index.js","components/Board/PlayerColourBoard.js","components/Play.js","utils.js","client/withClient.js","components/Hotseat.js","components/HashedIcon.js","components/GameList.js","components/CreateTournament.js","components/TournamentList.js","components/Lobby.js","components/Settings.js","components/OnlineGame.js","services/index.js","services/notifications.js","components/OnlineTournament.js","components/LearnToPlay.js","components/EditPosition.js","components/Challenges.js","components/CreateChallenge.js","App.js","serviceWorker.js","index.js"],"names":["Client","_this","this","Object","classCallCheck","scriptIoReloadInterval","reloadScriptIo","window","io","unavailable","clearInterval","bindSocket","console","log","oldScriptEl","document","getElementById","newScriptEl","createElement","id","type","src","remove","head","append","warn","reload","location","justConnected","getUser","connected","onConnect","map","callback","justDisconnected","disconnected","onDisconnect","gotUser","user","username","name","token","settings","localStorage","setItem","JSON","stringify","onUser","gotUsers","usersInfo","users","_","orderBy","isUserRatingProvisional","forEach","index","rank","prepareUsers","onUsers","gotGames","games","sortBy","gamesInfo","prepareGames","onGames","gotTournaments","tournaments","tournamentsInfo","prepareTournaments","onTournaments","getItem","password","removeItem","localSettings","parse","e","constructor","getDefaultSettings","on","emit","setInterval","autoSubmitMoves","enableNotifications","theme","pieces","scheme","rotateOpponent","animations","arrows","numbers","socket","process","available","callbacks","_i","_arr","length","push","_i2","_arr2","pull","appVersion","mergeUsers","readyToPlay","otherUsers","_this2","myIndex","findIndex","slice","concat","toConsumableArray","byId","fromPairs","online","filter","includes","other","offline","readyToPlayMe","challengedUser","_this3","live","game","finished","myLive","userIds","otherLive","myFinished","otherFinished","mine","moves","data","tournament","_this4","future","started","futureAndLive","myFuture","myFutureAndLive","otherFuture","otherFutureAndLive","client","NavigationalTab","path","match","props","url","endsWith","_this$props","panes","defaultIndex","defaultTo","activeIndex","activeTo","preparedPanes","pane","originalIndex","_ref","slicedToArray","_ref3","_ref4","to","constructUrl","navigate","undefined","pathname","startsWith","menuItem","content","objectSpread","react_default","a","Menu","Item","assign","key","as","NavLink","icon","preparedPane","_this$props2","tab","menu","renderActiveOnly","className","_this$getPreparedPane","getPreparedPanesDefaultToAndActiveIndex","react","react_router","exact","from","Tab","Component","defaultProps","withRouter","InvalidMoveError","Error","Game","rowsAndColumns","status","previous","lastMove","isNextMove","_this7","history","canUndo","previousInHistory","fullHistory","moveCount","chainCount","resignedPlayer","resign","missingStatusKeys","join","nextPlayer","moveType","availableMovesMatrix","thisPlayer","PLAYER_A","thisMoveType","canTakeMoveBack","moveNotation","MOVE_RESIGNED_NOTATION","MOVE_NOTATION","y","x","fullNotation","compressedFullNotation","split","part","MOVE_NOTATION_COMPRESSION","positionNotation","getPositionNotation","winner","getWinner","hasAvailableMove","OTHER_PLAYER","noMovesAreAvailable","getInitialRowsAndColumns","getInitialStatus","create","makeMoves","find","row","cells","cell","findCell","player","PLAYERS","worker","WORKERS","level","playerACount","findCells","playerBCount","PLAYER_B","Math","max","apply","flatten","MOVE_TYPE_PLACE_FIRST_WORKER","allMovesAreAvailableMatrix","MOVE_TYPE_PLACE_SECOND_WORKER","getEmptyCellsAvailableMovesMatrix","playerAFirstWorker","WORKER_FIRST","playerASecondWorker","WORKER_SECOND","playerBFirstWorker","playerBSecondWorker","MOVE_TYPE_SELECT_WORKER_TO_MOVE","getPlayerAvailableMovesMatrix","sum","MOVE_REVERSE_NOTATION","move","fromMoves","MOVE_NOTATION_DECOMPRESSION","POSITION_NOTATION_COMPRESSION","notation","_this5","ROWS","COLUMNS","POSITION_REVERSE_NOTATION","fromPosition","_this6","POSITION_NOTATION_DECOMPRESSION","fromCompressedPositionNotation","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","value","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","err","return","fromRowsAndColumns","_Game$PLAYER_A","_Game$PLAYER_B","_printMap","_nextPlayerMap","_winnerMap","printMap","defineProperty","chalk","bgWhite","bgYellow","bgRed","bgBlue","cellsPrintout","nextPlayerPrintout","winnerPrintout","black","_ref2","floor","condition","winningCell","canPlayerWin","expectedMoveType","coordinates","targetCoordinates","checkCoordinatesAreValid","createStep","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","makeMove","_makeMoveMethods","makeMoveMethod","placeFirstWorker","placeSecondWorker","selectWorkerToMove","MOVE_TYPE_MOVE_FIRST_WORKER","moveFirstWorker","MOVE_TYPE_MOVE_SECOND_WORKER","moveSecondWorker","MOVE_TYPE_BUILD_AROUND_WORKER","buildAroundWorker","bind","checkCanMakeMove","updateCells","_ref5","createNext","_ref6","getMovableAvailableMovesMatrix","_this$constructor","_this8","fromCell","toCell","getBuildableAvailableMovesMatrix","_ref7","moveWorker","_ref8","_ref9","_ref10","_this9","getAvailableMoves","playerCells","playerCell","abs","_this10","_this11","getAvailableMovesMatrix","_this12","_this13","maximumLevel","_this14","isMoveAvailable","updates","_len","arguments","newCells","Array","_key","_newCells","update","MOVE_TYPES_START_OF_TURN","MOVE_TYPES_PLACE_WORKER","MOVE_TYPES_MOVE_WORKER","MOVE_TYPES_MOVE_OR_BUILD","RA","RB","keys","sort","String","fromCharCode","POSITION_NOTATION","entries","_ref11","_ref12","levelStr","notations","_ref13","_ref14","playerStr","parseInt","POSITION_NOTATION_COMPRESSION_MAP","_ref15","_ref17","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","HtmlBoardBackground","clickable","undoable","isCellAvailable","isCellUndoable","small","medium","onSelect","selected","_settings$theme","classNames","small-board","medium-board","editable","selectable","board-theme-default","board-theme-subtle","board-theme-pastel","board-theme-green","numbered-levels","obvious-levels","subtle-levels","very-subtle-levels","onClick","HtmlBoardBackground_HtmlBoardCell","undo","animated","HtmlBoardCell","displayLevel","LevelIndicatorVerySubtle","transform","constants","dominantBaseline","textAnchor","style","fontSize","PureComponent","LevelIndicatorSubtle","r","fill","stroke","strokeWidth","LevelIndicatorObvious","paintOrder","LevelIndicator","Indicator","indicatorMap","very-subtle","subtle","obvious","BasePieceDefinition","dimensions","offset","xlinkHref","BasePiece","colour","rotated","rotateTransform","definePiece","_ref$offset","PieceDefinitionFor","_PureComponent3","possibleConstructorReturn","getPrototypeOf","inherits","createClass","Piece_BasePieceDefinition","displayName","PieceFor","_PureComponent4","_this$props3","Piece_BasePiece","Definition","PiecePawn","d","PieceKing","PieceCircle","PieceCertificate","PieceSun","PieceRocket","PieceBug","PieceEye","PieceUser","Piece","_this$props4","PieceStyle","pieceStyleMap","pawn","king","circle","certificate","sun","rocket","bug","eye","PieceDefinitions","values","Definitions","CellDefinitions","width","height","Cell","state","previousLevel","currentLevel","levelsAnimate","i","React","createRef","prevProps","prevState","snapshot","setTimeout","levelAnimate","current","beginElement","allowControl","_this$props$theme","_this$props$theme$pie","_this$props$theme$rot","_this$state","isPlayerAOpponent","isPlayerBOpponent","levelMap","opacity","ref","attributeName","attributeType","dur","repeatCount","SvgBoardBackground_Piece","SvgBoardBackground_LevelIndicator","0","1","2","3","4","ArrowDefinition","arrowDimensions","arrowOffset","arrowScaling","hammerDimensions","hammerOffset","hammerScaling","Arrow","_this$constructor2","offsetX","smallScaling","diff","rotation","rotationMap","offsetYFactor","sqrt","0,1","-1,1","-1,0","-1,-1","0,-1","1,-1","1,0","1,1","SvgBoardBackground","transformation","showArrows","rowCount","columnCount","viewBox","--column-count","--row-count","preserveAspectRatio","data-key","SvgBoardBackground_SvgBoardCell","SvgBoardBackground_SvgBoardPieces","arrow","SvgBoardBackground_Arrow","SvgBoardBackground_SvgBoardHistoryArrows","SvgBoardBackgroundDefinitions","display","SvgBoardBackground_Cell","SvgBoardHistoryArrows","_this$getRelevantHist","getRelevantHistory","relevantHistory","gameWithPieceMove","gameWithBuildMove","_move$build","build","reverseCoordinates","iteratingGame","_this$getPlayerMoves","getPlayerMoves","moveArrow","buildArrow","SvgBoardPieces","pointerEvents","SvgBoardBackground_SvgBoardPiece","SvgBoardPiece","previousPosition","position","animateTransform","SvgBoardCell","_this$props5","BoardBackground","_this$props$renderer","renderer","objectWithoutProperties","Renderer","html","svg","Board","takeMoveBack","minChainCount","Board_BoardBackground","isGameUndoable","BoardTransformation","rotations","flippedHorizontally","updateOrientation","method","setState","onChange","_this2$state","transformationMap","rotateCounterClockwise","rotateClockwise","flipHorizontally","flipVertically","reset","size","items","disabled","config","transformRowsAndColumns","reverseTransformCoordinates","flipped","transpose","flipX","flipY","reverseConfig","_this$getNewRowAndCol","getNewRowAndColumnCount","newRowCount","newColumnCount","newXs","range","newY","newX","_this4$getOldCoordina","getOldCoordinates","oldX","oldY","_this$getNewRowAndCol2","_this$getOldCoordinat","0,false","1,false","makeTransformRowsAndColumns","2,false","3,false","0,true","1,true","2,true","3,true","ThemeDemoBoard","demoRowsAndColumns","animate","demoRowsAndColumnsAnimated","animationInterval","PlayerColourBoard","colours","Play","selectedGame","autoSubmitModal","submit","onDisplayPositionChange","newGame","selectGame","onSelectedGameChange","makeMoveToSelected","takeMoveBackToSelected","undoToSelected","deselectGame","getMovesToSubmit","resignOrAbort","changeAutoSubmitMoves","changeSettings","handleOpen","doAutoSubmitMoves","canSubmit","onTransformationChange","propsGame","propsGameIndex","error","resigning","defaultSettings","names","matchGame","children","displayGame","isMyGame","tooShortToResign","controlsNode","Grid","Row","Play_PlayPlayer","Play_PlayNavigation","Board_BoardTransformation","boardNode","components_Board","Segment","textAlign","centered","columns","Responsive","minWidth","Column","Fragment","maxWidth","stretched","Statistic","Group","widths","Modal","trigger","Button","negative","header","actions","inverted","secondary","Play_PlayHistory","Header","color","label","MOVE_TYPE_NAMES","primary","_names","PlayPlayer","isPlayerControlled","isPlayersTurn","playerWon","stackable","attention","Board_PlayerColourBoard","positive","Checkbox","toggle","checked","item","PlayHistory","activePage","onPageChange","pageSize","totalPages","ceil","visibleGames","reverse","lastVisibleGame","previousGame","Label","Pagination","pointing","PlayNavigation","goToCurrentMove","canGoToCurrentMove","goToNextMove","canGoToNextMove","selectedGameIndex","indexOf","goToAncestor","mostRecentAncestorGameIndex","gameIndexes","goToPreviousMove","canGoToPreviousMove","goToPreviousVariationMove","goToFirstMove","canGoToFirstMove","keydown","event","_keydown$event","which","shiftKey","Keys","left","home","right","_this$gameIndexes","lastGameIndex","_this$gameIndexes2","_this$gameIndexes3","ancestor","copyToClipboard","text","textArea","body","appendChild","select","execCommand","removeChild","ClientWatcher","connectionChanged","subscribe","unsubscribe","SubComponent","ClientWatcherForComponent","withClient","forComponent","getGameAndErrorFromUrlPosition","dismissUrlPositionError","share","navigator","title","catch","utils","alert","open","onClose","active","href","components_Play","URLSearchParams","search","get","fromCompressedMoveNotation","HashedIcon","updateIcon","jdenticon","hash","_classNames","floated","textSized","data-jdenticon-value","GameCard","_Component","_getPrototypeOf2","args","call","selectLiveGame","usersById","tournamentsById","terse","currentGameId","tournamentId","gameGame","deserialize","playerA","playerB","nextPlayerUser","playerAToPlay","playerBToPlay","isUserPlayerA","isUserPlayerB","winnerUser","isMyTurn","showPlayerA","showPlayerB","Card","backgroundColor","Content","Icon","components_HashedIcon","Meta","moment","endDatetime","startDatetime","GameList","maxHeight","overflowY","flexWrap","GameList_GameCard","gameCount","createTournament","setValue","Form","Field","control","Input","placeholder","required","defaultValue","min","TournamentCard","selectLiveTournament","currentTournamentId","isMyTournament","didUserCreated","creatorUserId","didUserWin","winnerUserId","creator","statusLabel","round","rounds","createdDate","TournamentList","visibleTournaments","TournamentList_TournamentCard","UserList","readyToPlayUsers","readyToPlayMeUsers","otherUser","Lobby_UserCard","UserCard","changeReadyToPlay","challengeUser","playButtonColour","playButtonAttention","playButtonIcon","playButtonOnClick","playButtonLabel","loading","Lobby_EditUser","hasPassword","winCount","score","tournamentWinCount","tournamentCount","extra","EditUser","changeUsername","target","changePassword","updateUsername","updatePassword","action","LogIn","_Component4","_getPrototypeOf4","_len3","_key3","changeMergeUsers","logIn","_this$state2","modal","float","LogOut","_Component5","_getPrototypeOf5","_len4","_key4","logOut","_this$props4$usersInf","_this$props4$gamesInf","render","components_GameList","components_CreateTournament","components_TournamentList","Lobby_UserList","Pane","SettingsContent","themeSchemeOptions","themePiecesOptions","themeNumbersOptions","themeDemoBoard","overrides","Board_ThemeDemoBoard","updateAutoSubmitMove","updateSettings","updateEnableNotifications","updateThemeRotateOpponent","updateAnimations","updateArrows","updateThemeNumbers","updateThemeScheme","updateThemePieces","_this$props$settings","_theme$pieces","attached","verticalAlign","option","radio","save","scrolling","Settings_SettingsContent","OnlineGamePlayer","initialPlayer","resultingPlayerScore","initialPlayerA","resultingPlayerAScore","initialPlayerB","resultingPlayerBScore","isWinner","winPoints","losePoints","ChosenOnlineGame","gameSelector","createSelector","params","gameId","gamesById","playersInfoSelector","userPlayer","gameGameSelector","dismissUrlGameError","submitGameMove","close","shareGame","_this$playersInfo","playersInfo","preventDefault","stopChallengeUser","copyPlayPosition","_this$props2$usersInf","_this$props2$gamesInf","otherLiveGames","myLiveGames","_this$playersInfo2","gamesNode","components_Settings","REACT_APP_DEBUG","OnlineGame_OnlineGamePlayer","react_router_dom","OnlineGame","_this$props3$gamesInf","OnlineGame_ChosenOnlineGame","services","notifications","Notifications","Notification","permission","requestPermission","construct","prototype","_args2","ChosenOnlineTournament","tournamentSelector","dismissUrlTournamentError","shareTournament","assertThisInitialized","toggleParticipation","startTournament","abortTournament","players","otherUserId","userStats","points","initialScore","Table","celled","collapsing","unstackable","HeaderCell","Body","stats","ratedPoints","expectedPoints","toFixed","waitingForNextRound","scoreDifference","colSpan","schedule","roundIndex","pairings","gameIndex","_ref$userIds","playerAId","playerBId","playerAWon","playerBWon","player-a-won","player-b-won","OnlineTournament","OnlineTournament_ChosenOnlineTournament","LearnBoard","selectedMoveCell","movedFromCell","selectedBuildCell","won","canMove","canBuild","isCellAvailableForMoving","isCellAvailableForBuilding","makeMoveMoving","makeMoveBuilding","_this$state3","_this$state4","makeMoveUndoMoving","board","originalRowsAndColumns","_this$state5","rawSettings","LearnToPlay","stepIndex","goToFirstStep","goToPreviousStep","goToNextStep","goToLastStep","steps","step","Message","LearnToPlay_LearnBoard","EditPosition","paletteSelectedItem","paletteUpdate","positionError","urlError","onPaletteSelectedItemChange","onPositionChange","message","copyGame","visibleGame","resetBoard","resetGame","copyPosition","EditPosition_EditPositionPalette","selectedItem","onSelectedItemChange","initialPositionNotation","EditPosition_EditPositionBoard","EditPositionPalette","moveFromKey","q","b","EditPositionBoard","updatePosition","newCell","newPosition","Challenges","challenge","challenges","challengePlayerResponses","playerResponses","wrongMove","playerResponse","playerMoves","pR","challengeResponse","response","difficulty","maxDifficulty","challengePrompt","options","mateIn","success","getDifficultyStars","meta","source","CreateChallenge","onCreateChallenge","onBoardSelect","CreateChallenge_ChallengeEditor","ChallengeEditor","getNewChallenge","newChallengeToChange","parts","onValueSet","isValidCompressedPositionNotation","createChallenge","responses","onSubmit","inline","Radio","Select","App","liveGame","liveTournament","gameUrl","tournamentUrl","leaveTournament","joinTournament","askForNotificationPermissionOnWaitForGame","navigateToMyNewGame","notifyAboutMyMove","previousMyLiveGameIds","Set","newMyLiveGameIds","has","notify","gamesThatChangedToMyTurn","nextUserId","prevGame","tag","onlineGameLabel","onlineTournamentLabel","Container","Board_SvgBoardBackground","Lobby_LogIn","Lobby_LogOut","components_NavigationalTab","components_Lobby","components_OnlineGame","components_OnlineTournament","components_Hotseat","components_EditPosition","components_CreateChallenge","components_Challenges","components_LearnToPlay","Boolean","hostname","ReactDOM","basename","src_App","serviceWorker","ready","then","registration","unregister"],"mappings":"qhBAIMA,aAWJ,SAAAA,IAAc,IAAAC,EAAAC,KAAAC,OAAAC,EAAA,EAAAD,CAAAD,KAAAF,GAAAE,KAFdG,uBAAyB,KAEXH,KA4DdI,eAAiB,WACf,IAAKC,OAAOC,GAAGC,YAKb,OAJAC,cAAcT,EAAKI,wBACnBJ,EAAKI,uBAAyB,KAC9BJ,EAAKU,kBACLC,QAAQC,IAAI,qBAGd,IAAMC,EAAcC,SAASC,eAAe,oBACtCC,EAAcF,SAASG,cAAc,UAC3CD,EAAYE,GAAKL,EAAYK,GAC7BF,EAAYG,KAAON,EAAYM,KAC/BH,EAAYI,IAAMP,EAAYO,IAC9BP,EAAYQ,SACZP,SAASQ,KAAKC,OAAOP,GACrBL,QAAQa,KAAK,0CA3EDvB,KAkHdwB,OAAS,WACPnB,OAAOoB,SAASD,QAAO,IAnHXxB,KAsHd0B,cAAgB,WACd3B,EAAK4B,UACL5B,EAAK6B,WAAY,EACjB7B,EAAK8B,UAAUC,IAAI,SAAAC,GAAQ,OAAIA,EAAShC,EAAK6B,cAzHjC5B,KA4HdgC,iBAAmB,WACjBjC,EAAK6B,WAAY,EACjB7B,EAAKkC,cAAe,EACpBlC,EAAKmC,aAAaJ,IAAI,SAAAC,GAAQ,OAAIA,EAAShC,EAAK6B,cA/HpC5B,KAkIdmC,QAAU,SAAAC,GACJA,IACFrC,EAAKkB,GAAKmB,EAAKnB,GACflB,EAAKsC,SAAWD,EAAKE,KACrBvC,EAAKwC,MAAQH,EAAKG,MAClBxC,EAAKyC,SAAWJ,EAAKI,SACrBC,aAAaC,QAAQ,UAAW3C,EAAKkB,IACrCwB,aAAaC,QAAQ,YAAa3C,EAAKsC,UACvCI,aAAaC,QAAQ,aAAc3C,EAAKwC,OACxCE,aAAaC,QAAQ,gBAAiBC,KAAKC,UAAU7C,EAAKyC,YAE5DzC,EAAKqC,KAAOA,EACZrC,EAAK8C,OAAOf,IAAI,SAAAC,GAAQ,OAAIA,EAASK,KACrCrC,EAAK+C,SAAS/C,EAAKgD,UAAUC,QA/IjBhD,KAkKd8C,SAAW,SAAAE,IACTA,EAAQC,IAAEC,QAAQF,EAAO,CAAC,SAAAZ,GAAI,OAAIA,EAAKe,wBAA0B,EAAI,GAAG,QAAS,YAAa,CAAC,MAAO,OAAQ,UACxGC,QAAQ,SAAChB,EAAMiB,GACnBjB,EAAKkB,KAAOD,EAAQ,IAEtBtD,EAAKgD,UAAYhD,EAAKwD,aAAaP,GACnCjD,EAAKyD,QAAQ1B,IAAI,SAAAC,GAAQ,OAAIA,EAAShC,EAAKgD,cAxK/B/C,KAuMdyD,SAAW,SAAAC,GACTA,EAAQT,IAAEU,OAAOD,EAAO,CAAC,gBAAiB,MAAO,CAAC,OAAQ,SAC1D3D,EAAK6D,UAAY7D,EAAK8D,aAAaH,GACnC3D,EAAK+D,QAAQhC,IAAI,SAAAC,GAAQ,OAAIA,EAAShC,EAAK6D,cA1M/B5D,KAqPd+D,eAAiB,SAAAC,GACfA,EAAcf,IAAEU,OAAOK,EAAa,CAAC,gBAAiB,cAAe,kBAAmB,MAAO,CAAC,OAAQ,OAAQ,OAAQ,SACxHjE,EAAKkE,gBAAkBlE,EAAKmE,mBAAmBF,GAC/CjE,EAAKoE,cAAcrC,IAAI,SAAAC,GAAQ,OAAIA,EAAShC,EAAKkE,oBAvPjDjE,KAAKiB,GAAKwB,aAAa2B,QAAQ,YAAc,KAC7CpE,KAAKqC,SAAWI,aAAa2B,QAAQ,cAAgB,KACrD,IAAMC,EAAW5B,aAAa2B,QAAQ,kBAAoB,KAC1D3B,aAAa6B,WAAW,iBACxBtE,KAAKuC,MAAQE,aAAa2B,QAAQ,eAAiBC,EACnD,IAAME,EAAgB9B,aAAa2B,QAAQ,kBAAoB,OAC/D,IACEpE,KAAKwC,SAAWG,KAAK6B,MAAMD,GAC3B,MAAOE,GACPzE,KAAKwC,SAAW,KAEbxC,KAAKwC,WACRxC,KAAKwC,SAAWxC,KAAK0E,YAAYC,sBAE9BtE,OAAOC,KACVD,OAAOC,GAAK,iBAAO,CACjBsE,GAAI,kBAAMlE,QAAQa,KAAK,8BACvBsD,KAAM,kBAAMnE,QAAQa,KAAK,8BACzBhB,aAAa,IAEfF,OAAOC,GAAGC,aAAc,EACxBP,KAAKG,uBAAyB2E,YAAY9E,KAAKI,eAAgB,MAGjEJ,KAAKiC,cAAe,EAEpBjC,KAAK6B,UAAY,GACjB7B,KAAKkC,aAAe,GACpBlC,KAAK6C,OAAS,GACd7C,KAAKwD,QAAU,GACfxD,KAAK8D,QAAU,GACf9D,KAAKmE,cAAgB,GAErBnE,KAAKS,mFA3CL,OAAOkC,KAAK6B,MAAM7B,KAAKC,UAAU,CAC/BmC,iBAAiB,EACjBC,qBAAqB,EACrBC,MAAO,CAACC,OAAQ,OAAQC,OAAQ,GAAIC,gBAAgB,EAAMC,YAAY,EAAMC,QAAQ,EAAMC,QAAS,oEA4CrGvF,KAAKwF,OAASnF,OAAOC,GAAGmF,6BACxBzF,KAAK0F,WAAa1F,KAAKwF,OAAOjF,YAC9BP,KAAK4B,WAAY,EACjB5B,KAAKwF,OAAOZ,GAAG,UAAW5E,KAAK0B,eAC/B1B,KAAKwF,OAAOZ,GAAG,aAAc5E,KAAKgC,kBAClChC,KAAKwF,OAAOZ,GAAG,SAAU5E,KAAKwB,QAE9BxB,KAAKoC,KAAO,KACZpC,KAAKwF,OAAOZ,GAAG,OAAQ5E,KAAKmC,SAE5BnC,KAAK+C,UAAY/C,KAAKuD,aAAa,IACnCvD,KAAKwF,OAAOZ,GAAG,QAAS5E,KAAK8C,UAE7B9C,KAAK4D,UAAY5D,KAAK6D,aAAa,IACnC7D,KAAKwF,OAAOZ,GAAG,QAAS5E,KAAKyD,UAE7BzD,KAAKiE,gBAAkBjE,KAAKkE,mBAAmB,IAC/ClE,KAAKwF,OAAOZ,GAAG,cAAe5E,KAAK+D,gBAEnC/D,KAAK2B,4CAqBGgE,GACR,QAAAC,EAAA,EAAAC,EAAmB,CAAC,YAAa,eAAgB,SAAU,UAAW,UAAW,iBAAjFD,EAAAC,EAAAC,OAAAF,IAAmG,CAA9F,IAAMtD,EAAIuD,EAAAD,GACP7D,EAAW4D,EAAUrD,GACvBP,GACF/B,KAAKsC,GAAMyD,KAAKhE,wCAKV4D,GACV,QAAAK,EAAA,EAAAC,EAAmB,CAAC,YAAa,eAAgB,SAAU,UAAW,WAAtED,EAAAC,EAAAH,OAAAE,IAAkF,CAA7E,IAAM1D,EAAI2D,EAAAD,GACPjE,EAAW4D,EAAUrD,GACvBP,GACFkB,IAAEiD,KAAKlG,KAAKsC,GAAOP,sCAMvB/B,KAAKwF,OAAOX,KAAK,cAAe,CAC9BsB,WA/Ga,EAgHblF,GAAIjB,KAAKiB,GACTqB,KAAMtC,KAAKqC,SACXE,MAAOvC,KAAKuC,MACZC,SAAUxC,KAAKwC,yCAIbF,EAAM+B,EAAU+B,GACpBpG,KAAKwF,OAAOX,KAAK,SAAU,CAACsB,WAxHb,EAwHyB7D,OAAM+B,WAAU+B,gDAIxDpG,KAAKwF,OAAOX,KAAK,kDAmCJvC,GACbtC,KAAKwF,OAAOX,KAAK,kBAAmBvC,0CAGvB+B,GACbrE,KAAKwF,OAAOX,KAAK,kBAAmBR,0CAGvB7B,GACbxC,KAAKwF,OAAOX,KAAK,kBAAmBrC,6CAGpB6D,GAChBrG,KAAKwF,OAAOX,KAAK,uBAAwBwB,wCAY9BrD,GAAO,IACdsD,EADcC,EAAAvG,KAElB,GAAIA,KAAKoC,KAAM,CACb,IAAMoE,EAAUxD,EAAMyD,UAAU,SAAArE,GAAI,OAAIA,EAAKnB,KAAOsF,EAAKnE,KAAKnB,KAC1DuF,GAAW,GACbF,EAAatD,EAAM0D,MAAM,EAAGF,GAASG,OAAO3D,EAAM0D,MAAMF,EAAU,IAClExD,EAAK,CAAIA,EAAMwD,IAAVG,OAAA1G,OAAA2G,EAAA,EAAA3G,CAAuBqG,KAE5BA,EAAatD,OAGfsD,EAAatD,EAEf,IAAM6D,EAAO5D,IAAE6D,UAAU9D,EAAMlB,IAAI,SAAAM,GAAI,MAAI,CAACA,EAAKnB,GAAImB,MAC/C2E,EAAS/D,EAAMgE,OAAO,SAAA5E,GAAI,OAAIA,EAAK2E,SACnCV,EAAcU,EAAOC,OAAO,SAAA5E,GAAI,MAAI,EAAC,GAAMmE,EAAKnE,MAAOmE,EAAKnE,KAAKnB,IAAWgG,SAAS7E,EAAKiE,eAChG,MAAO,CACLrD,QACA6D,OACAK,MAAOZ,EACPS,SACAI,QAASnE,EAAMgE,OAAO,SAAA5E,GAAI,OAAKA,EAAK2E,SACpCV,cACAe,cAAef,EAAYW,OAAO,SAAA5E,GAAI,OAAImE,EAAKnE,MAAQmE,EAAKnE,KAAKnB,KAAOmB,EAAKiE,cAC7EgB,eAAgBrH,KAAKoC,MAAQyE,EAAK7G,KAAKoC,KAAKiE,cAAwB,2CAU3D3C,GAAO,IAAA4D,EAAAtH,KACZuH,EAAO7D,EAAMsD,OAAO,SAAAQ,GAAI,OAAKA,EAAKC,WAClCA,EAAW/D,EAAMsD,OAAO,SAAAQ,GAAI,OAAIA,EAAKC,WAC3C,MAAO,CACL/D,QACAmD,KAAM5D,IAAE6D,UAAUpD,EAAM5B,IAAI,SAAA0F,GAAI,MAAI,CAACA,EAAKvG,GAAIuG,MAC9CD,OACAG,OAAQ1H,KAAKoC,KAAOmF,EAAKP,OAAO,SAAAQ,GAAI,OAAIA,EAAKG,QAAQV,SAASK,EAAKlF,KAAKnB,MAAO,GAC/E2G,UAAW5H,KAAKoC,KAAOmF,EAAKP,OAAO,SAAAQ,GAAI,OAAKA,EAAKG,QAAQV,SAASK,EAAKlF,KAAKnB,MAAOsG,EACnFE,WACAI,WAAY7H,KAAKoC,KAAOqF,EAAST,OAAO,SAAAQ,GAAI,OAAIA,EAAKG,QAAQV,SAASK,EAAKlF,KAAKnB,MAAO,GACvF6G,cAAe9H,KAAKoC,KAAOqF,EAAST,OAAO,SAAAQ,GAAI,OAAKA,EAAKG,QAAQV,SAASK,EAAKlF,KAAKnB,MAAOsG,EAC3FQ,KAAM/H,KAAKoC,KAAOsB,EAAMsD,OAAO,SAAAQ,GAAI,OAAIA,EAAKG,QAAQV,SAASK,EAAKlF,KAAKnB,MAAO,2CAInEuG,EAAMQ,GACnBhI,KAAKwF,OAAOX,KAAK,oBAAqB,CAAC5D,GAAIuG,EAAKvG,GAAI+G,mDAGrCC,GACfjI,KAAKwF,OAAOX,KAAK,oBAAqBoD,0CAGzBC,GACblI,KAAKwF,OAAOX,KAAK,kBAAmBqD,EAAWjH,4CAGjCiH,GACdlI,KAAKwF,OAAOX,KAAK,mBAAoBqD,EAAWjH,4CAGlCiH,GACdlI,KAAKwF,OAAOX,KAAK,mBAAoBqD,EAAWjH,4CAGlCiH,GACdlI,KAAKwF,OAAOX,KAAK,mBAAoBqD,EAAWjH,+CAS/B+C,GAAa,IAAAmE,EAAAnI,KACxBoI,EAASpE,EAAYgD,OAAO,SAAAkB,GAAU,OAAKA,EAAWG,UACtDd,EAAOvD,EAAYgD,OAAO,SAAAkB,GAAU,OAAIA,EAAWG,UAAYH,EAAWT,WAC1Ea,EAAgBF,EAAOzB,OAAOY,GAC9BE,EAAWzD,EAAYgD,OAAO,SAAAkB,GAAU,OAAIA,EAAWT,WAC7D,MAAO,CACLzD,cACA6C,KAAM5D,IAAE6D,UAAU9C,EAAYlC,IAAI,SAAA0F,GAAI,MAAI,CAACA,EAAKvG,GAAIuG,MACpDY,SAAQb,OAAMe,gBAAeb,WAC7Bc,SAAUvI,KAAKoC,KAAOgG,EAAOpB,OAAO,SAAAkB,GAAU,OAAIA,EAAWP,QAAQV,SAASkB,EAAK/F,KAAKnB,MAAO,GAC/FyG,OAAQ1H,KAAKoC,KAAOmF,EAAKP,OAAO,SAAAkB,GAAU,OAAIA,EAAWP,QAAQV,SAASkB,EAAK/F,KAAKnB,MAAO,GAC3FuH,gBAAiBxI,KAAKoC,KAAOkG,EAActB,OAAO,SAAAkB,GAAU,OAAIA,EAAWP,QAAQV,SAASkB,EAAK/F,KAAKnB,MAAO,GAC7G4G,WAAY7H,KAAKoC,KAAOqF,EAAST,OAAO,SAAAkB,GAAU,OAAIA,EAAWP,QAAQV,SAASkB,EAAK/F,KAAKnB,MAAO,GACnGwH,YAAazI,KAAKoC,KAAOmF,EAAKP,OAAO,SAAAkB,GAAU,OAAKA,EAAWP,QAAQV,SAASkB,EAAK/F,KAAKnB,MAAOsG,EACjGK,UAAW5H,KAAKoC,KAAOgG,EAAOpB,OAAO,SAAAkB,GAAU,OAAKA,EAAWP,QAAQV,SAASkB,EAAK/F,KAAKnB,MAAOmH,EACjGM,mBAAoB1I,KAAKoC,KAAOkG,EAActB,OAAO,SAAAkB,GAAU,OAAKA,EAAWP,QAAQV,SAASkB,EAAK/F,KAAKnB,MAAOmH,EACjHN,cAAe9H,KAAKoC,KAAOqF,EAAST,OAAO,SAAAkB,GAAU,OAAKA,EAAWP,QAAQV,SAASkB,EAAK/F,KAAKnB,MAAOwG,EACvGM,KAAM/H,KAAKoC,KAAO4B,EAAYgD,OAAO,SAAAkB,GAAU,OAAIA,EAAWP,QAAQV,SAASkB,EAAK/F,KAAKnB,MAAO,aAKzF0H,EAAS,IAAI7I,EAC1BO,OAAOsI,OAASA,EAED7I,iDCzRT8I,uLACSC,GAAM,IACVC,EAAS9I,KAAK+I,MAAdD,MACP,SAAAnC,OAAUmC,EAAME,IAAIC,SAAS,KAAOH,EAAME,IAAItC,MAAM,GAAI,GAAKoC,EAAME,KAAnErC,OAAyEkC,EAAI,IAAAlC,OAAOkC,GAAS,sEAGrD,IAAA9I,EAAAC,KAAAkJ,EACOlJ,KAAK+I,MAA7CI,EADiCD,EACjCC,MAAOC,EAD0BF,EAC1BE,aAAcN,EADYI,EACZJ,MAAOrH,EADKyH,EACLzH,SAC/B4H,EAAY,KACZC,EAAc,KACdC,EAAWT,EAAME,IAwCrB,MAAO,CAACQ,cAtCcL,EACnBrH,IAAI,SAAC2H,EAAMC,GAAP,MAAyB,CAACD,EAAMC,KACpC1C,OAAO,SAAA2C,GAAA,OAAA1J,OAAA2J,EAAA,EAAA3J,CAAA0J,EAAA,QACP7H,IAAI,SAAA+H,EAAwBxG,GAAU,IAAAyG,EAAA7J,OAAA2J,EAAA,EAAA3J,CAAA4J,EAAA,GAAhCJ,EAAgCK,EAAA,GAA1BJ,EAA0BI,EAAA,GACrC,IAAKL,EACH,OAAO,KAGT,IAAMM,EAAKhK,EAAKiK,aAAaP,EAAKZ,MAC9Ba,IAAkBN,IACpBC,EAAYU,GAEd,IAAME,OAA6BC,IAAlBT,EAAKQ,SAAyBlK,EAAKiK,aAAaP,EAAKQ,UAAYF,EAC9EtI,EAAS0I,SAASC,WAAWH,KAC/BX,EAAcjG,EACdkG,EAAWQ,GAGb,IAAMM,EACqB,kBAAlBZ,EAAKY,SACR,CAACC,QAASb,EAAKY,UACfZ,EAAKY,SAEX,OAAOpK,OAAAsK,EAAA,EAAAtK,CAAA,CACL8J,MACGN,EAFL,CAGEY,SACEG,EAAAC,EAAAzJ,cAAC0J,EAAA,EAAKC,KAAN1K,OAAA2K,OAAA,CACEC,IAAKpB,EAAKZ,KACViC,GAAIC,IACJhB,GAAIE,GACAI,EAJN,CAKEW,KAAMvB,EAAKuB,MAAQX,EAASW,YAKnChE,OAAO,SAAAiE,GAAY,OAAIA,IACH5B,YAAWC,cAAaC,6CAGxC,IAAA2B,EACiDlL,KAAK+I,MAAtDoC,EADAD,EACAC,IAAKC,EADLF,EACKE,KAAMtC,EADXoC,EACWpC,MAAOuC,EADlBH,EACkBG,iBAAkBC,EADpCJ,EACoCI,UADpCC,EAEmDvL,KAAKwL,0CAAxDhC,EAFA+B,EAEA/B,cAAeH,EAFfkC,EAEelC,UAAWC,EAF1BiC,EAE0BjC,YAAaC,EAFvCgC,EAEuChC,SAE9C,OACEiB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACiB,OAAdpC,EACCmB,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,KACElB,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,CAAUC,OAAK,EAACC,KAAM9C,EAAME,IAAKe,GAAIV,KAErC,KACJmB,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,CAAO7C,KAAMU,GACXiB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAD5L,OAAA2K,OAAA,CACEQ,KAAMA,EACNC,iBAAkBA,GACdF,EAHN,CAIEhC,MAAOK,EACPF,YAAaA,EACbgC,UAAWA,cAvEOQ,aA6F9BlD,EAAgBmD,aAAe,CAC7BV,kBAAkB,EAClBjC,aAAc,GAGD4C,sBAAWpD,8CCzGpBqD,oJAAyBC,QAEzBC,aAoSJ,SAAAA,EAAYC,EAAgBC,EAAQC,EAAUC,EAAUC,GAAY,IAAAC,EAAAzM,KAClE,GADkEC,OAAAC,EAAA,EAAAD,CAAAD,KAAAmM,IAC7DC,IAAmBC,EACtB,MAAM,IAAIH,MAAM,8DAElBlM,KAAKsM,SAAWA,EAChBtM,KAAK0M,SAAW1M,KAAKsM,SAAWtM,KAAKsM,SAASI,QAAU,IACrD1F,OAAO,SAAAQ,GAAI,OAAKA,EAAKmF,UACrBhG,OAAO,CAAC3G,OACXA,KAAK4M,kBAAoB5M,KAAK0M,QAAQ1M,KAAK0M,QAAQ5G,OAAS,GAC5D9F,KAAK6M,aAAe7M,KAAKsM,SAAWtM,KAAKsM,SAASO,YAAc,IAAIlG,OAAO3G,MAC3EA,KAAKwM,WAAaA,EAClBxM,KAAK8M,UAAY9M,KAAKsM,SAAYE,EAAaxM,KAAKsM,SAASQ,UAAY,EAAI9M,KAAKsM,SAASQ,UAAa,EACxG9M,KAAK+M,WAAa/M,KAAKsM,SAAWtM,KAAKsM,SAASS,WAAa,EAAI,EACjE/M,KAAKuM,SAAWA,IAAuBF,EAAOW,eAAiB,CAACC,OAAQZ,EAAOW,gBAAkBT,GACjGvM,KAAKgI,MAAQhI,KAAKsM,SAAWtM,KAAKsM,SAAStE,MAAMrB,OAAO,CAAC3G,KAAKuM,WAAa,GAE3EvM,KAAKoM,eAAiBA,EAEtB,IAAMc,EACJ,CAAC,aAAc,WAAY,uBAAwB,UAAW,kBAC7DlG,OAAO,SAAA6D,GAAG,YAAoBX,IAAhBmC,EAAOxB,KACxB,GAAIqC,EAAkBpH,OACpB,MAAM,IAAIoG,MAAJ,kCAAAvF,OAA4CuG,EAAkBC,KAAK,QAtBT,IAwB3DC,EAAuEf,EAAvEe,WAAYC,EAA2DhB,EAA3DgB,SAAUC,EAAiDjB,EAAjDiB,qBAAsBX,EAA2BN,EAA3BM,QAASK,EAAkBX,EAAlBW,eAC5DhN,KAAKuN,WAAajB,EAAWA,EAASc,WAAajB,EAAKqB,SACxDxN,KAAKoN,WAAaA,EAClBpN,KAAKyN,aAAenB,EAAWA,EAASe,SAAW,KACnDrN,KAAKqN,SAAWA,EAChBrN,KAAKsN,qBAAuBA,EAC5BtN,KAAK2M,QAAUA,EACf3M,KAAK0N,kBAAoB1N,KAAKsM,SAC9BtM,KAAKgN,eAAiBA,EACtBhN,KAAK2N,aAAeX,EAChBhN,KAAK0E,YAAYkJ,uBAAuBZ,GACvCT,EACCvM,KAAK0E,YAAYmJ,cAActB,EAASuB,GAAGvB,EAASwB,GACpD,GACN/N,KAAKgO,aAAL,GAAArH,OAAuB3G,KAAKsM,SAAWtM,KAAKsM,SAAS0B,aAAe,IAApErH,OAAyE3G,KAAK2N,cAC9E3N,KAAKiO,uBAAyBjO,KAAKgO,aAChCE,MAAM,QACNlH,OAAO,SAAAmH,GAAI,OAAIA,IACfrM,IAAI,SAAAqM,GAAI,OAAI1B,EAAK/H,YAAY0J,0BAA0BD,KACvDhB,KAAK,IACRnN,KAAKqO,iBAAmBrO,KAAK0E,YAAY4J,oBAAoBtO,KAAKoM,gBAElEpM,KAAKuO,OAASvO,KAAKwO,YACfxO,KAAKuO,OACPvO,KAAKyH,UAAW,EACNzH,KAAK0E,YAAY+J,iBAAiBzO,KAAKsN,sBAIjDtN,KAAKyH,UAAW,GAHhBzH,KAAKyH,UAAW,EAChBzH,KAAKuO,OAASvO,KAAK0E,YAAYgK,aAAa1O,KAAKoN,aAK/CpN,KAAKyH,WACPzH,KAAKsN,qBAAuBtN,KAAK0E,YAAYiK,8EAjEtCvC,EAAgBC,EAAQE,GACjC,OAAO,IAAIvM,KAAK0E,YAAY0H,EAAgBC,EAAQrM,KAAMuM,GAAU,sCAG3DH,EAAgBC,EAAQE,GACjC,OAAO,IAAIvM,KAAK0E,YAAY0H,EAAgBC,EAAQrM,KAAMuM,GAAU,sCAhOpE,OAAO,IAAIvM,KAFYA,KAAK4O,2BACb5O,KAAK6O,mBACoB,KAAM,MAAM,qCAGrC7G,GACf,IAAIR,EAAOxH,KAAK8O,SAGhB,OAFAtH,EAAOA,EAAKuH,UAAU/G,8CAKEoE,GAAgB,IAAArM,EAAAC,KACxC,GAA8B,IAA1BoM,EAAetG,OACjB,MAAM,IAAIoG,MAAJ,2BAAAvF,OAAqCyF,EAAetG,SAE5D,GAAIsG,EAAe4C,KAAK,SAAAC,GAAG,OAAyB,IAArBA,EAAIC,MAAMpJ,SACvC,MAAM,IAAIoG,MAAJ,2DAER,GAAIE,EAAe4C,KAAK,SAACC,EAAKnB,GAAN,OAAYmB,EAAInB,IAAMA,IAC5C,MAAM,IAAI5B,MAAJ,6BAER,GAAIE,EAAe4C,KAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAMF,KAAK,SAACG,EAAMpB,GAAP,OAAaoB,EAAKpB,IAAMA,GAAKoB,EAAKrB,IAAMmB,EAAInB,MACxF,MAAM,IAAI5B,MAAJ,qCAMR,GAAIlM,KAAKoP,SAAShD,EAJe,SAAA+C,GAAI,OAClCA,EAAKE,SAAWtP,EAAKuP,QAAQrI,SAASkI,EAAKE,SACxCF,EAAKI,SAAWxP,EAAKyP,QAAQvI,SAASkI,EAAKI,UAG/C,MAAM,IAAIrD,MAAJ,2CAER,GAAIlM,KAAKoP,SAAShD,EAAgB,SAAA+C,GAAI,OAAK,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGlI,SAASkI,EAAKM,SACvE,MAAM,IAAIvD,MAAJ,iCAER,IAMIG,EANEqD,EAAe1P,KAAK2P,UAAUvD,EAAgB,SAAA+C,GAAI,OAAIA,EAAKE,SAAWtP,EAAKyN,WAAU1H,OACrF8J,EAAe5P,KAAK2P,UAAUvD,EAAgB,SAAA+C,GAAI,OAAIA,EAAKE,SAAWtP,EAAK8P,WAAU/J,OAC3F,GAAI4J,EAAe,GAAKE,EAAe,EACrC,MAAM,IAAI1D,MAAJ,wDAAAvF,OACoD+I,EADpD,sBAAA/I,OACqFiJ,IAI7F,GAAiB,IADAE,KAAKC,IAALC,MAAAF,KAAI7P,OAAA2G,EAAA,EAAA3G,CAAQgD,IAAEgN,QAAQ7D,EAAetK,IAAI,SAAAmN,GAAG,OAAIA,EAAIC,MAAMpN,IAAI,SAAAqN,GAAI,OAAIA,EAAKM,aAE1F,GAAqB,IAAjBG,EACF,GAAqB,IAAjBF,EACFrD,EAAS,CACPe,WAAYpN,KAAKwN,SACjBH,SAAUrN,KAAKkQ,6BACf5C,qBAAsBtN,KAAKmQ,6BAC3BxD,SAAS,EACTK,eAAgB,WAEb,GAAqB,IAAjB0C,EACTrD,EAAS,CACPe,WAAYpN,KAAKwN,SACjBH,SAAUrN,KAAKoQ,8BACf9C,qBAAsBtN,KAAKqQ,kCAAkCjE,GAC7DO,SAAS,EACTK,eAAgB,UAEb,CACL,IAAMsD,EAAqBtQ,KAAKoP,SAAShD,EACvC,SAAA+C,GAAI,OAAIA,EAAKE,SAAWtP,EAAKyN,UAAY2B,EAAKI,SAAWxP,EAAKwQ,eAC1DC,EAAsBxQ,KAAKoP,SAAShD,EACxC,SAAA+C,GAAI,OAAIA,EAAKE,SAAWtP,EAAKyN,UAAY2B,EAAKI,SAAWxP,EAAK0Q,gBAChE,IAAKH,IAAuBE,EAC1B,MAAM,IAAItE,MAAJ,2CAERG,EAAS,CACPe,WAAYpN,KAAK6P,SACjBxC,SAAUrN,KAAKkQ,6BACf5C,qBAAsBtN,KAAKqQ,kCAAkCjE,GAC7DO,SAAS,EACTK,eAAgB,UAGf,CACL,GAAqB,IAAjB0C,EACF,MAAM,IAAIxD,MAAJ,4EAER,GAAqB,IAAjB0D,EACFvD,EAAS,CACPe,WAAYpN,KAAK6P,SACjBxC,SAAUrN,KAAKoQ,8BACf9C,qBAAsBtN,KAAKqQ,kCAAkCjE,GAC7DO,SAAS,EACTK,eAAgB,UAEb,CACL,IAAM0D,EAAqB1Q,KAAKoP,SAAShD,EACvC,SAAA+C,GAAI,OAAIA,EAAKE,SAAWtP,EAAK8P,UAAYV,EAAKI,SAAWxP,EAAKwQ,eAC1DI,EAAsB3Q,KAAKoP,SAAShD,EACxC,SAAA+C,GAAI,OAAIA,EAAKE,SAAWtP,EAAK8P,UAAYV,EAAKI,SAAWxP,EAAK0Q,gBAChE,IAAKC,IAAuBC,EAC1B,MAAM,IAAIzE,MAAJ,2CAERG,EAAS,CACPe,WAAYpN,KAAKwN,SACjBH,SAAUrN,KAAK4Q,gCACftD,qBAAsBtN,KAAK6Q,8BAA8BzE,EAAgBpM,KAAKwN,UAC9Eb,SAAS,EACTK,eAAgB,WAIjB,CACL,GAAqB,IAAjB0C,GAAuC,IAAjBE,EACxB,MAAM,IAAI1D,MAAJ,sFAGR,GAAIlM,KAAKoP,SAAShD,EAAgB,SAAA+C,GAAI,OAAmB,IAAfA,EAAKM,OAAeN,EAAKE,SACjE,MAAM,IAAInD,MAAJ,qCAGR,GADmBlM,KAAK2P,UAAUvD,EAAgB,SAAA+C,GAAI,OAAmB,IAAfA,EAAKM,OAAeN,EAAKE,SACpEvJ,OAAS,EACtB,MAAM,IAAIoG,MAAJ,6BAING,EAFiBpJ,IAAE6N,IAAI7N,IAAEgN,QAAQ7D,EAAetK,IAAI,SAAAmN,GAAG,OAAIA,EAAIC,MAAMpN,IAAI,SAAAqN,GAAI,OAAIA,EAAKM,YACvE,IAAM,EACZ,CACPrC,WAAYpN,KAAKwN,SACjBH,SAAUrN,KAAK4Q,gCACftD,qBAAsBtN,KAAK6Q,8BAA8BzE,EAAgBpM,KAAKwN,UAC9Eb,SAAS,EACTK,eAAgB,MAGT,CACPI,WAAYpN,KAAK6P,SACjBxC,SAAUrN,KAAK4Q,gCACftD,qBAAsBtN,KAAK6Q,8BAA8BzE,EAAgBpM,KAAK6P,UAC9ElD,SAAS,EACTK,eAAgB,MAItB,OAAO,IAAIhN,KAAKoM,EAAgBC,EAAQ,KAAM,MAAM,4CAG9B2B,GAAc,IAAAzH,EAAAvG,KAC9BgI,EAAQgG,EACXE,MAAM,IACNpM,IAAI,SAAAqM,GAAI,OAAI5H,EAAKwK,sBAAsB5C,KAC1C,GAAInG,EAAMhB,OAAO,SAAAgK,GAAI,OAAKA,IAAMlL,OAC9B,OAAO,KAGT,IACE,OAAO9F,KAAKiR,UAAUjJ,GAAO,GAC7B,MAAOvD,GACP,OAAOzE,KAAKiR,UAAUjJ,GAAO,uDAICiG,GAAwB,IAAA3G,EAAAtH,KAClDgI,EAAQiG,EACXC,MAAM,IACNpM,IAAI,SAAAqM,GAAI,OAAI7G,EAAK4J,4BAA4B/C,KAChD,GAAInG,EAAMhB,OAAO,SAAAgK,GAAI,OAAKA,IAAMlL,OAC9B,OAAO,KAGT,IACE,OAAO9F,KAAKiR,UAAUjJ,GAAO,GAC7B,MAAOvD,GACP,OAAOzE,KAAKiR,UAAUjJ,GAAO,gDAINoE,GAAgB,IAAAjE,EAAAnI,KACzC,OAAOiD,IAAEgN,QAAQ7D,EAAetK,IAC9B,SAAAmN,GAAG,OAAIA,EAAIC,MAAMpN,IACf,SAAAqN,GAAI,OAAIhH,EAAKgJ,8BAA8BhC,EAAKM,OAAON,EAAKE,aAC7DlC,KAAK,iDAGkBiE,GAAU,IAAAC,EAAArR,KAC9BoM,EAAiBpM,KAAKsR,KAAKxP,IAAI,SAAAgM,GAAC,MAAK,CACzCA,IAAGoB,MAAOmC,EAAKE,QAAQzP,IAAI,SAAAiM,GAAC,OAAA9N,OAAAsK,EAAA,EAAAtK,CAAA,CAC1B8N,IAAGD,KAAMuD,EAAKG,0BAA0BJ,EAAa,EAAJtD,EAAQC,UAG7D,OAAO/N,KAAKyR,aAAarF,0DAGWgF,GAAU,IAAAM,EAAA1R,KACxCoM,EAAiBpM,KAAKsR,KAAKxP,IAAI,SAAAgM,GAAC,MAAK,CACzCA,IAAGoB,MAAOwC,EAAKH,QAAQzP,IAAI,SAAAiM,GAAC,OAAA9N,OAAAsK,EAAA,EAAAtK,CAAA,CAC1B8N,IAAGD,KAAM4D,EAAKC,gCAAgCP,EAAa,EAAJtD,EAAQC,UAGnE,OAAO/N,KAAKyR,aAAarF,6DAGcgF,GACvC,IAEE,OADApR,KAAK4R,+BAA+BR,IAC7B,EACP,MAAM3M,GACN,OAAO,wCAIS2H,GAClB,IAAIsD,EAAe,EAAGE,EAAe,EADHiC,GAAA,EAAAC,GAAA,EAAAC,OAAA7H,EAAA,IAElC,QAAA8H,EAAAC,EAAgBjS,KAAKsR,KAArBY,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA2B,KAAhB9D,EAAgBiE,EAAAM,MAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAvI,EAAA,IACzB,QAAAwI,EAAAC,EAAgB3S,KAAKuR,QAArBW,OAAAC,cAAAI,GAAAG,EAAAC,EAAAP,QAAAC,MAAAE,GAAA,EAA8B,KACtBpD,EAAO/C,EADesG,EAAAJ,OACGpD,MAAMnB,GACjCoB,EAAKE,SAAWrP,KAAKwN,UACvB2B,EAAKI,OAASvP,KAAKwP,QAAQE,EAAe,GAC1CA,GAAgB,GACPP,EAAKE,SAAWrP,KAAK6P,WAC9BV,EAAKI,OAASvP,KAAKwP,QAAQI,EAAe,GAC1CA,GAAgB,IARK,MAAAgD,GAAAJ,GAAA,EAAAC,EAAAG,EAAA,YAAAL,GAAA,MAAAI,EAAAE,QAAAF,EAAAE,SAAA,WAAAL,EAAA,MAAAC,KAFO,MAAAG,GAAAd,GAAA,EAAAC,EAAAa,EAAA,YAAAf,GAAA,MAAAI,EAAAY,QAAAZ,EAAAY,SAAA,WAAAf,EAAA,MAAAC,GAclC,OAAO/R,KAAK8S,mBAAmB1G,wDAgF/B,MAAO,CACLpE,MAAOhI,KAAKgI,6CA0BF,IAAA+K,EAAAC,EAAArJ,EAAAsJ,EAAAC,EAAAC,EAENC,GAAQH,EAAA,GAAAhT,OAAAoT,EAAA,EAAApT,CAAAgT,EACX9G,EAAKqB,UADMuF,EAAA,GAAA9S,OAAAoT,EAAA,EAAApT,CAAA8S,EACO,EAAI,KADX9S,OAAAoT,EAAA,EAAApT,CAAA8S,EACiB,EAAIO,IAAMC,QAAQ,MADnCtT,OAAAoT,EAAA,EAAApT,CAAA8S,EAC0C,EAAIO,IAAME,SAAS,MAD7DvT,OAAAoT,EAAA,EAAApT,CAAA8S,EACoE,EAAIO,IAAMG,MAAM,MADpFV,IAAA9S,OAAAoT,EAAA,EAAApT,CAAAgT,EAEX9G,EAAK0D,UAFMmD,EAAA,GAAA/S,OAAAoT,EAAA,EAAApT,CAAA+S,EAEO,EAAI,KAFX/S,OAAAoT,EAAA,EAAApT,CAAA+S,EAEiB,EAAIM,IAAMC,QAAQ,MAFnCtT,OAAAoT,EAAA,EAAApT,CAAA+S,EAE0C,EAAIM,IAAME,SAAS,MAF7DvT,OAAAoT,EAAA,EAAApT,CAAA+S,EAEoE,EAAIM,IAAMG,MAAM,MAFpFT,IAAA/S,OAAAoT,EAAA,EAAApT,CAAAgT,EAGX,MAHWtJ,EAAA,GAAA1J,OAAAoT,EAAA,EAAApT,CAAA0J,EAGF,EAAI,KAHF1J,OAAAoT,EAAA,EAAApT,CAAA0J,EAGQ,EAAI2J,IAAMC,QAAQ,MAH1BtT,OAAAoT,EAAA,EAAApT,CAAA0J,EAGiC,EAAI2J,IAAME,SAAS,MAHpDvT,OAAAoT,EAAA,EAAApT,CAAA0J,EAG2D,EAAI2J,IAAMG,MAAM,MAH3ExT,OAAAoT,EAAA,EAAApT,CAAA0J,EAGkF,EAAI2J,IAAMI,OAAO,MAHnG/J,IAAAsJ,GAMRU,EAAgB3T,KAAKoM,eACxBtK,IAAI,SAAAmN,GAAG,OAAIA,EAAIC,MACbpN,IAAI,SAAAqN,GAAI,OAAIiE,EAASjE,EAAKE,QAAQF,EAAKM,SACvCtC,KAAK,MACPA,KAAK,MAIFyG,GAHaV,EAAA,GAAAjT,OAAAoT,EAAA,EAAApT,CAAAiT,EAChB/G,EAAKqB,SAAW,KADAvN,OAAAoT,EAAA,EAAApT,CAAAiT,EACM/G,EAAK0D,SAAW,KADtBqD,GAGsBlT,KAAKoN,YAIxCyG,GAHSV,EAAA,GAAAlT,OAAAoT,EAAA,EAAApT,CAAAkT,EACZhH,EAAKqB,SAAW,KADJvN,OAAAoT,EAAA,EAAApT,CAAAkT,EACUhH,EAAK0D,SAAW,KAD1B5P,OAAAoT,EAAA,EAAApT,CAAAkT,EACgC,KAAO,KADvCA,GAGkBnT,KAAKuO,QACtC,MACE,GAAA5H,OAAGiN,EAAH,SAAAjN,OAA6BkN,EAA7B,MACEF,EAAczF,MAAM,MAAMpM,IAAI,SAAAmN,GAAG,UAAAtI,OAAQ2M,IAAMQ,MAAM7E,GAApB,OAA6B9B,KAAK,MACnE,gEAI2B,IAAPY,EAAOgG,EAAPhG,EAAGD,EAAIiG,EAAJjG,EAC3B,GAAIgC,KAAKkE,MAAMjG,KAAOA,GAAK+B,KAAKkE,MAAMlG,KAAOA,EAC3C,MAAM,IAAI7B,EAAJ,gBAAAtF,OAAqChE,KAAKC,UAAU,CAACmL,IAAGD,MAAxD,oBAER,QAAqC5D,IAAjClK,KAAKsN,qBAAqBQ,SAAwD5D,IAApClK,KAAKsN,qBAAqBQ,GAAGC,GAC7E,MAAM,IAAI9B,EAAJ,gBAAAtF,OAAqChE,KAAKC,UAAU,CAACmL,IAAGD,MAAxD,mEAQc,IAAPC,EAAOlE,EAAPkE,EAAGD,EAAIjE,EAAJiE,EAClB,OAAO9N,KAAKsN,qBAAqBQ,GAAGC,oCAW7BkG,GACP,OAAOjU,KAAK0E,YAAY0K,SAASpP,KAAKoM,eAAgB6H,qCAG9CA,GACR,OAAOjU,KAAK0E,YAAYiL,UAAU3P,KAAKoM,eAAgB6H,uCAoBvD,GAAIjU,KAAKgN,eACP,OAAOhN,KAAK0E,YAAYgK,aAAa1O,KAAKgN,gBAG5C,IAAMkH,EAAclU,KAAKoP,SAAS,SAAAD,GAAI,OAAIA,EAAKE,QAAyB,IAAfF,EAAKM,QAC9D,OAAIyE,EACKA,EAAY7E,QAGhBrP,KAAK2M,SAAW3M,KAAK0E,YAAYyP,aAAanU,KAAKoM,eAAgBpM,KAAKoN,YACpEpN,KAAKoN,WAGP,8CA0DQgH,EAAkBC,EAAaC,GAC9C,GAAItU,KAAKyH,SACP,MAAM,IAAIwE,EAAiB,iCAE7B,GAAIjM,KAAKqN,WAAa+G,EACpB,MAAM,IAAInI,EAAJ,oCAAAtF,OAAyDyN,EAAzD,4BAAAzN,OAAoG3G,KAAKqN,SAAzG,MAMR,GAJArN,KAAKuU,yBAAyBF,GAC1BC,GACFtU,KAAKuU,yBAAyBD,IAE3BtU,KAAKsN,qBAAqB+G,EAAYvG,GAAGuG,EAAYtG,GACxD,MAAM,IAAI7B,MAAJ,QAAAvF,OAAkBhE,KAAKC,UAAUyR,GAAjC,qEAIHhF,GACL,OAAOrP,KAAKwU,WAAWxU,KAAKoM,eAAgB,CAC1CgB,WAAYpN,KAAKoN,WACjBC,SAAUrN,KAAKqN,SACfC,qBAAsBtN,KAAKsN,qBAC3BX,SAAS,EACTK,eAAgBqC,GACf,CAACpC,OAAQoC,sCAkBJrH,GACR,IAAIR,EAAOxH,KADIyU,GAAA,EAAAC,GAAA,EAAAC,OAAAzK,EAAA,IAEf,QAAA0K,EAAAC,EAAmB7M,EAAnBkK,OAAAC,cAAAsC,GAAAG,EAAAC,EAAAzC,QAAAC,MAAAoC,GAAA,EAA0B,KAAfzD,EAAe4D,EAAAtC,MACxB9K,EAAOA,EAAKsN,SAAS9D,IAHR,MAAA4B,GAAA8B,GAAA,EAAAC,EAAA/B,EAAA,YAAA6B,GAAA,MAAAI,EAAAhC,QAAAgC,EAAAhC,SAAA,WAAA6B,EAAA,MAAAC,GAMf,OAAOnN,mCAGA6M,GAAa,IAAAU,EACpB,GAAIV,EAAYpH,OACd,OAAOjN,KAAKiN,OAAOoH,EAAYpH,QAEjC,IAQM+H,GAReD,EAAA,GAAA9U,OAAAoT,EAAA,EAAApT,CAAA8U,EAClB/U,KAAK0E,YAAYwL,6BAA+BlQ,KAAKiV,kBADnChV,OAAAoT,EAAA,EAAApT,CAAA8U,EAElB/U,KAAK0E,YAAY0L,8BAAgCpQ,KAAKkV,mBAFpCjV,OAAAoT,EAAA,EAAApT,CAAA8U,EAGlB/U,KAAK0E,YAAYkM,gCAAkC5Q,KAAKmV,oBAHtClV,OAAAoT,EAAA,EAAApT,CAAA8U,EAIlB/U,KAAK0E,YAAY0Q,4BAA8BpV,KAAKqV,iBAJlCpV,OAAAoT,EAAA,EAAApT,CAAA8U,EAKlB/U,KAAK0E,YAAY4Q,6BAA+BtV,KAAKuV,kBALnCtV,OAAAoT,EAAA,EAAApT,CAAA8U,EAMlB/U,KAAK0E,YAAY8Q,8BAAgCxV,KAAKyV,mBANpCV,GAQkB/U,KAAKqN,UAC5C,IAAK2H,EACH,MAAM,IAAI/I,EAAJ,4CAAAtF,OAAgE3G,KAAKqN,SAArE,MAER,OAAO2H,EAAeU,KAAK1V,KAApBgV,CAA0BX,kCAIjC,IAAKrU,KAAK2M,QACR,MAAM,IAAIT,MAAM,eAGlB,OAAOlM,KAAKsM,gDAIZ,IAAKtM,KAAK0N,gBACR,MAAM,IAAIxB,MAAM,yBAGlB,OAAOlM,KAAKsM,qDAGW,IAAPyB,EAAOjE,EAAPiE,EAAGD,EAAIhE,EAAJgE,EACnB9N,KAAK2V,iBAAiB3V,KAAK0E,YAAYwL,6BAA8B,CAACnC,IAAGD,MAEzE,IAAM1B,EAAiBpM,KAAK0E,YAAYkR,YAAY5V,KAAKoM,eAAgB,CACvE2B,IAAGD,IACHuB,OAAQrP,KAAKoN,WACbmC,OAAQvP,KAAK0E,YAAY6L,eAE3B,OAAOvQ,KAAKwU,WAAWpI,EAAgB,CACrCgB,WAAYpN,KAAKoN,WACjBC,SAAUrN,KAAK0E,YAAY0L,8BAC3B9C,qBAAsBtN,KAAK0E,YAAY2L,kCAAkCjE,GACzEO,SAAS,EACTK,eAAgB,MACf,CAACe,IAAGD,mDAGiB,IAAPC,EAAO8H,EAAP9H,EAAGD,EAAI+H,EAAJ/H,EACpB9N,KAAK2V,iBAAiB3V,KAAK0E,YAAY0L,8BAA+B,CAACrC,IAAGD,MAE1E,IAAM1B,EAAiBpM,KAAK0E,YAAYkR,YAAY5V,KAAKoM,eAAgB,CACvE2B,IAAGD,IACHuB,OAAQrP,KAAKoN,WACbmC,OAAQvP,KAAK0E,YAAY+L,gBAErBrD,EAAapN,KAAK0E,YAAYgK,aAAa1O,KAAKoN,YACtD,OAAOpN,KAAK8V,WAAW1J,EAAgB,CACrCgB,WAAYA,EACZC,SAAUD,IAAepN,KAAK0E,YAAY8I,SACtCxN,KAAK0E,YAAYkM,gCACjB5Q,KAAK0E,YAAYwL,6BACrB5C,qBAAsBF,IAAepN,KAAK0E,YAAY8I,SAClDxN,KAAK0E,YAAYmM,8BAA8BzE,EAAgBgB,GAC/DpN,KAAK0E,YAAY2L,kCAAkCjE,GACvDO,SAAS,EACTK,eAAgB,MACf,CAACe,IAAGD,oDAGkB,IAAPC,EAAOgI,EAAPhI,EAAGD,EAAIiI,EAAJjI,EACrB9N,KAAK2V,iBAAiB3V,KAAK0E,YAAYkM,gCAAiC,CAAC7C,IAAGD,MAE5E,IAAMqB,EAAOnP,KAAKoM,eAAe0B,GAAGoB,MAAMnB,GAC1C,OAAO/N,KAAKwU,WAAWxU,KAAKoM,eAAgB,CAC1CgB,WAAYpN,KAAKoN,WACjBC,SAAU8B,EAAKI,SAAWvP,KAAK0E,YAAY6L,aACvCvQ,KAAK0E,YAAY0Q,4BACjBpV,KAAK0E,YAAY4Q,6BACrBhI,qBAAsBtN,KAAK0E,YAAYsR,+BAA+BhW,KAAKoM,eAAgB,CAAC2B,IAAGD,MAC/FnB,SAAS,EACTK,eAAgB,MACf,CAACe,IAAGD,yCAGE/D,EAAIwF,GAAQ,IAAA0G,EAAAC,EAAAlW,KACfmW,EAAWnW,KAAKoP,SAAS,SAAAD,GAAI,OAAIA,EAAKE,SAAW6G,EAAK9I,YAAc+B,EAAKI,SAAWA,IACpF6G,EAASpW,KAAKoM,eAAerC,EAAG+D,GAAGoB,MAAMnF,EAAGgE,GAC5C3B,GAAiB6J,EAAAjW,KAAK0E,aAAYkR,YAAjB5F,MAAAiG,EAAA,CAA6BjW,KAAKoM,gBAAlCzF,OAAqD,CAC1E,CAACoH,EAAGoI,EAASpI,EAAGD,EAAGqI,EAASrI,EAAGuB,OAAQ,KAAME,OAAQ,MACrD,CAACxB,EAAGqI,EAAOrI,EAAGD,EAAGsI,EAAOtI,EAAGuB,OAAQ8G,EAAS9G,OAAQE,OAAQ4G,EAAS5G,WAEvE,OAAOvP,KAAKwU,WAAWpI,EAAgB,CACrCgB,WAAYpN,KAAKoN,WACjBC,SAAUrN,KAAK0E,YAAY8Q,8BAC3BlI,qBAAsBtN,KAAK0E,YAAY2R,iCAAiCjK,EAAgBrC,GACxF4C,SAAS,EACTK,eAAgB,MACf,CAACe,EAAGhE,EAAGgE,EAAGD,EAAG/D,EAAG+D,+CAGG,IAAPC,EAAOuI,EAAPvI,EAAGD,EAAIwI,EAAJxI,EAGlB,OAFA9N,KAAK2V,iBAAiB3V,KAAK0E,YAAY0Q,4BAA6B,CAACrH,IAAGD,MAEjE9N,KAAKuW,WAAW,CAACxI,IAAGD,KAAI9N,KAAK0E,YAAY6L,0DAGzB,IAAPxC,EAAOyI,EAAPzI,EAAGD,EAAI0I,EAAJ1I,EAGnB,OAFA9N,KAAK2V,iBAAiB3V,KAAK0E,YAAY4Q,6BAA8B,CAACvH,IAAGD,MAElE9N,KAAKuW,WAAW,CAACxI,IAAGD,KAAI9N,KAAK0E,YAAY+L,4DAGxB,IAAP1C,EAAO0I,EAAP1I,EAAGD,EAAI2I,EAAJ3I,EACpB9N,KAAK2V,iBAAiB3V,KAAK0E,YAAY8Q,8BAA+B,CAACzH,IAAGD,MAE1E,IAAM1B,EAAiBpM,KAAK0E,YAAYkR,YAAY5V,KAAKoM,eAAgB,CACvE2B,IAAGD,IAAG2B,MAAOzP,KAAKoM,eAAe0B,GAAGoB,MAAMnB,GAAG0B,MAAQ,IAEjDrC,EAAapN,KAAK0E,YAAYgK,aAAa1O,KAAKoN,YACtD,OAAOpN,KAAK8V,WAAW1J,EAAgB,CACrCgB,WAAYA,EACZC,SAAUrN,KAAK0E,YAAYkM,gCAC3BtD,qBAAsBtN,KAAK0E,YAAYmM,8BAA8BzE,EAAgBgB,GACrFT,SAAS,EACTK,eAAgB,MACf,CAACe,IAAGD,kDA5WgBR,GACvB,OAAOrK,IAAEgN,QAAQ3C,EACdxL,IAAI,SAACmN,EAAKnB,GAAN,OAAYmB,EACdnN,IAAI,SAAC4D,EAAWqI,GAAZ,OAAkBrI,EAAY,CAACqI,IAAGD,KAAK,UAC7C9G,OAAO,SAAAgK,GAAI,OAAIA,2CASQ,IAARhJ,EAAQ0O,EAAR1O,MAClB,OAAOhI,KAAKiR,UAAUjJ,sDAGU,IAAA2O,EAAA3W,KAChC,OAAOA,KAAKsR,KAAKxP,IAAI,SAAAgM,GAAC,MAAK,CACzBA,IAAGoB,MAAOyH,EAAKpF,QAAQzP,IAAI,SAAAiM,GAAC,MAAK,CAC/BA,IAAGD,IAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,sDAM1C,MAAQ,CACNnC,WAAYpN,KAAKwN,SACjBH,SAAUrN,KAAKkQ,6BACf5C,qBAAsBtN,KAAKmQ,6BAC3BxD,SAAS,EACTK,eAAgB,+CAyCIM,GACtB,OAAOtN,KAAK4W,kBAAkBtJ,GAAsBxH,OAAS,mCAO/CsG,EAAgB6H,GAC9B,OAAO7H,EAAetK,IAAI,SAAAmN,GAAG,OAAIA,EAAIC,MAAMF,KAAKiF,KAAYjF,KAAK,SAAAG,GAAI,OAAIA,sCAG1D/C,EAAgB6H,GAC/B,OAAOhR,IAAEgN,QAAQ7D,EAAetK,IAAI,SAAAmN,GAAG,OAAIA,EAAIC,MAAMlI,OAAOiN,2CAW1C7H,EAAgBiD,GAClC,IAAMwH,EAAc7W,KAAK2P,UAAUvD,EAAgB,SAAA+C,GAAI,OAAIA,EAAKE,SAAWA,GAAyB,IAAfF,EAAKM,QAC1F,QAAKoH,EAAY/Q,QAGU9F,KAAK2P,UAAUvD,EAAgB,SAAA+C,GAAI,OAC7C,IAAfA,EAAKM,OACFoH,EAAY7H,KAAK,SAAA8H,GAAU,OAC5BhH,KAAKiH,IAAI5H,EAAKpB,EAAI+I,EAAW/I,IAAM,GAChC+B,KAAKiH,IAAI5H,EAAKrB,EAAIgJ,EAAWhJ,IAAM,MAIhBhI,OAAS,uDAoBD,IAAAkR,EAAAhX,KAClC,OAAOA,KAAKsR,KAAKxP,IAAI,kBAAMkV,EAAKzF,QAAQzP,IAAI,kBAAM,oDAGvB,IAAAmV,EAAAjX,KAC3B,OAAOA,KAAKsR,KAAKxP,IAAI,kBAAMmV,EAAK1F,QAAQzP,IAAI,kBAAM,gEAGXsK,GACvC,OAAOpM,KAAKkX,wBAAwB9K,EAAgB,SAAA+C,GAAI,OAAKA,EAAKE,+DAG/BjD,EAAgBiD,GAAQ,IAAA8H,EAAAnX,KAC3D,OAAOA,KAAKkX,wBAAwB9K,EAAgB,SAAA+C,GAClD,OAAIA,EAAKE,SAAWA,GAIb8H,EAAK1I,iBAAiB0I,EAAKnB,+BAA+B5J,EAAgB+C,6DAI/C/C,EAAgBiI,GAAa,IAAA+C,EAAApX,KAC3DmW,EAAW/J,EAAeiI,EAAYvG,GAAGoB,MAAMmF,EAAYtG,GAC3DsJ,EAAelB,EAAS1G,MAAQ,EACtC,OAAOzP,KAAKkX,wBAAwB9K,EAAgB,SAAA+C,GAAI,OACtDW,KAAKiH,IAAI5H,EAAKpB,EAAIsG,EAAYtG,IAAM,GACjC+B,KAAKiH,IAAI5H,EAAKrB,EAAIuG,EAAYvG,IAAM,IACnCqB,EAAKE,QACNF,EAAKM,OAAS,GACdN,EAAKM,OAAS4H,GACbD,EAAK3I,iBAAiB2I,EAAKf,iCAAiCe,EAAKxB,YAAL5F,MAAAoH,EAAI,CAAahL,GAAbzF,OAAgC,CAClG,CAACoH,EAAGoI,EAASpI,EAAGD,EAAGqI,EAASrI,EAAGuB,OAAQ,KAAME,OAAQ,MACrD,CAACxB,EAAGoB,EAAKpB,EAAGD,EAAGqB,EAAKrB,EAAGuB,OAAQ8G,EAAS9G,OAAQE,OAAQ4G,EAAS5G,WAC/DJ,+DAIgC/C,EAAgBiI,GAAa,IAAAiD,EAAAtX,KAC7DmW,EAAW/J,EAAeiI,EAAYvG,GAAGoB,MAAMmF,EAAYtG,GACjE,OAAO/N,KAAKkX,wBAAwB9K,EAAgB,SAAA+C,GAAI,OACtDW,KAAKiH,IAAI5H,EAAKpB,EAAIsG,EAAYtG,IAAM,GACjC+B,KAAKiH,IAAI5H,EAAKrB,EAAIuG,EAAYvG,IAAM,IACnCqB,EAAKE,QACNF,EAAKM,MAAQ,IACX6H,EAAKnD,aAAamD,EAAK1B,YAAL5F,MAAAsH,EAAI,CAAalL,GAAbzF,OAAgC,CACzD,CAACoH,EAAGoB,EAAKpB,EAAGD,EAAGqB,EAAKrB,EAAG2B,MAAON,EAAKM,MAAQ,MACzC6H,EAAK5I,aAAayH,EAAS9G,2DAIJjD,EAAgBmL,GAC7C,OAAOnL,EAAetK,IAAI,SAAAmN,GAAG,OAAIA,EAAIC,MAAMpN,IAAIyV,yCA6B9BnL,GAA6B,IAC9C,IAAMoL,EAAU,GAD8BC,EAAAC,UAAA5R,OAAV6R,EAAU,IAAAC,MAAAH,EAAA,EAAAA,EAAA,KAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAVF,EAAUE,EAAA,GAAAH,UAAAG,GAE9C,QAAAjS,EAAA,EAAAkS,EAAqBH,EAArB/R,EAAAkS,EAAAhS,OAAAF,IAA+B,CAA1B,IAAMmS,EAAMD,EAAAlS,GACf4R,EAAQO,EAAOjK,GAAK0J,EAAQO,EAAOjK,IAAM,GACzC0J,EAAQO,EAAOjK,GAAGiK,EAAOhK,GAAKgK,EAEhC,OAAO3L,EAAetK,IAAI,SAAAmN,GAAG,OAAKuI,EAAQvI,EAAInB,GAAb7N,OAAAsK,EAAA,EAAAtK,CAAA,GAC5BgP,EAD4B,CAE/BC,MAAOD,EAAIC,MAAMpN,IAAI,SAAAqN,GAAI,OAAKqI,EAAQrI,EAAKrB,GAAGqB,EAAKpB,GAAtB9N,OAAAsK,EAAA,EAAAtK,CAAA,GACxBkP,EACAqI,EAAQrI,EAAKrB,GAAGqB,EAAKpB,IAF8BoB,MAFPF,aAzjBjD9C,EACGqB,SAAW,WADdrB,EAEG0D,SAAW,WAFd1D,EAGGmD,QAAU,CAHbnD,EAIGqB,SAJHrB,EAKG0D,UALH1D,EAOGuC,iCAPHvC,EAQIqB,SARJrB,EAQoB0D,wBARpB1D,EASI0D,SATJ1D,EASoBqB,aATpBrB,EAYGoE,aAAe,eAZlBpE,EAaGsE,cAAgB,gBAbnBtE,EAcGqD,QAAU,CAdbrD,EAcmBoE,aAdnBpE,EAcsCsE,eAdtCtE,EAgBG+D,6BAA+B,qBAhBlC/D,EAiBGiE,8BAAgC,sBAjBnCjE,EAkBGyE,gCAAkC,wBAlBrCzE,EAmBGiJ,4BAA8B,oBAnBjCjJ,EAoBGmJ,6BAA+B,qBApBlCnJ,EAqBGqJ,8BAAgC,sBArBnCrJ,EAuBG6L,yBAA2B,CAvB9B7L,EAuBoC+D,6BAvBpC/D,EAuBuEyE,iCAvBvEzE,EAwBG8L,wBAA0B,CAxB7B9L,EAwBmC+D,6BAxBnC/D,EAwBsEiE,+BAxBtEjE,EAyBG+L,uBAAyB,CAzB5B/L,EAyBkCiJ,4BAzBlCjJ,EAyBoEmJ,8BAzBpEnJ,EA0BGgM,+CA1BHhM,EA0BuC+L,yBA1BvC/L,EA0BoEqJ,gCA1BpErJ,EA4BGmF,KAAOsG,MAAMhM,KAAK,CAAC9F,OAAQ,GAAI,SAACwM,EAAOjP,GAAR,OAAkBA,IA5BpD8I,EA6BGoF,QAAUqG,MAAMhM,KAAK,CAAC9F,OAAQ,GAAI,SAACwM,EAAOjP,GAAR,OAAkBA,IA7BvD8I,EA8BG0B,cA9BH1B,EA8BwBmF,KAAKxP,IAAI,SAAAgM,GAAC,OA9BlC3B,EA8B2CoF,QAAQzP,IAAI,SAAAiM,GAAC,SAAApH,OACvD,CAAC,IAAK,IAAK,IAAK,IAAK,KAAKoH,IAD6BpH,OACxB,CAAC,IAAK,IAAK,IAAK,IAAK,KAAKmH,QA/B1D3B,EAgCGyB,2CAhCHzB,EAiCIqB,SAAW,oBAjCfrB,EAkCI0D,SAAW,SAlCf1D,EAoCG4E,qCACF9N,IAAE6D,UAAU7D,IAAEgN,QArCf9D,EAqC4BmF,KAAKxP,IAAI,SAAAgM,GAAC,OArCtC3B,EAqC+CoF,QAAQzP,IAAI,SAAAiM,GAAC,MAC5D,IAAApH,OAAI,CAAC,IAAK,IAAK,IAAK,IAAK,KAAKoH,IAA9BpH,OAAmC,CAAC,IAAK,IAAK,IAAK,IAAK,KAAKmH,IAAM,CAACC,IAAGD,aACzEsK,GAAM,CAAC,CAACnL,OAvCNd,EAuCmBqB,WACrB6K,GAAM,CAAC,CAACpL,OAxCNd,EAwCmB0D,aAxCnB1D,EA0CGiC,0BAA4BnL,IAAE6D,UAAU7G,OAAOqY,KA1ClDnM,EA0C4D4E,uBAAuBwH,OAAOzW,IAAI,SAACwQ,EAAOjP,GAAR,MAChG,CAACiP,EAAOkG,OAAOC,aAAapV,EAAQ,GAAK,GAAKA,EAAcA,EAAQ,GAAd,QA3CpD8I,EA4CG+E,4BAA8BjO,IAAE6D,UAAU7G,OAAOqY,KA5CpDnM,EA4C8D4E,uBAAuBwH,OAAOzW,IAAI,SAACwQ,EAAOjP,GAAR,MAClG,CAACmV,OAAOC,aAAapV,EAAQ,GAAK,GAAKA,EAAcA,EAAQ,GAAd,IA7C7C8I,EA6CsE4E,sBAAsBuB,OA7C5FnG,EA+CGuM,kBAAoBzV,IAAE6D,UAAU,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGhF,IACrD,SAAA2N,GAAK,MAAI,CAACA,EAAOxM,IAAE6D,UAAU,CAAC,KAhD5BqF,EAgDuCqB,SAhDvCrB,EAgDsD0D,UAAU/N,IAChE,SAAAuN,GAAM,MAAI,CAACA,EAAD,GAAA1I,OAAY8I,EAAZ,KAAA9I,OAAqB0I,WAjD/BlD,EAkDGqF,0BAA4BvO,IAAE6D,UAAU7D,IAAEgN,QAAQhQ,OAAO0Y,QAlD5DxM,EAkDyEuM,mBAAmB5W,IAC9F,SAAA8W,GAAA,IAAAC,EAAA5Y,OAAA2J,EAAA,EAAA3J,CAAA2Y,EAAA,GAAEE,EAAFD,EAAA,GAAYE,EAAZF,EAAA,UAA2B5Y,OAAO0Y,QAAQI,GAAWjX,IACnD,SAAAkX,GAAA,IAAAC,EAAAhZ,OAAA2J,EAAA,EAAA3J,CAAA+Y,EAAA,GAAEE,EAAFD,EAAA,SAA2B,CAA3BA,EAAA,GAAsC,CAACxJ,MAAO0J,SAASL,GAAWzJ,OAAsB,SAAd6J,EAAuB,KAAOA,UApDxG/M,EAqDGiN,kCAAoCnW,IAAE6D,UAAU7D,IAAEgN,QAAQhQ,OAAO0Y,QArDpExM,EAqDiFuM,mBAAmB5W,IACtG,SAAAuX,GAAA,IAAIN,EAAJ9Y,OAAA2J,EAAA,EAAA3J,CAAAoZ,EAAA,aAAmBpZ,OAAO0Y,QAAQI,GAAWjX,IAC3C,SAAAwX,GAAA,OAAArZ,OAAA2J,EAAA,EAAA3J,CAAAqZ,EAAA,WAA8BxX,IAAI,SAACsP,EAAU/N,GAAX,MAAqB,CAAC+N,EAAUoH,OAAOC,aAAa,GAAKpV,OAvD3F8I,EAwDGgF,8BAAgClO,IAAE6D,UAAU7G,OAAO0Y,QAxDtDxM,EAwDmEuM,mBAAmB5W,IACxF,SAAAyX,GAAA,IAAAC,EAAAvZ,OAAA2J,EAAA,EAAA3J,CAAAsZ,EAAA,GAAET,EAAFU,EAAA,GAAYT,EAAZS,EAAA,SAA2B,CAACV,EAAU7V,IAAE6D,UAAU7G,OAAO0Y,QAAQI,GAAWjX,IAC1E,SAAA2X,GAAA,IAAAC,EAAAzZ,OAAA2J,EAAA,EAAA3J,CAAAwZ,EAAA,GAAEP,EAAFQ,EAAA,GAAatI,EAAbsI,EAAA,SAA2B,CAACR,EA1D5B/M,EA0D4CiN,kCAAkChI,WA1D9EjF,EA2DGwF,gCAAkC1O,IAAE6D,UAAU7G,OAAO0Y,QA3DxDxM,EA2DqEiN,mCAAmCtX,IAC1G,SAAA6X,GAAA,IAAAC,EAAA3Z,OAAA2J,EAAA,EAAA3J,CAAA0Z,EAAA,GAAEvI,EAAFwI,EAAA,SAAoC,CAApCA,EAAA,GA5DEzN,EA4D4DqF,0BAA0BJ,OAypB7EjF,iCCrtBT0N,2LACK,IAAA9Z,EAAAC,KAAAkJ,EAIHlJ,KAAK+I,MAFPuC,EAFKpC,EAELoC,UAAWwO,EAFN5Q,EAEM4Q,UAAWC,EAFjB7Q,EAEiB6Q,SAAUC,EAF3B9Q,EAE2B8Q,gBAAiBC,EAF5C/Q,EAE4C+Q,eAAgBC,EAF5DhR,EAE4DgR,MAAOC,EAFnEjR,EAEmEiR,OAAQrF,EAF3E5L,EAE2E4L,SAAUsF,EAFrFlR,EAEqFkR,SAAUC,EAF/FnR,EAE+FmR,SACpG7X,EAHK0G,EAGL1G,SAAU4J,EAHLlD,EAGKkD,eAHLkO,EAK4B9X,EAA5ByC,MAAQE,EALRmV,EAKQnV,OAAQI,EALhB+U,EAKgB/U,QAkBvB,OAhBA+F,EAAYiP,IAAW,QAAS,aAAc,CAC5CC,cAAeN,EACfO,eAAgBN,EAChBO,WAAY5F,IAAagF,GAAaC,GACtCY,aAAcP,EACdC,WACAO,sBAAkC,KAAXzV,EACvB0V,qBAAiC,WAAX1V,EACtB2V,qBAAiC,WAAX3V,EACtB4V,oBAAgC,UAAX5V,EACrB6V,kBAAmB,CAAC,UAAW,SAAU,eAAe/T,SAAS1B,GACjE0V,iBAA8B,YAAZ1V,EAClB2V,gBAA6B,WAAZ3V,EACjB4V,qBAAkC,gBAAZ5V,GACrB+F,GAGDd,EAAAC,EAAAzJ,cAAA,OAAKsK,UAAWA,EAAW8P,QAAShB,GACjChO,EAAetK,IAAI,SAAAmN,GAAG,OACrBzE,EAAAC,EAAAzJ,cAAA,OAAK6J,IAAG,OAAAlE,OAASsI,EAAInB,GAAKxC,UAAW,OAClC2D,EAAIC,MAAMpN,IAAI,SAAAqN,GAAI,OACjB3E,EAAAC,EAAAzJ,cAACqa,EAAD,CACExQ,IAAG,GAAAlE,OAAKwI,EAAKpB,EAAV,KAAApH,OAAewI,EAAKrB,GACvBqB,KAAMA,EACN2K,UAAWA,GAAcC,GAAYE,EAAe9K,GACpDzJ,UAAWsU,EAAgB7K,GAC3B4K,SAAUE,EAAe9K,GACzB3M,SAAUA,EACVsS,SAAU/U,EAAKgJ,MAAM+L,SACrBwG,KAAMvb,EAAKgJ,MAAMuS,oBArCCxP,cAgElC+N,EAAoB9N,aAAe,CACjCT,UAAW,GACX4O,OAAO,EACPC,QAAQ,EACRL,WAAW,EACXO,UAAU,EACVkB,UAAU,OAGNC,6MACJ1G,SAAW,WACLvO,EAAKwC,MAAMrD,WAAaa,EAAKwC,MAAM+L,SACrCvO,EAAKwC,MAAM+L,SAASvO,EAAKwC,MAAMoG,MACtB5I,EAAKwC,MAAMgR,UAAYxT,EAAKwC,MAAMuS,MAC3C/U,EAAKwC,MAAMuS,gFAIN,IAAApQ,EACoFlL,KAAK+I,MAA3FoG,EADEjE,EACFiE,KAAM2K,EADJ5O,EACI4O,UAAWpU,EADfwF,EACexF,UAAWqU,EAD1B7O,EAC0B6O,SAA6BxU,EADvD2F,EACoC1I,SAAWyC,MAAQM,QAAWuP,EADlE5J,EACkE4J,SAAUwG,EAD5EpQ,EAC4EoQ,KAC7EG,EACJ,CAAC,UAAW,SAAU,eAAexU,SAAS1B,IAC3C4J,EAAKM,MAAQ,GACbN,EAAKM,MAAO,EACbN,EAAKM,MAAQ,KACjB,OACEjF,EAAAC,EAAAzJ,cAAA,OACE6J,IAAG,OAAAlE,OAASwI,EAAKpB,EAAd,KAAApH,OAAmBwI,EAAKrB,GAC3BxC,UAAWiP,IAAW,OAAD,SAAA5T,OAAkBwI,EAAKM,OAAS,CAAC/J,YAAWqU,aACjEqB,SAAWtG,GAAYpP,GAAe4V,GAAQvB,IAAcD,EAAY9Z,KAAK8U,SAAW,MAExFtK,EAAAC,EAAAzJ,cAAA,OAAKsK,UAAWiP,IAAW,QAAS,YAClC/P,EAAAC,EAAAzJ,cAAA,OAAKsK,UAAWiP,IAAW,QAAS,YAClC/P,EAAAC,EAAAzJ,cAAA,OAAKsK,UAAWiP,IAAW,QAAS,YACjCpL,EAAKE,OACJ7E,EAAAC,EAAAzJ,cAAA,OAAKsK,UAAWiP,IAAW,SAAD,UAAA5T,OAAqBwI,EAAKE,UACjDoM,GAEc,IAAftM,EAAKM,MACPjF,EAAAC,EAAAzJ,cAAA,OAAKsK,UAAWiP,IAAW,QAAS,aAClCkB,aA/BU3P,aAkD5B0P,EAAczP,aAAe,CAC3B+N,WAAW,EACXpU,WAAW,EACXqU,UAAU,GAGGF,QClIT6B,mLACI,IACCjM,EAASzP,KAAK+I,MAAd0G,MACP,OAAKA,EAIJjF,EAAAC,EAAAzJ,cAAA,KAAG2a,UAAS,aAAAhV,OAAeiV,GAAf,KAAAjV,OAA0CiV,GAA1C,MACTpR,EAAAC,EAAAzJ,cAAA,QACE6a,iBAAkB,UAClBC,WAAY,SACZC,MAAO,CAACC,SAAQ,GAAArV,OAAKiV,GAAL,QAChBnM,IARG,YAJ0BwM,iBAsBjCC,mLACI,IACAzM,EAASzP,KAAK+I,MAAd0G,MACN,OAAKA,EAIJjF,EAAAC,EAAAzJ,cAAA,KAAG2a,UAAS,oBACTnR,EAAAC,EAAAzJ,cAAA,UAAQmb,EAAGP,GAA2BQ,KAAM,OAAQC,OAAQ,OAAQC,YAAa,IACjF9R,EAAAC,EAAAzJ,cAAA,QACE6a,iBAAkB,UAClBC,WAAY,SACZC,MAAO,CAACC,SAAQ,GAAArV,OAAKiV,GAAL,QAChBnM,IATG,YAJsBwM,iBAuB7BM,mLACI,IACA9M,EAASzP,KAAK+I,MAAd0G,MACN,OAAKA,EAIJjF,EAAAC,EAAAzJ,cAAA,KAAG2a,UAAS,aAAAhV,OAAeiV,GAAf,KAAAjV,OAAyCiV,GAAzC,MACTpR,EAAAC,EAAAzJ,cAAA,QACE6a,iBAAkB,UAClBC,WAAY,SACZO,OAAQ,OACRC,YAAaV,EACbY,WAAY,SACZT,MAAO,CAACC,SAAQ,GAAArV,OAAKiV,GAAL,QAChBnM,IAXG,YAJuBwM,iBAyB9BQ,mLAOI,IAAAvT,EACelJ,KAAK+I,MAApB0G,EADAvG,EACAuG,MAAOvO,EADPgI,EACOhI,KACPwb,EAAY1c,KAAK0E,YAAYiY,aAAazb,GAChD,OAAKwb,EAIJlS,EAAAC,EAAAzJ,cAAC0b,EAAD,CAAWjN,MAAOA,IAHX,YAXiBwM,iBAAvBQ,EACEE,aAAe,CACnBC,cAAelB,EACfmB,OAAUX,EACVY,QAAWP,GAqBAE,QC/FTM,mLACI,IAAA7T,EACkClJ,KAAK+I,MAAvCzG,EADA4G,EACA5G,KAAMuG,EADNK,EACML,KAAMmU,EADZ9T,EACY8T,WAAYC,EADxB/T,EACwB+T,OAC/B,OACEzS,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACGjB,EAAAC,EAAAzJ,cAAA,KAAGC,GAAE,SAAA0F,OAAWrE,EAAX,SAAwBqZ,UAAW,cAAAhV,OAC3BiV,GAD2B,KAAAjV,OACDiV,GADC,cAAAjV,OCNpB,GDMoB,KAAAA,OCNpB,GDMoB,kBAAAA,QAGzBqW,EAAWjP,EAAI,EAAIkP,EAAOlP,EAHD,KAAApH,QAGOqW,EAAWlP,EAAI,EAAImP,EAAOnP,EAHjC,MAIvCX,KAAK,MAAOtE,GACb2B,EAAAC,EAAAzJ,cAAA,KAAGC,GAAE,SAAA0F,OAAWrE,EAAX,WACHkI,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAS,UAAAvW,OAAYrE,EAAZ,SAAyBga,YCdjB,GDc0DD,OAAQ,SACxF7R,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAS,UAAAvW,OAAYrE,EAAZ,SAAyB8Z,KAAM,WAE/C5R,EAAAC,EAAAzJ,cAAA,KAAGC,GAAE,SAAA0F,OAAWrE,EAAX,WACHkI,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAS,UAAAvW,OAAYrE,EAAZ,SAAyBga,YClBjB,GDkB0DD,OAAQ,SACxF7R,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAS,UAAAvW,OAAYrE,EAAZ,SAAyB8Z,KAAM,mBAhBrBH,iBA8B5BkB,mLAII,IAAAjS,EACyBlL,KAAK+I,MAA9BzG,EADA4I,EACA5I,KAAM8a,EADNlS,EACMkS,OAAQC,EADdnS,EACcmS,QACrB,OACE7S,EAAAC,EAAAzJ,cAAA,OACGkc,UAAS,UAAAvW,OAAYrE,EAAZ,KAAAqE,OAAoByW,GAC7BzB,UAAW0B,EAAUrd,KAAK0E,YAAY4Y,qBAAkBpT,WATxC+R,iBAAlBkB,EACEG,qCACS1B,eAA0BA,QAmB3C,IAAM2B,EAAc,SAACjS,EAAD3B,GAA0D,IAA7Cd,EAA6Cc,EAA7Cd,KAAMmU,EAAuCrT,EAAvCqT,WAAuCQ,EAAA7T,EAA3BsT,cAA2B,IAAAO,EAAlB,CAACzP,EAAG,EAAGD,EAAG,GAAQ0P,EACtEC,EADsE,SAAAC,GAAA,SAAAD,IAAA,OAAAxd,OAAAC,EAAA,EAAAD,CAAAD,KAAAyd,GAAAxd,OAAA0d,EAAA,EAAA1d,CAAAD,KAAAC,OAAA2d,EAAA,EAAA3d,CAAAwd,GAAAzN,MAAAhQ,KAAA0X,YAAA,OAAAzX,OAAA4d,EAAA,EAAA5d,CAAAwd,EAAAC,GAAAzd,OAAA6d,EAAA,EAAA7d,CAAAwd,EAAA,EAAA5S,IAAA,SAAAyH,MAAA,WAGxE,OACE9H,EAAAC,EAAAzJ,cAAC+c,EAAD,CACEzb,KAAMgJ,EACNzC,KAAMA,EACNmU,WAAYA,EACZC,OAAQA,QAR4DQ,EAAA,CAC3CxB,iBAYjCwB,EAAmBO,YAAnB,GAAArX,OAAoC2E,EAApC,cAb4E,IAetE2S,EAfsE,SAAAC,GAAA,SAAAD,IAAA,OAAAhe,OAAAC,EAAA,EAAAD,CAAAD,KAAAie,GAAAhe,OAAA0d,EAAA,EAAA1d,CAAAD,KAAAC,OAAA2d,EAAA,EAAA3d,CAAAge,GAAAjO,MAAAhQ,KAAA0X,YAAA,OAAAzX,OAAA4d,EAAA,EAAA5d,CAAAge,EAAAC,GAAAje,OAAA6d,EAAA,EAAA7d,CAAAge,EAAA,EAAApT,IAAA,SAAAyH,MAAA,WAkBjE,IAAA6L,EACmBne,KAAK+I,MAAxBqU,EADAe,EACAf,OAAQC,EADRc,EACQd,QACf,OACE7S,EAAAC,EAAAzJ,cAACod,EAAD,CACE9b,KAAMgJ,EACN8R,OAAQA,EACRC,QAASA,QAxB2DY,EAAA,CAerDhC,iBAgBvB,OAhBMgC,EACGI,WAAaZ,EAatBQ,EAASD,YAAc1S,EAEhB2S,GAGHK,EAAYf,EAAY,YAAa,CACzC1U,KAAM2B,EAAAC,EAAAzJ,cAAA,QAAMud,EAAE,kWACdvB,WAAY,CAACjP,EAAG,IAAKD,EAAG,KACxBmP,OAAQ,CAAClP,EAAG,EAAGD,GAAI,MAGf0Q,GAAYjB,EAAY,YAAa,CACzC1U,KAAM2B,EAAAC,EAAAzJ,cAAA,QAAMud,EAAE,qTACdvB,WAAY,CAACjP,EAAG,IAAKD,EAAG,OAGpB2Q,GAAclB,EAAY,cAAe,CAC7C1U,KAAM2B,EAAAC,EAAAzJ,cAAA,QAAMud,EAAE,0EACdvB,WAAY,CAACjP,EAAG,IAAKD,EAAG,OAGpB4Q,GAAmBnB,EAAY,mBAAoB,CACvD1U,KAAM2B,EAAAC,EAAAzJ,cAAA,QAAMud,EAAE,o0BACdvB,WAAY,CAACjP,EAAG,IAAKD,EAAG,OAGpB6Q,GAAWpB,EAAY,WAAY,CACvC1U,KAAM2B,EAAAC,EAAAzJ,cAAA,QAAMud,EAAE,glBACdvB,WAAY,CAACjP,EAAG,IAAKD,EAAG,OAGpB8Q,GAAcrB,EAAY,cAAe,CAC7C1U,KAAM2B,EAAAC,EAAAzJ,cAAA,QAAMud,EAAE,saACdvB,WAAY,CAACjP,EAAG,IAAKD,EAAG,OAGpB+Q,GAAWtB,EAAY,WAAY,CACvC1U,KAAM2B,EAAAC,EAAAzJ,cAAA,QAAMud,EAAE,02BACdvB,WAAY,CAACjP,EAAG,IAAKD,EAAG,OAGpBgR,GAAWvB,EAAY,WAAY,CACvC1U,KAAM2B,EAAAC,EAAAzJ,cAAA,QAAMud,EAAE,+UACdvB,WAAY,CAACjP,EAAG,IAAKD,EAAG,OAGpBiR,GAAYxB,EAAY,YAAa,CACzC1U,KAAM2B,EAAAC,EAAAzJ,cAAA,QAAMud,EAAE,qQACdvB,WAAY,CAACjP,EAAG,IAAKD,EAAG,OAGpBkR,oLAaI,IAAAC,EAC0Bjf,KAAK+I,MAA/BgT,EADAkD,EACAlD,MAAOqB,EADP6B,EACO7B,OAAQC,EADf4B,EACe5B,QACf6B,EAAalf,KAAK0E,YAAYya,cAAcpD,GACnD,OACEvR,EAAAC,EAAAzJ,cAACke,EAAD,CAAY9B,OAAQA,EAAQC,QAASA,WAjBtBpB,iBAAd+C,GACEG,cAAgB,CACpBC,KAAQd,EACRe,KAAQb,GACRc,OAAUb,GACVc,YAAeb,GACfc,IAAOb,GACPc,OAAUb,GACVc,IAAOb,GACPc,IAAOb,GACP1c,KAAQ2c,QAkBNa,oLAEH,OAAO3f,OAAO4f,OAAOb,GAAMG,eACxBrd,IAAI,SAAAod,GAAU,OAAI1U,EAAAC,EAAAzJ,cAACke,EAAWb,WAAZ,CAAuBxT,IAAKqU,EAAWlB,aAAekB,EAAW5c,gBAH1D2Z,iBAM/B+C,GAAMc,YAAcF,GAELZ,UEnKTe,oLAEH,OACEvV,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACGjB,EAAAC,EAAAzJ,cAAA,QACEC,GAAE,cACF+e,MDdc,ICedC,ODfc,MCiBhBzV,EAAAC,EAAAzJ,cAAA,QACEC,GAAE,SACF+e,MAAOpE,GACPqE,OAAQrE,GACRD,UAAS,aAAAhV,ODnBQ,ECmBR,KAAAA,ODnBQ,ECmBR,OAEX6D,EAAAC,EAAAzJ,cAAA,KAAGC,GAAE,UACHuJ,EAAAC,EAAAzJ,cAAA,QACEsK,UAAW,SACX0U,MAAOpE,GACPqE,OAAQrE,GACRD,UAAS,aAAAhV,OD1BM,EC0BN,KAAAA,OD1BM,EC0BN,OAEX6D,EAAAC,EAAAzJ,cAAA,QACEsK,UAAW,OACX0U,MAAOpE,GACPqE,OAAQrE,GACRD,UAAS,aAAAhV,OAAeiV,GAAf,KAAAjV,OAA4CiV,GAA5C,QAGbpR,EAAAC,EAAAzJ,cAAA,KAAGC,GAAE,UACHuJ,EAAAC,EAAAzJ,cAAA,QACEsK,UAAW,SACX0U,MAAOpE,GACPqE,OAAQrE,GACRD,UAAS,aAAAhV,OAAeiV,GAAf,KAAAjV,OAA4CiV,GAA5C,OAEXpR,EAAAC,EAAAzJ,cAAA,QACEsK,UAAW,OACX0U,MAAOpE,GACPqE,OAAQrE,GACRD,UAAS,aAAAhV,OAAeiV,GAAf,KAAAjV,OAA4CiV,GAA5C,QAGbpR,EAAAC,EAAAzJ,cAAA,KAAGC,GAAE,UACHuJ,EAAAC,EAAAzJ,cAAA,QACEsK,UAAW,SACX0U,MAAOpE,GACPqE,OAAQrE,GACRD,UAAS,aAAAhV,OAAeiV,GAAf,KAAAjV,OAA4CiV,GAA5C,OAEXpR,EAAAC,EAAAzJ,cAAA,QACEsK,UAAW,OACX0U,MAAOpE,GACPqE,OAAQrE,GACRD,UAAS,aAAAhV,OAAeiV,GAAf,KAAAjV,OAA4CiV,GAA5C,QAGbpR,EAAAC,EAAAzJ,cAAA,KAAGC,GAAE,UACHuJ,EAAAC,EAAAzJ,cAAA,QACEsK,UAAW,SACX0U,MAAOpE,GACPqE,OAAQrE,GACRD,UAAS,aAAAhV,OAAeiV,GAAf,KAAAjV,OAA4CiV,GAA5C,OAEXpR,EAAAC,EAAAzJ,cAAA,QACEsK,UAAW,OACX0U,MAAOpE,GACPqE,OAAQrE,GACRD,UAAS,aAAAhV,OAAeiV,GAAf,KAAAjV,OAA4CiV,GAA5C,gBApESK,iBA4ExBiE,8MAWLC,MAAQ,CACNC,cAAergB,EAAKgJ,MAAM0G,MAC1B4Q,aAActgB,EAAKgJ,MAAM0G,SAG3B6Q,cAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGxe,IAAI,SAAAye,GAAC,OAAIC,IAAMC,gGAU3BC,EAAWC,EAAWC,GAAU,IAAAra,EAAAvG,KAC7CA,KAAK+I,MAAMwS,UAAYvb,KAAKmgB,MAAME,eAAiBrgB,KAAKmgB,MAAMC,eAChES,WAAW,WACTta,EAAK+Z,cACFtZ,OAAO,SAAC8Z,EAAcP,GAAf,OACLha,EAAK4Z,MAAMC,eAAiBG,GAAKA,GAAKha,EAAK4Z,MAAME,cAC9C9Z,EAAK4Z,MAAME,cAAgBE,GAAKA,GAAKha,EAAK4Z,MAAMC,gBAErDpZ,OAAO,SAAA8Z,GAAY,OAAIA,EAAaC,UACpCjf,IAAI,SAAAgf,GAAY,OAAIA,EAAaC,QAAQC,kBAC3C,oCAIC,IAAA1Z,EAAAtH,KAAAkJ,EAIFlJ,KAAK+I,MAFRgF,EAFK7E,EAEL6E,EAAGD,EAFE5E,EAEF4E,EAAGpI,EAFDwD,EAECxD,UAAWqU,EAFZ7Q,EAEY6Q,SAAUtK,EAFtBvG,EAEsBuG,MAAOJ,EAF7BnG,EAE6BmG,OAAQ+L,EAFrClS,EAEqCkS,QAASG,EAF9CrS,EAE8CqS,SAAU0F,EAFxD/X,EAEwD+X,aAFxDC,EAAAhY,EAGJjE,MAHIkc,EAAAD,EAGIhc,cAHJ,IAAAic,EAGa,OAHbA,EAAAC,EAAAF,EAGqB9b,sBAHrB,IAAAgc,KAG4C7b,EAH5C2b,EAG4C3b,QAH5C8b,EAK+BrhB,KAAKmgB,MAApCC,EALAiB,EAKAjB,cAAeC,EALfgB,EAKehB,aAChBiB,GAAqBL,EAAaha,SAASkF,EAAKqB,WAAayT,EAAaha,SAASkF,EAAK0D,UACxF0R,GAAqBD,EAC3B,OACE9W,EAAAC,EAAAzJ,cAAA,KAAG2a,UAAS,aAAAhV,OAAmB,IAAJoH,EAAf,KAAApH,OAA8B,IAAJmH,EAA1B,MACTtD,EAAAC,EAAAzJ,cAAA,OACEkc,UAAS,eACT5R,UAAWiP,IAAW,CAAC7U,YAAWqU,aAClCqB,QAASA,IAEX5Q,EAAAC,EAAAzJ,cAAA,KAAGsK,UAAW,iBACXiQ,EAAY,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGzZ,IAAI,SAAAye,GAAC,OAChC/V,EAAAC,EAAAzJ,cAAA,OAAK6J,IAAK0V,EAAGrD,UAAS,GAAAvW,OAAKW,EAAK5C,YAAY8c,SAASjB,IAAMkB,QAASlB,GAAK9Q,EAAQ,EAAI,GACnFjF,EAAAC,EAAAzJ,cAAA,WACE0gB,IAAKpa,EAAKgZ,cAAcC,GACxBoB,cAAe,UACfC,cAAe,MACf1gB,KAAM,YACN0K,KAAMwU,EAAgBG,EAAI,EAAI,EAC9BxW,GAAIsW,EAAeE,EAAI,EAAI,EAC3BsB,IAAK,OACLC,YAAa,EACb1F,KAAM,cAGL,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGpV,OAAO,SAAAuZ,GAAC,OAAIA,GAAK9Q,IAAO3N,IAAI,SAAAye,GAAC,OAClD/V,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,CAAUZ,IAAK0V,GACb/V,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAS,GAAAvW,OAAKW,EAAK5C,YAAY8c,SAASjB,MAC5ClR,IAAWlD,EAAKqB,SAAWhD,EAAAC,EAAAzJ,cAAC+gB,GAAD,CAAOhG,MAAO7W,EAAQkY,OAAQ,QAASC,QAASjY,GAAkBkc,IAAwB,KACrHjS,IAAWlD,EAAK0D,SAAWrF,EAAAC,EAAAzJ,cAAC+gB,GAAD,CAAOhG,MAAO7W,EAAQkY,OAAQ,QAASC,QAASjY,GAAkBmc,IAAwB,QAGzHhc,EAAUiF,EAAAC,EAAAzJ,cAACghB,EAAD,CAAgBvS,MAAOA,EAAOvO,KAAMqE,IAAc,0DA3DtCwD,EAAOoX,GACpC,OAAIpX,EAAMwS,UAAYxS,EAAM0G,QAAU0Q,EAAM1Q,MACnC,CAAC2Q,cAAeD,EAAME,aAAcA,aAActX,EAAM0G,OAG1D,YAvBQwM,iBAAbiE,GACGJ,YAAcC,GADjBG,GAGEsB,SAAW,CACfS,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,WAyFPnC,GAAKnU,aAAe,CAClBwP,UAAU,GAGG2E,UCrLToC,4LAQK,IAAArM,EAC6FjW,KAAK0E,YAAlG6d,EADAtM,EACAsM,gBAAiBC,EADjBvM,EACiBuM,YAAaC,EAD9BxM,EAC8BwM,aAAcC,EAD5CzM,EAC4CyM,iBAAkBC,EAD9D1M,EAC8D0M,aAAcC,EAD5E3M,EAC4E2M,cAEnF,OACEpY,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAA,QACEC,GAAI,kBACJsd,EAAG,qOACH5C,UAAW,cAAAhV,OACIiV,GADJ,KAAAjV,OAC8BiV,GAD9B,cAAAjV,OFjBO,GEmBmB8b,EAF1B,KAAA9b,OFjBO,GEmB8D8b,EAFrE,kBAAA9b,QAGK4b,EAAgBxU,EAAI,EAAIyU,EAAYzU,EAHzC,KAAApH,QAG+C4b,EAAgBzU,EAAI,EAAI0U,EAAY1U,EAHnF,MAITX,KAAK,OAET3C,EAAAC,EAAAzJ,cAAA,QACEC,GAAI,mBACJsd,EAAG,yjBACH5C,UAAW,cAAAhV,OACIiV,GADJ,KAAAjV,OAC8BiV,GAD9B,cAAAjV,OF1BO,GE4BmBic,EAF1B,KAAAjc,OF1BO,GE4B+Dic,EAFtE,gCAAAjc,QAIK+b,EAAiB3U,EAAI,EAAI4U,EAAa5U,EAJ3C,KAAApH,QAIiD+b,EAAiB5U,EAAI,EAAI6U,EAAa7U,EAJvF,MAKTX,KAAK,OAET3C,EAAAC,EAAAzJ,cAAA,KAAGC,GAAI,oBACLuJ,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAW,mBAAoBZ,YFpCd,GEoCuDD,OAAQ,SACrF7R,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAW,mBAAoBd,KAAM,WAE5C5R,EAAAC,EAAAzJ,cAAA,KAAGC,GAAI,oBACLuJ,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAW,mBAAoBZ,YFxCd,GEwCuDD,OAAQ,SACrF7R,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAW,mBAAoBd,KAAM,WAE5C5R,EAAAC,EAAAzJ,cAAA,KAAGC,GAAI,qBACLuJ,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAW,oBAAqBZ,YF5Cf,GE4CwDD,OAAQ,SACtF7R,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAW,oBAAqBd,KAAM,WAE7C5R,EAAAC,EAAAzJ,cAAA,KAAGC,GAAI,qBACLuJ,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAW,oBAAqBZ,YFhDf,GEgDwDD,OAAQ,SACtF7R,EAAAC,EAAAzJ,cAAA,OAAKkc,UAAW,oBAAqBd,KAAM,mBA9CvBH,kBAAxBqG,GACGC,gBAAkB,CAACxU,EAAG,OAAQD,EAAG,QADpCwU,GAEGE,YAAc,CAACzU,GAAI,GAAID,GAAI,IAF9BwU,GAGGG,aAAe,IAHlBH,GAIGI,iBAAmB,CAAC3U,EAAG,OAAQD,EAAG,QAJrCwU,GAKGK,aAAe,CAAC5U,EAAG,GAAID,GAAI,IAL9BwU,GAMGM,cAAgB,UA+CnBC,oLAgBK,IAAAC,EACyB9iB,KAAK0E,YAA9Bqe,EADAD,EACAC,QAASC,EADTF,EACSE,aADT9Z,EAEiClJ,KAAK+I,MAAtC6C,EAFA1C,EAEA0C,KAAM7B,EAFNb,EAEMa,GAAIqT,EAFVlU,EAEUkU,OAAQlc,EAFlBgI,EAEkBhI,KAAMgZ,EAFxBhR,EAEwBgR,MACzB+I,EAAO,CAAClV,EAAGhE,EAAGgE,EAAInC,EAAKmC,EAAGD,EAAG/D,EAAG+D,EAAIlC,EAAKkC,GACzCoV,EAAWljB,KAAK0E,YAAYye,YAAjB,GAAAxc,OAAgCsc,EAAKlV,EAArC,KAAApH,OAA0Csc,EAAKnV,IAC1DsV,EAAgBtT,KAAKuT,KAAKvT,KAAKiH,IAAIkM,EAAKlV,GAAK+B,KAAKiH,IAAIkM,EAAKnV,IAEjE,OACEtD,EAAAC,EAAAzJ,cAAA,OACEkc,UAAS,UAAAvW,OAAYzF,EAAZ,KAAAyF,OAAoByW,GAC7BzB,UAAW,cAAAhV,OFnFK,IEoFoBiF,EAAKmC,EAD9B,KAAApH,OFnFK,IEoFmDiF,EAAKkC,EAD7D,eAAAnH,OAECuc,EAFD,KAAAvc,OAEaiV,GAFb,KAAAjV,OAEuCiV,GAFvC,kBAAAjV,OAGIoc,EAHJ,KAAApc,OAGeiV,GAAyBwH,EAHxC,MAAAzc,OAAA1G,OAAA2G,EAAA,EAAA3G,CAILia,EAAQ,cAAAvT,OACGiV,GADH,KAAAjV,OAC6BiV,GAD7B,cAAAjV,OAEDqc,EAFC,kBAAArc,QAGG,GAHH,KAAAA,QAG8B,GAH9B,MAIR,KACJK,OAAO,SAAA2U,GAAS,OAAIA,IAAWxO,KAAK,cAnC1B8O,iBAAd4G,GACGxE,WAAaiE,GADhBO,GAEGE,QAAUnH,GAFbiH,GAGGG,aAAe,IAHlBH,GAKGM,YAAc,CACnBG,MAAO,EACPC,OAAQ,GACRC,OAAQ,GACRC,QAAS,IACTC,OAAQ,IACRC,QAAS,IACTC,OAAQ,GACRC,OAAQ,IAoCZhB,GAAM9W,aAAe,CACnBmO,OAAO,GAGM2I,UCnGTiB,oLACK,IAAA/jB,EAAAC,KAAAkJ,EAIHlJ,KAAK+I,MAFPuC,EAFKpC,EAELoC,UAAWwO,EAFN5Q,EAEM4Q,UAAWC,EAFjB7Q,EAEiB6Q,SAAUC,EAF3B9Q,EAE2B8Q,gBAAiBC,EAF5C/Q,EAE4C+Q,eAAgBC,EAF5DhR,EAE4DgR,MAAOC,EAFnEjR,EAEmEiR,OAAQrF,EAF3E5L,EAE2E4L,SAAUsF,EAFrFlR,EAEqFkR,SAAUC,EAF/FnR,EAE+FmR,SACpG4G,EAHK/X,EAGL+X,aAAcze,EAHT0G,EAGS1G,SAAU4J,EAHnBlD,EAGmBkD,eAAgB2X,EAHnC7a,EAGmC6a,eAAgBxI,EAHnDrS,EAGmDqS,SAAUyI,EAH7D9a,EAG6D8a,WAAYxc,EAHzE0B,EAGyE1B,KAAMlC,EAH/E4D,EAG+E5D,OAE/EL,EAASzC,EAATyC,MAEPqG,EAAYiP,IAAW,QAAS,YAAV,eAAA5T,OAAsC1B,EAAME,QAAU,WAAa,CACvFqV,cAAeN,EACfO,eAAgBN,EAChBO,WAAY5F,IAAagF,GAAaC,GACtCY,aAAcP,EACdC,YACC/O,GACH,IAAM2Y,EAAW7X,EAAetG,OAC1Boe,EAAapU,KAAKC,IAALC,MAAAF,KAAI7P,OAAA2G,EAAA,EAAA3G,CAAQmM,EAAetK,IAAI,SAAAmN,GAAG,OAAIA,EAAIC,MAAMpJ,YAAY,EAE/E,OACE0E,EAAAC,EAAAzJ,cAAA,OACEsK,UAAWA,EACX6Y,QAAO,OAAAxd,OHhCS,IGgCqBud,EAA9B,KAAAvd,OHhCS,IGgCyDsd,GACzElI,MAAO,CAACqI,iBAAkBF,EAAaG,cAAeJ,GACtDK,oBAAqB,gBACrBlJ,QAAShB,GAET5P,EAAAC,EAAAzJ,cAAA,KAAGujB,WAAU,QACVnY,EAAetK,IAAI,SAAAmN,GAAG,OACrBzE,EAAAC,EAAAzJ,cAAA,KAAGujB,WAAA,OAAA5d,OAAiBsI,EAAInB,GAAKjD,IAAG,OAAAlE,OAASsI,EAAInB,IAC1CmB,EAAIC,MAAMpN,IAAI,SAAAqN,GAAI,OACjB3E,EAAAC,EAAAzJ,cAACwjB,GAAD,CACE3Z,IAAG,GAAAlE,OAAKwI,EAAKpB,EAAV,KAAApH,OAAewI,EAAKrB,GACvBqB,KAAMA,EACN2K,UAAWA,GAAcC,GAAYE,EAAe9K,GACpDzJ,UAAWsU,EAAgB7K,GAC3B4K,SAAUE,EAAe9K,GACzB8R,aAAcA,EACdze,SAAUA,EACVsS,SAAU/U,EAAKgJ,MAAM+L,SACrBwG,KAAMvb,EAAKgJ,MAAMuS,KACjBrW,MAAOA,EACPsW,SAAUA,UAMnBA,EACC/Q,EAAAC,EAAAzJ,cAACyjB,GAAD,CAAgBrY,eAAgBA,EAAgBnH,MAAOA,EAAOgc,aAAcA,IAC1E,KACH+C,EACC1e,EACEA,EAAOxD,IAAI,SAAC4iB,EAAOrhB,GAAR,OACTmH,EAAAC,EAAAzJ,cAAC2jB,GAAD1kB,OAAA2K,OAAA,CAAOC,IAAKxH,GAAWqhB,MAGzBla,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAC4jB,GAAD,CAAuBpd,KAAMA,EAAMuc,eAAgBA,KAIrD,aA7DqB9H,iBAyFjC6H,GAAmB/X,aAAe,CAChCT,UAAW,GACX4O,OAAO,EACPC,QAAQ,EACRL,WAAW,EACXO,UAAU,EACV4G,aAAc,CAAC9U,EAAKqB,SAAUrB,EAAK0D,UACnC0L,UAAU,EACVyI,YAAY,OAGRa,oLAEF,OACEra,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAA,OAAKsK,UAAWiP,IAAW,QAAS,aAAcwB,MAAO,CAAC+I,QAAS,SACjEta,EAAAC,EAAAzJ,cAAA,YACEwJ,EAAAC,EAAAzJ,cAAC+jB,GAAKjF,YAAN,MACAtV,EAAAC,EAAAzJ,cAAC+gB,GAAMjC,YAAP,MACAtV,EAAAC,EAAAzJ,cAAC2jB,GAAMtG,WAAP,gBARgCpC,iBAe5C6H,GAAmBhE,YAAc+E,OAE3BG,4LACa,IACRjB,EAAkB/jB,KAAK+I,MAAvBgb,eADQkB,EAEmBjlB,KAAKklB,qBAAhC7V,EAFQ4V,EAER5V,OAAQ8V,EAFAF,EAEAE,gBACTC,EAAoBD,EACvBnW,KAAK,SAAAxH,GAAI,OAAI2E,EAAK+L,uBAAuBjR,SAASO,EAAKiG,gBACpD4X,EAAoBF,EACvBnW,KAAK,SAAAxH,GAAI,OAAIA,EAAKiG,eAAiBtB,EAAKqJ,gCAN5B8P,EAQO,CACpBtU,KAAMoU,EAAoB,CACxBxZ,KAAMwZ,EAAkB9Y,SAASC,SACjCxC,GAAIqb,EAAkB7Y,UACpB,KACJgZ,MAAOF,EAAoB,CACzBzZ,KAAMyZ,EAAkB/Y,SAASC,SACjCxC,GAAIsb,EAAkB9Y,UACrB,MAREyE,EARQsU,EAQRtU,KAAMuU,EARED,EAQFC,MAwBb,OAbIxB,IACE/S,IACFA,EAAKpF,KAAOmY,EAAeyB,mBAAmBJ,EAAkB9Y,SAASF,eAAgB4E,EAAKpF,MAC9FoF,EAAKjH,GAAKga,EAAeyB,mBAAmBJ,EAAkBhZ,eAAgB4E,EAAKjH,IACnFiH,EAAK9P,KAAO,QAEVqkB,IACFA,EAAM3Z,KAAOmY,EAAeyB,mBAAmBH,EAAkB/Y,SAASF,eAAgBmZ,EAAM3Z,MAChG2Z,EAAMxb,GAAKga,EAAeyB,mBAAmBH,EAAkBjZ,eAAgBmZ,EAAMxb,IACrFwb,EAAMrkB,KAAO,UAIV,CAACmO,SAAQ2B,OAAMuU,sDAStB,IANmB,IACZ/d,EAAQxH,KAAK+I,MAAbvB,KAED2d,EAAkB,CAAC3d,GACnB6H,EAAS7H,EAAK+F,WAChBkY,EAAgBje,EACbie,EAAcnZ,WACnBmZ,EAAgBA,EAAcnZ,UACZiB,aAAe8B,GAGjC8V,EAAgBpf,KAAK0f,GAGvB,MAAO,CAACpW,SAAQ8V,oDAKhB,IADenlB,KAAK+I,MAAbvB,KAEL,OAAO,KAHF,IAAAke,EAMuB1lB,KAAK2lB,iBAA5BtW,EANAqW,EAMArW,OAAQ2B,EANR0U,EAMQ1U,KAAMuU,EANdG,EAMcH,MACrB,IAAKvU,IAASuU,EACZ,OAAO,KAET,IAAMnI,EAAS/N,IAAWlD,EAAKqB,SAAW,QAAU,QAEhDoY,EAAY,KAAMC,EAAa,KAQnC,OAPI7U,IACF4U,EAAYpb,EAAAC,EAAAzJ,cAAC2jB,GAAD,CAAO9Z,IAAK,OAAQe,KAAMoF,EAAKpF,KAAM7B,GAAIiH,EAAKjH,GAAIqT,OAAQA,EAAQlc,KAAM,UAElFqkB,IACFM,EAAarb,EAAAC,EAAAzJ,cAAC2jB,GAAD,CAAO9Z,IAAK,QAASe,KAAM2Z,EAAM3Z,KAAM7B,GAAIwb,EAAMxb,GAAIqT,OAAQA,EAAQlc,KAAM,WAGnF,CAAC0kB,EAAWC,UAzEa5J,iBAiH9B6J,IA/BqC7J,iMAgChC,IAAAkC,EACuCne,KAAK+I,MAA5CqD,EADA+R,EACA/R,eAAgBnH,EADhBkZ,EACgBlZ,MAAOgc,EADvB9C,EACuB8C,aAExB/b,EAASjC,IAAEU,OAAOwI,EAAKwD,UAAUvD,EAAgB,SAAA+C,GAAI,OAAIA,EAAKE,SAAS,CAAC,SAAU,WAExF,OACE7E,EAAAC,EAAAzJ,cAAA,KAAGujB,WAAU,SAAUxI,MAAO,CAACgK,cAAe,SAC3C7gB,EAAOpD,IAAI,SAAAqN,GAAI,OACd3E,EAAAC,EAAAzJ,cAACglB,GAAD,CACEnb,IAAG,GAAAlE,OAAKwI,EAAKE,OAAV,KAAA1I,OAAoBwI,EAAKI,QAC5BJ,KAAMA,EACNlK,MAAOA,EACPgc,aAAcA,cAbGhF,kBA2BvBgK,8MACJ9F,MAAQ,CACN+F,iBAAkB,CAACnY,EAAGxH,EAAKwC,MAAMoG,KAAKpB,EAAGD,EAAGvH,EAAKwC,MAAMoG,KAAKrB,GAC5DqY,SAAU,CAACpY,EAAGxH,EAAKwC,MAAMoG,KAAKpB,EAAGD,EAAGvH,EAAKwC,MAAMoG,KAAKrB,MAGtDsY,iBAAmB5F,IAAMC,8FAUNC,EAAWC,EAAWC,GAAU,IAAAtZ,EAAAtH,KAC7CA,KAAKmgB,MAAMgG,WAAaxF,EAAUwF,UACpCtF,WAAW,WACLvZ,EAAK8e,iBAAiBrF,SACxBzZ,EAAK8e,iBAAiBrF,QAAQC,gBAE/B,oCAIE,IAAA/B,EAC6Bjf,KAAK+I,MAAlCoG,EADA8P,EACA9P,KAAMlK,EADNga,EACMha,MAAOgc,EADbhC,EACagC,aADbI,EAE8BrhB,KAAKmgB,MAAnC+F,EAFA7E,EAEA6E,iBAAkBC,EAFlB9E,EAEkB8E,SACpB7E,GAAqBL,EAAaha,SAASkF,EAAKqB,WAAayT,EAAaha,SAASkF,EAAK0D,UACxF0R,GAAqBD,EAC1B,OACE9W,EAAAC,EAAAzJ,cAAA,KAAG2a,UAAS,aAAAhV,OAA4B,IAAbwf,EAASpY,EAAxB,KAAApH,OAAgD,IAAbwf,EAASrY,EAA5C,MACVtD,EAAAC,EAAAzJ,cAAC+gB,GAAD,CACEhG,MAAO9W,EAAMC,QAAU,OACvBkY,OAAQjO,EAAKE,SAAWlD,EAAKqB,SAAW,QAAU,QAClD6P,QAASpY,EAAMG,iBAAmB+J,EAAKE,SAAWlD,EAAKqB,SAAW8T,EAAoBC,KAExF/W,EAAAC,EAAAzJ,cAAA,oBACE0gB,IAAK1hB,KAAKomB,iBACVzE,cAAe,YACfC,cAAe,MACf1gB,KAAM,YACN0K,KAAI,GAAAjF,OAA0B,IAArBuf,EAAiBnY,EAAtB,KAAApH,OAAsD,IAArBuf,EAAiBpY,GACtD/D,GAAE,GAAApD,OAAkB,IAAbwf,EAASpY,EAAd,KAAApH,OAAsC,IAAbwf,EAASrY,GACpC+T,IAAK,OACLC,YAAa,EACb1F,KAAM,+DAvCkBrT,EAAOoX,GACrC,OAAIpX,EAAMoG,KAAKpB,IAAMoS,EAAMgG,SAASpY,GAAKhF,EAAMoG,KAAKrB,IAAMqS,EAAMgG,SAASrY,EAChE,CAACoY,iBAAkB/F,EAAMgG,SAAUA,SAAU,CAACpY,EAAGhF,EAAMoG,KAAKpB,EAAGD,EAAG/E,EAAMoG,KAAKrB,IAG/E,YAbiBmO,iBA4DtBoK,8MACJvR,SAAW,WACL3M,EAAKY,MAAMrD,WAAayC,EAAKY,MAAM+L,SACrC3M,EAAKY,MAAM+L,SAAS3M,EAAKY,MAAMoG,MACtBhH,EAAKY,MAAMgR,UAAY5R,EAAKY,MAAMuS,MAC3CnT,EAAKY,MAAMuS,gFAIN,IAAAgL,EACiGtmB,KAAK+I,MAAxGoG,EADEmX,EACFnX,KAAM2K,EADJwM,EACIxM,UAAWpU,EADf4gB,EACe5gB,UAAWqU,EAD1BuM,EAC0BvM,SAAqB9U,EAD/CqhB,EACoC9jB,SAAWyC,MAAQ6P,EADvDwR,EACuDxR,SAAUwG,EADjEgL,EACiEhL,KAAMC,EADvE+K,EACuE/K,SAAU0F,EADjFqF,EACiFrF,aACxF,OACEzW,EAAAC,EAAAzJ,cAAC+jB,GAAD,CACEhX,EAAGoB,EAAKpB,EACRD,EAAGqB,EAAKrB,EACRpI,UAAWA,EACXqU,SAAUA,EACVtK,MAAON,EAAKM,MACZJ,OAAQF,EAAKE,OACb4R,aAAcA,EACd1F,SAAUA,EACVtW,MAAOA,EACPmW,SAAWtG,GAAYpP,GAAe4V,GAAQvB,IAAcD,EAAY9Z,KAAK8U,SAAW,cAtBrEmH,iBAwC3BoK,GAAata,aAAe,CAC1B+N,WAAW,EACXpU,WAAW,EACXqU,UAAU,EACVwB,UAAU,EACV0F,aAAc,CAAC9U,EAAKqB,SAAUrB,EAAK0D,WAGtBiU,ICtXAA,GDsXAA,GEhXTyC,mMACK,IAAArd,EAC4BlJ,KAAK+I,MADjCyd,EAAAtd,EACFud,gBADE,IAAAD,EACS,MADTA,EACmBzd,EADnB9I,OAAAymB,EAAA,EAAAzmB,CAAAiJ,EAAA,cAODyd,EAJY,CAChBC,KAAQ/M,EACRgN,IAAO/C,IAEkB2C,GAC3B,OAAOjc,EAAAC,EAAAzJ,cAAC2lB,EAAa5d,UATK+C,cAmC9Bya,GAAgBxa,aAAe,CAC7BT,UAAW,GACX4O,OAAO,EACPC,QAAQ,EACRL,WAAW,EACXO,UAAU,EACV4G,aAAc,CAAC9U,EAAKqB,SAAUrB,EAAK0D,UACnC0L,UAAU,EACVyI,YAAY,GAGCuC,UC/CTO,8MACJhS,SAAW,SAAC3F,GAAS,IAAAjG,EAC8BnJ,EAAKgJ,MAAxCqD,EADKlD,EACZ1B,KAAO4E,eAAiB2X,EADZ7a,EACY6a,eAC3BA,IACF5U,EAAO4U,EAAe1P,YAAYjI,EAAgB+C,IAEpDpP,EAAKgJ,MAAM+L,SAAS/U,EAAKgJ,MAAMvB,KAAKsN,SAAS,CAAC/G,EAAGoB,EAAKpB,EAAGD,EAAGqB,EAAKrB,QAGnEwN,KAAO,WACLvb,EAAKgJ,MAAM+L,SAAS/U,EAAKgJ,MAAMvB,KAAKmF,QAAU5M,EAAKgJ,MAAMvB,KAAK8T,OAASvb,EAAKgJ,MAAMvB,KAAKuf,mBAGzF3M,SAAW,WACTra,EAAKgJ,MAAMqR,SAASra,EAAKgJ,MAAMvB,SAGjCwS,gBAAkB,SAAA7K,GAAQ,IAAAjE,EACyBnL,EAAKgJ,MAAxCqD,EADUlB,EACjB1D,KAAO4E,eAAiB2X,EADP7Y,EACO6Y,eAI/B,OAHIA,IACF5U,EAAO4U,EAAe1P,YAAYjI,EAAgB+C,IAE7CpP,EAAKgJ,MAAMvB,KAAK+P,gBAAgBpI,MAGzC8K,eAAiB,SAAA9K,GAAQ,IAAAgP,EAC0Bpe,EAAKgJ,MAAxCqD,EADS+R,EAChB3W,KAAO4E,eAAiB2X,EADR5F,EACQ4F,eAI/B,GAHIA,IACF5U,EAAO4U,EAAe1P,YAAYjI,EAAgB+C,SAEnBjF,IAA7BnK,EAAKgJ,MAAMie,eAA4D,OAA7BjnB,EAAKgJ,MAAMie,cAAwB,CAC/E,GAAuC,IAAnCjnB,EAAKgJ,MAAMkY,aAAanb,OAC1B,OAAO,EAET,IAAK/F,EAAKgJ,MAAMvB,KAAKmF,QACnB,OAAO,OAGT,GAAI5M,EAAKgJ,MAAMvB,KAAKuF,YAAchN,EAAKgJ,MAAMie,cAC3C,OAAO,EAGX,IAAMza,EAAWxM,EAAKgJ,MAAMvB,KAAK+E,SACjC,QAAKA,IAGEA,EAASwB,IAAMoB,EAAKpB,GAAKxB,EAASuB,IAAMqB,EAAKrB,oFAIpD,QAAS9N,KAAK+I,MAAMvB,KAAK4H,SAASpP,KAAKia,iDAGhC,IAAAgF,EACoEjf,KAAK+I,MAAzEvB,EADAyX,EACAzX,KAAMuc,EADN9E,EACM8E,eAAgB9C,EADtBhC,EACsBgC,aAAc7G,EADpC6E,EACoC7E,SAAUtF,EAD9CmK,EAC8CnK,SAAUyG,EADxD0D,EACwD1D,SAC3DnP,EAAiB5E,EAAK4E,eAK1B,OAJI2X,IACF3X,EAAiB2X,EAAe3X,IAIhC5B,EAAAC,EAAAzJ,cAACimB,GAADhnB,OAAA2K,OAAA,GACM5K,KAAK+I,MADX,CAEEiR,gBAAiBuB,EAAWvb,KAAKga,gBAAkB,kBAAM,GACzDC,eAAgBsB,EAAWvb,KAAKia,eAAiB,kBAAM,GACvDH,UAAWmH,EAAaha,SAASO,EAAK4F,YACtC2M,WAAUwB,GAAWvb,KAAKknB,iBAC1B9M,SAAUA,EAAWpa,KAAKoa,SAAW,KACrCtF,SAAUA,EAAW9U,KAAK8U,SAAW,KACrCwG,KAAMxG,EAAW9U,KAAKsb,KAAO,KAC7BlP,eAAgBA,EAChB2X,eAAgBA,EAChBvc,KAAMA,EACN+T,SAAUA,YAzEEU,iBA8FpB6K,GAAM/a,aAAe,CACnBT,UAAW,GACX4O,OAAO,EACPC,QAAQ,EACRE,UAAU,EACV4G,aAAc,CAAC9U,EAAKqB,SAAUrB,EAAK0D,UACnC0L,UAAU,OAGN4L,8MACJhH,MAAQ,CACNiH,UAAW,EACXC,qBAAqB,KA4FtBC,kBAAoB,SAAAC,GAClBhhB,EAAKihB,SAASD,EAAQ,WACpB,GAAIhhB,EAAKwC,MAAM0e,SAAU,KAAAC,EACkBnhB,EAAK4Z,MAAvCiH,EADgBM,EAChBN,UAAWC,EADKK,EACLL,oBACZtD,EAAiBxd,EAAK7B,YAAYijB,kBAAjB,GAAAhhB,OAAsCygB,EAAtC,KAAAzgB,OAAmD0gB,IAC1E9gB,EAAKwC,MAAM0e,SAAS,CAACL,YAAWC,sBAAqBtD,yBAK5D6D,uBAAyB,WACvBrhB,EAAK+gB,kBAAkB,SAAAnH,GAAK,MAAK,CAC/BiH,WAAYjH,EAAMiH,UAAY,GAAK,QAIvCS,gBAAkB,WAChBthB,EAAK+gB,kBAAkB,SAAAnH,GAAK,MAAK,CAC/BiH,WAAYjH,EAAMiH,UAAY,GAAK,QAIvCU,iBAAmB,WACjBvhB,EAAK+gB,kBAAkB,SAAAnH,GAAK,MAAK,CAC/BkH,qBAAsBlH,EAAMkH,0BAIhCU,eAAiB,WACfxhB,EAAK+gB,kBAAkB,SAAAnH,GAAK,MAAK,CAC/BiH,WAAYjH,EAAMiH,UAAY,GAAK,EACnCC,qBAAsBlH,EAAMkH,0BAIhCW,MAAQ,WACNzhB,EAAK+gB,kBAAkB,SAAAnH,GAAK,MAAK,CAC/BiH,UAAW,EACXC,qBAAqB,8EAIhB,IAAAhG,EACkCrhB,KAAKmgB,MAAvCiH,EADA/F,EACA+F,UAAWC,EADXhG,EACWgG,oBAElB,OACE7c,EAAAC,EAAAzJ,cAAC0J,EAAA,EAAD,CAAMud,KAAM,UAAWC,MAAO,CAC5B,CAACrd,IAAK,2BAA4BG,KAAM,OAAQoQ,QAASpb,KAAK4nB,wBAC9D,CAAC/c,IAAK,mBAAoBG,KAAM,OAAQoQ,QAASpb,KAAK6nB,iBACtD,CAAChd,IAAK,kBAAmBG,KAAM,8BAA+BoQ,QAASpb,KAAK8nB,kBAC5E,CAACjd,IAAK,gBAAiBG,KAAM,4BAA6BoQ,QAASpb,KAAK+nB,gBACxE,CAACld,IAAK,OAAQG,KAAM,OAAQoQ,QAASpb,KAAKgoB,MAAOG,UAAWf,IAAcC,4DA/H7Ce,GAAQ,IAAA9gB,EAAAtH,KACnCqoB,EAA0B,SAAAjc,GAC9B,OAAO9E,EAAK+gB,wBAAwBjc,EAAgBgc,IAEtDC,EAAwBhU,YAAc,SAACjI,EAAgBiI,GACrD,OAAO/M,EAAKghB,4BAA4Blc,EAAgBiI,EAAa+T,IAGvE,IAAMG,EAAUH,EAAOI,UAAYJ,EAAOK,MAAQL,EAAOM,MACnDC,EAAgBP,EAAOI,YAAcD,EAAU,CACnDC,UAAWJ,EAAOI,UAClBC,OAAQL,EAAOK,MACfC,OAAQN,EAAOM,OACbN,EAKJ,OAJAC,EAAwB7C,mBAAqB,SAACpZ,EAAgBiI,GAC5D,OAAO/M,EAAKghB,4BAA4Blc,EAAgBiI,EAAasU,IAGhEN,kDAGsBjc,EAAgBgc,GAAQ,IAAAjgB,EAAAnI,KAAA4oB,EACjB5oB,KAAK6oB,wBAAwBzc,EAAgBgc,GAA5EU,EADgDF,EAChDE,YAAaC,EADmCH,EACnCG,eACZC,EAAQ/lB,IAAEgmB,MAAMF,GAGtB,OAFc9lB,IAAEgmB,MAAMH,GAEThnB,IAAI,SAAAonB,GAAI,MAAK,CACxBpb,EAAGob,EACHha,MAAO8Z,EAAMlnB,IAAI,SAAAqnB,GAAQ,IAAAC,EACJjhB,EAAKkhB,kBAAmB,CAACF,OAAMD,QAAO,CAACJ,cAAaC,kBAAiBX,GAAnFkB,EADkBF,EAClBE,KAAMC,EADYH,EACZG,KACX,OAAOtpB,OAAAsK,EAAA,EAAAtK,CAAA,GACJmM,EAAemd,GAAMra,MAAMoa,GAD9B,CAEEvb,EAAGob,EAAMrb,EAAGob,6DAMe9c,EAAgBiI,EAAa+T,GAAQ,IAAAoB,EAClCxpB,KAAK6oB,wBAAwBzc,EAAgBgc,GAA5EU,EADiEU,EACjEV,YAAaC,EADoDS,EACpDT,eACRI,EAAiB9U,EAApBtG,EAAYmb,EAAQ7U,EAAXvG,EAFsD2b,EAGjDzpB,KAAKqpB,kBAAmB,CAACF,OAAMD,QAAO,CAACJ,cAAaC,kBAAiBX,GAE1F,MAAO,CAACra,EAL8D0b,EAG/DH,KAEUxb,EALqD2b,EAGzDF,sDAKgBnd,EAAgBgc,GAC7C,IAGIU,EAAaC,EAHX9E,EAAW7X,EAAetG,OAC1Boe,EAAcpU,KAAKC,IAALC,MAAAF,KAAI7P,OAAA2G,EAAA,EAAA3G,CAAQmM,EAAetK,IAAI,SAAAmN,GAAG,OAAIA,EAAIC,MAAMpJ,YAAY,EAQhF,OAPoBsiB,EAAbI,WAGJO,EAAgC9E,EAAhB6E,EAA0B5E,IAE1C6E,EAAgC7E,EAAhB4E,EAA6B7E,GAEzC,CAAC6E,cAAaC,gEAG+CX,GAAQ,IAExEkB,EAAMC,EAFcJ,EAAoDxf,EAApDwf,KAAMD,EAA8Cvf,EAA9Cuf,KAAQH,EAAsChV,EAAtCgV,eAAgBD,EAAsB/U,EAAtB+U,YActD,OAbkCV,EAA3BI,WAGJc,EAAeJ,EAATK,EAAeJ,IAErBG,EAAeH,EAATI,EAAeL,GALUd,EAAhBK,QAQhBa,EAAOP,EAAiB,EAAIO,GARIlB,EAATM,QAWvBa,EAAOT,EAAc,EAAIS,GAEpB,CAACD,OAAMC,eA5FgBtN,iBAA5BkL,GAOGQ,kBAAoB,CACzB+B,UAAW,KAEXC,UAVExC,GAUcyC,4BAA4B,CAACpB,WAAW,EAAMC,OAAO,EAAOC,OAAO,IACnFmB,UAXE1C,GAWcyC,4BAA4B,CAACpB,WAAW,EAAOC,OAAO,EAAMC,OAAO,IACnFoB,UAZE3C,GAYcyC,4BAA4B,CAACpB,WAAW,EAAMC,OAAO,EAAMC,OAAO,IAClFqB,SAbE5C,GAaayC,4BAA4B,CAACpB,WAAW,EAAOC,OAAO,EAAMC,OAAO,IAClFsB,SAdE7C,GAcayC,4BAA4B,CAACpB,WAAW,EAAMC,OAAO,EAAMC,OAAO,IACjFuB,SAfE9C,GAeayC,4BAA4B,CAACpB,WAAW,EAAOC,OAAO,EAAOC,OAAO,IACnFwB,SAhBE/C,GAgBayC,4BAA4B,CAACpB,WAAW,EAAMC,OAAO,EAAOC,OAAO,KAgJvE5B,UCzQTqD,8MAkCJhK,MAAQ,CACN/T,eAAgBrM,EAAK2E,YAAY0lB,sBAGnCpQ,gBAAkB,WAChB,OAAO,KAGTC,eAAiB,WACf,OAAO,KAGToQ,QAAU,WACRtqB,EAAKynB,SAAS,SAAArH,GAAK,MAAK,CACtB/T,eAAgB+T,EAAM/T,iBAAmBrM,EAAK2E,YAAY0lB,mBACtDrqB,EAAK2E,YAAY4lB,2BACjBvqB,EAAK2E,YAAY0lB,yBAGzBG,kBAAoBxqB,EAAKgJ,MAAMvG,SAASyC,MAAMI,WAAaP,YAAY/E,EAAKsqB,QAAS,KAAQ,uFAE1E3J,EAAWC,EAAWC,GACnC5gB,KAAK+I,MAAMvG,SAASyC,MAAMI,aAAeqb,EAAUle,SAASyC,MAAMI,aAChErF,KAAK+I,MAAMvG,SAASyC,MAAMI,WACvBrF,KAAKuqB,oBACRvqB,KAAKuqB,kBAAoBzlB,YAAY9E,KAAKqqB,QAAS,MAGjDrqB,KAAKuqB,oBACP/pB,cAAcR,KAAKuqB,mBACnBvqB,KAAKuqB,kBAAoB,sDAO3BvqB,KAAKuqB,oBACP/pB,cAAcR,KAAKuqB,mBACnBvqB,KAAKuqB,kBAAoB,uCAIpB,IAAArhB,EAC2BlJ,KAAK+I,MAAhCmR,EADAhR,EACAgR,MAAOC,EADPjR,EACOiR,OAAQ3X,EADf0G,EACe1G,SACf4J,EAAkBpM,KAAKmgB,MAAvB/T,eAEP,OACE5B,EAAAC,EAAAzJ,cAACimB,GAAD,CACE/M,MAAOA,EACPC,OAAQA,EACR8G,aAAc,CAAC9U,EAAKqB,SAAUrB,EAAK0D,UACnCzD,eAAgBA,EAChB2N,UAAU,EACVC,gBAAiBha,KAAKga,gBACtBC,eAAgBja,KAAKia,eACrB3U,OAAQ9C,EAASyC,MAAMK,OAAStF,KAAK0E,YAAYY,YAAS4E,EAC1D1H,SAAUA,EACV+Y,SAAU/Y,EAASyC,MAAMI,WACzB2e,WAAYxhB,EAASyC,MAAMK,gBA7FNwG,aAAvBqe,GACGC,mBAAqB,CAC1B,CACEtc,EAAG,EACHoB,MAAO,CACL,CAACnB,EAAG,EAAGD,EAAG,EAAGuB,OAAQ,KAAME,OAAQ,KAAME,MAAO,GAChD,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQ,KAAME,OAAQ,KAAME,MAAO,GAChD,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQ,KAAME,OAAQ,KAAME,MAAO,GAChD,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQ,KAAME,OAAQ,KAAME,MAAO,GAChD,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQ,KAAME,OAAQ,KAAME,MAAO,GAChD,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,aAAcd,MAAO,GACtE,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,aAAcd,MAAO,MAXxE0a,GAeGG,2BAA6B,CAClC,CACExc,EAAG,EACHoB,MAAO,CACL,CAACnB,EAAG,EAAGD,EAAG,EAAGuB,OAAQ,KAAME,OAAQ,KAAME,MAAO,GAChD,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQ,KAAME,OAAQ,KAAME,MAAO,GAChD,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQ,KAAME,OAAQ,KAAME,MAAO,GAChD,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQ,KAAME,OAAQ,KAAME,MAAO,GAChD,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,aAAcd,MAAO,GACtE,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQ,KAAME,OAAQ,KAAME,MAAO,GAChD,CAAC1B,EAAG,EAAGD,EAAG,EAAGuB,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,aAAcd,MAAO,MAzBxE0a,GA6BG7kB,OAAS,CACd,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAIsP,OAAQ,QAASlc,KAAM,SAC9D,CAAC0K,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAIsP,OAAQ,QAASlc,KAAM,SA2ElEipB,GAAepe,aAAe,CAC5BT,UAAW,GACX4O,OAAO,EACPC,QAAQ,GAGKgQ,aC9GArD,8FCFT0D,8MAoBJxQ,gBAAkB,WAChB,OAAO,KAGTC,eAAiB,WACf,OAAO,2EAGA,IAAA/Q,EACiDlJ,KAAK+I,MAAtDmR,EADAhR,EACAgR,MAAOC,EADPjR,EACOiR,OAAQ9K,EADfnG,EACemG,OAAQ7M,EADvB0G,EACuB1G,SAAUye,EADjC/X,EACiC+X,aAExC,OACEzW,EAAAC,EAAAzJ,cAACimB,GAAD,CACE/M,MAAOA,EACPC,OAAQA,EACR/N,eAAgBpM,KAAK0E,YAAY+lB,QAAQpb,GACzC0K,UAAU,EACVC,gBAAiBha,KAAKga,gBACtBC,eAAgBja,KAAKia,eACrBzX,SAAUA,EACVye,aAAcA,WAxCUnV,aAA1B0e,GACGC,8BACJte,EAAKqB,SAAW,CACf,CACEM,EAAG,EACHoB,MAAO,CACL,CAACnB,EAAG,EAAGD,EAAG,EAAGuB,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,aAAcd,MAAO,sBAI3EtD,EAAK0D,SAAW,CACf,CACE/B,EAAG,EACHoB,MAAO,CACL,CAACnB,EAAG,EAAGD,EAAG,EAAGuB,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,aAAcd,MAAO,WAwChF+a,GAAkBze,aAAe,CAC/BmO,OAAO,EACPC,QAAQ,GAGKqQ,mBC1CTE,8MAUJvK,MAAQ,CACNwK,aAAc,KACdnjB,KAAMzH,EAAKgJ,MAAMvB,KACjBuc,eAAgB,QAGlB6G,gBAAkBpK,IAAMC,cAExB3L,SAAW,SAAAtN,GACLzH,EAAKgJ,MAAM8hB,OACb9qB,EAAKynB,SAAS,CAAChgB,SAEfzH,EAAKgJ,MAAM+L,SAAStN,GAElBzH,EAAKgJ,MAAM+hB,yBACb/qB,EAAKgJ,MAAM+hB,wBAAwBtjB,MAIvCuf,aAAe,WACbhnB,EAAK+U,SAAS/U,EAAKogB,MAAM3Y,KAAKuf,mBAGhCzL,KAAO,WACLvb,EAAK+U,SAAS/U,EAAKogB,MAAM3Y,KAAK8T,WAGhCyP,QAAU,WACRhrB,EAAK+U,SAAS3I,EAAK2C,aAGrBkc,WAAa,SAAAxjB,GACX,IAAMmjB,EAAenjB,IAASzH,EAAKogB,MAAM3Y,KAAO,KAAOA,EACvDzH,EAAKynB,SAAS,CAACmD,iBACX5qB,EAAKgJ,MAAMkiB,sBACblrB,EAAKgJ,MAAMkiB,qBAAqBN,MAIpCO,mBAAqB,SAAA1jB,GACnBzH,EAAKirB,WAAWxjB,MAGlB2jB,uBAAyB,WACvBprB,EAAKirB,WAAWjrB,EAAKogB,MAAMwK,aAAa5D,mBAG1CqE,eAAiB,WACfrrB,EAAKirB,WAAWjrB,EAAKogB,MAAMwK,aAAarP,WAG1C+P,aAAe,WACbtrB,EAAKirB,WAAW,SAGlBH,OAAS,WACP,IAAM7iB,EAAQjI,EAAKurB,mBACftjB,EAAMlC,QACR/F,EAAKgJ,MAAM8hB,OAAO7iB,EAAOjI,EAAKogB,MAAM3Y,SAoBxC+jB,cAAgB,WACdxrB,EAAKgJ,MAAM8hB,OAAO,aAuBpBW,sBAAwB,WACjBzrB,EAAKgJ,MAAM3G,KAAKI,SAASuC,gBAG5BhF,EAAKgJ,MAAM0iB,eAAXxrB,OAAAsK,EAAA,EAAAtK,CAAA,GAA8BF,EAAKgJ,MAAM3G,KAAKI,SAA9C,CAAwDuC,iBAAiB,KAFzEhF,EAAK6qB,gBAAgB7J,QAAQ2K,gBAMjCC,kBAAoB,WAClB5rB,EAAKgJ,MAAM0iB,eAAXxrB,OAAAsK,EAAA,EAAAtK,CAAA,GAA8BF,EAAKgJ,MAAM3G,KAAKI,SAA9C,CAAwDuC,iBAAiB,KACrEhF,EAAK6rB,aACP7rB,EAAK8qB,YAmBTgB,uBAAyB,SAAAliB,GAAsB,IAApBoa,EAAoBpa,EAApBoa,eACzBhkB,EAAKynB,SAAS,CAACzD,sGAvEE,IACJ+H,EAAa9rB,KAAK+I,MAAxBvB,KAEDkF,EADoB1M,KAAKmgB,MAAxB3Y,KACmBqF,YACpBkf,EAAiBrf,EAAQjG,UAC7B,SAAAe,GAAI,OAAIA,EAAKyG,yBAA2B6d,EAAU7d,yBACpD,OAAI8d,EAAiB,GACnBrrB,QAAQsrB,MAAM,uCACP,IAEUtf,EAAQhG,MAAMqlB,EAAiB,GACzBjqB,IAAI,SAAA0F,GAAI,OAAIA,EAAK+E,sDASzBmU,EAAWC,GACxB3gB,KAAK+I,MAAMvB,OAASkZ,EAAUlZ,SAE7BxH,KAAK+I,MAAMvB,OACRkZ,EAAUlZ,MACXxH,KAAK+I,MAAMvB,KAAKyG,yBAA2ByS,EAAUlZ,KAAKyG,wBAC1DjO,KAAK+I,MAAMvB,KAAK6G,mBAAqBqS,EAAUlZ,KAAK6G,oBAGvDrO,KAAKgrB,WAAW,MAChBhrB,KAAKwnB,SAAS,CAAChgB,KAAMxH,KAAK+I,MAAMvB,KAAMykB,WAAW,MAGjDjsB,KAAK+I,MAAM3G,MAAQpC,KAAK+I,MAAM3G,KAAKI,SAASuC,kBACzC/E,KAAK4rB,UAAUlL,EAAWC,IAAc3gB,KAAK4rB,aAChD5rB,KAAK6qB,6CAoBuC,IAAxC9hB,EAAwC2O,UAAA5R,OAAA,QAAAoE,IAAAwN,UAAA,GAAAA,UAAA,GAAhC1X,KAAK+I,MAAOoX,EAAoBzI,UAAA5R,OAAA,QAAAoE,IAAAwN,UAAA,GAAAA,UAAA,GAAZ1X,KAAKmgB,MAClC0K,EAAU9hB,EAAV8hB,OACAF,EAAsBxK,EAAtBwK,aAAcnjB,EAAQ2Y,EAAR3Y,KACrB,QACIqjB,IACEF,GACDnjB,IAASuB,EAAMvB,QACbxH,KAAKsrB,mBAAmBxlB,SAE3B0B,EAAKC,UACFD,EAAK4F,aAAerE,EAAMvB,KAAK4F,6CAS/B,IAAAlE,EAGHlJ,KAAK+I,MADP3G,EAFK8G,EAEL9G,KAAM8pB,EAFDhjB,EAECgjB,gBAAiBC,EAFlBjjB,EAEkBijB,MAAOlL,EAFzB/X,EAEyB+X,aAAcmL,EAFvCljB,EAEuCkjB,UAAWC,EAFlDnjB,EAEkDmjB,SAFlDhL,EAIsCrhB,KAAKmgB,MAA3CwK,EAJAtJ,EAIAsJ,aAAcnjB,EAJd6Z,EAIc7Z,KAAMuc,EAJpB1C,EAIoB0C,eACrBuI,EAAc3B,GAAgBnjB,EAC9B+kB,EAAWtL,EAAanb,OAAS,EACjC8lB,EAAY5rB,KAAK4rB,YACjBY,IAAmBJ,GAAYA,EAAUI,iBACzChqB,EAAWJ,EAAOA,EAAKI,SAAW0pB,EACnC3K,EAAoBN,EAAaha,SAASkF,EAAKqB,UAE/Cif,EACJjiB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACGjB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC4rB,GAAD,CACEvd,OAAQkS,EAAoBpV,EAAK0D,SAAW1D,EAAKqB,SACjDoe,WAAW,EACXf,OAAQ7qB,KAAK+I,MAAM8hB,OAAS7qB,KAAK6qB,OAAS,KAC1CW,sBAAuBxrB,KAAKwrB,sBAC5BhkB,KAAMokB,EAAYpkB,EAAK8E,SAAW9E,EAClChF,SAAUA,EACV2pB,MAAOA,EACPlL,aAAcA,KAGlBzW,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC4rB,GAAD,CACEvd,OAAQkS,EAAoBpV,EAAKqB,SAAWrB,EAAK0D,SACjD+b,UAAWA,EACXf,OAAQ7qB,KAAK+I,MAAM8hB,OAAS7qB,KAAK6qB,OAAS,KAC1CW,sBAAuBxrB,KAAKwrB,sBAC5BhkB,KAAMokB,EAAYpkB,EAAK8E,SAAW9E,EAClChF,SAAUA,EACV2pB,MAAOA,EACPlL,aAAcA,KAGlBzW,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC6rB,GAAD,CAAgBrlB,KAAMA,EAAMmjB,aAAcA,EAAcK,WAAYhrB,KAAKgrB,cAE3ExgB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC8rB,GAAD,CAAqBrF,SAAUznB,KAAK6rB,0BAErCQ,GAGAU,EACHviB,EAAAC,EAAAzJ,cAACgsB,GAAD,CACExlB,KAAM8kB,EACNvI,eAAgBA,EAChBjP,SAAU6V,EAAe3qB,KAAKkrB,mBAAqBlrB,KAAK8U,SACxDkS,cAAehnB,KAAK+I,MAAM8hB,OAAS7qB,KAAK+I,MAAMvB,KAAKuF,WACjD/M,KAAK+I,MAAMvB,KAAKmF,QAAU3M,KAAK+I,MAAMvB,KAAK8E,SAASS,WAAa/M,KAAK+I,MAAMvB,KAAKuF,WAElFkU,aAAcqL,IAAgB9kB,EAAOyZ,OAAe/W,EACpD1H,SAAUA,EACV+Y,SAAU/Y,EAASyC,MAAMI,WACzB2e,WAAYxhB,EAASyC,MAAMK,SAI/B,OACEkF,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,CAASlR,MAAO,CAACmR,UAAW,WAC1B1iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMS,UAAQ,EAACC,QAAS,QAASF,UAAW,UAC1C1iB,EAAAC,EAAAzJ,cAACqsB,GAAA,EAAD,CAAYviB,GAAI4hB,KAAKC,IAAKW,SAAU,KAClC9iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,KAAcd,GACdjiB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,KAAcR,IAEhBviB,EAAAC,EAAAzJ,cAACqsB,GAAA,EAAD,CAAYviB,GAAI0iB,WAAUC,SAAU,KAClCjjB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAaG,WAAW,EAAOR,UAAW,UACvCH,IAGLviB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAaG,WAAW,EAAOR,UAAW,UACvCT,OAMVzsB,KAAK+I,MAAM8hB,QAAU0B,EACpB/hB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAUC,MAAX,CAAiBC,OAAQ,MAAO5F,KAAM,QACpCzd,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CAAWrb,MACT9H,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACEC,QAASvjB,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQC,UAAQ,EAAC9F,WAAYwC,GAAgB3qB,KAAK+I,MAAMvB,KAAKC,UAAW+kB,EAAmB,QAAU,UAC9G0B,OAAQ1B,EAAmB,SAAW,UACtCliB,QAAO,4BAAA3D,OAA8B6lB,EAAmB,QAAU,UAA3D,KAAA7lB,OAAwE6lB,EAAmB,qCAAuC,IACzI2B,QAAS,CAAC,CAACtjB,IAAK,SAAUP,QAASkiB,EAAmB,QAAU,SAAUyB,UAAU,EAAM7S,QAASpb,KAAKurB,eAAgB,CAAE1gB,IAAK,WAAYP,QAAS,WAAY8jB,UAAU,EAAMC,WAAW,QAG/L7jB,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CAAWrb,MAAO9H,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQC,UAAQ,EAAC7S,QAASpb,KAAK+I,MAAM8hB,OAAS7qB,KAAK+mB,aAAe/mB,KAAKsb,KAAM6M,WAAYwC,IAAiB3qB,KAAK+I,MAAM8hB,OAASrjB,EAAKuF,YAAc/M,KAAK+I,MAAMvB,KAAKuF,YAAcvF,EAAKmF,UAApL,YAGpB,KACF3M,KAAK+I,MAAM8hB,OAOT,KANFrgB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAUC,MAAX,CAAiBC,OAAQ,MAAO5F,KAAM,SACpCzd,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CAAWrb,MAAO9H,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQC,UAAQ,EAAC7S,QAASpb,KAAK+mB,aAAcoB,WAAYwC,IAAiBnjB,EAAK8E,UAA/E,sBAClB9B,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CAAWrb,MAAO9H,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQC,UAAQ,EAAC7S,QAASpb,KAAK+qB,QAAS5C,WAAYwC,IAAiBnjB,EAAK8E,UAA1E,gBAIxB9B,EAAAC,EAAAzJ,cAACstB,GAAD,CACE9mB,KAAMA,EACNmjB,aAAcA,EACdK,WAAYhrB,KAAKgrB,WACjB5oB,KAAMA,EACN8pB,gBAAiBA,IAElBvB,EACCngB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,CAASC,UAAW,UAClB1iB,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,CAAQzjB,GAAI,MAAZ,2BACAN,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAUC,MAAX,CAAiBC,OAAQ,QAAS5F,KAAM,SACrC0C,EAAaljB,SACZ+C,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CAAWa,MAAO,QAASlc,MAAO6Z,EAAMxB,EAAapc,QAASkgB,MAAO,SAErEjkB,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CAAWrb,MAAO6Z,EAAMxB,EAAavd,YAAaqhB,MAAOzuB,KAAK0E,YAAYgqB,gBAAgB/D,EAAatd,YAEzG7C,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CAAWrb,MAAOqY,EAAa7d,UAAW2hB,MAAO,SACjDjkB,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CAAWrb,MAAO9H,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQC,UAAQ,EAAC7S,QAASpb,KAAKorB,eAAgBjD,UAAWwC,EAAahe,SAAvE,WAEpBnC,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAUC,MAAX,CAAiBC,OAAQ,MAAO5F,KAAM,SACpCzd,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CAAWrb,MAAO9H,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQC,UAAQ,EAAC7S,QAASpb,KAAKmrB,uBAAwBhD,UAAWwC,EAAare,UAA/E,sBAClB9B,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CAAWrb,MAAO9H,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQC,UAAQ,EAAC7S,QAASpb,KAAKqrB,cAA/B,sBAGpB,KACJ7gB,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACEpM,IAAK1hB,KAAK4qB,gBACVsD,OAAQ,oBACR5jB,QAAS,0DACT6jB,QAAS,CACP,CAACtjB,IAAK,MAAOP,QAAS,cAAe8Q,QAASpb,KAAK2rB,kBAAmBgD,SAAS,GAC/E,CAAC9jB,IAAK,KAAMP,QAAS,4BAA6B+jB,WAAW,cA5RtDviB,aAAb4e,GACGgE,sCACJviB,EAAK+D,6BAA+B,iCACpC/D,EAAKiE,8BAAgC,iCACrCjE,EAAKyE,gCAAkC,kCACvCzE,EAAKiJ,4BAA8B,8BACnCjJ,EAAKmJ,6BAA+B,8BACpCnJ,EAAKqJ,8BAAgC,aAiT1CkV,GAAK3e,aAAe,CAClBogB,OAAKyC,GAAA,GAAA3uB,OAAAoT,EAAA,EAAApT,CAAA2uB,GACFziB,EAAKqB,SAAW,YADdvN,OAAAoT,EAAA,EAAApT,CAAA2uB,GAEFziB,EAAK0D,SAAW,YAFd+e,IAIL3N,aAAc,CAAC9U,EAAKqB,SAAUrB,EAAK0D,eAG/Bgf,oLAUK,IAAA3jB,EACyFlL,KAAK+I,MAA9FvB,EADA0D,EACA1D,KAAM6H,EADNnE,EACMmE,OAAQ4R,EADd/V,EACc+V,aAAckL,EAD5BjhB,EAC4BihB,MAAO3pB,EADnC0I,EACmC1I,SAAUopB,EAD7C1gB,EAC6C0gB,UAAWf,EADxD3f,EACwD2f,OAAQW,EADhEtgB,EACgEsgB,sBACjEsD,EAAqB7N,EAAaha,SAASoI,GAC3C0f,EAAgBvnB,EAAK4F,aAAeiC,EACpC2f,EAAYxnB,EAAK+G,SAAWc,EAElC,OACE7E,EAAAC,EAAAzJ,cAAC0J,EAAA,EAAD,CACEukB,WAAS,EACT3jB,UAAWiP,IAAW,CAAC2U,WAAY1nB,EAAKC,UAAYqnB,GAAsBC,IAAkBnD,IAC5F3D,KAAM,UACNmG,SAAU5mB,EAAKC,UAAY4H,IAAWlD,EAAK0D,SAC3C2e,MAAOhnB,EAAKC,SAAYunB,EAAY,QAAU,WAAS9kB,EACvDge,MAAO,CACL,CAACrd,IAAK,OACJG,KAAMxD,EAAKC,SAAYunB,EAAY,SAAW,cAAkBD,EAAgB,OAAS,YACzFzkB,QACEE,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAACmuB,GAAD,CAAmBhV,QAAM,EAAC3X,SAAUA,EAAU6M,OAAQA,EAAQ4R,aAAcA,IAC3EkL,EAAM9c,KAGb,CAACxE,IAAK,eAAgBP,QACpB9C,EAAKC,SACAunB,EAAY,MAAQ,OAErBpD,EAEIppB,EAASuC,gBACL,kBAEAyF,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CACEoB,UAAQ,EACRhU,QAASyP,EACTvf,UAAW,aAHb,UASJyjB,EACI/uB,KAAK0E,YAAYgqB,gBAAgBlnB,EAAK6F,UACtC,yBAIb7F,EAAKC,UAAYojB,GAAU5J,EAAaha,SAASoI,GAAU,CAC1DxE,IAAK,cAAeP,QAClBE,EAAAC,EAAAzJ,cAACquB,GAAA,EAAD,CACEZ,MAAO,oBACPa,QAAM,EACNC,QAAS/sB,EAASuC,gBAClB0iB,SAAU+D,KAGZ,MACJxkB,OAAO,SAAAwoB,GAAI,OAAIA,aAlEA1jB,aAAnB+iB,GACGH,sCACJviB,EAAK+D,6BAA+B,iCACpC/D,EAAKiE,8BAAgC,iCACrCjE,EAAKyE,gCAAkC,kCACvCzE,EAAKiJ,4BAA8B,8BACnCjJ,EAAKmJ,6BAA+B,8BACpCnJ,EAAKqJ,8BAAgC,iBA4EpCia,8MACJtP,MAAQ,CACNuP,WAAY,KAGdC,aAAe,SAAClrB,EAADsP,GAAqB,IAAhB2b,EAAgB3b,EAAhB2b,WAClBnpB,EAAKihB,SAAS,CAACkI,wFAGR,IAAAvR,EACmEne,KAAK+I,MAAxEvB,EADA2W,EACA3W,KAAMmjB,EADNxM,EACMwM,aAAcvoB,EADpB+b,EACoB/b,KAAM8pB,EAD1B/N,EAC0B+N,gBAAiBlB,EAD3C7M,EAC2C6M,WAAY4E,EADvDzR,EACuDyR,SACvDF,EAAc1vB,KAAKmgB,MAAnBuP,WAEDG,EAAa/f,KAAKggB,MAAMtoB,EAAKkF,QAAQ5G,OAAS,GAAK8pB,GACnDG,EAAe9vB,OAAA2G,EAAA,EAAA3G,CAAIuH,EAAKkF,SAC3BhG,MAAM,GAAKmpB,EAAaH,GAAcE,EAAU,GAAKC,EAAaH,GAAcE,EAAWA,GAC3FI,UACGC,EAAkBF,EAAaA,EAAajqB,OAAS,GAE3D,OACE0E,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMS,UAAQ,GACZ3iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC6rB,GAAD,CAAgBrlB,KAAMA,EAAMmjB,aAAcA,EAAcK,WAAYA,KAEtExgB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACGoD,EAAajuB,IAAI,SAAAouB,GAAY,OAC5B1lB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,CAAUZ,IAAKqlB,EAAanjB,YACzBmjB,EAAapjB,UAAY,IAAM,EAC9BtC,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAAS4lB,EAAapjB,UAAY,IACvC,KACJtC,EAAAC,EAAAzJ,cAACgsB,GAAD,CACExlB,KAAM0oB,EACNhW,OAAK,EACLE,SAAU4Q,EACV3Q,SAAU6V,IAAiBvF,EAC3BnoB,SAAUJ,EAAOA,EAAKI,SAAW0pB,OAItC+D,GAAoBA,EAAgBnjB,UAAY,IAAM,EACrDtC,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAAS2lB,EAAgBnjB,UAAY,IAC1C,MAENtC,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAACovB,GAAA,EAAD,CACEP,WAAYA,EACZH,WAAYA,EACZC,aAAc3vB,KAAK2vB,aACnBU,UAAQ,EACRhC,WAAS,cAlDGviB,aAoE1B2jB,GAAY1jB,aAAe,CACzB6jB,SAAU,QAGNU,8MA4CJC,gBAAkB,WACXjpB,EAAKkpB,sBAGVlpB,EAAKyB,MAAMiiB,WAAW1jB,EAAKyB,MAAMvB,SASnCipB,aAAe,WACb,GAAKnpB,EAAKopB,kBAAV,CAGA,IAAMC,EAAoBrpB,EAAKyB,MAAMvB,KAAKkF,QAAQkkB,QAAQtpB,EAAKyB,MAAM4hB,cAAgBrjB,EAAKyB,MAAMvB,MAChGF,EAAKyB,MAAMiiB,WAAW1jB,EAAKyB,MAAMvB,KAAKkF,QAAQikB,EAAoB,QAGpEE,aAAe,WAAM,IACZC,EAA+BxpB,EAAKypB,YAApCD,4BACPxpB,EAAKyB,MAAMiiB,WAAW1jB,EAAKyB,MAAMvB,KAAKkF,QAAQokB,OAShDE,iBAAmB,WACZ1pB,EAAK2pB,uBAGV3pB,EAAKyB,MAAMiiB,YAAY1jB,EAAKyB,MAAM4hB,cAAgBrjB,EAAKyB,MAAMvB,MAAMoF,sBAGrEskB,0BAA4B,WAC1B5pB,EAAKyB,MAAMiiB,WAAW1jB,EAAKyB,MAAM4hB,aAAa/d,sBAShDukB,cAAgB,WACT7pB,EAAK8pB,oBAGV9pB,EAAKyB,MAAMiiB,WAAW1jB,EAAKyB,MAAMvB,KAAKkF,QAAQ,iGA5FX,IAAV2kB,EAAUxnB,EAAVwnB,QACzB,GAAIA,EAAQC,MAAO,KAAAC,EACSF,EAAQC,MAA3BE,EADUD,EACVC,MAAOC,EADGF,EACHE,SACVD,IAAUE,KAAKC,MAAQF,EACzBzxB,KAAKuwB,kBACIiB,IAAUE,KAAKE,KACxB5xB,KAAKuwB,kBACIiB,IAAUE,KAAKC,MAASF,EAExBD,IAAUE,KAAKG,OAAUJ,EAEzBD,IAAUE,KAAKG,OAASJ,EACjCzxB,KAAKmxB,gBACIK,IAAUE,KAAKE,MACxB5xB,KAAKmxB,gBAJLnxB,KAAKgxB,mBAFLhxB,KAAKywB,6DAyBU,IAAAqB,EACwB9xB,KAAK+wB,YAEhD,OAHmBe,EACZnB,oBADYmB,EACOC,wDAYV,IAAAC,EAC2BhyB,KAAK+wB,YAAzCJ,EADSqB,EACTrB,kBAAmBoB,EADVC,EACUD,cAE1B,OAAOpB,GAAqB,GAAKA,IAAsBoB,gDAgBnC,IACbpB,EAAqB3wB,KAAK+wB,YAA1BJ,kBAEP,OAAOA,GAAqB,GAA2B,IAAtBA,6CAiBjC,OAA6B,IAFD3wB,KAAK+wB,YAA1BJ,mDAYA,IAAA1R,EACsBjf,KAAK+I,MAA3BvB,EADAyX,EACAzX,KAAMmjB,EADN1L,EACM0L,aADNsH,EAEkDjyB,KAAK+wB,YAAvDJ,EAFAsB,EAEAtB,kBAAmBG,EAFnBmB,EAEmBnB,4BAE1B,OACEtmB,EAAAC,EAAAzJ,cAAC0J,EAAA,EAAD,CAAMud,KAAM,UAAWC,MAAK,CAC1B,CAACrd,IAAK,UAAWG,KAAM,gBAAiBoQ,QAASpb,KAAKuwB,gBAAiBpI,UAAWnoB,KAAKwwB,uBAD7D7pB,OAAA1G,OAAA2G,EAAA,EAAA3G,CAEtB0wB,GAAqB,EAAI,CAC3B,CAAC9lB,IAAK,WAAYG,KAAM,WAAYoQ,QAASpb,KAAKywB,aAActI,UAAWnoB,KAAK0wB,mBAChF,CAAC7lB,IAAK,YAAaP,QAASqmB,GAAqB,EAArB,GAAAhqB,QAA6BgkB,GAAgBnjB,GAAMsF,UAAnD,KAAAnG,OAAgEa,EAAKsF,WAAc6d,EAAa7d,UAAWqb,SAAU3gB,EAAKC,UACtJ,CAACoD,IAAK,OAAQG,KAAM,UAAWoQ,QAASpb,KAAKgxB,iBAAkB7I,UAAWnoB,KAAKixB,wBAC7E,CACF,CAACpmB,IAAK,eAAgBP,QAAO,aAAA3D,OAAemqB,EAAf,KAAAnqB,OAA8Ca,EAAKsF,WAAasO,QAASpb,KAAK6wB,gBAPnF,CAS1B,CAAChmB,IAAK,QAASG,KAAM,eAAgBoQ,QAASpb,KAAKmxB,cAAehJ,UAAWnoB,KAAKoxB,qBATxDnxB,OAAA2G,EAAA,EAAA3G,CAUtB0wB,GAAqB,EAAI,GAAK,CAChC,CAAC9lB,IAAK,WAAYP,QAAO,aAAA3D,OAAegkB,EAAa7d,UAA5B,KAAAnG,OAAyCmqB,GAA+B3I,UAAU,GAC3G,CAACtd,IAAK,OAAQG,KAAM,UAAWoQ,QAASpb,KAAKkxB,0BAA2B/I,SAAUwC,EAAa7d,WAAa,4CAxFlH,IALgB,IAAAwZ,EACatmB,KAAK+I,MAA3BvB,EADS8e,EACT9e,KAAMmjB,EADGrE,EACHqE,aACPgG,EAAoBnpB,EAAKkF,QAAQkkB,QAAQjG,GAAgBnjB,GAC3DspB,EAA8BH,EAC9BuB,EAAWvH,GACyB,IAAjCmG,GAAsCoB,GAC3CA,EAAWA,EAAStlB,kBACpBkkB,EAA8BtpB,EAAKkF,QAAQkkB,QAAQsB,GAIrD,MAAO,CAACvB,oBAAmBoB,cAFLvqB,EAAKkF,QAAQ5G,OAAS,EAEFgrB,sCAnCjBhlB,aAAvBwkB,GACGhY,KAAO,CACZ,OAAQ,QAAS,aAAc,cAAe,OAAQ,OAgI1DgY,GAAiBe,aAAQf,GAAehY,KAAvB+Y,CAA6Bf,IAE/B5F,UCrnBFyH,GAAkB,SAAAC,GAC3B,IAAMC,EAAWxxB,SAASG,cAAc,YAGxCH,SAASyxB,KAAKC,YAAYF,GAC1BA,EAAS/f,MAAQ8f,EACjBC,EAASG,SACT3xB,SAAS4xB,YAAY,QACrB5xB,SAASyxB,KAAKI,YAAYL,ICLxBM,8MAWJxS,MAAQ,CACNve,UAAW+G,EAAO/G,UAClB8D,UAAWiD,EAAOjD,UAClBzD,aAAc0G,EAAO1G,aACrBG,KAAMuG,EAAOvG,KACbC,SAAUsG,EAAOvG,KAAOuG,EAAOvG,KAAKE,KAAO,KAC3CS,UAAW4F,EAAO5F,UAClBa,UAAW+E,EAAO/E,UAClBK,gBAAiB0E,EAAO1E,mBAuB1B2uB,kBAAoB,SAAAhxB,GAClB7B,EAAKynB,SAAS,CAAC5lB,YAAWK,aAAc0G,EAAO1G,aAAcyD,UAAWiD,EAAOjD,eAGjFvD,QAAU,SAAAC,GACRrC,EAAKynB,SAAS,CAACplB,YAGjBU,SAAW,SAAAC,GACThD,EAAKynB,SAAS,CAACzkB,iBAGjBU,SAAW,SAAAG,GACT7D,EAAKynB,SAAS,CAAC5jB,iBAGjBG,eAAiB,SAAAE,GACflE,EAAKynB,SAAS,CAACvjB,wGApCf0E,EAAOkqB,UAAU,CACfhxB,UAAW7B,KAAK4yB,kBAChB1wB,aAAclC,KAAK4yB,kBACnB/vB,OAAQ7C,KAAKmC,QACbqB,QAASxD,KAAK8C,SACdgB,QAAS9D,KAAKyD,SACdU,cAAenE,KAAK+D,gEAKtB4E,EAAOmqB,YAAY,CACjBjwB,OAAQ7C,KAAKmC,QACbqB,QAASxD,KAAK8C,SACdgB,QAAS9D,KAAKyD,SACdU,cAAenE,KAAK+D,kDAwBf,IAAAsd,EACmFrhB,KAAKmgB,MAAxFve,EADAyf,EACAzf,UAAWK,EADXof,EACWpf,aAAcyD,EADzB2b,EACyB3b,UAAWtD,EADpCif,EACoCjf,KAAMW,EAD1Cse,EAC0Cte,UAAWa,EADrDyd,EACqDzd,UAAWK,EADhEod,EACgEpd,gBACjE8uB,EAAe/yB,KAAK0E,YAAYquB,aACtC,OACEvoB,EAAAC,EAAAzJ,cAAC+xB,EAAD9yB,OAAA2K,OAAA,GACM5K,KAAK+I,MADX,CAEEnH,UAAWA,EACXK,aAAcA,EACdyD,UAAWA,EACXiD,OAAQA,EACRvG,KAAMA,EACNW,UAAWA,EACXa,UAAWA,EACXK,gBAAiBA,4CAxEH6H,GAAW,IACvBknB,EADuB,SAAAzsB,GAAA,SAAAysB,IAAA,OAAA/yB,OAAAC,EAAA,EAAAD,CAAAD,KAAAgzB,GAAA/yB,OAAA0d,EAAA,EAAA1d,CAAAD,KAAAC,OAAA2d,EAAA,EAAA3d,CAAA+yB,GAAAhjB,MAAAhQ,KAAA0X,YAAA,OAAAzX,OAAA4d,EAAA,EAAA5d,CAAA+yB,EAAAzsB,GAAAysB,EAAA,CACWhzB,MAIxC,OAJMgzB,EACGD,aAAejnB,EAGjBknB,SARiBlnB,aAAtB6mB,GACGI,aAAe,KAgFjB,IAAME,GAAa,SAAAnnB,GACxB,OAAO6mB,GAAcO,aAAapnB,ICwBrBmnB,iNApGb9S,mBACEwK,aAAc,KACdqB,OAAO,GACJjsB,EAAK2E,YAAYyuB,oCA4BtBC,wBAA0B,WACxBrzB,EAAKynB,SAAS,CAACwE,MAAO,UAGxBlX,SAAW,SAAAiW,GACThrB,EAAKynB,SAAS,CAAChgB,KAAMujB,OAGvBsI,MAAQ,WACN,IAAMrqB,EAAMjJ,EAAKgJ,MAAMtH,SAAS0I,SAChC,GAAImpB,UAAUD,MAAO,CACnB,IAAM7rB,EAAOzH,EAAKogB,MAAM3Y,KACxB8rB,UAAUD,MAAM,CACdE,MAAK,6BAAA5sB,OAA+Ba,EAAKsF,UAApC,UACLslB,KAAI,uCAAAzrB,OAAyCa,EAAKsF,UAA9C,UACJ9D,QACCwqB,MAAM,WACPC,GAAsBzqB,GACtB0qB,MAAM,mCAGRD,GAAsBzqB,GACtB0qB,MAAM,+BAIVzI,qBAAuB,SAAAN,GACrB5qB,EAAKynB,SAAS,CAACmD,0FAGR,IAAAtJ,EAC6BrhB,KAAKmgB,MAAlC3Y,EADA6Z,EACA7Z,KAAMwkB,EADN3K,EACM2K,MAAOrB,EADbtJ,EACasJ,aADbzhB,EAEgBlJ,KAAK+I,MAArB3G,EAFA8G,EAEA9G,KAAMuG,EAFNO,EAEMP,OAEb,OACE6B,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACE6F,KAAM3H,EACN/D,KAAM,OACN2L,QAAS5zB,KAAKozB,wBACdlF,OAAQ,iCACR5jB,QAAO,GAAA3D,OAAKqlB,EAAL,+CACPmC,QAAS,CAAC,CAACtjB,IAAK,KAAMP,QAAS,KAAM8kB,UAAU,MAEjD5kB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMS,UAAQ,GACZ3iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0J,EAAA,EAAD,CAAM0jB,UAAQ,EAACnG,KAAM,UAAWC,MAAO,CACrC,CAACrd,IAAK,QAASG,KAAM,QAASV,QAAS,iBAAkBkkB,MAAO,QAASqF,QAAQ,EAAM/oB,GAAI,IACzFgpB,KAAI,aAAAntB,QAAgBgkB,GAAgBnjB,GAAMyG,wBAC1CslB,MAAOD,UAAUD,MAAQ,iCAAmC,kCAIpE7oB,EAAAC,EAAAzJ,cAAC+yB,GAAD,CACE3xB,KAAMA,EACN8pB,gBAAiBvjB,EAAOnG,SACxBgF,KAAMA,EACNsN,SAAU9U,KAAK8U,SACfmW,qBAAsBjrB,KAAKirB,mFAlFjC,IACM9E,EADS,IAAI6N,gBAAgB3zB,OAAOoB,SAASwyB,QAC3BC,IAAI,YAC5B,GAAI/N,EAAU,CACZ,IAAI3e,EAAMwkB,EACV,IAKIA,GAJFxkB,EAAO2E,EAAKgoB,2BAA2BhO,IAI7B,KAFA,6BAIV,MAAO1hB,GACP+C,EAAO,KACPwkB,EAAQ,sCAEV,OAAKxkB,EAGE,CAACA,OAAMwkB,OAAO,GAFZ,CAACxkB,KAAM2E,EAAK2C,SAAUkd,SAI/B,MAAO,CAACxkB,KAAM2E,EAAK2C,SAAUkd,OAAO,UA5BpBlgB,gECFhBsoB,8MACJ1S,IAAMlB,IAAMC,+FAGVzgB,KAAKq0B,kDAIDr0B,KAAK0hB,IAAIX,SACXuT,KAAUvc,OAAO/X,KAAK0hB,IAAIX,oDAIXL,GACbA,EAAU6T,OAASv0B,KAAK+I,OAC1B/I,KAAKq0B,8CAIA,IAAAG,EAAAtrB,EACkClJ,KAAK+I,MAAvCwrB,EADArrB,EACAqrB,KAAME,EADNvrB,EACMurB,QAASxM,EADf/e,EACe+e,KAAMyM,EADrBxrB,EACqBwrB,UAC5B,OACElqB,EAAAC,EAAAzJ,cAAA,OACE0gB,IAAK1hB,KAAK0hB,IACVpW,UAAWiP,IAAW,CAAC,KAAM,OAAQ,QAAS,UAAW,UAApCia,EAAA,CAA+CC,UAAWA,GAA1Dx0B,OAAAoT,EAAA,EAAApT,CAAAu0B,EAAoEC,IAAYA,GAAhFx0B,OAAAoT,EAAA,EAAApT,CAAAu0B,EAA0FvM,IAASA,GAAnGhoB,OAAAoT,EAAA,EAAApT,CAAAu0B,EAAyG,aAAcE,GAAvHF,IACrBG,uBAAsBJ,WAzBLzoB,aAsCzBsoB,GAAWroB,aAAe,CACxB2oB,WAAW,GAGEN,+BCrCFQ,GAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAA/0B,EAAAE,OAAAC,EAAA,EAAAD,CAAAD,KAAA40B,GAAA,QAAAnd,EAAAC,UAAA5R,OAAAivB,EAAA,IAAAnd,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAAkd,EAAAld,GAAAH,UAAAG,GAAA,OAAA9X,EAAAE,OAAA0d,EAAA,EAAA1d,CAAAD,MAAA80B,EAAA70B,OAAA2d,EAAA,EAAA3d,CAAA20B,IAAAI,KAAAhlB,MAAA8kB,EAAA,CAAA90B,MAAA2G,OAAAouB,MACEE,eAAiB,WACfl1B,EAAKgJ,MAAMksB,eAAel1B,EAAKgJ,MAAMvB,OAFzCzH,EAAA,OAAAE,OAAA4d,EAAA,EAAA5d,CAAA20B,EAAAC,GAAA50B,OAAA6d,EAAA,EAAA7d,CAAA20B,EAAA,EAAA/pB,IAAA,SAAAyH,MAAA,WAKW,IAAApJ,EACsElJ,KAAK+I,MAA3E3G,EADA8G,EACA9G,KAAM8yB,EADNhsB,EACMgsB,UAAWC,EADjBjsB,EACiBisB,gBAAiB3tB,EADlC0B,EACkC1B,KAAM4tB,EADxClsB,EACwCksB,MAAO7tB,EAD/C2B,EAC+C3B,KAAM8tB,EADrDnsB,EACqDmsB,cAEtDntB,EAAaitB,EAAgB3tB,EAAK8tB,cAElCC,EAAWppB,EAAKqpB,YAAYhuB,EAAKA,MACjCiuB,EAAUP,EAAU1tB,EAAKG,QAAQ,IACjC+tB,EAAUR,EAAU1tB,EAAKG,QAAQ,IACjCguB,EAAiBJ,EAASnoB,aAAejB,EAAKqB,SAAWioB,EAAUC,EACnEE,EAAgBD,IAAmBF,EACnCI,EAAgBF,IAAmBD,EACnCI,IAAgB1zB,GAAOqzB,EAAQx0B,KAAOmB,EAAKnB,GAC3C80B,IAAgB3zB,GAAOszB,EAAQz0B,KAAOmB,EAAKnB,GAC3C+0B,EAAaxuB,EAAKC,SAAYD,EAAK+G,SAAWpC,EAAKqB,SAAWioB,EAAUC,EAAW,KACnFnJ,EAAWuJ,GAAiBC,EAC5BE,EAAYH,GAAiBF,GAAmBG,GAAiBF,EACjEK,GAAed,IAAU7I,GAAYwJ,EACrCI,GAAef,IAAU7I,GAAYuJ,EAE3C,OACEtrB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAD,CACEtrB,GAAIC,IACJhB,GAAE,SAAApD,OAAWa,EAAKvG,IAClBma,QAASpb,KAAKi1B,eACdlZ,MAAK9b,OAAAsK,EAAA,EAAAtK,CAAA,GACEm1B,EAAa,CAACpV,MAAO,QAAb,GACTxY,EAAKvG,KAAOo0B,EAAgB,CAACgB,gBAAiB,cAAgB,IAEpE/qB,UAAWiP,IAAW,CAAC2U,UAAW3nB,GAAQ0uB,KAE1CzrB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKE,QAAN,KACIlB,EAOE,KANF5qB,EAAAC,EAAAzJ,cAACgsB,GAAD,CACE1hB,UAAW,8BACX9D,KAAM+tB,EACNrb,OAAK,EACL1X,SAAUJ,EAAOA,EAAKI,cAAW0H,IAGrCM,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAK7H,OAAN,KACK2H,GAAeC,EAAwB,KAAT,OAChCD,EACC1rB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAOwH,IAAeP,GAAWQ,EAAW,aAAU/rB,GAC1D8rB,IAAeP,EAAUjrB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,WAAc,KACnDszB,EAAgBprB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,gBAAmB,KAC/CmzB,EAAQnzB,KACTkI,EAAAC,EAAAzJ,cAACw1B,GAAD,CAAY/B,QAAS,QAASxM,KAAM,OAAQyM,WAAS,EAACH,KAAMkB,EAAQx0B,MAEpE,KACHi1B,GAAeC,EAAc,OAAS,KACtCA,EACC3rB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAOwH,IAAeN,GAAWO,EAAW,aAAU/rB,GAC1D8rB,IAAeN,EAAUlrB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,WAAc,KACnDuzB,EAAgBrrB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,cAAeksB,MAAO,UAAa,KAC/DkH,EAAQpzB,KACTkI,EAAAC,EAAAzJ,cAACw1B,GAAD,CAAY/B,QAAS,QAASxM,KAAM,OAAQyM,WAAS,EAACH,KAAMmB,EAAQz0B,MAEpE,MAEJm0B,EAaAltB,EAAasC,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOnlB,KAAM,YAAgB,KAZ1CR,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKK,KAAN,KACGlK,EAAW/hB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOnlB,KAAM,CAAC1I,KAAM,OAAQksB,MAAO,SAAUlkB,QAAS,YAAgB,KACjF,IACC9C,EAAKC,SAAgF,KAArE+C,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOnlB,KAAM,CAAC1I,KAAM,SAAUksB,MAAO,SAAUlkB,QAAS,SACzE,IACDE,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAAO,QAAA3D,OAAUa,EAAKwJ,MAAQhG,KAAM,SAC1C,IACDR,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAASosB,KAAOlvB,EAAKmvB,aAAenvB,EAAKovB,eAAehrB,OAAQZ,KAAM,aAC5E,IACA9C,EAAasC,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAASpC,EAAW5F,KAAM0I,KAAM,YAAgB,YA1EnF4pB,EAAA,CAA8B9oB,aAgG9B8oB,GAAS7oB,aAAe,CACtBqpB,OAAO,EACP7tB,MAAM,OAGFsvB,8MACJ1W,MAAQ,CACNuP,WAAY,KAGdC,aAAe,SAAClrB,EAADkF,GAAqB,IAAhB+lB,EAAgB/lB,EAAhB+lB,WAClBnpB,EAAKihB,SAAS,CAACkI,wFAGR,IAAAxkB,EACiGlL,KAAK+I,MAAtG3G,EADA8I,EACA9I,KAAM8yB,EADNhqB,EACMgqB,UAAWC,EADjBjqB,EACiBiqB,gBAAiBzxB,EADlCwH,EACkCxH,MAAO0xB,EADzClqB,EACyCkqB,MAAO7tB,EADhD2D,EACgD3D,KAAM0tB,EADtD/pB,EACsD+pB,eAAgBI,EADtEnqB,EACsEmqB,cAAezF,EADrF1kB,EACqF0kB,SAC5F,IAAK3vB,OAAO4f,OAAOqV,GAAWpvB,OAC5B,OAAO,KAHF,IAKF4pB,EAAc1vB,KAAKmgB,MAAnBuP,WAECG,EAAa/f,KAAKggB,KAAKpsB,EAAMoC,OAAS8pB,GACxCF,EAAaG,IACfH,EAAaG,GAEf,IAAME,EAAersB,EAClBgD,OAAOmpB,EAAaH,GAAcE,GAAWC,EAAaH,GAAcE,EAAWA,GACnFI,UAEH,OACExlB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKxI,MAAN,CAAY7R,MAAO,CAAC+a,UAAW,QAASC,UAAW,OAAQC,SAAW5B,EAAoB,aAAZlrB,IAC3E6lB,EAAajuB,IAAI,SAAA0F,GAAI,OACpBgD,EAAAC,EAAAzJ,cAACi2B,GAAD,CACEpsB,IAAKrD,EAAKvG,GACVmB,KAAMA,EACN8yB,UAAWA,EACXC,gBAAiBA,EACjB3tB,KAAMA,EACNytB,eAAgBA,EAChBG,MAAOA,EACP7tB,KAAMA,EACN8tB,cAAeA,OAIpBxF,EAAa,EACZrlB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMS,UAAQ,GACZ3iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAACovB,GAAA,EAAD,CACEP,WAAYA,EACZH,WAAYA,EACZC,aAAc3vB,KAAK2vB,aACnBU,UAAQ,EACRhC,WAAS,MAIb,aArDWviB,aAuEvB+qB,GAAS9qB,aAAe,CACtBqpB,OAAO,EACP7tB,MAAM,EACNqoB,SAAU,IAGGiH,oBCpHA5D,iNAlEb9S,MAAQ,CACN7d,KAAM,GACN40B,UAAW,OAGbC,iBAAmB,WAAM,IAChBxuB,EAAU5I,EAAKgJ,MAAfJ,OADgB0Y,EAEGthB,EAAKogB,MAAxB7d,EAFgB+e,EAEhB/e,KAAM40B,EAFU7V,EAEV6V,UACbvuB,EAAOwuB,iBAAiB,CAAC70B,OAAM40B,UAAW/d,SAAS+d,EAAW,SAGhEtD,QAAU,WACR7zB,EAAKynB,SAAS,CAACllB,KAAM,GAAI40B,UAAW,OAGtCE,SAAW,SAAC3yB,EAADkF,GAAsB,IAAjBrH,EAAiBqH,EAAjBrH,KAAMgQ,EAAW3I,EAAX2I,MACpBvS,EAAKynB,SAALvnB,OAAAoT,EAAA,EAAApT,CAAA,GAAgBqC,EAAOgQ,6EAIvB,OACE9H,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACE7F,KAAM,OACN8F,QAASvjB,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQQ,MAAO,SAAUxjB,KAAM,UAAWV,QAAS,sBAC5D4jB,OAAQ,oBACR5jB,QACEE,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAD,KACE7sB,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKC,MAAN,CACEh1B,KAAM,OACNi1B,QAASC,KACT/I,MAAO,OACPgJ,YAAa,kBACbhQ,SAAUznB,KAAKo3B,SACfM,UAAQ,EACRC,aAAc33B,KAAKmgB,MAAM7d,OAE3BkI,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKC,MAAN,CACEh1B,KAAM,YACNi1B,QAASC,KACT/I,MAAK,GAAA9nB,OAAK3G,KAAKmgB,MAAM+W,UAAhB,yCACLO,YAAa,0CACbhQ,SAAUznB,KAAKo3B,SACfl2B,KAAM,QACN02B,IAAK,EACL7nB,IAAK,EACL4nB,aAAc33B,KAAKmgB,MAAM+W,UACzBQ,UAAQ,MAKhBvJ,QAAS,CACP,CAACtjB,IAAK,SAAUP,QAAS,UACzB,CAACO,IAAK,SAAUukB,UAAU,EAAM9kB,QAAS,oBAAqB8Q,QAASpb,KAAKm3B,iBAAkBhP,UAAWnoB,KAAKmgB,MAAM7d,OAEtHsxB,QAAS5zB,KAAK4zB,iBAzDS9nB,cCAzB+rB,8MACJC,qBAAuB,WACrB/3B,EAAKgJ,MAAM+uB,qBAAqB/3B,EAAKgJ,MAAMb,qFAGpC,IAAAgB,EAC2DlJ,KAAK+I,MAAhE3G,EADA8G,EACA9G,KAAM8yB,EADNhsB,EACMgsB,UAAW6C,EADjB7uB,EACiB6uB,oBAAqB7vB,EADtCgB,EACsChB,WAAYktB,EADlDlsB,EACkDksB,MAEnD4C,IAAiB51B,GAAO8F,EAAWP,QAAQV,SAAS7E,EAAKnB,IACzDg3B,IAAiB71B,GAAO8F,EAAWgwB,gBAAkB91B,EAAKnB,GAC1Dk3B,IAAajwB,EAAWT,UAAWS,EAAWkwB,eAAiBh2B,EAAKnB,GACpEo3B,EAAUnD,EAAUhtB,EAAWgwB,eAE/BI,EACJ9tB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CACE7lB,QAASpC,EAAWG,QAAWH,EAAWT,SAAW,WAAtB,SAAAd,OAA4CuB,EAAWqwB,MAAvD,KAAA5xB,OAAgEuB,EAAWswB,QAAY,UACtHxtB,KAAM,CACJ1I,KAAM4F,EAAWG,QAAWH,EAAWT,SAAW,SAAW,OAAU,YACvE2V,OAAQlV,EAAWG,QAAU,aAAU6B,KAK7C,OACEM,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAD,CACEtrB,GAAIC,IACJhB,GAAE,eAAApD,OAAiBuB,EAAWjH,IAE9B8a,MAAK9b,OAAAsK,EAAA,EAAAtK,CAAA,GACEm1B,EAAa,CAACpV,MAAO,QAAb,GACT9X,EAAWjH,KAAO82B,EAAsB,CAAC1B,gBAAiB,cAAgB,KAGhF7rB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKE,QAAN,KACE9rB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAK7H,OAAN,KACE/jB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAASpC,EAAW5F,OAD7B,MAEEkI,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAOyJ,EAAiB,aAAU/tB,EAAWI,QAAS+tB,EAAQ/1B,OACpE8yB,EAAQkD,EAAc,MAEvBlD,EAkBE,KAjBF5qB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKK,KAAN,KACGuB,EAAiBxtB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOnlB,KAAM,CAAC1I,KAAM,OAAQksB,MAAO,SAAUlkB,QAAS,kBAAsB,KAC7F,IACA6tB,EAAa3tB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOnlB,KAAM,CAAC1I,KAAM,SAAUksB,MAAO,UAAWlkB,QAAS,QACrEpC,EAAWT,SACT+C,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOnlB,KAAM,SAAUV,QAAS4qB,EAAUhtB,EAAWkwB,cAAgBlD,EAAUhtB,EAAWkwB,cAAc91B,KAAO4F,EAAWkwB,eACxH,KAEL,IACAlwB,EAAWG,UAAYH,EAAWT,SAAW+C,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOnlB,KAAM,CAAC1I,KAAM,SAAUksB,MAAO,SAAUlkB,QAAS,SAAa,KAClH,IACAguB,EACA,IACD9tB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAAO,GAAA3D,OAAKuB,EAAWP,QAAQ7B,OAAxB,YAA0CkF,KAAM,UAC7D,IACDR,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAASosB,KAAOxuB,EAAWyuB,aAAezuB,EAAW0uB,eAAiB1uB,EAAWuwB,aAAa7sB,OAAQZ,KAAM,uBAvDpGc,aAyE7B+rB,GAAe9rB,aAAe,CAC5BqpB,OAAO,OAGHsD,8MACJvY,MAAQ,CACNuP,WAAY,KAGdC,aAAe,SAAClrB,EAADkF,GAAqB,IAAhB+lB,EAAgB/lB,EAAhB+lB,WAClBnpB,EAAKihB,SAAS,CAACkI,wFAGR,IAAAxkB,EAC4FlL,KAAK+I,MAAjG3G,EADA8I,EACA9I,KAAM8yB,EADNhqB,EACMgqB,UAAWlxB,EADjBkH,EACiBlH,YAAaoxB,EAD9BlqB,EAC8BkqB,MAAO0C,EADrC5sB,EACqC4sB,qBAAsBC,EAD3D7sB,EAC2D6sB,oBAAqBnI,EADhF1kB,EACgF0kB,SACvF,IAAK3vB,OAAO4f,OAAOqV,GAAWpvB,OAC5B,OAAO,KAHF,IAKF4pB,EAAc1vB,KAAKmgB,MAAnBuP,WAECG,EAAa/f,KAAKggB,KAAK9rB,EAAY8B,OAAS8pB,GAC9CF,EAAaG,IACfH,EAAaG,GAEf,IAAM8I,EAAqB30B,EACxB0C,OAAOmpB,EAAaH,GAAcE,GAAWC,EAAaH,GAAcE,EAAWA,GACnFI,UAEH,OACExlB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKxI,MAAN,CAAY7R,MAAO,CAAC+a,UAAW,QAASC,UAAW,OAAQC,SAAW5B,EAAoB,aAAZlrB,IAC3EyuB,EAAmB72B,IAAI,SAAAoG,GAAU,OAChCsC,EAAAC,EAAAzJ,cAAC43B,GAAD,CACE/tB,IAAK3C,EAAWjH,GAChBmB,KAAMA,EACN8yB,UAAWA,EACXhtB,WAAYA,EACZ6vB,oBAAqBA,EACrBD,qBAAsBA,EACtB1C,MAAOA,OAIZvF,EAAa,EACZrlB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMS,UAAQ,GACZ3iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAACovB,GAAA,EAAD,CACEP,WAAYA,EACZH,WAAYA,EACZC,aAAc3vB,KAAK2vB,aACnBU,UAAQ,EACRhC,WAAS,MAIb,aAnDiBviB,aAmE7B4sB,GAAe3sB,aAAe,CAC5BqpB,OAAO,EACPxF,SAAU,IAGG8I,UChJTG,oLACK,IAAA3vB,EAC6ElJ,KAAK+I,MAAlFJ,EADAO,EACAP,OAAQvG,EADR8G,EACQ9G,KAAMY,EADdkG,EACclG,MAAOqE,EADrB6B,EACqB7B,eAAgByxB,EADrC5vB,EACqC4vB,iBAAkBC,EADvD7vB,EACuD6vB,mBAC9D,OACEvuB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKxI,MAAN,CAAY7R,MAAO,CAAC+a,UAAW,QAASC,UAAW,SAChD/zB,EAAMlB,IAAI,SAAAk3B,GAAS,OAClBxuB,EAAAC,EAAAzJ,cAACi4B,GAAD,CACEpuB,IAAKmuB,EAAU/3B,GACf0H,OAAQA,EACRvG,KAAMA,EACN42B,UAAWA,EACX3xB,eAAgBA,EAChByxB,iBAAkBA,EAClBC,mBAAoBA,cAbTjtB,aA8BjBotB,8MACJC,kBAAoB,WAClBp5B,EAAKgJ,MAAMJ,OAAOwwB,mBAAmBp5B,EAAKgJ,MAAM3G,KAAKiE,gBAGvD+yB,cAAgB,WACdr5B,EAAKgJ,MAAMJ,OAAOwwB,kBAAkBp5B,EAAKgJ,MAAM3G,KAAKiE,cAAgBtG,EAAKgJ,MAAMiwB,UAAU/3B,IAAalB,EAAKgJ,MAAMiwB,UAAU/3B,6EAGpH,IAEHo4B,EAAkBC,EAAqBC,EAAgBC,EAAmBC,EAFvEvuB,EACiFlL,KAAK+I,MAAtFJ,EADAuC,EACAvC,OAAQvG,EADR8I,EACQ9I,KAAM42B,EADd9tB,EACc8tB,UAAW3xB,EADzB6D,EACyB7D,eAAgByxB,EADzC5tB,EACyC4tB,iBAAkBC,EAD3D7tB,EAC2D6tB,mBA0DlE,OAxDIpwB,GAAUvG,IACRA,EAAKnB,KAAO+3B,EAAU/3B,IACxBu4B,EAAoBx5B,KAAKm5B,kBACrB/2B,EAAKiE,aACPgzB,EAAmB,QACnBE,EAAiB,CAACG,SAAS,EAAMp3B,KAAM,gBAErCm3B,EADEpyB,EACa,eAAAV,OAAkBU,EAAe/E,KAAjC,OAEG,4BAGpB+2B,EAAmB,SACnBE,EAAiB,CAACj3B,KAAM,QACpBy2B,GAAsBA,EAAmBjzB,OACT,IAA9BizB,EAAmBjzB,QACrB2zB,EAAe,GAAA9yB,OAAMoyB,EAAmB,GAAGz2B,KAA5B,uBACfg3B,GAAsB,IAEtBG,EAAe,GAAA9yB,OAAMoyB,EAAmBjzB,OAAzB,8BACfwzB,GAAsB,GAItBG,EAFOX,GAAoBA,EAAiBhzB,OACd,IAA5BgzB,EAAiBhzB,OACJ,QAAAa,OAAWmyB,EAAiB,GAAGx2B,MAE/B,GAAAqE,OAAMmyB,EAAiBhzB,OAAvB,wBAGC,UAItB0zB,EAAoBx5B,KAAKo5B,cACrB/xB,GAAkBA,EAAepG,KAAO+3B,EAAU/3B,IACpDo4B,EAAmB,QACnBE,EAAiB,CAACG,SAAS,EAAMp3B,KAAM,gBACvCm3B,EAAe,eAAA9yB,OAAkBqyB,EAAU12B,KAA5B,QACL02B,EAAUjyB,QAIpBsyB,EAAmB,SACnBE,EAAiB,CAACj3B,KAAM,QACpB02B,EAAU3yB,cAAgBjE,EAAKnB,IACjCw4B,EAAe,GAAA9yB,OAAMqyB,EAAU12B,KAAhB,uBACfg3B,GAAsB,GAEtBG,GADmC,IAA1BT,EAAU3yB,YACJ,GAAAM,OAAMqyB,EAAU12B,KAAhB,qBAEA,aAAAqE,OAAgBqyB,EAAU12B,QAX3Cm3B,EAAkB,KAClBD,EAAoB,QAiBxBhvB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAD,KACE5rB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKE,QAAN,KACE9rB,EAAAC,EAAAzJ,cAACw1B,GAAD,CAAY/B,QAAS,QAASxM,KAAM,OAAQsM,KAAMyE,EAAU/3B,KAC5DuJ,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAK7H,OAAN,KACGyK,EAAU12B,KACV,IACAqG,GAAUvG,GAAQA,EAAKnB,KAAO+3B,EAAU/3B,GACvCuJ,EAAAC,EAAAzJ,cAAC24B,GAAD,CAAUhxB,OAAQA,EAAQvG,KAAMA,EAAM2rB,QAASvjB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOrlB,GAAI,IAAKE,KAAM,OAAQV,QAAS,WACpF,MAENE,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKK,KAAN,KACGr0B,GAAQ42B,EAAU/3B,KAAOmB,EAAKnB,GAAKuJ,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,KAAO3lB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,OAAQksB,MAAO,UAAlC,MAA0D,KAC7F,IACApsB,GAAQ42B,EAAU/3B,KAAOmB,EAAKnB,GAAKuJ,EAAAC,EAAAzJ,cAAC24B,GAAD,CAAUhxB,OAAQA,EAAQvG,KAAMA,EAAM2rB,QAASvjB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOrlB,GAAI,KAAKN,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,OAAQksB,MAAOpsB,EAAKw3B,YAAc,QAAU,QAAUx3B,EAAKw3B,YAAc,GAAK,iBAA6B,KACzN,IACAZ,EAAU3yB,YAAcmE,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,KAAO3lB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMmD,SAAO,EAACp3B,KAAM,eAAgBksB,MAAO,UAAlD,SAA6E,KACrG,IACAwK,EAAUjyB,OAASyD,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,KAAO3lB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,SAAUksB,MAAO,UAApC,UAAgE,KACnF,IACDhkB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CACEoD,MAAK,GAAA5sB,OAAKqyB,EAAU71B,wBAA0B,iBAAmB,GAA5D,QAAAwD,OAAqEqyB,EAAUa,SAA/E,YAAAlzB,OAAkGqyB,EAAU9B,WACjH1I,MAAO,CAACtM,EAAG,SAAUC,EAAG,OAAQC,EAAG,SAAS4W,EAAU11B,OAEtDkH,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CACEj0B,KAAM02B,EAAU71B,wBAA0B,WAAa,eACvDqrB,MAAOwK,EAAU71B,wBAA0B,cAAW+G,IAEvD,IAAK8uB,EAAUc,OAEjB,IACDtvB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOnlB,KAAM,SAAUV,QAAO,IAAA3D,OAAMqyB,EAAUa,SAAhB,KAAAlzB,OAA4BqyB,EAAU9B,aACnE,IACA8B,EAAUe,mBACTvvB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CACEnlB,KAAM,CAAC1I,KAAM,UAAWksB,MAAO,UAC/BlkB,QAAS0uB,EAAUe,mBACnBxG,MAAK,OAAA5sB,OAASqyB,EAAUe,mBAAnB,KAAApzB,OAAyCqyB,EAAUgB,gBAAnD,0BAEH,OAGTP,EAAkBjvB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKE,QAAN,CAAc2D,OAAK,GACpCzvB,EAAAC,EAAAzJ,cAAA,OAAKsK,UAAU,kBACbd,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQ1iB,UAAWiP,IAAW,CAAC2U,UAAWoK,IAAuB9K,MAAO6K,EAAkBje,QAASoe,GACjGhvB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAASgD,GACTE,KAGW,aArHH3tB,aAqIjBouB,8MACJ/Z,MAAQ,CACN/d,KAAMmE,EAAKwC,MAAM3G,KACjBC,SAAUkE,EAAKwC,MAAM3G,KAAKE,KAC1B+B,SAAU,MAcZ81B,eAAiB,SAAAxwB,GAAuB,IAAZ2I,EAAY3I,EAArBywB,OAAS9nB,MAC1B/L,EAAKihB,SAAS,CAACnlB,SAAUiQ,OAG3B+nB,eAAiB,SAAAtmB,GAAuB,IAAZzB,EAAYyB,EAArBqmB,OAAS9nB,MAC1B/L,EAAKihB,SAAS,CAACnjB,SAAUiO,OAG3BgoB,eAAiB,WACf/zB,EAAKwC,MAAMJ,OAAOwxB,eAAe5zB,EAAK4Z,MAAM9d,aAG9Ck4B,eAAiB,WACfh0B,EAAKwC,MAAMJ,OAAO0xB,eAAe9zB,EAAK4Z,MAAM9b,UAC5CkC,EAAKihB,SAAS,CAACnjB,SAAU,8EAGlB,IAAAgd,EACsBrhB,KAAKmgB,MAA3B9d,EADAgf,EACAhf,SAAUgC,EADVgd,EACUhd,SADV8Z,EAEiBne,KAAK+I,MAAtB3G,EAFA+b,EAEA/b,KAAM2rB,EAFN5P,EAEM4P,QAEb,OACEvjB,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACEC,QAASA,EACT9F,KAAM,QACNiG,OAAQ,YACR5jB,QACEE,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAACw2B,GAAA,EAAD,CAAO/I,MAAO,OAAQnc,MAAOjQ,EAAUolB,SAAUznB,KAAKm6B,eAAgBK,OAAQ,CAAClwB,QAAS,SAAU8Q,QAASpb,KAAKs6B,kBAChH9vB,EAAAC,EAAAzJ,cAAA,WACAwJ,EAAAC,EAAAzJ,cAACw2B,GAAA,EAAD,CAAO/I,MAAO,CAACnkB,QAASlI,EAAKw3B,YAAc,kBAAoB,iBAAkBpL,MAAOpsB,EAAKw3B,YAAc,QAAU,OAAQtnB,MAAOjO,EAAUojB,SAAUznB,KAAKq6B,eAAgBG,OAAQ,CAAClwB,QAAS,SAAUkkB,MAAOpsB,EAAKw3B,iBAAc1vB,EAAY,QAASkR,QAASpb,KAAKu6B,mBAG1QpM,QAAS,CACP,CAACtjB,IAAK,SAAUojB,UAAU,EAAM3jB,QAAS,gEA7CjBvB,EAAOoX,GACrC,OAAIpX,EAAM3G,OAAS+d,EAAM/d,KAChB,CACLA,KAAM2G,EAAM3G,KACZC,SAAU0G,EAAM3G,KAAO2G,EAAM3G,KAAKE,KAAO,MAItC,YAfYwJ,aAiEV2uB,GAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAArzB,EAAArH,OAAAC,EAAA,EAAAD,CAAAD,KAAAy6B,GAAA,QAAAG,EAAAljB,UAAA5R,OAAAivB,EAAA,IAAAnd,MAAAgjB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAA9F,EAAA8F,GAAAnjB,UAAAmjB,GAAA,OAAAvzB,EAAArH,OAAA0d,EAAA,EAAA1d,CAAAD,MAAA26B,EAAA16B,OAAA2d,EAAA,EAAA3d,CAAAw6B,IAAAzF,KAAAhlB,MAAA2qB,EAAA,CAAA36B,MAAA2G,OAAAouB,MACE5U,MAAQ,CACN9d,SAAU,GACVgC,SAAU,GACV+B,YAAY,GAJhBkB,EAOE6yB,eAAiB,SAAAtwB,GAAuB,IAAZyI,EAAYzI,EAArBuwB,OAAS9nB,MAC1BhL,EAAKkgB,SAAS,CAACnlB,SAAUiQ,KAR7BhL,EAWE+yB,eAAiB,SAAAvwB,GAAuB,IAAZwI,EAAYxI,EAArBswB,OAAS9nB,MAC1BhL,EAAKkgB,SAAS,CAACnjB,SAAUiO,KAZ7BhL,EAeEwzB,iBAAmB,SAAAjlB,GAAyB,IAAd0Z,EAAc1Z,EAAvBukB,OAAS7K,QAC5BjoB,EAAKkgB,SAAS,CAACphB,WAAYmpB,KAhB/BjoB,EAmBEyzB,MAAQ,WACNzzB,EAAKyB,MAAMJ,OAAOoyB,MAAMzzB,EAAK6Y,MAAM9d,SAAUiF,EAAK6Y,MAAM9b,SAAUiD,EAAKlB,YACvEkB,EAAKkgB,SAAS,CAACnlB,SAAU,GAAIgC,SAAU,MArB3CiD,EAAA,OAAArH,OAAA4d,EAAA,EAAA5d,CAAAw6B,EAAAC,GAAAz6B,OAAA6d,EAAA,EAAA7d,CAAAw6B,EAAA,EAAA5vB,IAAA,SAAAyH,MAAA,WAwBW,IAAA0oB,EACkCh7B,KAAKmgB,MAAvC9d,EADA24B,EACA34B,SAAUgC,EADV22B,EACU32B,SAAU+B,EADpB40B,EACoB50B,WAE3B,OACEoE,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACEpM,IAAK1hB,KAAKi7B,MACVlN,QAASvjB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOrlB,GAAI,IAAKE,KAAM,UAAWV,QAAS,SAAU4wB,MAAO,SACpEjT,KAAM,QACNiG,OAAQ,SACR5jB,QACEE,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAACw2B,GAAA,EAAD,CAAO/I,MAAO,OAAQnc,MAAOjQ,EAAUolB,SAAUznB,KAAKm6B,iBACtD3vB,EAAAC,EAAAzJ,cAAA,WACAwJ,EAAAC,EAAAzJ,cAACw2B,GAAA,EAAD,CAAO/I,MAAO,WAAYnc,MAAOjO,EAAUojB,SAAUznB,KAAKq6B,iBAC1D7vB,EAAAC,EAAAzJ,cAAA,WACAwJ,EAAAC,EAAAzJ,cAACquB,GAAA,EAAD,CACEZ,MAAO,cACPc,QAASnpB,EACTqhB,SAAUznB,KAAK86B,oBAIrB3M,QAAS,CACP,CAACtjB,IAAK,SAAUojB,UAAU,EAAM3jB,QAAS,UACzC,CAACO,IAAK,QAASukB,UAAU,EAAM9kB,QAAS,SAAU8Q,QAASpb,KAAK+6B,cAhD1EN,EAAA,CAA2B3uB,aA2DdqvB,GAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAAlzB,EAAAlI,OAAAC,EAAA,EAAAD,CAAAD,KAAAm7B,GAAA,QAAAG,EAAA5jB,UAAA5R,OAAAivB,EAAA,IAAAnd,MAAA0jB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAAxG,EAAAwG,GAAA7jB,UAAA6jB,GAAA,OAAApzB,EAAAlI,OAAA0d,EAAA,EAAA1d,CAAAD,MAAAq7B,EAAAp7B,OAAA2d,EAAA,EAAA3d,CAAAk7B,IAAAnG,KAAAhlB,MAAAqrB,EAAA,CAAAr7B,MAAA2G,OAAAouB,MACEyG,OAAS,WACPrzB,EAAKY,MAAMJ,OAAO6yB,UAFtBrzB,EAAA,OAAAlI,OAAA4d,EAAA,EAAA5d,CAAAk7B,EAAAC,GAAAn7B,OAAA6d,EAAA,EAAA7d,CAAAk7B,EAAA,EAAAtwB,IAAA,SAAAyH,MAAA,WAMI,OACE9H,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOrlB,GAAI,IAAKE,KAAM,UAAWV,QAAS,UAAW8Q,QAASpb,KAAKw7B,aAPzEL,EAAA,CAA4BrvB,aAgHbmnB,iNA/FbkG,kBAAoB,WAClB9nB,EAAKtI,MAAMJ,OAAOwwB,mBAAmB9nB,EAAKtI,MAAM3G,KAAKiE,sFAG9C,IAAA4Y,EAMHjf,KAAK+I,MAJPJ,EAFKsW,EAELtW,OAAQvG,EAFH6c,EAEG7c,KAFHq5B,EAAAxc,EAGLlc,UAAkBmyB,EAHbuG,EAGO50B,KAAiB7D,EAHxBy4B,EAGwBz4B,MAAO+D,EAH/B00B,EAG+B10B,OAAQI,EAHvCs0B,EAGuCt0B,QAASE,EAHhDo0B,EAGgDp0B,eAAgBhB,EAHhEo1B,EAGgEp1B,YAAae,EAH7Eq0B,EAG6Er0B,cAH7Es0B,EAAAzc,EAILrb,UAAY8D,EAJPg0B,EAIOh0B,OAAQE,EAJf8zB,EAIe9zB,UAAWC,EAJ1B6zB,EAI0B7zB,WAAYC,EAJtC4zB,EAIsC5zB,cAAgBmtB,EAJtDhW,EAIsDgW,eAAgB6C,EAJtE7Y,EAIsE6Y,qBAC3E7zB,EALKgb,EAKLhb,gBAEWkxB,EAAmBlxB,EAAzB4C,KAEP,OAAKzE,EAKHoI,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKxI,MAAN,CAAYT,UAAQ,GACjB/qB,EACCoI,EAAAC,EAAAzJ,cAACi4B,GAAD,CACEtwB,OAAQA,EACRqwB,UAAW52B,EACXA,KAAMA,EACNiF,eAAgBA,EAChByxB,iBAAkBzyB,EAClB0yB,mBAAoB3xB,IAEpB,MAENoD,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAD,CAAKT,KAAM,CAACilB,UAAU,GAAOlnB,MAAO,CAClC,CAAC0B,IAAK,UAAW4jB,MAAO,gBAAiBvG,MAAOxgB,EAAQ8mB,MAAO,SAC/D,CAAC3jB,IAAK,aAAc4jB,MAAO,mBAAoBvG,MAAOtgB,EAAW4mB,MAAO,SACxE,CAAC3jB,IAAK,UAAW4jB,MAAO,gBAAiBvG,MAAOrgB,GAChD,CAACgD,IAAK,aAAc4jB,MAAO,mBAAoBvG,MAAOpgB,IACtDd,OAAO,SAAA+O,GAAA,OAAAA,EAAEmS,MAAiBpiB,SAAQhE,IAAI,SAAAwU,GAAA,IAAEzL,EAAFyL,EAAEzL,IAAK4jB,EAAPnY,EAAOmY,MAAOvG,EAAd5R,EAAc4R,MAAOsG,EAArBlY,EAAqBkY,MAArB,MACtC,CAACnkB,SAAU,CAACQ,MAAKP,QAASE,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KAAWgjB,EAAX,IAAkBjkB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAAS4d,EAAMpiB,OAAQ0oB,MAAOA,MAAuBmN,OAAQ,kBAC9GnxB,EAAAC,EAAAzJ,cAAC46B,GAAD,CAAUx5B,KAAMA,EAAM8yB,UAAWA,EAAWC,gBAAiBA,EAAiBzxB,MAAOwkB,EAAO+M,eAAgBA,WAIlHzqB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC66B,GAAD,MACArxB,EAAAC,EAAAzJ,cAAA,WAAKwJ,EAAAC,EAAAzJ,cAAA,WACLwJ,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAD,CAAKT,KAAM,CAACilB,UAAU,GAAOlnB,MAAO,CAClC,CAAC0B,IAAK,UAAW4jB,MAAO,kCAAmCvG,MAAOjkB,EAAgBuE,gBAAiBgmB,MAAO,SAC1G,CAAC3jB,IAAK,aAAc4jB,MAAO,uCAAwCvG,MAAOjkB,EAAgByE,mBAAoB8lB,MAAO,SACrH,CAAC3jB,IAAK,UAAW4jB,MAAO,sBAAuBvG,MAAOjkB,EAAgB4D,YACtE,CAACgD,IAAK,aAAc4jB,MAAO,yBAA0BvG,MAAOjkB,EAAgB6D,gBAC5Ed,OAAO,SAAAwP,GAAA,OAAAA,EAAE0R,MAAiBpiB,SAAQhE,IAAI,SAAA2U,GAAA,IAAE5L,EAAF4L,EAAE5L,IAAK4jB,EAAPhY,EAAOgY,MAAOvG,EAAdzR,EAAcyR,MAAOsG,EAArB/X,EAAqB+X,MAArB,MACtC,CAACnkB,SAAU,CAACQ,MAAKP,QAASE,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KAAWgjB,EAAX,IAAkBjkB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAAS4d,EAAMpiB,OAAQ0oB,MAAOA,MAAuBmN,OAAQ,kBAC9GnxB,EAAAC,EAAAzJ,cAAC86B,GAAD,CACE15B,KAAMA,EACN8yB,UAAWA,EACXlxB,YAAakkB,EACb4P,qBAAsBA,WAK9BttB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAD,CAAKT,KAAM,CAACilB,UAAU,GAAOlnB,MAAO,CAClC,CAAC0B,IAAK,SAAU4jB,MAAO,eAAgBvG,MAAOnhB,EAAQynB,MAAO,SAC7D,CAAC3jB,IAAK,UAAW4jB,MAAO,gBAAiBvG,MAAO/gB,GAChD,CAAC0D,IAAK,MAAO4jB,MAAO,YAAavG,MAAOllB,IACxCgE,OAAO,SAAA0P,GAAA,OAAAA,EAAEwR,MAAiBpiB,SAAQhE,IAAI,SAAA8W,GAAA,IAAE/N,EAAF+N,EAAE/N,IAAK4jB,EAAP7V,EAAO6V,MAAOvG,EAAdtP,EAAcsP,MAAOsG,EAArB5V,EAAqB4V,MAArB,MACtC,CAACnkB,SAAU,CAACQ,MAAKP,QAASE,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KAAWgjB,EAAX,IAAkBjkB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAAS4d,EAAMpiB,OAAQ0oB,MAAOA,MAAuBmN,OAAQ,kBAC9GnxB,EAAAC,EAAAzJ,cAAC+6B,GAAD,CACEpzB,OAAQA,EACR3F,MAAOklB,EACP9lB,KAAMA,EACNiF,eAAgBA,EAChByxB,iBAAkBzyB,EAClB0yB,mBAAoB3xB,YA7DvBoD,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,uCAfOlwB,uBCnTdmwB,8MACJC,mBAAqB,CACnB,CAAC5pB,MAAO,GAAImc,MAAO,WACnB,CAACnc,MAAO,SAAUmc,MAAO,UACzB,CAACnc,MAAO,SAAUmc,MAAO,UACzB,CAACnc,MAAO,QAASmc,MAAO,YAE1B0N,mBAAqB,CACnB,CAAC7pB,MAAO,OAAQmc,MAAO,QACvB,CAACnc,MAAO,OAAQmc,MAAO,QACvB,CAACnc,MAAO,SAAUmc,MAAO,UACzB,CAACnc,MAAO,cAAemc,MAAO,QAC9B,CAACnc,MAAO,MAAOmc,MAAO,OACtB,CAACnc,MAAO,SAAUmc,MAAO,UACzB,CAACnc,MAAO,MAAOmc,MAAO,OACtB,CAACnc,MAAO,MAAOmc,MAAO,OACtB,CAACnc,MAAO,OAAQmc,MAAO,WAEzB2N,oBAAsB,CACpB,CAAC9pB,MAAO,GAAImc,MAAO,QACnB,CAACnc,MAAO,UAAWmc,MAAO,WAC1B,CAACnc,MAAO,SAAUmc,MAAO,UACzB,CAACnc,MAAO,cAAemc,MAAO,kBAGhC4N,eAAiB,SAAAC,GAAa,IACVr3B,EAAUlF,EAAKgJ,MAA1BvG,SAAWyC,MAClB,OACEuF,EAAAC,EAAAzJ,cAACu7B,GAAD,CAAgBpiB,QAAM,EAAC3X,SAAU,CAACyC,MAAMhF,OAAAsK,EAAA,EAAAtK,CAAA,GAAKgF,EAAN,CAAaI,YAAY,GAAUi3B,SAI9EE,qBAAuB,SAAC/3B,EAADkF,GAAkB,IAAb4lB,EAAa5lB,EAAb4lB,QAC1BxvB,EAAKgJ,MAAM0zB,eAAe,CAAC13B,gBAAiBwqB,OAG9CmN,0BAA4B,SAACj4B,EAADsP,GAAkB,IAAbwb,EAAaxb,EAAbwb,QAC/BxvB,EAAKgJ,MAAM0zB,eAAe,CAACz3B,oBAAqBuqB,OAGlDoN,0BAA4B,SAACl4B,EAADoF,GAAkB,IAAb0lB,EAAa1lB,EAAb0lB,QAC/BxvB,EAAKgJ,MAAM0zB,eAAe,CAACx3B,MAAO,CAACG,eAAgBmqB,QAGrDqN,iBAAmB,SAACn4B,EAADqF,GAAkB,IAAbylB,EAAazlB,EAAbylB,QACtBxvB,EAAKgJ,MAAM0zB,eAAe,CAACx3B,MAAO,CAACI,WAAYkqB,QAGjDsN,aAAe,SAACp4B,EAADoR,GAAkB,IAAb0Z,EAAa1Z,EAAb0Z,QAClBxvB,EAAKgJ,MAAM0zB,eAAe,CAACx3B,MAAO,CAACK,OAAQiqB,QAG7CuN,mBAAqB,SAACr4B,EAADsR,GAAgB,IAAXzD,EAAWyD,EAAXzD,MACxBvS,EAAKgJ,MAAM0zB,eAAe,CAACx3B,MAAO,CAACM,QAAS+M,QAG9CyqB,kBAAoB,SAACt4B,EAAD6R,GAAgB,IAAXhE,EAAWgE,EAAXhE,MACvBvS,EAAKgJ,MAAM0zB,eAAe,CAACx3B,MAAO,CAACE,OAAQmN,QAG7C0qB,kBAAoB,SAACv4B,EAAD+R,GAAgB,IAAXlE,EAAWkE,EAAXlE,MACvBvS,EAAKgJ,MAAM0zB,eAAe,CAACx3B,MAAO,CAACC,OAAQoN,8EAGpC,IAAA/L,EAAAvG,KAAAi9B,EAC2Dj9B,KAAK+I,MAAhEvG,SAAWuC,EADXk4B,EACWl4B,gBAAiBC,EAD5Bi4B,EAC4Bj4B,oBAAqBC,EADjDg4B,EACiDh4B,MADjDi4B,EAEwEj4B,EAAxEC,cAFA,IAAAg4B,EAES,OAFTA,EAEiB/3B,EAAuDF,EAAvDE,OAAQC,EAA+CH,EAA/CG,eAAgBC,EAA+BJ,EAA/BI,WAAYC,EAAmBL,EAAnBK,OAAQC,EAAWN,EAAXM,QAEpE,OACEiF,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAD,CAAKT,KAAM,CAACilB,UAAU,EAAM8M,UAAU,GAAQh0B,MAAO,CACnD,CAACkB,SAAU,UAAWsxB,OAAQ,kBAC5BnxB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAD,KACE7sB,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKzJ,MAAN,KACEpjB,EAAAC,EAAAzJ,cAACquB,GAAA,EAAD,CACEZ,MAAO,2BACPnsB,KAAM,kBACNitB,QAASxqB,EACT0iB,SAAUlhB,EAAKi2B,wBAGnBhyB,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKzJ,MAAN,KACEpjB,EAAAC,EAAAzJ,cAACquB,GAAA,EAAD,CACEZ,MAAO,uBACPnsB,KAAM,sBACNitB,QAASvqB,EACTyiB,SAAUlhB,EAAKm2B,iCAMzB,CAACryB,SAAU,QAASsxB,OAAQ,kBAC1BnxB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMuC,WAAS,EAAC7B,QAAS,QAASgQ,cAAe,UAC/C5yB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAaL,UAAW,UACrB3mB,EAAK81B,eAAe,CAACh3B,WAAYJ,EAAMI,eAG5CmF,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAD,CAAKT,KAAM,CAACilB,UAAU,EAAM8M,UAAU,GAAQh0B,MAAO,CACnD,CAACkB,SAAU,SAAUsxB,OAAQ,kBAC3BnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KACAxxB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMuC,WAAS,EAAC7B,QAAS,QAASgQ,cAAe,UAC/C5yB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAavN,MAAO,GAClBxV,EAAAC,EAAAzJ,cAACquB,GAAA,EAAD,CACEZ,MAAO,kBACPnsB,KAAM,uBACNitB,QAASnqB,EACTqiB,SAAUlhB,EAAKo2B,6BAGnBnyB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAakH,QAAS,QAASvH,UAAW,SACvC3mB,EAAK81B,eAAe,CAACj3B,gBAAgB,MAG1CoF,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAavN,MAAO,GAClBxV,EAAAC,EAAAzJ,cAACquB,GAAA,EAAD,CACEZ,MAAO,YACPnsB,KAAM,mBACNitB,QAASlqB,EACToiB,SAAUlhB,EAAKq2B,oBAGnBpyB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAakH,QAAS,QAASvH,UAAW,SACvC3mB,EAAK81B,eAAe,CAACh3B,YAAY,MAGtCmF,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAavN,MAAO,GAClBxV,EAAAC,EAAAzJ,cAACquB,GAAA,EAAD,CACEZ,MAAO,SACPnsB,KAAM,eACNitB,QAASjqB,EACTmiB,SAAUlhB,EAAKs2B,gBAGnBryB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAakH,QAAS,QAASvH,UAAW,SACvC3mB,EAAK81B,eAAe,CAAC/2B,QAAQ,MAGlCkF,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAaL,UAAW,UACtB1iB,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKC,MAAN,KAAY9sB,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,CAAQzjB,GAAI,MAAZ,cAGfvE,EAAK41B,mBAAmBr6B,IAAI,SAAAu7B,GAAM,OACjC7yB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,CAAU9hB,IAAG,gBAAAlE,OAAkB02B,EAAO/qB,QACpC9H,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAavN,MAAO,GAClBxV,EAAAC,EAAAzJ,cAACquB,GAAA,EAAD,CACEiO,OAAK,EACL7O,MAAO4O,EAAO5O,MACdnsB,KAAM,eACNgQ,MAAO+qB,EAAO/qB,MACdid,QAASrqB,IAAWm4B,EAAO/qB,MAC3BmV,SAAUlhB,EAAKy2B,qBAGnBxyB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAakH,QAAS,QAASvH,UAAW,SACvC3mB,EAAK81B,eAAe,CAACn3B,OAAQm4B,EAAO/qB,gBAO/C,CAACjI,SAAU,QAASsxB,OAAQ,kBAC1BnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KACExxB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMuC,WAAS,EAAC7B,QAAS,QAASgQ,cAAe,UAC9C72B,EAAK21B,mBAAmBp6B,IAAI,SAAAu7B,GAAM,OACjC7yB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,CAAU9hB,IAAG,gBAAAlE,OAAkB02B,EAAO/qB,QACpC9H,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAavN,MAAO,GAClBxV,EAAAC,EAAAzJ,cAACquB,GAAA,EAAD,CACEiO,OAAK,EACL7O,MAAO4O,EAAO5O,MACdnsB,KAAM,eACNgQ,MAAO+qB,EAAO/qB,MACdid,QAASpqB,IAAWk4B,EAAO/qB,MAC3BmV,SAAUlhB,EAAKw2B,qBAGnBvyB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAakH,QAAS,QAASvH,UAAW,SACvC3mB,EAAK81B,eAAe,CAACl3B,OAAQk4B,EAAO/qB,gBAOjD,CAACjI,SAAU,mBAAoBsxB,OAAQ,kBACrCnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KACExxB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMuC,WAAS,EAAC7B,QAAS,QAASgQ,cAAe,UAC9C72B,EAAK61B,oBAAoBt6B,IAAI,SAAAu7B,GAAM,OAClC7yB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,CAAU9hB,IAAG,iBAAAlE,OAAmB02B,EAAO/qB,QACrC9H,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAavN,MAAO,GAClBxV,EAAAC,EAAAzJ,cAACquB,GAAA,EAAD,CACEiO,OAAK,EACL7O,MAAO4O,EAAO5O,MACdnsB,KAAM,gBACNgQ,MAAO+qB,EAAO/qB,MACdid,QAAShqB,IAAY83B,EAAO/qB,MAC5BmV,SAAUlhB,EAAKu2B,sBAGnBtyB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAakH,QAAS,QAASvH,UAAW,SACvC3mB,EAAK81B,eAAe,CAAC92B,QAAS83B,EAAO/qB,kCAhNtCxG,aA+RfmnB,iNAxDb9S,MAAQ,CACN/d,KAAM,KACNI,SAAU1C,EAAO6E,wBAcnB83B,eAAiB,SAAA1kB,GACfzQ,EAAKkgB,SAAS,SAAArH,GAAK,MAAK,CACtB3d,SAASvC,OAAAsK,EAAA,EAAAtK,CAAA,GACJkgB,EAAM3d,SACNuV,EAFG,CAGN9S,MAAMhF,OAAAsK,EAAA,EAAAtK,CAAA,GACDkgB,EAAM3d,SAASyC,MACf8S,EAAO9S,eAMlBs4B,KAAO,WACLj2B,EAAKyB,MAAMJ,OAAO8zB,eAAen1B,EAAK6Y,MAAM3d,mFAGrC,IACAA,EAAYxC,KAAKmgB,MAAjB3d,SAEP,OACEgI,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACEC,QAASvjB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAOrlB,GAAI,IAAKE,KAAM,MAAOV,QAAS,aAC/C2d,KAAM,QACNiG,OAAQ,WACRC,QAAS,CACP,CAACtjB,IAAK,SAAUP,QAAS,UACzB,CAACO,IAAK,OAAQP,QAAS,OAAQ8kB,UAAU,EAAMhU,QAASpb,KAAKu9B,OAE/DjzB,QAAS,CAACkzB,WAAW,EAAMlzB,QAASE,EAAAC,EAAAzJ,cAACy8B,GAAD,CAAiBj7B,SAAUA,EAAUi6B,eAAgBz8B,KAAKy8B,uEAxCpE1zB,EAAOoX,GACrC,OAAIpX,EAAM3G,MAAQ2G,EAAM3G,OAAS+d,EAAM/d,KAC9B,CACLA,KAAM2G,EAAM3G,KACZI,SAAUuG,EAAM3G,KAAKI,UAAY1C,EAAO6E,sBAIrC,UAdYmH,cC/NjB4xB,oLACK,IAEHC,EAAeC,EAFZ10B,EACgBlJ,KAAK+I,MAArBvB,EADA0B,EACA1B,KAAM6H,EADNnG,EACMmG,OAET7H,EACEA,EAAKq2B,eAAe58B,KAAOoO,EAAOpO,IACpC08B,EAAgBn2B,EAAKq2B,eACrBD,EAAuBp2B,EAAKs2B,uBACnBt2B,EAAKu2B,eAAe98B,KAAOoO,EAAOpO,IAC3C08B,EAAgBn2B,EAAKu2B,eACrBH,EAAuBp2B,EAAKw2B,wBAE5BL,EAAgB,KAChBC,EAAuB,OAGzBD,EAAgB,KAChBC,EAAuB,MAEzB,IAAMK,EAAWz2B,GAAQA,EAAK4wB,eAAiB/oB,EAAOpO,GACtD,OACEuJ,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACGwyB,EAAWzzB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,SAAUksB,MAAO,UAAc,KAAM,IAC7DhkB,EAAAC,EAAAzJ,cAAA,QAAM+a,MAAOkiB,EAAW,CAACzP,MAAO,gBAAatkB,GAC1CmF,EAAO/M,KACPq7B,IAAkBn2B,EAAK8tB,aACtB9qB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACG,IADH,IACSmyB,EACLpzB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACGwyB,EAAQ,IAAAt3B,OAAOg3B,EAAcO,WAAcP,EAAcQ,WACzD,IAAI3zB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,+BAAiC,IACjDs7B,GAGHpzB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACGkyB,EAAc7D,MACd,IAFH,IAES6D,EAAcO,UAFvB,IAEmCP,EAAcQ,YAVrD,KAcE,MAEN3zB,EAAAC,EAAAzJ,cAACw1B,GAAD,CAAY/B,QAAS,QAASxM,KAAM,OAAQsM,KAAMllB,EAAOpO,aA1ClC6K,aAqDzBsyB,8MACJje,MAAQ,CACNwK,aAAc,QAGhB0T,aAAeC,aAAe,CAC5B,SAAAv1B,GAAK,OAAIA,EAAMD,MAAMy1B,OAAOt9B,IAC5B,SAAA8H,GAAK,OAAIA,EAAMnF,UAAUiD,OACxB,SAAC23B,EAAQC,GAAT,OAAuBA,EAAUD,OAMpCE,oBAAsBJ,aAAe,CACnC,SAAAv1B,GAAK,OAAIA,EAAM3G,MACf,SAAA2G,GAAK,OAAIA,EAAMhG,WACf,kBAAMhD,EAAKyH,OACV,SAACpF,EAADuH,EAA0BnC,GAAS,IAArB0tB,EAAqBvrB,EAA3B9C,KACH4uB,EAAUP,EAAU1tB,EAAKG,QAAQ,IACjC+tB,EAAUR,EAAU1tB,EAAKG,QAAQ,IACjCmuB,IAAgB1zB,GAAOqzB,EAAQx0B,KAAOmB,EAAKnB,GAC3C80B,IAAgB3zB,GAAOszB,EAAQz0B,KAAOmB,EAAKnB,GAIjD,MAAO,CACLw0B,UAASC,UACTI,gBAAeC,gBACf4I,WANiB7I,EAAgB3pB,EAAKqB,SAAWuoB,EAAgB5pB,EAAK0D,SAAW,KAMrEmpB,UALIlD,EAAgBJ,EAAUK,EAAgBN,EAAU,UAaxEmJ,iBAAmBN,aAAe,CAChC,kBAAMv+B,EAAKyH,OACV,SAAAA,GAAI,OAAIA,EAAO2E,EAAKqpB,YAAYhuB,EAAKA,MAAQ,SAMhDq3B,oBAAsB,WACpB9+B,EAAKgJ,MAAMksB,eAAe,SAG5BpK,OAAS,SAAA7iB,GACPjI,EAAKgJ,MAAMJ,OAAOm2B,eAAe/+B,EAAKyH,KAAMQ,MAiB9C+2B,MAAQ,WACNh/B,EAAKgJ,MAAMksB,eAAe,SAG5BxJ,eAAiB,SAAAjpB,GACfzC,EAAKgJ,MAAMJ,OAAO8zB,eAAej6B,MAGnCw8B,UAAY,SAAAv6B,GACV,IAAMuE,EAAMjJ,EAAKgJ,MAAMtH,SAAS0I,SAChC,GAAImpB,UAAUD,MAAO,CACnB,IAAM7rB,EAAOzH,EAAKyH,KADCy3B,EAEQl/B,EAAKm/B,YAAzBzJ,EAFYwJ,EAEZxJ,QAASC,EAFGuJ,EAEHvJ,QAChBpC,UAAUD,MAAM,CACdE,MAAK,kBAAA5sB,OAAoBa,EAAKC,SAAW,SAAW,OAA/C,KAAAd,OAAyD8uB,EAAQnzB,KAAjE,QAAAqE,OAA4E+uB,EAAQpzB,MACzF8vB,KAAI,GAAAzrB,OAAKa,EAAKC,SAAU,kBAAmB,aAAvC,4BAAAd,OAA8E8uB,EAAQnzB,KAAtF,SAAAqE,OAAkG+uB,EAAQpzB,MAC9G0G,QACCwqB,MAAM,WACPC,GAAsBzqB,GACtB0qB,MAAM,mCAGRD,GAAsBzqB,GACtB0qB,MAAM,4BAERjvB,EAAE06B,oBAGJ/F,cAAgB,WAAM,IACbJ,EAAaj5B,EAAKm/B,YAAlBlG,UACHA,GACFj5B,EAAKgJ,MAAMJ,OAAOwwB,kBAAkBH,EAAU/3B,OAIlDm+B,kBAAoB,WAClBr/B,EAAKgJ,MAAMJ,OAAOwwB,mBAAkB,MAGtClO,qBAAuB,SAAAN,GACrB5qB,EAAKynB,SAAS,CAACmD,oBAGjB0U,iBAAmB,WACjB5L,IAAuB1zB,EAAKogB,MAAMwK,cAAgB5qB,EAAKogB,MAAM3Y,MAAM6G,kBACnEqlB,MAAM,yHA1DN,IAAMlsB,EAAOxH,KAAKwH,KACdA,GACFxH,KAAK+I,MAAMksB,eAAeztB,gDAK5B,IAAMA,EAAOxH,KAAKwH,KACdA,GACFxH,KAAK+I,MAAMksB,eAAeztB,oCAoDrB,IAAAuM,EAAA7I,EAKHlL,KAAK+I,MAHPtH,EAFKyJ,EAELzJ,SAAUW,EAFL8I,EAEK9I,KAAMuG,EAFXuC,EAEWvC,OAAQnB,EAFnB0D,EAEmB1D,KAAMytB,EAFzB/pB,EAEyB+pB,eAFzBqK,EAAAp0B,EAGLnI,UAAYsE,EAHPi4B,EAGOj4B,eAAsB6tB,EAH7BoK,EAGuBz4B,KAHvB04B,EAAAr0B,EAGyCtH,UAAuB47B,EAHhED,EAGqD33B,UAAmC63B,EAHxFF,EAGgF73B,OAC7DytB,EAJnBjqB,EAILjH,gBAAkB4C,KAEb8jB,EAAgB3qB,KAAKmgB,MAArBwK,aACA4K,EAAYv1B,KAAZu1B,SAEP,IAAKA,EACH,OACE/qB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACE6F,MAAM,EACN1L,KAAM,OACN2L,QAAS5zB,KAAK6+B,oBACd3Q,OAAQ,sBACR5jB,QAAS,wGACT6jB,QAAS,CAAC,CAACtjB,IAAK,KAAMP,QAAS,KAAM8kB,UAAU,MAPnD,uBAXG,IAAAsQ,EAyByE1/B,KAAKk/B,YAA9ElG,EAzBA0G,EAyBA1G,UAAWvD,EAzBXiK,EAyBWjK,QAASC,EAzBpBgK,EAyBoBhK,QAASI,EAzB7B4J,EAyB6B5J,cAAeC,EAzB5C2J,EAyB4C3J,cAAe4I,EAzB3De,EAyB2Df,WAClE,IAAKlJ,IAAYC,EACf,OAAO,KAGT,IAAMiK,EACJn1B,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC46B,GAAD,CACEx5B,KAAMA,EACN6yB,eAAgBA,EAChBvxB,MAAO+7B,EACPvK,UAAWA,EACXC,gBAAiBA,EACjBC,OAAK,EACL7tB,MAAI,EACJ8tB,cAAe7tB,EAAOA,EAAKvG,GAAK,OAEjCu+B,EAAe15B,OACd0E,EAAAC,EAAAzJ,cAAC46B,GAAD,CACEx5B,KAAMA,EACN6yB,eAAgBA,EAChBvxB,MAAO87B,EACPtK,UAAWA,EACXC,gBAAiBA,EACjBC,OAAK,EACL7tB,MAAI,EACJ8tB,cAAe7tB,EAAOA,EAAKvG,GAAK,OAEhC,MAGFiH,EAAaV,EAAO2tB,EAAgB3tB,EAAK8tB,cAAgB,KAE/D,OACE9qB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAC4+B,GAAD,MACAp1B,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMS,UAAQ,GACZ3iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0J,EAAA,EAAD,CAAMukB,WAAS,EAAChH,KAAM,UAAWmG,UAAQ,EAAClG,MAAO,CAC/C,CAACrd,IAAK,QAASP,QAAS,QAASU,KAAM,IAAKoQ,QAASpb,KAAK++B,MAAOvQ,MAAO,MAAOqF,QAAQ,GACvF,CAAChpB,IAAK,QAASP,QAAS,aAAcU,KAAM,QAASoQ,QAASpb,KAAKg/B,UAAWl0B,GAAIC,IAChFhB,GAAItI,EAAS0I,SAAUqkB,MAAO,QAASqF,QAAQ,EAC/CN,MAAOD,UAAUD,MAAQ,iCAAmC,6BAC9D,CAACxoB,IAAK,OAAQP,QAAS,gBAAiBU,KAAM,UAAWF,GAAIC,IAC3DhB,GAAE,qBAAApD,QAAwBgkB,GAAgB4K,GAAUtnB,wBAA0BugB,MAAO,QAASqF,QAAQ,EACtGN,MAAO,uCAAwC6G,OAAQ,UACzD30B,gLAAYo6B,gBAAkB,CAACh1B,IAAK,OAAQP,QAAS,gBAAiBU,KAAM,OAAQF,GAAIC,IACtFhB,GAAE,2BAAApD,QAA8BgkB,GAAgB4K,GAAUlnB,kBAAoBmgB,MAAO,QAASqF,QAAQ,EACtGN,MAAO,2CAA4C6G,OAAQ,UAAY,KACzE30B,gLAAYo6B,gBAAkB,CAACh1B,IAAK,YAAaG,KAAM,YAAaV,QAAS,qBAAsBkkB,MAAO,QAASqF,QAAQ,EACzHN,MAAO,0CAA2CnY,QAASpb,KAAKq/B,kBAAoB,MACtFr4B,OAAO,SAAAwoB,GAAI,OAAIA,OAEnBhlB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0J,EAAA,EAAD,CAAMukB,WAAS,EAAChH,KAAM,UAAWC,MAAO,CACtC,CAACrd,IAAK,WAAYP,QAChBE,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACGqqB,EAAgBtrB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAO,QAASxjB,KAAM,OAAQV,QAAS,OAAW,KAC1EE,EAAAC,EAAAzJ,cAAC8+B,GAAD,CAAkBt4B,KAAMA,EAAM6H,OAAQomB,KAEvCjH,MAAOsH,EAAgB,aAAU5rB,GACpC,CAACW,IAAK,WAAYP,QAChBE,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACGsqB,EAAgBvrB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAO,QAASxjB,KAAM,OAAQV,QAAS,OAAW,KAC1EE,EAAAC,EAAAzJ,cAAC8+B,GAAD,CAAkBt4B,KAAMA,EAAM6H,OAAQqmB,KAEvClH,MAAOuH,EAAgB,aAAU7rB,GACpChC,EAAa,CAAC2C,IAAK,aAAcP,QAC/BE,EAAAC,EAAAzJ,cAAC++B,EAAA,EAAD,CAASh2B,GAAE,eAAApD,OAAiBuB,EAAWjH,KACrCuJ,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,YADd,IAC6B4F,EAAW5F,MAEvCwI,GAAI,QAAU,MACjB9D,OAAO,SAAAwoB,GAAI,OAAIA,QAGrBhlB,EAAAC,EAAAzJ,cAACqsB,GAAA,EAAD,CAAYviB,GAAI0iB,WAAUC,SAAU,KACjCkS,GAEHn1B,EAAAC,EAAAzJ,cAAC+yB,GAAD,CACE3xB,KAAMA,EACN8pB,gBAAiBvjB,EAAOnG,SACxBw2B,UAAWA,EACXvN,eAAgBzrB,KAAKyrB,eACrBjkB,KAAM+tB,EACNnJ,UAAW5kB,EACX2kB,OAAKpY,EAAA,GAAA9T,OAAAoT,EAAA,EAAApT,CAAA8T,EAAI5H,EAAKqB,SAAWioB,EAAQnzB,MAA5BrC,OAAAoT,EAAA,EAAApT,CAAA8T,EAAmC5H,EAAK0D,SAAW6lB,EAAQpzB,MAA3DyR,GACLkN,aAAc,CAAC0d,GAAY33B,OAAO,SAAAqI,GAAM,OAAIA,IAC5Cwb,OAAQ7qB,KAAK6qB,OACbuO,cAAep5B,KAAKo5B,cACpBgG,kBAAmBp/B,KAAKo/B,kBACxB/3B,eAAgBA,EAChB4jB,qBAAsBjrB,KAAKirB,sBAE3BzgB,EAAAC,EAAAzJ,cAACqsB,GAAA,EAAD,CAAYviB,GAAI4hB,KAAKC,IAAKW,SAAU,KACjCqS,kCA/NT,OAAO3/B,KAAKq+B,aAAar+B,KAAK+I,2CAuB9B,OAAO/I,KAAK0+B,oBAAoB1+B,KAAK+I,wCAQrC,OAAO/I,KAAK4+B,iBAAiB5+B,KAAK+I,cA1CP+C,aA8P/BsyB,GAAmBpyB,YAAWinB,GAAWmL,SAEnC4B,8MACJpB,iBAAmBN,aAAe,CAChC,SAAAv1B,GAAK,OAAIA,EAAMvB,OACd,SAAAA,GAAI,OAAIA,EAAO2E,EAAKqpB,YAAYhuB,EAAKA,MAAQ,+EAMvC,IAAA2W,EAIHne,KAAK+I,MAFPksB,EAFK9W,EAEL8W,eAAgBztB,EAFX2W,EAEW3W,KAAMpF,EAFjB+b,EAEiB/b,KAAkByE,EAFnCsX,EAEuBpb,UAAY8D,KAFnCo5B,EAAA9hB,EAE0Cva,UAAY8D,EAFtDu4B,EAEsDv4B,OAAQE,EAF9Dq4B,EAE8Dr4B,UAAWC,EAFzEo4B,EAEyEp4B,WAAYC,EAFrFm4B,EAEqFn4B,cAClEqtB,EAHnBhX,EAGLla,gBAAkB4C,KAEpB,IAAK5G,OAAO4f,OAAOhZ,GAAMf,OACvB,OAAO,KAET,IAAMyvB,EAAWv1B,KAAKu1B,SACtB,OACE/qB,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,KACElB,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,CAAOC,OAAK,EAAC9C,KAAM7I,KAAK+I,MAAMD,MAAMD,MAClC2B,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAD,CAAKT,KAAM,CAACilB,UAAU,GAAOlnB,MAAO,CAClC,CAAC0B,IAAK,UAAW4jB,MAAO,gBAAiBvG,MAAOxgB,EAAQ8mB,MAAO,SAC/D,CAAC3jB,IAAK,aAAc4jB,MAAO,mBAAoBvG,MAAOtgB,EAAW4mB,MAAO,SACxE,CAAC3jB,IAAK,UAAW4jB,MAAO,gBAAiBvG,MAAOrgB,GAChD,CAACgD,IAAK,aAAc4jB,MAAO,mBAAoBvG,MAAOpgB,IACtDd,OAAO,SAAA6C,GAAA,OAAAA,EAAEqe,MAAiBpiB,SAAQhE,IAAI,SAAAgI,GAAA,IAAEe,EAAFf,EAAEe,IAAK4jB,EAAP3kB,EAAO2kB,MAAOvG,EAAdpe,EAAcoe,MAAOsG,EAArB1kB,EAAqB0kB,MAArB,MACtC,CAACnkB,SAAU,CAACQ,MAAKP,QAASE,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KAAWgjB,EAAX,IAAkBjkB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAAS4d,EAAMpiB,OAAQ0oB,MAAOA,MAAuBmN,OAAQ,kBAC9GnxB,EAAAC,EAAAzJ,cAAC46B,GAAD,CAAUx5B,KAAMA,EAAM8yB,UAAWruB,EAAMsuB,gBAAiBA,EAAiBzxB,MAAOwkB,EAAO+M,eAAgBA,YAK/GzqB,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,CAAO7C,KAAI,GAAAlC,OAAK3G,KAAK+I,MAAMD,MAAMD,KAAtB,SACT2B,EAAAC,EAAAzJ,cAACk/B,GAAD,CAAkB14B,KAAMA,EAAM+tB,SAAUA,EAAUN,eAAgBA,uCA7BxE,OAAOj1B,KAAK4+B,iBAAiB5+B,KAAK+I,cANb+C,aAqDVE,eAAWinB,GAAW+M,6CCtXtBG,GAAA,CACbC,cC8BoB,eA9BpB,SAAAC,IAAc,IAAAtgC,EAAAC,KAAAC,OAAAC,EAAA,EAAAD,CAAAD,KAAAqgC,GAAArgC,KAKd6C,OAAS,SAAAT,GACPrC,EAAKqC,KAAOA,GALZpC,KAAKoC,KAAOuG,EAAOvG,KACnBuG,EAAOkqB,UAAU,CAAChwB,OAAQ7C,KAAK6C,wLAQ3BxC,OAAOigC,cAAmD,WAAnCjgC,OAAOigC,aAAaC,2CACvClgC,OAAOigC,aAAaE,gRAKvBxgC,KAAKoC,MAASpC,KAAKoC,KAAKI,SAASwC,qFAGhChF,KAAKwgC,2BACX,GAAIngC,OAAOigC,cAAmD,YAAnCjgC,OAAOigC,aAAaC,WAC7C,IACEtgC,OAAAwgC,GAAA,EAAAxgC,CAAIqgC,aAAJ1oB,MAAA8oB,UAAAh6B,MAAAsuB,KAAA2L,IACA,MAAOl8B,GACP/D,QAAQsrB,MAAM,8BAA+BvnB,mICV/Cm8B,sNACJC,mBAAqBvC,aAAe,CAClC,SAAAv1B,GAAK,OAAIA,EAAMD,MAAMy1B,OAAOt9B,IAC5B,SAAA8H,GAAK,OAAIA,EAAM9E,gBAAgB4C,OAC9B,SAACyuB,EAAcH,GAAf,OAAmCA,EAAgBG,OAMtDwL,0BAA4B,WAC1B/gC,EAAKgJ,MAAM+uB,qBAAqB,SAiBlCiH,MAAQ,WACNh/B,EAAKgJ,MAAM+uB,qBAAqB,SAGlCiJ,gBAAkB,SAAAt8B,GAChB,IAAMuE,EAAMjJ,EAAKgJ,MAAMtH,SAAS0I,SAChC,GAAImpB,UAAUD,MAAO,KACZnrB,EADYjI,OAAA+gC,GAAA,EAAA/gC,CAAAF,GACZmI,WACPorB,UAAUD,MAAM,CACdE,MAAK,kBAAA5sB,OAAoBuB,EAAWG,QAAWH,EAAWT,SAAW,OAAS,OAAU,SAAnF,gBAAAd,OAA0GuB,EAAW5F,MAC1H8vB,KAAI,GAAAzrB,OAAKuB,EAAWG,QAAWH,EAAWT,SAAW,cAAgB,aAAgB,SAAjF,0BAAAd,OAAkHuB,EAAW5F,MACjI0G,QACCwqB,MAAM,WACPC,GAAsBzqB,GACtB0qB,MAAM,mCAGRD,GAAsBzqB,GACtB0qB,MAAM,4BAERjvB,EAAE06B,oBAGJ8B,oBAAsB,WAAM,IACnB/4B,EADmBjI,OAAA+gC,GAAA,EAAA/gC,CAAAF,GACnBmI,WACPnI,EAAKgJ,MAAMk4B,oBAAoB/4B,MAGjCg5B,gBAAkB,WAAM,IACfh5B,EADejI,OAAA+gC,GAAA,EAAA/gC,CAAAF,GACfmI,WACPnI,EAAKgJ,MAAMm4B,gBAAgBh5B,MAG7Bi5B,gBAAkB,WAAM,IACfj5B,EADejI,OAAA+gC,GAAA,EAAA/gC,CAAAF,GACfmI,WACPnI,EAAKgJ,MAAMo4B,gBAAgBj5B,uFAjDT,IACXA,EAAclI,KAAdkI,WACHA,GACFlI,KAAK+I,MAAM+uB,qBAAqB5vB,gDAIf,IACZA,EAAclI,KAAdkI,WACHA,GACFlI,KAAK+I,MAAM+uB,qBAAqB5vB,oCA0C3B,IAAAgB,EAIHlJ,KAAK+I,MAFPtH,EAFKyH,EAELzH,SAAUW,EAFL8G,EAEK9G,KAAM6yB,EAFX/rB,EAEW+rB,eACEC,EAHbhsB,EAGLnG,UAAY8D,KAAoC43B,EAH3Cv1B,EAGyBtF,UAAYiD,KAE/BsuB,EALNjsB,EAGuDjF,gBAEvD4C,KACAqB,EAAclI,KAAdkI,WAEP,IAAKA,EACH,OACEsC,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACE6F,MAAM,EACN1L,KAAM,OACN2L,QAAS5zB,KAAK8gC,0BACd5S,OAAQ,4BACR5jB,QAAS,oHACT6jB,QAAS,CAAC,CAACtjB,IAAK,KAAMP,QAAS,KAAM8kB,UAAU,MAPnD,6BAcJ,IAAMgS,EAAUn+B,IAAEC,QAAQgF,EAAWP,QAAQ7F,IAAI,SAAAu/B,GAAW,OAAInM,EAAUmM,KAAe,CACvF,SAAAj/B,GAAI,OAAI8F,EAAWo5B,UAAYp5B,EAAWo5B,UAAUl/B,EAAKnB,IAAIsgC,OAAS,GACtE,SAAAn/B,GAAI,OAAI8F,EAAWo5B,UAAYp5B,EAAWo5B,UAAUl/B,EAAKnB,IAAIugC,aAAa1H,MAAQ,GAClF,MACC,CAAC,OAAQ,OAAQ,SACd9B,IAAiB51B,GAAO8F,EAAWP,QAAQV,SAAS7E,EAAKnB,IACzDg3B,IAAiB71B,GAAO8F,EAAWgwB,gBAAkB91B,EAAKnB,GAEhE,OACEuJ,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMS,UAAQ,GACZ3iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0J,EAAA,EAAD,CAAMukB,WAAS,EAAChH,KAAM,UAAWmG,UAAQ,EAAClG,MAAO,CAC/C,CAACrd,IAAK,QAASP,QAAS,QAASU,KAAM,IAAKoQ,QAASpb,KAAK++B,MAAOvQ,MAAO,MAAOqF,QAAQ,GACvF,CAAChpB,IAAK,QAASP,QAAS,mBAAoBU,KAAM,QAASoQ,QAASpb,KAAK+gC,gBAAiBj2B,GAAIC,IAC5FhB,GAAItI,EAAS0I,SAAUqkB,MAAO,QAASqF,QAAQ,EAC/CN,MAAOD,UAAUD,MAAQ,iCAAmC,wCAIpE7oB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAUC,MAAX,CAAiBC,OAAQ,QAAS5F,KAAM,QACtCzd,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CACErb,MAAOpK,EAAWG,QAAWH,EAAWT,SAAW,WAAtB,GAAAd,OAAsCuB,EAAWqwB,MAAjD,KAAA5xB,OAA0DuB,EAAWswB,QAAY,UAC9G/J,MAAOvmB,EAAWG,QAAWH,EAAWT,SAAW,SAAW,SAAY,WAE5E+C,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CACErb,MAAOpK,EAAWP,QAAQ7B,OAC1B2oB,MAAO,UAETjkB,EAAAC,EAAAzJ,cAAC2sB,GAAA,EAAD,CACErb,MAAOpK,EAAWgvB,UAClBzI,MAAO,6BAGXjkB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMU,QAAS,SACb5iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAaL,UAAW,QAAQ1iB,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQC,UAAQ,EAAC7S,QAASpb,KAAK++B,OAA/B,UAChCv0B,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,KACE/iB,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CACEoB,UAAQ,EACRpkB,MAAI,EACJoQ,QAASpb,KAAK+gC,gBACdhlB,MAAO,CAACiE,MAAO,QACflV,GAAIC,IACJhB,GAAItI,EAAS0I,SACbopB,MAAOD,UAAUD,MAAQ,iCAAmC,mCAE5D7oB,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,UATd,wBAcJ4F,EAAWG,QAyCT,KAxCFmC,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMU,QAAS,SACb5iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAaL,UAAW,QACtB1iB,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CACE7F,SAAUjgB,EAAWG,QACrB0T,MAAO,CAACiE,MAAO,QACfwO,MAAOwJ,EAAiB,SAAW,QACnC5c,QAASpb,KAAKihC,qBAEb/4B,EAAWG,QAAU,KAAOmC,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM01B,EAAiB,YAAc,SACvEA,EAAiB,gBAChB9vB,EAAWG,QACTH,EAAWT,SAAW,sBAAwB,qBAC5C,wBAIV+C,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,KACE/iB,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CACE7F,UAAW8P,GAAkBmJ,EAAQt7B,OAAS,GAAKoC,EAAWG,QAC9D+mB,UAAQ,EACRpkB,MAAI,EACJoQ,QAASpb,KAAKkhC,gBACdnlB,MAAO,CAACiE,MAAO,QACfwO,MAAO4S,EAAQt7B,QAAU,GAAKmyB,EAAiB,QAAsB,UAEpE/vB,EAAWT,SAAY,KACtB+C,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM8+B,EAAQt7B,QAAU,EAAKmyB,EAAiB,OAAS,YAAe,SAE7E/vB,EAAWG,QACVH,EAAWT,SAAW,WAAa,UAEnC25B,EAAQt7B,QAAU,EAChBmyB,EAAiB,mBAAqB,kCACpC,kCAOhBztB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACG/kB,EAAWG,QACVmC,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAD,CAAKT,KAAM,CAACilB,UAAU,EAAM8M,UAAU,GAAQh0B,MAAO,CACnD,CAACkB,SAAU,WAAYsxB,OAAQ,kBAC7BnxB,EAAAC,EAAAzJ,cAACygC,GAAA,EAAD,CAAOC,QAAM,EAACC,YAAU,EAACC,aAAW,GAClCp3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMlT,OAAP,KACE/jB,EAAAC,EAAAzJ,cAACygC,GAAA,EAAM9U,IAAP,KACGzkB,EAAWT,SAAW+C,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,UAAyC,KAChEr3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,aACAr3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,aACAr3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,mBACAr3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,uBACC35B,EAAWG,UAAYH,EAAWT,SAAW+C,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,aAA4C,KACzF35B,EAAWT,SAAW+C,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,yBAAwD,OAGnFr3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMK,KAAP,KACGV,EAAQt/B,IAAI,SAAAuN,GACX,IAAM0yB,EAAQ75B,EAAWo5B,UAAUjyB,EAAOpO,IAC1C,OACEuJ,EAAAC,EAAAzJ,cAACygC,GAAA,EAAM9U,IAAP,CAAW9hB,IAAKwE,EAAOpO,IACpBiH,EAAWT,SACV+C,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,KAAa6hB,EAAMz+B,MAAQ,EACzBkH,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CACEj0B,KAAM,CAAC4f,EAAG,SAAUC,EAAG,cAAeC,EAAG,eAAe2f,EAAMz+B,MAC9DkrB,MAAO,CAACtM,EAAG,SAAUC,EAAG,OAAQC,EAAG,SAAS2f,EAAMz+B,QAElD,MACF,KACJkH,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,KAAa6hB,EAAMz+B,MACnBkH,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,KACE1V,EAAAC,EAAAzJ,cAACw1B,GAAD,CAAY/B,QAAS,OAAQxM,KAAM,OAAQsM,KAAMllB,EAAOpO,KACvDoO,EAAO/M,MAEVkI,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,KAAa6hB,EAAMR,SAAWQ,EAAMC,YAAcD,EAAMR,OAA3C,GAAA56B,OAAuDo7B,EAAMC,YAA7D,MAAAr7B,OAA6Eo7B,EAAMR,OAAnF,MACb/2B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,KAAa6hB,EAAMP,aAAaS,eAAeC,QAAQ,IACtDh6B,EAAWG,UAAYH,EAAWT,SACjC+C,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,KAAa6hB,EAAMI,oBAAsB,yBACvCJ,EAAM1M,cACJ7qB,EAAAC,EAAAzJ,cAACi2B,GAAD,CACE70B,KAAM,KACN8yB,UAAWA,EACXC,gBAAiBA,EACjB3tB,KAAMi3B,EAAUsD,EAAM1M,eACtBJ,eAAgBA,EAChBG,OAAK,EACL7tB,MAAI,IAEJ,YAEJ,KACHW,EAAWT,SACV+C,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,KAAa6hB,EAAMK,gBAAkB,EAAxB,IAAAz7B,OAAgCo7B,EAAMK,iBAAoBL,EAAMK,iBAC3E,YAOhB,CAAC/3B,SAAU,QAASsxB,OAAQ,kBAC1BnxB,EAAAC,EAAAzJ,cAACygC,GAAA,EAAD,CAAOC,QAAM,EAACC,YAAU,EAACC,aAAW,GAClCp3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMlT,OAAP,KACE/jB,EAAAC,EAAAzJ,cAACygC,GAAA,EAAM9U,IAAP,KACEniB,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,CAAkBQ,QAAS,GAA3B,SACA73B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,CAAkBQ,QAAS,GAA3B,SACA73B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,eAGH35B,EAAWo6B,SAASxgC,IAAI,SAACy2B,EAAOgK,GAAR,OACvB/3B,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,CAAUZ,IAAK03B,GACb/3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMlT,OAAP,KACE/jB,EAAAC,EAAAzJ,cAACygC,GAAA,EAAM9U,IAAP,KACEniB,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,CAAkBQ,QAAS,GAAmB,YAAf9J,EAAMr3B,KAAqB,cAAgB,KAA1E,SAAsFq3B,EAAMA,SAGhG/tB,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMK,KAAP,KACGvJ,EAAMiK,SAAS1gC,IAAI,SAAA6H,EAA4C84B,GAAc,IAAAC,EAAAziC,OAAA2J,EAAA,EAAA3J,CAAA0J,EAAxDhC,QAAwD,GAA9Cg7B,EAA8CD,EAAA,GAAnCE,EAAmCF,EAAA,GAAvBlE,EAAuB70B,EAAvB60B,OAC/Ch3B,EAAOi3B,EAAUD,GACjBqE,EAAar7B,GAAQA,EAAKC,UAAYD,EAAK4wB,eAAiBuK,EAC5DG,EAAat7B,GAAQA,EAAKC,UAAYD,EAAK4wB,eAAiBwK,EAClE,OACEp4B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAM9U,IAAP,CAAW9hB,IAAK43B,GACdj4B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,CAAY5U,UAAWiP,IAAW,kBAAmB,WAAY,CAACwoB,eAAgBF,EAAYG,eAAgBF,KAC3GH,EACCn4B,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAACw1B,GAAD,CAAY/B,QAAS,OAAQxM,KAAM,OAAQsM,KAAMoO,IAChDzN,EAAUyN,GAAWrgC,MAEtB,0BAENkI,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,CAAY5U,UAAWiP,IAAW,kBAAmB,WAAY,CAACwoB,eAAgBF,EAAYG,eAAgBF,KAC3Gt7B,GAAQA,EAAKC,SAAYD,EAAK4wB,eAAiBuK,EAAY,IAAM,IAAO,KAE3En4B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,CAAY5U,UAAWiP,IAAW,kBAAmB,WAAY,CAACwoB,eAAgBF,EAAYG,eAAgBF,KAC3GF,EACCp4B,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAACw1B,GAAD,CAAY/B,QAAS,OAAQxM,KAAM,OAAQsM,KAAMqO,IAChD1N,EAAU0N,GAAWtgC,MAEtB,0BAENkI,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,CAAY5U,UAAWiP,IAAW,kBAAmB,WAAY,CAACwoB,eAAgBF,EAAYG,eAAgBF,KAC3Gt7B,GAAQA,EAAKC,SAAYD,EAAK4wB,eAAiBwK,EAAY,IAAM,IAAO,KAE3Ep4B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,KACGyiB,GAAaC,EACZp7B,EACEgD,EAAAC,EAAAzJ,cAACi2B,GAAD,CACE70B,KAAM,KACN8yB,UAAWA,EACXC,gBAAiBA,EACjB3tB,KAAMA,EACNytB,eAAgBA,EAChBG,OAAK,EACL7tB,MAAI,IAEJ,kBACF,mBAYxBiD,EAAAC,EAAAzJ,cAACygC,GAAA,EAAD,CAAOC,QAAM,EAACC,YAAU,EAACC,aAAW,GAClCp3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMlT,OAAP,KACE/jB,EAAAC,EAAAzJ,cAACygC,GAAA,EAAM9U,IAAP,KACEniB,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,aACAr3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMI,WAAP,iBAGJr3B,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMK,KAAP,KACGV,EAAQt/B,IAAI,SAAAuN,GAAM,OACjB7E,EAAAC,EAAAzJ,cAACygC,GAAA,EAAM9U,IAAP,CAAW9hB,IAAKwE,EAAOpO,IACrBuJ,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,KACE1V,EAAAC,EAAAzJ,cAACw1B,GAAD,CAAY/B,QAAS,OAAQxM,KAAM,OAAQsM,KAAMllB,EAAOpO,KACvDoO,EAAO/M,MAEVkI,EAAAC,EAAAzJ,cAACygC,GAAA,EAAMvhB,KAAP,KAAa7Q,EAAOyqB,aAO/B7B,IAAmB/vB,EAAWG,QAC7BmC,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMU,QAAS,SACb5iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,CAAaL,UAAW,SAExB1iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKa,OAAN,KACE/iB,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACE7F,KAAM,OACN8F,QACEvjB,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CACE7F,UAAW8P,EACXhK,UAAQ,EACRjjB,MAAI,EACJ+Q,MAAO,CAACiE,MAAO,SAEfxV,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CAAMj0B,KAAM,SACX,oBAGL4rB,OAAQ,mBACR5jB,QAAS,iDACT6jB,QAAS,CACP,CAACtjB,IAAK,MAAOP,QAAS,QAAS8Q,QAASpb,KAAKmhC,gBAAiBlT,UAAU,GACxE,CAACpjB,IAAK,KAAMP,QAAS,sBAAuB+jB,WAAW,SAM/D,yCArWR,OAAOruB,KAAK6gC,mBAAmB7gC,KAAK+I,cAPH+C,cAiYrC80B,GAAyB50B,YAAWinB,GAAW2N,SAEzCqC,oLACK,IAAA/3B,EAIHlL,KAAK+I,MAFPksB,EAFK/pB,EAEL+pB,eAAgB6C,EAFX5sB,EAEW4sB,qBAAsBmJ,EAFjC/1B,EAEiC+1B,oBAAqBC,EAFtDh2B,EAEsDg2B,gBAAiBC,EAFvEj2B,EAEuEi2B,gBAAiBj5B,EAFxFgD,EAEwFhD,WAAY9F,EAFpG8I,EAEoG9I,KACvF8yB,EAHbhqB,EAGLnI,UAAY8D,KAAkB5C,EAHzBiH,EAGyBjH,gBAEhC,OAAKhE,OAAO4f,OAAOqV,GAAWpvB,OAI5B0E,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,KACElB,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,CAAOC,OAAK,EAAC9C,KAAM7I,KAAK+I,MAAMD,MAAMD,MAClC2B,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAAC66B,GAAD,MACArxB,EAAAC,EAAAzJ,cAAA,WAAKwJ,EAAAC,EAAAzJ,cAAA,WACLwJ,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAD,CAAKT,KAAM,CAACilB,UAAU,GAAOlnB,MAAO,CAClC,CAAC0B,IAAK,UAAW4jB,MAAO,kCAAmCvG,MAAOjkB,EAAgBuE,gBAAiBgmB,MAAO,SAC1G,CAAC3jB,IAAK,aAAc4jB,MAAO,uCAAwCvG,MAAOjkB,EAAgByE,mBAAoB8lB,MAAO,SACrH,CAAC3jB,IAAK,UAAW4jB,MAAO,sBAAuBvG,MAAOjkB,EAAgB4D,YACtE,CAACgD,IAAK,aAAc4jB,MAAO,yBAA0BvG,MAAOjkB,EAAgB6D,gBAC5Ed,OAAO,SAAA+M,GAAA,OAAAA,EAAEmU,MAAiBpiB,SAAQhE,IAAI,SAAA+H,GAAA,IAAEgB,EAAFhB,EAAEgB,IAAK4jB,EAAP5kB,EAAO4kB,MAAOvG,EAAdre,EAAcqe,MAAOsG,EAArB3kB,EAAqB2kB,MAArB,MACtC,CAACnkB,SAAU,CAACQ,MAAKP,QAASE,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KAAWgjB,EAAX,IAAkBjkB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO7lB,QAAS4d,EAAMpiB,OAAQ0oB,MAAOA,MAAuBmN,OAAQ,kBAC9GnxB,EAAAC,EAAAzJ,cAAC86B,GAAD,CACE15B,KAAMA,EACN8yB,UAAWA,EACXlxB,YAAakkB,EACb4P,qBAAsBA,YAMhCttB,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,CAAO7C,KAAI,GAAAlC,OAAK3G,KAAK+I,MAAMD,MAAMD,KAAtB,SACT2B,EAAAC,EAAAzJ,cAACkiC,GAAD,CACEh7B,WAAYA,EACZ+sB,eAAgBA,EAChB6C,qBAAsBA,EACtBmJ,oBAAqBA,EACrBC,gBAAiBA,EACjBC,gBAAiBA,MAhChB,YAPkBr1B,aA8DhBE,eAAWinB,GAAWgQ,KCzc/BE,8MACJhjB,MAAQ,CACN/T,eAAgBrM,EAAKgJ,MAAMqD,eAC3B9G,OAAQ,KACR89B,iBAAkB,KAClBC,cAAe,KACfC,kBAAmB,KACnBC,KAAK,KASPvpB,gBAAkB,SAAA7K,GAAQ,IAAAjG,EACInJ,EAAKgJ,MAA1By6B,EADiBt6B,EACjBs6B,QAASC,EADQv6B,EACRu6B,SAChB,IAAKD,IAAYC,EACf,OAAO,EAHe,IAAApiB,EAK2BthB,EAAKogB,MAAjDijB,EALiB/hB,EAKjB+hB,iBAAkBE,EALDjiB,EAKCiiB,kBACzB,OANwBjiB,EAKoBkiB,MAIxCC,IAAYC,EACP1jC,EAAK2jC,yBAAyBv0B,EAAMi0B,GAClCK,IAAaD,EACfzjC,EAAK4jC,2BAA2Bx0B,EAAMm0B,GACpCE,GAAWC,EACfL,GAAqBE,EAEfF,EACFrjC,EAAK2jC,yBAAyBv0B,EAAMi0B,KAClCE,GACFvjC,EAAK4jC,2BAA2Bx0B,EAAMm0B,GAJtCvjC,EAAK2jC,yBAAyBv0B,EAAMi0B,QAFxC,MAgDTtuB,SAAW,SAAA3F,GAAQ,IAAA6rB,EACkCj7B,EAAKogB,MAAjDijB,EADUpI,EACVoI,iBAAkBE,EADRtI,EACQsI,kBACzB,IAFiBtI,EAC2BuI,IAC5C,CAFiB,IAAAr4B,EAKWnL,EAAKgJ,MAA1By6B,EALUt4B,EAKVs4B,QAASC,EALCv4B,EAKDu4B,SACZD,IAAYC,EACd1jC,EAAK6jC,eAAez0B,EAAMi0B,GACjBK,IAAaD,EACtBzjC,EAAK8jC,iBAAiB10B,EAAMm0B,GACnBE,GAAWC,IACfL,GAAqBE,EAEfF,GACTrjC,EAAK6jC,eAAez0B,EAAMi0B,GACP,IAAfj0B,EAAKM,QACP1P,EAAKynB,SAAS,CAAC6b,cAAeD,IAC9BrjC,EAAK8jC,iBAAiB10B,EAAMm0B,KAErBA,IACTvjC,EAAK8jC,iBAAiB10B,EAAMm0B,GAC5BvjC,EAAKynB,SAAS,CAAC6b,cAAe,QAT9BtjC,EAAK6jC,eAAez0B,EAAMi0B,QA6DhCnpB,eAAiB,SAAA9K,GACf,IAAKpP,EAAKgJ,MAAMy6B,UAAYzjC,EAAKgJ,MAAM06B,SACrC,OAAO,EAFc,IAAAK,EAI4B/jC,EAAKogB,MAAjDijB,EAJgBU,EAIhBV,iBAAkBE,EAJFQ,EAIER,kBACzB,GALuBQ,EAIqBP,IAE1C,OAAO,EANc,IAAAplB,EAQKpe,EAAKgJ,MAA1By6B,EARgBrlB,EAQhBqlB,QAASC,EAROtlB,EAQPslB,SAChB,OAAID,IAAYC,EACc,OAArBL,GAA6BA,EAAiBr1B,IAAMoB,EAAKpB,GAAKq1B,EAAiBt1B,IAAMqB,EAAKrB,EACxF21B,IAAaD,EACO,OAAtBF,GAA8BA,EAAkBv1B,IAAMoB,EAAKpB,GAAKu1B,EAAkBx1B,IAAMqB,EAAKrB,EAC3F01B,GAAWC,EAChBL,EACKA,EAAiBr1B,IAAMoB,EAAKpB,GAAKq1B,EAAiBt1B,IAAMqB,EAAKrB,IAC3Dw1B,IACFA,EAAkBv1B,IAAMoB,EAAKpB,GAAKu1B,EAAkBx1B,IAAMqB,EAAKrB,QAJnE,KAWTwN,KAAO,WAAM,IAAA2D,EACiBlf,EAAKgJ,MAA1By6B,EADIvkB,EACJukB,QAASC,EADLxkB,EACKwkB,SADLM,EAEuDhkC,EAAKogB,MAAhEijB,EAFIW,EAEJX,iBAAkBC,EAFdU,EAEcV,cAAeC,EAF7BS,EAE6BT,kBAF7BS,EAEgDR,MAIvDC,IAAYC,EACd1jC,EAAKynB,SAAS,CAAC4b,iBAAkB,OACxBK,IAAaD,EACtBzjC,EAAKynB,SAAS,CAAC8b,kBAAmB,OACzBE,GAAWC,IAChBL,EACFrjC,EAAKynB,SAAS,CAAC4b,iBAAkB,OACxBE,GACTvjC,EAAKikC,mBAAmBX,EAAeC,QAK7Ctb,MAAQ,WAAM,IACL5b,EAAkBrM,EAAKgJ,MAAvBqD,eACPrM,EAAKynB,SAAS,CACZpb,iBAAgB9G,OAAQ,KAAMi+B,KAAK,EAAOH,iBAAkB,KAAMC,cAAe,KAAMC,kBAAmB,0FA1L3F5iB,EAAWC,EAAWC,GACnCF,EAAUtU,iBAAmBpM,KAAK+I,MAAMqD,gBAC1CpM,KAAKgoB,yDA8BgB7Y,EAAMi0B,GAC7B,OAAKA,EAG0B,IAA3BA,EAAiB3zB,QAG0E,IAA3FK,KAAKC,IAAID,KAAKiH,IAAI5H,EAAKpB,EAAIq1B,EAAiBr1B,GAAI+B,KAAKiH,IAAI5H,EAAKrB,EAAIs1B,EAAiBt1B,QAGlFqB,EAAKM,MAAQ2zB,EAAiB3zB,MAAS,KAGxCN,EAAKE,SAXAF,EAAKE,SAAWlD,EAAKqB,4DAiBL2B,EAAMm0B,GAC/B,OAAKA,EAG4F,IAA7FxzB,KAAKC,IAAID,KAAKiH,IAAI5H,EAAKpB,EAAIu1B,EAAkBv1B,GAAI+B,KAAKiH,IAAI5H,EAAKrB,EAAIw1B,EAAkBx1B,QAGrFqB,EAAKM,MAAQ,KAGbN,EAAKE,QARAF,EAAKE,SAAWlD,EAAKqB,gDAwCjB2B,EAAMi0B,GACfA,EACFpjC,KAAKwnB,SAAS,SAAA7d,GAAA,IAAEyC,EAAFzC,EAAEyC,eAAF,MAAuB,CACnCg3B,iBAAkB,KAClBh3B,eAAgBD,EAAKyJ,YAAL5F,MAAA7D,EAAI,CAAaC,GAAbzF,OAAgC,CAClD,CAACoH,EAAGq1B,EAAiBr1B,EAAGD,EAAGs1B,EAAiBt1B,EAAGuB,OAAQ,KAAME,OAAQ,MACrE,CAACxB,EAAGoB,EAAKpB,EAAGD,EAAGqB,EAAKrB,EAAGuB,OAAQ+zB,EAAiB/zB,OAAQE,OAAQ6zB,EAAiB7zB,WAEnFjK,OAAQ,CACN,CAACsG,KAAMw3B,EAAkBr5B,GAAIoF,EAAMjO,KAAM,OAAQkc,OAAQ,UAE3DmmB,IAAoB,IAAfp0B,EAAKM,SAGZzP,KAAKwnB,SAAS,CAAC4b,iBAAkBj0B,+CAIlBk0B,EAAeC,GAChCtjC,KAAKwnB,SAAS,SAAAzT,GAAA,IAAE3H,EAAF2H,EAAE3H,eAAF,MAAuB,CACnCg3B,iBAAkBC,EAClBC,kBAAmB,KACnBl3B,eAAgBD,EAAKyJ,YAAL5F,MAAA7D,EAAI,CAAaC,GAAbzF,OAAgC,CAClD,CAACoH,EAAGu1B,EAAkBv1B,EAAGD,EAAGw1B,EAAkBx1B,EAAGuB,OAAQ,KAAME,OAAQ,MACvE,CAACxB,EAAGs1B,EAAct1B,EAAGD,EAAGu1B,EAAcv1B,EAAGuB,OAAQg0B,EAAch0B,OAAQE,OAAQ8zB,EAAc9zB,WAE/FjK,OAAQ,KACRi+B,KAAK,8CAIQp0B,EAAMm0B,GACjBA,EACFtjC,KAAKwnB,SAAS,SAAA3d,GAAA,IAAEuC,EAAFvC,EAAEuC,eAAF,MAAuB,CACnCk3B,kBAAmB,KACnBl3B,eAAgBD,EAAKyJ,YAAYxJ,EAAgB,CAC/C2B,EAAGoB,EAAKpB,EAAGD,EAAGqB,EAAKrB,EAAG2B,MAAOrD,EAAe+C,EAAKrB,GAAGoB,MAAMC,EAAKpB,GAAG0B,MAAQ,IAE5EnK,OAAQ,CACN,CAACsG,KAAM03B,EAAmBv5B,GAAIoF,EAAMjO,KAAM,QAASkc,OAAQ,aAI/Dpd,KAAKwnB,SAAS,CAAC8b,kBAAmBn0B,qCAsD7B,IAAAmX,EAC0EtmB,KAAK+I,MAA/E3G,EADAkkB,EACAlkB,KAAM6hC,EADN3d,EACM2d,MAAOT,EADbld,EACakd,QAASC,EADtBnd,EACsBmd,SAA0BS,EADhD5d,EACgCla,eADhC+3B,EAEoEnkC,KAAKmgB,MAAzE/T,EAFA+3B,EAEA/3B,eAAgB9G,EAFhB6+B,EAEgB7+B,OAAQi+B,EAFxBY,EAEwBZ,IAAKH,EAF7Be,EAE6Bf,iBAAkBE,EAF/Ca,EAE+Cb,kBAChDc,EAAchiC,EAAOA,EAAKI,SAAW1C,EAAO6E,qBAC5CnC,EAAQvC,OAAAsK,EAAA,EAAAtK,CAAA,GAAOmkC,EAAP,CAAoBn/B,MAAMhF,OAAAsK,EAAA,EAAAtK,CAAA,GAAKmkC,EAAYn/B,MAAlB,CAAyBM,QAAS,cAEzE,OACEiF,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACG+3B,GAAWC,EACVj5B,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAA,WACAwJ,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAO+U,EAAM,QAAU,OAAQv4B,KAAMu4B,EAAM,cAAWr5B,EAAWI,QACtEi5B,EAAM,sCACHH,GAAqBE,EACpBF,EAAmB,0EACjB,2EAFsC,8BAO9C54B,EAAAC,EAAAzJ,cAAA,YAEA,KACJwJ,EAAAC,EAAAzJ,cAACimB,GAADhnB,OAAA2K,OAAA,CACEuP,QAAM,EACN8G,aAAc,GACdnH,UAAW0pB,GAAWC,EACtB1pB,SAAUypB,GAAWC,EACrBzpB,gBAAiBha,KAAKga,gBACtBC,eAAgBja,KAAKia,eACrBnF,SAAU9U,KAAK8U,SACfwG,KAAMtb,KAAKsb,KACX9Y,SAAUA,EACV+Y,UAAQ,EAACyI,YAAU,EACnB5X,eAAgBA,GACX9G,EAAMrF,OAAAsK,EAAA,EAAAtK,CAAA,GAAOgkC,EAAP,CAAc3+B,WAAU2+B,IAEpCT,GAAWC,EACVj5B,EAAAC,EAAAzJ,cAAA,WACEwJ,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQ5S,QAASpb,KAAKgoB,MAAOG,SAAU/b,IAAmB83B,EAAwBvV,SAAO,GAAzF,UAEA,aAjPa7iB,aA+PzBq3B,GAAWp3B,aAAe,CACxBy3B,SAAS,EACTC,UAAU,GAGZN,GAAalQ,GAAWkQ,QAElBkB,8MA8kCJlkB,MAAQ,CACNmkB,UAAW,KAGbC,cAAgB,WACdh+B,EAAKihB,SAAS,CAAC8c,UAAW,OAG5BE,iBAAmB,WACjBj+B,EAAKihB,SAAS,SAAArH,GAAK,MAAK,CAACmkB,UAAWnkB,EAAMmkB,UAAY,QAGxDG,aAAe,WACbl+B,EAAKihB,SAAS,SAAArH,GAAK,MAAK,CAACmkB,UAAWnkB,EAAMmkB,UAAY,QAGxDI,aAAe,WACbn+B,EAAKihB,SAAS,CAAC8c,UAAW/9B,EAAK7B,YAAYigC,MAAM7+B,OAAS,6EAGnD,IACAw+B,EAAatkC,KAAKmgB,MAAlBmkB,UACDK,EAAQ3kC,KAAK0E,YAAYigC,MACzBC,EAAOD,EAAML,GAEnB,OACE95B,EAAAC,EAAAzJ,cAAC6jC,EAAA,EAAD,KACEr6B,EAAAC,EAAAzJ,cAAC6jC,EAAA,EAAQvO,QAAT,KACE9rB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMU,QAAS,QAASgQ,cAAe,SAAUlQ,UAAW,UAC1D1iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0J,EAAA,EAAD,CAAMud,KAAM,UAAWC,MAAO,CAC5B,CAACrd,IAAK,QAASG,KAAM,gBAAiBoQ,QAASpb,KAAKukC,cAAepc,SAAwB,IAAdmc,GAC7E,CAACz5B,IAAK,WAAYG,KAAM,WAAYoQ,QAASpb,KAAKwkC,iBAAkBrc,SAAwB,IAAdmc,GAC9E,CAACz5B,IAAK,OAAQG,KAAM,UAAWoQ,QAASpb,KAAKykC,aAActc,SAAUmc,IAAcK,EAAM7+B,OAAS,GAClG,CAAC+E,IAAK,OAAQG,KAAM,eAAgBoQ,QAASpb,KAAK0kC,aAAcvc,SAAUmc,IAAcK,EAAM7+B,OAAS,OAG3G0E,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KAAUniB,EAAAC,EAAAzJ,cAAC6jC,EAAA,EAAQtW,OAAT,KAAiB+V,EAAY,EAA7B,MAAmCM,EAAKrR,QAClD/oB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KAAUniB,EAAAC,EAAAzJ,cAAC6jC,EAAA,EAAD,CAASv6B,QAASE,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,CAAUZ,IAAKy5B,GAAYM,EAAKtS,SAC5D9nB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACG2X,EAAYK,EAAM7+B,OAAS,EAC1B0E,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQW,SAAO,EAACvT,QAASpb,KAAKykC,aAAcz5B,KAAM,UAAWV,QAAS,oBAEtEE,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQoB,UAAQ,EAACtkB,GAAIC,IAAShB,GAAI,SAAUiB,KAAM,OAAQV,QAAS,6BACnEE,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CAAQoB,UAAQ,EAACtkB,GAAIC,IAAShB,GAAI,WAAYiB,KAAM,UAAWV,QAAS,sDA3nChEwB,aAApBu4B,GACGM,MAAQ,CACb,CAACpR,MAAO,eAAgBjB,KAAM9nB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KAC5BjB,EAAAC,EAAAzJ,cAAA,4CACgCwJ,EAAAC,EAAAzJ,cAAA,+BADhC,wCAGAwJ,EAAAC,EAAAzJ,cAAA,sCAC0BwJ,EAAAC,EAAAzJ,cAAA,iCAD1B,sBAC6EwJ,EAAAC,EAAAzJ,cAAA,uBAD7E,OAEEwJ,EAAAC,EAAAzJ,cAAA,uBAFF,aAEkCwJ,EAAAC,EAAAzJ,cAAA,wBAFlC,UAIAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,WAInD/E,EAAAC,EAAAzJ,cAAA,kBACMwJ,EAAAC,EAAAzJ,cAAA,2BADN,qDACkFwJ,EAAAC,EAAAzJ,cAAA,2BADlF,uBAEoBwJ,EAAAC,EAAAzJ,cAAA,uCAFpB,8BAIAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,gBAE7D,CAACzC,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,iBAG/D0zB,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,eAKrE,CAACmW,MAAO,SAAUjB,KAAM9nB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACtBjB,EAAAC,EAAAzJ,cAAA,sBACUwJ,EAAAC,EAAAzJ,cAAA,+BADV,sBAC2DwJ,EAAAC,EAAAzJ,cAAA,8BAD3D,IAEEwJ,EAAAC,EAAAzJ,cAAA,4BAFF,QAEkCwJ,EAAAC,EAAAzJ,cAAA,4BAFlC,KAIAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAA,sBACUwJ,EAAAC,EAAAzJ,cAAA,+DADV,+BAGAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,gBAE7D,CAACzC,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAA,+BACmBwJ,EAAAC,EAAAzJ,cAAA,wCADnB,6BACoFwJ,EAAAC,EAAAzJ,cAAA,+CADpF,cAE+BwJ,EAAAC,EAAAzJ,cAAA,4CAF/B,mBAGKwJ,EAAAC,EAAAzJ,cAAA,0BAHL,qBAGgDwJ,EAAAC,EAAAzJ,cAAA,mCAHhD,KAKAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,gBAE7D,CAACzC,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjDi0B,SAAO,MAGX,CAACjQ,MAAO,SAAUjB,KAAK9nB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACrBjB,EAAAC,EAAAzJ,cAAA,oCACwBwJ,EAAAC,EAAAzJ,cAAA,6BADxB,KACsDwJ,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAO,SAAd,UADtD,IAEEhkB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAO,QAAd,WAFF,KAEyChkB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAO,UAAd,WAFzC,IAGEhkB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAO,OAAd,WAHF,aAGgDhkB,EAAAC,EAAAzJ,cAACmvB,GAAA,EAAD,CAAO3B,MAAO,QAAd,2BAHhD,KAKAhkB,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,WAInD/E,EAAAC,EAAAzJ,cAAA,yBACawJ,EAAAC,EAAAzJ,cAAA,8BADb,QAC+CwJ,EAAAC,EAAAzJ,cAAA,2CAD/C,SAC+FwJ,EAAAC,EAAAzJ,cAAA,wCAD/F,aAEmCwJ,EAAAC,EAAAzJ,cAAA,+CAFnC,KAIAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,SAC7D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAA,qCAGAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACEtB,SAAO,EACPp3B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,aAKrD,CAACgkB,MAAO,WAAYjB,KAAK9nB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACvBjB,EAAAC,EAAAzJ,cAAA,yDAC6CwJ,EAAAC,EAAAzJ,cAAA,+CAD7C,8CAIAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,aAIpE5S,EAAAC,EAAAzJ,cAAA,sBACUwJ,EAAAC,EAAAzJ,cAAA,qCADV,oCAC+EwJ,EAAAC,EAAAzJ,cAAA,qDAD/E,6FAKAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,SAC9D,CAACxR,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,aAIpE5S,EAAAC,EAAAzJ,cAAA,iFAGAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACErB,UAAQ,EACRr3B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,aAKrD,CAACgkB,MAAO,UAAWjB,KAAK9nB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACtBjB,EAAAC,EAAAzJ,cAAA,iHAEQwJ,EAAAC,EAAAzJ,cAAA,wBAFR,KAIAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,WAKnD/E,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,gBAE7D,CAACzC,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,gBAE7D,CAACzC,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,aAKpE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,aAKpE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAA,WACAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,aAKpE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,aAKpE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,QAASkc,OAAQ,aAKpE5S,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAGjD00B,MAAO,CACL3+B,OAAQ,CACN,CAACsG,KAAM,CAACmC,EAAG,EAAGD,EAAG,GAAI/D,GAAI,CAACgE,EAAG,EAAGD,EAAG,GAAI5M,KAAM,OAAQkc,OAAQ,aAInE5S,EAAAC,EAAAzJ,cAAA,4CAGAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACEtB,SAAO,EAACC,UAAQ,EAChBr3B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,aAKrD,CAACgkB,MAAO,0BAA2BjB,KAAK9nB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACtCjB,EAAAC,EAAAzJ,cAAA,8JAIAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,WAInD/E,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,WAInD/E,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,WAInD/E,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,aAKrD,CAACgkB,MAAO,mCAAoCjB,KAAK9nB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KAC/CjB,EAAAC,EAAAzJ,cAAA,wSAKAwJ,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,WAInD/E,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,WAInD/E,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,WAInD/E,EAAAC,EAAAzJ,cAAC8jC,GAAD,CACE14B,eAAgB,CACd,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKsE,eAC3D,CAAC1C,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKsE,sBAKnE,CAAC8iB,MAAO,wBAA0BjB,KAAM9nB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACtCjB,EAAAC,EAAAzJ,cAAA,oDACwCwJ,EAAAC,EAAAzJ,cAAC++B,EAAA,EAAD,CAASh2B,GAAI,aAAb,yCADxC,mBAEkCS,EAAAC,EAAAzJ,cAAC++B,EAAA,EAAD,CAASh2B,GAAI,WAAb,gBAFlC,QA+DSs6B,UC34CTU,8MAGJ5kB,mBACE6kB,oBAAqB,CAACj3B,EAAG,EAAGD,EAAG,GAC/Bm3B,cAAe,CAAC51B,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cACpD4V,SAAUha,EAAKyC,2BACfs2B,cAAe,KACfC,UAAU,GACPplC,EAAK2E,YAAYyuB,kCACpBxI,aAAc,KACdzE,iBAAkB,SA0BpBkN,wBAA0B,WACxBrzB,EAAKynB,SAAS,CAACwE,MAAO,UAGxBoZ,4BAA8B,SAACJ,EAAqBC,GAClDllC,EAAKynB,SAAS,CAACwd,sBAAqBC,qBAGtCI,iBAAmB,SAAAlf,GACjB,IAAI3e,EAAM09B,EACV,IACE19B,EAAO2E,EAAKsF,aAAa0U,GACzB+e,EAAgB,KAChB,MAAOzgC,GACP+C,EAAO2E,EAAK2C,SACZo2B,EAAgBzgC,EAAE6gC,QAEpBvlC,EAAKynB,SAAS,SAAArH,GAAK,MAAK,CACtBgG,WACA3e,OACA09B,gBACAhf,iBAAkB/F,EAAMgG,eAI5BrR,SAAW,SAAAiW,GACThrB,EAAKynB,SAAS,CAAChgB,KAAMujB,OAGvBE,qBAAuB,SAAAN,GACrB5qB,EAAKynB,SAAS,CAACmD,oBAGjB4a,SAAW,WAAM,IAAAlkB,EACcthB,EAAKogB,MAA3B3Y,EADQ6Z,EACR7Z,KACDg+B,EAFSnkB,EACFsJ,cACuBnjB,EACpCzH,EAAKslC,iBAAiBG,EAAYp5B,mBAGpCq5B,WAAa,WACX1lC,EAAKslC,iBAAiBl5B,EAAKyC,+BAG7B0M,KAAO,WACLvb,EAAKslC,iBAAiBtlC,EAAKogB,MAAM+F,qBAGnCwf,UAAY,WACV3lC,EAAKslC,iBAAiBtlC,EAAKogB,MAAMgG,aAGnCwf,aAAe,WACblS,GAAsBtnB,EAAKmC,oBAAoBvO,EAAKogB,MAAMgG,WAC1DuN,MAAM,mCAGR2L,iBAAmB,WACjB5L,IAAuB1zB,EAAKogB,MAAMwK,cAAgB5qB,EAAKogB,MAAM3Y,MAAM6G,kBACnEqlB,MAAM,8GAGC,IAAAxqB,EACyBlJ,KAAK+I,MAA9B3G,EADA8G,EACA9G,KAAMuG,EADNO,EACMP,OAAQ0oB,EADdnoB,EACcmoB,QADd2J,EAE+Gh7B,KAAKmgB,MAApH6kB,EAFAhK,EAEAgK,oBAAqB7e,EAFrB6U,EAEqB7U,SAAU8e,EAF/BjK,EAE+BiK,cAAeC,EAF9ClK,EAE8CkK,cAAeC,EAF7DnK,EAE6DmK,SAAU39B,EAFvEwzB,EAEuExzB,KAAMmjB,EAF7EqQ,EAE6ErQ,aAAczE,EAF3F8U,EAE2F9U,iBAC5F1jB,EAAWJ,EAAOA,EAAKI,SAAWmG,EAAOnG,SAEzC6L,EAAmBlC,EAAKmC,oBAAoB6X,GAClD,OACE3b,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAC8sB,GAAA,EAAD,CACE6F,OAAQwR,EACRld,KAAM,OACN2L,QAAS5zB,KAAKozB,wBACdlF,OAAQ,iCACR5jB,QAAO,GAAA3D,OAAKw+B,EAAL,+CACPhX,QAAS,CAAC,CAACtjB,IAAK,KAAMP,QAAS,KAAM8kB,UAAU,MAEjD5kB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMS,UAAQ,GACZ3iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAAC0J,EAAA,EAAD,CAAM0jB,UAAQ,EAACnG,KAAM,UAAWC,MAAO,CACrC,CAACrd,IAAK,QAASG,KAAM,QAASV,QAAS,iBAAkBkkB,MAAO,QAASqF,QAAQ,EAAM/oB,GAAI,IACzFgpB,KAAI,aAAAntB,OAAe0H,GACnBklB,MAAOD,UAAUD,MAAQ,iCAAmC,iCAC9D,CAACxoB,IAAK,OAAQG,KAAM,YAAaV,QAAS,gBAAiBkkB,MAAO,QAASqF,QAAQ,EACjFN,MAAO,qCAAsCnY,QAASpb,KAAK2lC,cAC7D,CAAC96B,IAAK,YAAaG,KAAM,YAAaV,QAAS,qBAAsBkkB,MAAO,QAASqF,QAAQ,EAC3FN,MAAO,0CAA2CnY,QAASpb,KAAKq/B,uBAIxE70B,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACGiY,EAAgB16B,EAAAC,EAAAzJ,cAAC6jC,EAAA,EAAD,CAAS7Y,OAAK,EAAC1hB,QAAS46B,IAAoB,KAC7D16B,EAAAC,EAAAzJ,cAAC+yB,GAAD,CACE3xB,KAAMA,EACNI,SAAUA,EACV0pB,gBAAiBvjB,EAAOnG,SACxBgF,KAAMA,EACNsN,SAAU9U,KAAK8U,SACfmW,qBAAsBjrB,KAAKirB,sBAE3BzgB,EAAAC,EAAAzJ,cAAA,WACEwJ,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CACE1jB,QAAS,aACTqkB,SAAO,EACPvT,QAASpb,KAAK0lC,aAGlBl7B,EAAAC,EAAAzJ,cAAC4kC,GAAD,CACEC,aAAcb,EACdc,qBAAsB9lC,KAAKolC,4BAC3B/T,QAASA,IAEX7mB,EAAAC,EAAAzJ,cAAA,WACEwJ,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CACE1jB,QAAS,iBACTqkB,SAAO,EACPxG,UAAWwC,GAAgBnjB,GAAM6G,mBAAqBA,EACtD+M,QAASpb,KAAKulC,WAEhB/6B,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CACE1jB,QAAS,QACT2jB,UAAQ,EACR9F,SAAU9Z,IAAqBrO,KAAK0E,YAAYqhC,wBAChD3qB,QAASpb,KAAKylC,aAEhBj7B,EAAAC,EAAAzJ,cAACgtB,GAAA,EAAD,CACE1jB,QAAS,OACT+jB,WAAS,EACTlG,UAAWjC,EACX9K,QAASpb,KAAKsb,QAGlB9Q,EAAAC,EAAAzJ,cAACglC,GAAD,CACE7f,SAAUA,EACVpO,OAAQktB,EACRI,iBAAkBrlC,KAAKqlC,iFA7JjC,IACMlf,EADS,IAAI6N,gBAAgB3zB,OAAOoB,SAASwyB,QAC3BC,IAAI,YAC5B,GAAI/N,EAAU,CACZ,IAAI3e,EAAM29B,EACV,KACE39B,EAAO2E,EAAKyF,+BAA+BuU,MAEzCgf,EAAW,8BAEb,MAAO1gC,GACP+C,EAAO,KACP29B,EAAQ,qCAAAx+B,OAAwClC,EAAE6gC,SAEpD,OAAK99B,EAGE,CAACA,OAAM29B,UAAU,EAAOhf,SAAU3e,EAAK4E,gBAFrC,CAAC5E,KAAM2E,EAAK2C,SAAUq2B,WAAUhf,SAAUha,EAAKyC,4BAIxD,MAAO,CAACpH,KAAM2E,EAAK2C,SAAUq2B,UAAU,EAAOhf,SAAUha,EAAKyC,mCAjCxC9C,aAArBi5B,GACGgB,wBAA0B55B,EAAKmC,oBAAoBnC,EAAKyC,gCA0L3Dq3B,8MA+BJ9lB,MAAQ,CACN0lB,aAAc,CAAC93B,EAAG,EAAGD,EAAG,MA6B1BkM,gBAAkB,SAAA7K,GAChB,OAAQ5I,EAAK0T,eAAe9K,KAAqB,IAAXA,EAAKrB,GAAWqB,EAAKpB,GAAK,MAGlEkM,eAAiB,SAAA9K,GAAQ,IAChB02B,EADgB5lC,OAAA+gC,GAAA,EAAA/gC,CAAAsG,GAChBs/B,aACP,OAAO12B,EAAKpB,IAAM83B,EAAa93B,GAAKoB,EAAKrB,IAAM+3B,EAAa/3B,KAG9DgH,SAAW,SAAA3F,GACT,IAAM02B,EAAe,CAAC93B,EAAGoB,EAAKpB,EAAGD,EAAGqB,EAAKrB,GAIzC,QAHgC5D,IAA5B3D,EAAKwC,MAAM88B,cACbt/B,EAAKihB,SAAS,CAACqe,aAAcA,IAE3Bt/B,EAAKwC,MAAM+8B,qBAAsB,CACnC,IAAM/tB,EAAS5I,EAAKE,OAAS,CAACA,OAAQF,EAAKE,QAAU,CAACI,MAAON,EAAKM,OAClElJ,EAAKwC,MAAM+8B,qBAAqBD,EAAc9tB,iGA1Cb,IAAVsZ,EAAU1nB,EAAV0nB,QACzB,GAAIA,EAAQC,MAAO,KACVzmB,EAAOwmB,EAAQC,MAAfzmB,IACDwJ,EAAcrU,KAAK0E,YAAYwhC,YAAYr7B,GACjD,GAAIwJ,EAAa,KACRtG,EAAQsG,EAARtG,EAAGD,EAAKuG,EAALvG,EACJkD,EAAOhR,KAAK0E,YAAY0H,eAAe0B,GAAGoB,MAAMnB,GACtD/N,KAAK8U,SAAS9D,gDAKD0P,EAAWC,EAAWC,QACR1W,IAA3BwW,EAAUmlB,mBAA0D37B,IAA5BlK,KAAK+I,MAAM88B,cACrD7lC,KAAKwnB,SAAS,CAACqe,aAAcnlB,EAAUmlB,gDAgClC,IAAA36B,EACgBlL,KAAK+I,MAArB3G,EADA8I,EACA9I,KAAMuG,EADNuC,EACMvC,OACPnG,EAAWJ,EAAOA,EAAKI,SAAWmG,EAAOnG,SAE/C,OACEgI,EAAAC,EAAAzJ,cAACimB,GAAD,CACE9M,QAAM,EACN8G,aAAc,CAAC9U,EAAKqB,SAAUrB,EAAK0D,UACnCzD,eAAgBpM,KAAK0E,YAAY0H,eACjC0N,WAAS,EAACC,UAAU,EACpBC,gBAAiBha,KAAKga,gBACtBC,eAAgBja,KAAKia,eACrBnF,SAAU9U,KAAK8U,SACftS,SAAUA,EACV+Y,UAAU,EACVyI,YAAY,yCA1ChB,YAAgC9Z,IAA5BlK,KAAK+I,MAAM88B,aACN7lC,KAAKmgB,MAAM0lB,aAEX7lC,KAAK+I,MAAM88B,oBAzDU/5B,aAA5Bm6B,GACG75B,eAAiB,CACtB,CAAC0B,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,QAE/C,CAACzB,EAAG,EAAGoB,MAAO,CACZ,CAACnB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAKqB,SAAU+B,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQlD,EAAK0D,SAAUN,OAAQpD,EAAKoE,cAC3D,CAACxC,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,MAC7C,CAACxB,EAAG,EAAGD,EAAG,EAAG2B,MAAO,EAAGJ,OAAQ,KAAME,OAAQ,SAd7C02B,GAiBG3tB,KAAO,CACZ,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAlBjC2tB,GAoBGC,YAAc,CACnBC,EAAK,CAACp4B,EAAG,EAAGD,EAAG,GACfmU,EAAG,CAAClU,EAAG,EAAGD,EAAG,GACboU,EAAG,CAACnU,EAAG,EAAGD,EAAG,GACbqU,EAAG,CAACpU,EAAG,EAAGD,EAAG,GACbsU,EAAG,CAACrU,EAAG,EAAGD,EAAG,GACbuU,EAAG,CAACtU,EAAG,EAAGD,EAAG,GACbrD,EAAG,CAACsD,EAAG,EAAGD,EAAG,GACbs4B,EAAG,CAACr4B,EAAG,EAAGD,EAAG,IAkFjBm4B,GAAsBhT,GAAWgT,QAE3BI,8MACJlmB,MAAQ,CACNgG,SAAUha,EAAKyC,8BAiBjBoL,gBAAkB,WAChB,OAAO,KAGTC,eAAiB,WACf,OAAO,KAGTnF,SAAW,SAAA3F,GAAQ,IACV4I,EAAUzQ,EAAKyB,MAAfgP,OACH,UAAWA,EACT5I,EAAKM,QAAUsI,EAAOtI,OACxBnI,EAAKg/B,eAAe,CAACv4B,EAAGoB,EAAKpB,EAAGD,EAAGqB,EAAKrB,EAAG2B,MAAOsI,EAAOtI,QAElD,WAAYsI,IACjB5I,EAAKE,SAAW0I,EAAO1I,OACzB/H,EAAKg/B,eAAe,CAACv4B,EAAGoB,EAAKpB,EAAGD,EAAGqB,EAAKrB,EAAGuB,OAAQ0I,EAAO1I,OAAQE,OAAQpD,EAAKoE,eAE/EjJ,EAAKg/B,eAAe,CAACv4B,EAAGoB,EAAKpB,EAAGD,EAAGqB,EAAKrB,EAAGuB,OAAQ,KAAME,OAAQ,WAKvE+2B,eAAiB,SAAAC,GACf,IAAMC,EAAcr6B,EAAKyJ,YAAYtO,EAAK6e,SAAUogB,QAExBr8B,IAAxB5C,EAAKyB,MAAMod,UACb7e,EAAKkgB,SAAS,CAACrB,SAAUqgB,IAEvBl/B,EAAKyB,MAAMs8B,kBACb/9B,EAAKyB,MAAMs8B,iBAAiBmB,sFA5Cb9lB,EAAWC,EAAWC,QACZ1W,IAAvBwW,EAAUyF,eAAkDjc,IAAxBlK,KAAK+I,MAAMod,UACjDnmB,KAAKwnB,SAAS,CAACrB,SAAUzF,EAAUyF,4CA8C9B,IACAA,EAAYnmB,KAAZmmB,SADAhI,EAEgBne,KAAK+I,MAArB3G,EAFA+b,EAEA/b,KAAMuG,EAFNwV,EAEMxV,OACPnG,EAAWJ,EAAOA,EAAKI,SAAWmG,EAAOnG,SAE/C,OACEgI,EAAAC,EAAAzJ,cAACimB,GAAD,CACE9M,QAAM,EACN8G,aAAc,CAAC9U,EAAKqB,SAAUrB,EAAK0D,UACnCzD,eAAgB+Z,EAChBrM,WAAS,EAACC,UAAU,EACpBC,gBAAiBha,KAAKga,gBACtBC,eAAgBja,KAAKia,eACrBnF,SAAU9U,KAAK8U,SACftS,SAAUA,EACV+Y,UAAU,EACVyI,YAAY,qCAzDhB,YAA4B9Z,IAAxBlK,KAAK+I,MAAMod,SACNnmB,KAAKmgB,MAAMgG,SAEXnmB,KAAK+I,MAAMod,gBAfQra,aAmFhCu6B,GAAoBpT,GAAWoT,IAEhBhV,oBAAQ4U,GAAoBlT,aAAaza,KAAzC+Y,CAA+C4B,GAAW8R,KCjYnE0B,sNAoEJtmB,MAAQ,CACNumB,UAAW3mC,EAAK2E,YAAYiiC,WAAW,GACvCC,yBAA0B7mC,EAAK2E,YAAYiiC,WAAW,GAAGE,gBACzDr/B,KAAM2E,EAAKyF,+BAA+B7R,EAAK2E,YAAYiiC,WAAW,GAAGxgB,UACzE2gB,WAAW,EACXvD,KAAK,KAGP1Y,OAAS,SAAC7iB,EAAO+iB,GAAY,IAAA1J,EACathB,EAAKogB,MAAtCymB,EADoBvlB,EACpBulB,yBACP,IAF2BvlB,EACMkiB,IACjC,CAGA,IAAMwD,EAAiBH,EAAyB53B,KAC9C,SAAA+3B,GAAc,OAAIA,EAAeC,YAAY//B,SAAS8jB,EAAQ1c,oBAChE,IAAK04B,EAGH,OAFArmC,QAAQC,IAAIsC,IAAEgN,QAAQ22B,EAAyB9kC,IAAI,SAAAmlC,GAAE,OAAIA,EAAGD,eAAejc,EAAQ1c,uBACnFtO,EAAKynB,SAAS,CAACsf,WAAW,IAG5B,IAAMI,EAAoBH,EAAeI,SAAWpc,EAAQhc,UAAUg4B,EAAeI,UAAYpc,EACjGhrB,EAAKynB,SAAS,CACZhgB,KAAM0/B,EACNN,yBAA0BG,EAAeF,iBAAmB,KAC5DC,WAAW,EACXvD,KAAMwD,EAAeI,eAIzBrc,wBAA0B,WACpB/qB,EAAKogB,MAAM2mB,WACb/mC,EAAKynB,SAAS,CAACsf,WAAW,uFAIXM,EAAYC,GAC7B,OAAOpkC,IAAEgmB,MAAMoe,GAAevlC,IAAI,SAAAuB,GAAK,OACrCmH,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CACE1rB,IAAKxH,EACLf,KAAM8kC,EAAa/jC,EAAQ,OAAS,eACpCmrB,MAAO,8CAKJ,IAAA7kB,EAAAqxB,EACmCh7B,KAAKmgB,MAAxCumB,EADA1L,EACA0L,UAAWl/B,EADXwzB,EACWxzB,KAAMs/B,EADjB9L,EACiB8L,UAAWvD,EAD5BvI,EAC4BuI,IAD5Br6B,EAEgBlJ,KAAK+I,MAArB3G,EAFA8G,EAEA9G,KAAMuG,EAFNO,EAEMP,OACP2+B,EAAqC,SAAnBZ,EAAUxlC,KAAV,gBAAAyF,OAA4C+/B,EAAUa,QAAQC,QAAW,oBAC3FlC,EACJwB,EACEt8B,EAAAC,EAAAzJ,cAAC6jC,EAAA,EAAD,CAAS7Y,OAAK,EAAChhB,KAAM,UAAWV,QAAS,gCACvCi5B,EACF/4B,EAAAC,EAAAzJ,cAAC6jC,EAAA,EAAD,CAAS4C,SAAO,EAACz8B,KAAM,QAASV,QAAS,4BAEzCE,EAAAC,EAAAzJ,cAAC6jC,EAAA,EAAD,CAASv6B,QAASg9B,IAGtB,OACE98B,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMS,UAAQ,GACZ3iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,CAAQzjB,GAAI,MAAOw8B,GACnB98B,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,CAAQzjB,GAAI,KAAMQ,UAAW,qBAAsBtL,KAAK0nC,mBAAmBhB,EAAUiB,KAAKP,WAAYV,EAAUiB,KAAKN,gBACrH78B,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,CAAQzjB,GAAI,MAAO47B,EAAUiB,KAAKC,UAGtCp9B,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACG2Y,IAGL96B,EAAAC,EAAAzJ,cAAC+yB,GAAD,CACE3xB,KAAMA,EACN8pB,gBAAiBvjB,EAAOnG,SACxBipB,eAAgBzrB,KAAKyrB,eACrBjkB,KAAMA,EACN4kB,UAAW5kB,EACXyZ,aAAc,CAACylB,EAAU/I,eACzBxR,OAAKxiB,EAAA,GAAA1J,OAAAoT,EAAA,EAAApT,CAAA0J,EAAI+8B,EAAU/I,cAAgB,OAA9B19B,OAAAoT,EAAA,EAAApT,CAAA0J,EAAsCwC,EAAKuC,aAAag4B,EAAU/I,eAAiB,aAAnFh0B,GACLkhB,OAAQ7qB,KAAK6qB,OACbC,wBAAyB9qB,KAAK8qB,yBAE7Bwa,WAvJcx5B,cAAnB26B,GACGE,WAAa,CAClB,CACExgB,SAAU,4BACVwX,cAAexxB,EAAK0D,SACpB3O,KAAM,OACNqmC,QAAS,CACPC,OAAQ,GAEVG,KAAM,CACJC,OAAQ,6DACRR,WAAY,EACZC,cAAe,GAEjBR,gBAAiB,CACf,CACEG,YAAa,CACX,6BAEFG,SAAU,CAAC,CAACp5B,EAAG,EAAGD,EAAG,GAAI,CAACC,EAAG,EAAGD,EAAG,GAAI,CAACC,EAAG,EAAGD,EAAG,IACjD+4B,gBAAiB,CACf,CACEG,YAAa,CACX,6BAEFG,SAAU,CAAC,CAACp5B,EAAG,EAAGD,EAAG,GAAI,CAACC,EAAG,EAAGD,EAAG,GAAI,CAACC,EAAG,EAAGD,EAAG,IACjD+4B,gBAAiB,CACf,CACEG,YAAa,CACX,4BACA,6BAEFG,SAAU,CAAC,CAACp5B,EAAG,EAAGD,EAAG,GAAI,CAACC,EAAG,EAAGD,EAAG,GAAI,CAACC,EAAG,EAAGD,EAAG,IACjD+4B,gBAAiB,CACf,CACEG,YAAa,CACX,4BACA,6BAEFG,SAAU,CAAC,CAACp5B,EAAG,EAAGD,EAAG,GAAI,CAACC,EAAG,EAAGD,EAAG,GAAI,CAACC,EAAG,EAAGD,EAAG,IACjD+4B,gBAAiB,CACf,CACEG,YAAa,CACX,8BAGJ,CACEA,YAAa,CACX,8BAGJ,CACEA,YAAa,CACX,yCA8Gb/T,UAAWwT,ICpKpBoB,8MACJ1nB,MAAQ,CACNumB,UAAW,KACX79B,KAAM,QAGRi/B,kBAAoB,SAAApB,GAClB3mC,EAAKynB,SAAS,CAACkf,YAAW79B,KAAM,QAalCk/B,cAAgB,SAAAvgC,uFAVG4/B,EAAYC,GAC7B,OAAOpkC,IAAEgmB,MAAMoe,GAAevlC,IAAI,SAAAuB,GAAK,OACrCmH,EAAAC,EAAAzJ,cAACu1B,GAAA,EAAD,CACE1rB,IAAKxH,EACLf,KAAM8kC,EAAa/jC,EAAQ,OAAS,eACpCmrB,MAAO,8CASJ,IAAAtlB,EACgBlJ,KAAK+I,MAArB3G,EADA8G,EACA9G,KAAMuG,EADNO,EACMP,OACN+9B,EAAa1mC,KAAKmgB,MAAlBumB,UACDlkC,EAAWJ,EAAOA,EAAKI,SAAWmG,EAAOnG,SAE/C,IAAKkkC,EACH,OACEl8B,EAAAC,EAAAzJ,cAACgnC,GAAD,CAAiBF,kBAAmB9nC,KAAK8nC,oBAG7C,IAAMR,EAAqC,SAAnBZ,EAAUxlC,KAAV,gBAAAyF,OAA4C+/B,EAAUa,QAAQC,QAAW,oBAEjG,OACEh9B,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAD,CAAMS,UAAQ,GACZ3iB,EAAAC,EAAAzJ,cAAC0rB,GAAA,EAAKC,IAAN,KACEniB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,CAAQzjB,GAAI,MAAOw8B,GACnB98B,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,CAAQzjB,GAAI,KAAMQ,UAAW,qBAAsBtL,KAAK0nC,mBAAmBhB,EAAUiB,KAAKP,WAAYV,EAAUiB,KAAKN,gBACrH78B,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,CAAQzjB,GAAI,MAAO47B,EAAUiB,KAAKC,WAIxCp9B,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAKxI,MAAN,CAAY7R,MAAO,CAAyBgb,UAAW,OAAQC,SAAU,UACvExsB,EAAAC,EAAAzJ,cAACo1B,GAAA,EAAD,KACE5rB,EAAAC,EAAAzJ,cAACgsB,GAAD,CACE7S,QAAM,EAACC,SAAUpa,KAAK+nC,cACtBvlC,SAAUA,EACVgF,KAAMk/B,EAAUl/B,kBArDFsE,aA+DxBm8B,8MAsBJ9nB,qBACK5Z,EAAK2hC,qBAGV9Q,SAAW,SAAC3yB,EAADkF,GAAsB,IAAjBrH,EAAiBqH,EAAjBrH,KAAMgQ,EAAW3I,EAAX2I,MACpB/L,EAAKihB,SAAS,SAAArH,GACZ,IAAMumB,EAASzmC,OAAAsK,EAAA,EAAAtK,CAAA,GACVkgB,EAAMumB,WAEPyB,EAAuBzB,EACrB0B,EAAQ9lC,EAAK4L,MAAM,KALJ2D,GAAA,EAAAC,GAAA,EAAAC,OAAA7H,EAAA,IAMrB,QAAA8H,EAAAC,EAAmBm2B,EAAM1hC,MAAM,EAAG0hC,EAAMtiC,OAAS,GAAjDoM,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAqD,CACnDs2B,EAAuBA,EAD4Bn2B,EAAAM,QACE,IAPlC,MAAAM,GAAAd,GAAA,EAAAC,EAAAa,EAAA,YAAAf,GAAA,MAAAI,EAAAY,QAAAZ,EAAAY,SAAA,WAAAf,EAAA,MAAAC,GAUrB,OADAo2B,EAAqBC,EAAMA,EAAMtiC,OAAS,IAAMwM,EACzC,CAACo0B,eAEVngC,EAAK8hC,WAAW/lC,EAAMgQ,MAGxB+1B,WAAa,SAAA/lC,GACE,aAATA,GACFiE,EAAKihB,SAAS,SAAArH,GAAK,MAAK,CACtB6L,MAAM/rB,OAAAsK,EAAA,EAAAtK,CAAA,GACDkgB,EAAM6L,MADN,CAEH7F,UAAWhG,EAAMumB,UAAUvgB,UAAYha,EAAKm8B,kCAAkCnoB,EAAMumB,UAAUvgB,UAC1F,KAAO,uCAMnBoiB,gBAAkB,WAAM,IAAA7gB,EACKnhB,EAAK4Z,MAAzBumB,EADehf,EACfgf,UADehf,EACJsE,MACR7F,UAGV5f,EAAKwC,MAAM++B,kBAAX7nC,OAAAsK,EAAA,EAAAtK,CAAA,GACKymC,EADL,CAEE8B,UAAW,GACXhhC,KAAM2E,EAAKyF,+BAA+B80B,EAAUvgB,+FA5DtD,MAAO,CACLugB,UAAW,CACTvgB,SAAU,GACVwX,cAAexxB,EAAKqB,SACpBtM,KAAM,OACNqmC,QAAS,CACPC,OAAQ,GAEVG,KAAM,CACJC,OAAQ,GACRR,WAAY,EACZC,cAAe,IAGnBrb,MAAO,CACL7F,SAAU,wCAiDP,IAAA9E,EACoBrhB,KAAKmgB,MAAzBumB,EADArlB,EACAqlB,UAAW1a,EADX3K,EACW2K,MAElB,OACExhB,EAAAC,EAAAzJ,cAACyK,EAAA,SAAD,KACEjB,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,4BACA/jB,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,KACEziB,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAD,CAAMoR,SAAUzoC,KAAKuoC,iBACnB/9B,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKzJ,MAAN,KACEpjB,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKC,MAAN,CACEh1B,KAAM,WACNi1B,QAASC,KACT/I,MAAO,mBACPgJ,YAAa,gBACbhQ,SAAUznB,KAAKo3B,SACf9kB,MAAOo0B,EAAUvgB,SACjBuR,UAAQ,EACR1L,MAAOA,EAAM7F,YAGjB3b,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKzJ,MAAN,CAAY8a,QAAM,GAChBl+B,EAAAC,EAAAzJ,cAAA,gCACAwJ,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKsR,MAAN,CACErmC,KAAM,gBACNmsB,MAAO,WACPhH,SAAUznB,KAAKo3B,SACf9kB,MAAOnG,EAAKqB,SACZ+hB,QAASmX,EAAU/I,gBAAkBxxB,EAAKqB,WAE5ChD,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKsR,MAAN,CACErmC,KAAM,gBACNmsB,MAAO,WACPhH,SAAUznB,KAAKo3B,SACf9kB,MAAOnG,EAAK0D,SACZ0f,QAASmX,EAAU/I,gBAAkBxxB,EAAK0D,YAG9CrF,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKuR,OAAN,CACErB,QAAS,CACP,CAAC18B,IAAK,OAAQyH,MAAO,OAAQ8f,KAAM,SAErC9vB,KAAM,OACNmsB,MAAO,OACPhH,SAAUznB,KAAKo3B,SACf9kB,MAAOo0B,EAAUxlC,OAEnBsJ,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKzJ,MAAN,KACEpjB,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKC,MAAN,CACEC,QAASC,KACTt2B,KAAM,QACNutB,MAAK,YAAA9nB,OAAc+/B,EAAUa,QAAQC,QACrC5P,IAAK,EACL7nB,IAAK,GACLzN,KAAM,iBACNmlB,SAAUznB,KAAKo3B,SACf9kB,MAAOo0B,EAAUa,QAAQC,UAG7Bh9B,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKzJ,MAAN,KACEpjB,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKC,MAAN,CACEC,QAASC,KACT/I,MAAO,SACPnsB,KAAM,cACNmlB,SAAUznB,KAAKo3B,SACf9kB,MAAOo0B,EAAUiB,KAAKC,SAExBp9B,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKC,MAAN,CACEC,QAASC,KACTt2B,KAAM,QACNutB,MAAK,eAAA9nB,OAAiB+/B,EAAUiB,KAAKP,WAAhC,KAAAzgC,OAA8C+/B,EAAUiB,KAAKN,eAClEzP,IAAK,EACL7nB,IAAK22B,EAAUiB,KAAKN,cACpB/kC,KAAM,kBACNmlB,SAAUznB,KAAKo3B,SACf9kB,MAAOo0B,EAAUiB,KAAKP,cAG1B58B,EAAAC,EAAAzJ,cAACq2B,GAAA,EAAKrJ,OAAN,CAAa1jB,QAAQ,qBA/IHwB,aA2JfmnB,MAAW4U,IC5MpBgB,8MACJ1oB,MAAQ,CACN2oB,SAAU,KACVC,eAAgB,QAElB9T,eAAiB,SAAA6T,GACf,IAAIE,GAEFA,EADEF,EACK,SAAAniC,OAAYmiC,EAAS7nC,IAElB,YAEIlB,EAAKgJ,MAAMtH,SAAS0I,UAClCpK,EAAKgJ,MAAM2D,QAAQ3G,KAAKijC,GAEtBjpC,EAAKogB,MAAM2oB,WAAaA,GAG5B/oC,EAAKynB,SAAS,CAACshB,gBAEjBhR,qBAAuB,SAAAiR,GACrB,IAAIE,GAEFA,EADEF,EACW,eAAApiC,OAAkBoiC,EAAe9nC,IAEjC,YAEOlB,EAAKgJ,MAAMtH,SAAS0I,UACxCpK,EAAKgJ,MAAM2D,QAAQ3G,KAAKkjC,GAEtBlpC,EAAKogB,MAAM4oB,iBAAmBA,GAGlChpC,EAAKynB,SAAS,CAACuhB,sBAGjB9H,oBAAsB,SAAA/4B,GAAc,IAAAgB,EACXnJ,EAAKgJ,MAArB3G,EAD2B8G,EAC3B9G,KAAMuG,EADqBO,EACrBP,OAETT,EAAWP,QAAQV,SAAS7E,EAAKnB,IACnC0H,EAAOugC,gBAAgBhhC,GAEvBS,EAAOwgC,eAAejhC,MAI1Bg5B,gBAAkB,SAAAh5B,GACCnI,EAAKgJ,MAAfJ,OAEAu4B,gBAAgBh5B,MAGzBi5B,gBAAkB,SAAAj5B,GACCnI,EAAKgJ,MAAfJ,OAEAw4B,gBAAgBj5B,sFAGNwY,GACjB1gB,KAAKopC,0CAA0C1oB,GAC/C1gB,KAAKqpC,oBAAoB3oB,GACzB1gB,KAAKspC,kBAAkB5oB,qEAGiBA,GACxC,IAAMte,EAAOpC,KAAK+I,MAAM3G,KACnBA,IAGCse,EAAUte,MAASse,EAAUte,KAAKiE,cAAiBjE,IAAQA,EAAKiE,cAAgBjE,EAAKI,SAASwC,qBAClGm7B,GAASC,cAAcI,iEAIP9f,GAClB,IAAMte,EAAOpC,KAAK+I,MAAM3G,KACxB,GAAKA,GAIDse,EAAU9c,UAAU8D,SAAW1H,KAAK+I,MAAMnF,UAAU8D,UAIpD1H,KAAKmgB,MAAM2oB,UAAa9oC,KAAKmgB,MAAM2oB,SAASrhC,UAAhD,CAIA,IAAM8hC,EAAwB,IAAIC,IAAI9oB,EAAU9c,UAAU8D,OAAO5F,IAAI,SAAA0F,GAAI,OAAIA,EAAKvG,MAE5EwoC,EADgBzpC,KAAK+I,MAAMnF,UAAU8D,OAAO5F,IAAI,SAAA0F,GAAI,OAAIA,EAAKvG,KAC5B+F,OAAO,SAAA/F,GAAE,OAAKsoC,EAAsBG,IAAIzoC,KAC/E,GAAgC,IAA5BwoC,EAAiB3jC,OAArB,CAIA,IAAMilB,EAAU/qB,KAAK+I,MAAMnF,UAAUiD,KAAK4iC,EAAiB,IAC3D,GAAqB,IAAjB1e,EAAQ/Z,KAAY,CACtB,IAAMqwB,EAActW,EAAQpjB,QAAQ,KAAOvF,EAAKnB,GAAK8pB,EAAQpjB,QAAQ,GAAMojB,EAAQpjB,QAAQ,KAAOvF,EAAKnB,GAAK8pB,EAAQpjB,QAAQ,GAAK,KAC3HqxB,EAAYh5B,KAAK+I,MAAMhG,UAAU8D,KAAKw6B,GAC5ClB,GAASC,cAAcuJ,OAAO3Q,EAAS,eAAAryB,OAAkBqyB,EAAU12B,KAA5B,gCAEpB,IAAjByoB,EAAQ/Z,MACVhR,KAAKi1B,eAAelK,+CAINrK,GAAW,IAAAna,EAAAvG,KACrBoC,EAAOpC,KAAK+I,MAAM3G,KACxB,GAAKA,GAGApC,KAAK+I,MAAMnF,UAAU8D,OAAO5B,OAAjC,CAGA,IAAM8jC,EAA2B5pC,KAAK+I,MAAMnF,UAAU8D,OACnDV,OAAO,SAAAQ,GAAI,OAAIA,EAAKqiC,aAAeznC,EAAKnB,KACxC+F,OAAO,SAAAQ,GACN,IAAMsiC,EAAWppB,EAAU9c,UAAUiD,KAAKW,EAAKvG,IAC/C,OAAO6oC,GAAYA,EAASD,aAAeznC,EAAKnB,KAEpD,GAAK2oC,EAAyB9jC,OAA9B,CAIA,IAAMQ,EAAasjC,EAAyB9nC,IAAI,SAAA0F,GAC9C,IAAM65B,EAAc75B,EAAKG,QAAQ,KAAOvF,EAAKnB,GAAKuG,EAAKG,QAAQ,GAAMH,EAAKG,QAAQ,KAAOvF,EAAKnB,GAAKuG,EAAKG,QAAQ,GAAK,KAErH,OADkBpB,EAAKwC,MAAMhG,UAAU8D,KAAKw6B,KAGxCrI,EAAkC,IAAtB1yB,EAAWR,OAAeQ,EAAW,GAAK,KAC5D65B,GAASC,cAAcuJ,OAAO3Q,EAAS,wBAAAryB,OAA2BqyB,EAAU12B,MAArC,6BAAAqE,OAA2EijC,EAAyB9jC,QAAU,CACnJikC,IAAK,YACLzX,KAAI,6BAAA3rB,OAA+BijC,EAAyB9jC,OAAxD,+CAIC,IAAAwB,EAAAtH,KAAAqhB,EAC4BrhB,KAAKmgB,MAAjC2oB,EADAznB,EACAynB,SAAUC,EADV1nB,EACU0nB,eADV79B,EAE0ElL,KAAK+I,MAA/EnH,EAFAsJ,EAEAtJ,UAAWK,EAFXiJ,EAEWjJ,aAAcyD,EAFzBwF,EAEyBxF,UAAWtD,EAFpC8I,EAEoC9I,KAAwB8yB,EAF5DhqB,EAE0CnI,UAAY8D,KACvD4uB,EAAUqT,EAAW5T,EAAU4T,EAASnhC,QAAQ,IAAM,KACtD+tB,EAAUoT,EAAW5T,EAAU4T,EAASnhC,QAAQ,IAAM,KACtDmuB,KAAiB1zB,IAAQqzB,IAAWA,EAAQx0B,KAAOmB,EAAKnB,GACxD80B,KAAiB3zB,IAAQszB,IAAWA,EAAQz0B,KAAOmB,EAAKnB,GACxDsrB,EAAWuJ,GAAiBC,EAC5BiU,EAAmBlB,GAAYrT,GAAWC,EAC3CoT,EAASrhC,SAAT,UAAAd,OACWmvB,EAAgB,MAAQL,EAAQnzB,KAD3C,QAAAqE,OACsDovB,EAAgB,MAAQL,EAAQpzB,MACpFiqB,EAAQ,aAAA5lB,OACMmvB,EAAgB,MAAQL,EAAQnzB,KADtC,QAAAqE,OACiDovB,EAAgB,MAAQL,EAAQpzB,MADjF,YAAAqE,OAEKmvB,EAAgB,MAAQL,EAAQnzB,KAFrC,QAAAqE,OAEgDovB,EAAgB,MAAQL,EAAQpzB,MAC3F,4BACE01B,KAAkB+Q,IAAkB3mC,IAAQ2mC,EAAephC,QAAQV,SAAS7E,EAAKnB,IACjFgpC,EAAwBlB,EACzBA,EAAethC,SAAf,qBAAAd,OACsBoiC,EAAezmC,MACnC01B,EAAc,mBAAArxB,OACMoiC,EAAezmC,MADrB,uBAAAqE,OAEUoiC,EAAezmC,MAC1C,cACJ,OACEkI,EAAAC,EAAAzJ,cAACkpC,EAAA,EAAD,KACE1/B,EAAAC,EAAAzJ,cAACmpC,GAAmBrqB,YAApB,MACAtV,EAAAC,EAAAzJ,cAACisB,EAAA,EAAD,CAASC,UAAW,UAClB1iB,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,CAAQzjB,GAAI,MAAZ,gBACAN,EAAAC,EAAAzJ,cAAC4+B,GAAD,MACAp1B,EAAAC,EAAAzJ,cAACopC,GAAD,CAAOzhC,OAAQA,IACf6B,EAAAC,EAAAzJ,cAACqpC,GAAD,CAAQ1hC,OAAQA,KAEhB/G,EAaE,KAZDK,IAAiByD,EAChB8E,EAAAC,EAAAzJ,cAAC6jC,EAAA,EAAD,CACE5W,UAAQ,EACRC,OAAQ,iCACR5jB,QAASE,EAAAC,EAAAzJ,cAAA,0HAGXwJ,EAAAC,EAAAzJ,cAAC6jC,EAAA,EAAD,CACE3W,OAAQ,0BACR5jB,QAASE,EAAAC,EAAAzJ,cAAA,wEAIfwJ,EAAAC,EAAAzJ,cAACspC,EAAD,CAAiBl/B,KAAM,CAACilB,UAAU,EAAM8M,UAAU,EAAOlO,WAAW,GAAO9lB,MAAO,CAChFR,EAAOjD,UAAY,CAAC2E,SAAU,CAACW,KAAM,QAASV,QAAS,SAAUzB,KAAM,QAAS8yB,OAAQ,kBACtFnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KAAUxxB,EAAAC,EAAAzJ,cAACupC,GAAD,CAAOtV,eAAgB3tB,EAAK2tB,eAAgB6C,qBAAsBxwB,EAAKwwB,0BAC9E,KACLnvB,EAAOjD,UAAY,CAAC2E,SAAU,CAACW,KAAM,OAAQV,QAAS0/B,GAAkBnhC,KAAM,OAAQoB,SAAU6+B,EAAQ,QAAAniC,OAAWmiC,EAAS7nC,IAAO,OAAQ06B,OAAQ,kBACjJnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KAAUxxB,EAAAC,EAAAzJ,cAACwpC,GAAD,CAAYhjC,KAAMshC,EAAU7T,eAAgB3tB,EAAK2tB,oBACxD,KACLtsB,EAAOjD,UAAY,CAAC2E,SAAU,CAACW,KAAM,UAAWV,QAAS2/B,GAAwBphC,KAAM,aAAcoB,SAAU8+B,EAAc,cAAApiC,OAAiBoiC,EAAe9nC,IAAO,aAAc06B,OAAQ,kBACxLnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KACExxB,EAAAC,EAAAzJ,cAACypC,GAAD,CACEviC,WAAY6gC,EACZjR,qBAAsBxwB,EAAKwwB,qBAC3B7C,eAAgB3tB,EAAK2tB,eACrBgM,oBAAqB35B,EAAK25B,oBAC1BC,gBAAiB55B,EAAK45B,gBACtBC,gBAAiB75B,EAAK65B,qBAGvB,KACL,CAAC92B,SAAU,CAACW,KAAM,UAAWV,QAAS,WAAYzB,KAAM,UAAW8yB,OAAQ,kBACzEnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KAAUxxB,EAAAC,EAAAzJ,cAAC0pC,GAAD,SAEZjlC,gLAAYo6B,gBAAkB,CAACx1B,SAAU,CAACW,KAAM,OAAQV,QAAS,iBAAkBzB,KAAM,gBAAiB8yB,OAAQ,kBAChHnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KAAUxxB,EAAAC,EAAAzJ,cAAC2pC,GAAD,SACP,KACLllC,gLAAYo6B,gBAAkB,CAACx1B,SAAU,CAACW,KAAM,SAAUV,QAAS,oBAAqBzB,KAAM,mBAAoB8yB,OAAQ,kBACxHnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KAAUxxB,EAAAC,EAAAzJ,cAAC4pC,GAAD,SACP,KACLnlC,gLAAYo6B,gBAAkB,CAACx1B,SAAU,CAACW,KAAM,SAAUV,QAAS,cAAezB,KAAM,aAAc8yB,OAAQ,kBAC5GnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KAAUxxB,EAAAC,EAAAzJ,cAAC6pC,GAAD,SACP,KACL,CAACxgC,SAAU,CAACW,KAAM,OAAQV,QAAS,iBAAkBzB,KAAM,gBAAiB8yB,OAAQ,kBAClFnxB,EAAAC,EAAAzJ,cAAC6K,EAAA,EAAImwB,KAAL,KAAUxxB,EAAAC,EAAAzJ,cAAC8pC,GAAD,YAGdtgC,EAAAC,EAAAzJ,cAACutB,EAAA,EAAD,CAAQzjB,GAAI,KAAMiR,MAAO,CAACyS,MAAO,YAAa/oB,kBAzNpCqG,aAsOHE,eAAWinB,GAAW4V,KChPjBkC,QACW,cAA7B1qC,OAAOoB,SAASupC,UAEe,UAA7B3qC,OAAOoB,SAASupC,UAEhB3qC,OAAOoB,SAASupC,SAASliC,MACvB,2DCXNmiC,IAAStP,OACPnxB,EAAAC,EAAAzJ,cAAC++B,EAAA,EAAD,CAAemL,SAAUzlC,iBACvB+E,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,KACElB,EAAAC,EAAAzJ,cAAC0K,EAAA,EAAD,KACElB,EAAAC,EAAAzJ,cAACmqC,GAAD,SAILtqC,SAASC,eAAe,SDkHrB,kBAAmBwyB,WACrBA,UAAU8X,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.2c97928e.chunk.js","sourcesContent":["import _ from \"lodash\";\r\n\r\nconst appVersion = 4;\r\n\r\nclass Client {\r\n  static getDefaultSettings() {\r\n    return JSON.parse(JSON.stringify({\r\n      autoSubmitMoves: false,\r\n      enableNotifications: false,\r\n      theme: {pieces: 'king', scheme: '', rotateOpponent: true, animations: true, arrows: true, numbers: 'obvious'},\r\n    }));\r\n  }\r\n\r\n  scriptIoReloadInterval = null;\r\n\r\n  constructor() {\r\n    this.id = localStorage.getItem('user-id') || null;\r\n    this.username = localStorage.getItem('user-name') || null;\r\n    const password = localStorage.getItem('user-password') || null;\r\n    localStorage.removeItem('user-password');\r\n    this.token = localStorage.getItem('user-token') || password;\r\n    const localSettings = localStorage.getItem('user-settings') || 'null';\r\n    try {\r\n      this.settings = JSON.parse(localSettings);\r\n    } catch (e) {\r\n      this.settings = null;\r\n    }\r\n    if (!this.settings) {\r\n      this.settings = this.constructor.getDefaultSettings();\r\n    }\r\n    if (!window.io) {\r\n      window.io = () => ({\r\n        on: () => console.warn(\"Socket script was missing\"),\r\n        emit: () => console.warn(\"Socket script was missing\"),\r\n        unavailable: true,\r\n      });\r\n      window.io.unavailable = true;\r\n      this.scriptIoReloadInterval = setInterval(this.reloadScriptIo, 1000);\r\n    }\r\n\r\n    this.disconnected = false;\r\n\r\n    this.onConnect = [];\r\n    this.onDisconnect = [];\r\n    this.onUser = [];\r\n    this.onUsers = [];\r\n    this.onGames = [];\r\n    this.onTournaments = [];\r\n\r\n    this.bindSocket();\r\n  }\r\n\r\n  bindSocket() {\r\n    this.socket = window.io(process.env.REACT_APP_SERVER_URL);\r\n    this.available = !this.socket.unavailable;\r\n    this.connected = false;\r\n    this.socket.on('connect', this.justConnected);\r\n    this.socket.on('disconnect', this.justDisconnected);\r\n    this.socket.on(\"reload\", this.reload);\r\n\r\n    this.user = null;\r\n    this.socket.on(\"user\", this.gotUser);\r\n\r\n    this.usersInfo = this.prepareUsers([]);\r\n    this.socket.on(\"users\", this.gotUsers);\r\n\r\n    this.gamesInfo = this.prepareGames([]);\r\n    this.socket.on(\"games\", this.gotGames);\r\n\r\n    this.tournamentsInfo = this.prepareTournaments([]);\r\n    this.socket.on(\"tournaments\", this.gotTournaments);\r\n\r\n    this.getUser();\r\n  }\r\n\r\n  reloadScriptIo = () => {\r\n    if (!window.io.unavailable) {\r\n      clearInterval(this.scriptIoReloadInterval);\r\n      this.scriptIoReloadInterval = null;\r\n      this.bindSocket();\r\n      console.log('Loaded script.io!');\r\n      return;\r\n    }\r\n    const oldScriptEl = document.getElementById('socket-io-script');\r\n    const newScriptEl = document.createElement('script');\r\n    newScriptEl.id = oldScriptEl.id;\r\n    newScriptEl.type = oldScriptEl.type;\r\n    newScriptEl.src = oldScriptEl.src;\r\n    oldScriptEl.remove();\r\n    document.head.append(newScriptEl);\r\n    console.warn('Retrying socket.io script download...');\r\n  };\r\n\r\n  subscribe(callbacks) {\r\n    for (const name of ['onConnect', 'onDisconnect', 'onUser', 'onUsers', 'onGames', 'onTournaments']) {\r\n      const callback = callbacks[name];\r\n      if (callback) {\r\n        this[name].push(callback);\r\n      }\r\n    }\r\n  }\r\n\r\n  unsubscribe(callbacks) {\r\n    for (const name of ['onConnect', 'onDisconnect', 'onUser', 'onUsers', 'onGames']) {\r\n      const callback = callbacks[name];\r\n      if (callback) {\r\n        _.pull(this[name], callback);\r\n      }\r\n    }\r\n  }\r\n\r\n  getUser() {\r\n    this.socket.emit(\"create-user\", {\r\n      appVersion,\r\n      id: this.id,\r\n      name: this.username,\r\n      token: this.token,\r\n      settings: this.settings,\r\n    });\r\n  }\r\n\r\n  logIn(name, password, mergeUsers) {\r\n    this.socket.emit(\"log-in\", {appVersion, name, password, mergeUsers});\r\n  }\r\n\r\n  logOut() {\r\n    this.socket.emit(\"log-out\");\r\n  }\r\n\r\n  reload = () => {\r\n    window.location.reload(true);\r\n  };\r\n\r\n  justConnected = () => {\r\n    this.getUser();\r\n    this.connected = true;\r\n    this.onConnect.map(callback => callback(this.connected));\r\n  };\r\n\r\n  justDisconnected = () => {\r\n    this.connected = false;\r\n    this.disconnected = true;\r\n    this.onDisconnect.map(callback => callback(this.connected));\r\n  };\r\n\r\n  gotUser = user => {\r\n    if (user) {\r\n      this.id = user.id;\r\n      this.username = user.name;\r\n      this.token = user.token;\r\n      this.settings = user.settings;\r\n      localStorage.setItem('user-id', this.id);\r\n      localStorage.setItem('user-name', this.username);\r\n      localStorage.setItem('user-token', this.token);\r\n      localStorage.setItem('user-settings', JSON.stringify(this.settings));\r\n    }\r\n    this.user = user;\r\n    this.onUser.map(callback => callback(user));\r\n    this.gotUsers(this.usersInfo.users);\r\n  };\r\n\r\n  changeUsername(name) {\r\n    this.socket.emit(\"change-username\", name);\r\n  }\r\n\r\n  changePassword(password) {\r\n    this.socket.emit(\"change-password\", password);\r\n  }\r\n\r\n  updateSettings(settings) {\r\n    this.socket.emit(\"update-settings\", settings);\r\n  }\r\n\r\n  changeReadyToPlay(readyToPlay) {\r\n    this.socket.emit(\"change-ready-to-play\", readyToPlay);\r\n  }\r\n\r\n  gotUsers = users => {\r\n    users = _.orderBy(users, [user => user.isUserRatingProvisional ? 1 : 0, 'score', 'maxScore'], ['asc', 'desc', 'desc']);\r\n    users.forEach((user, index) => {\r\n      user.rank = index + 1;\r\n    });\r\n    this.usersInfo = this.prepareUsers(users);\r\n    this.onUsers.map(callback => callback(this.usersInfo));\r\n  };\r\n\r\n  prepareUsers(users) {\r\n    let otherUsers;\r\n    if (this.user) {\r\n      const myIndex = users.findIndex(user => user.id === this.user.id);\r\n      if (myIndex >= 0) {\r\n        otherUsers = users.slice(0, myIndex).concat(users.slice(myIndex + 1));\r\n        users = [users[myIndex], ...otherUsers];\r\n      } else {\r\n        otherUsers = users;\r\n      }\r\n    } else {\r\n      otherUsers = users;\r\n    }\r\n    const byId = _.fromPairs(users.map(user => [user.id, user]));\r\n    const online = users.filter(user => user.online);\r\n    const readyToPlay = online.filter(user => [true, this.user ? this.user.id : true].includes(user.readyToPlay));\r\n    return {\r\n      users,\r\n      byId,\r\n      other: otherUsers,\r\n      online,\r\n      offline: users.filter(user => !user.online),\r\n      readyToPlay,\r\n      readyToPlayMe: readyToPlay.filter(user => this.user && this.user.id === user.readyToPlay),\r\n      challengedUser: this.user ? (byId[this.user.readyToPlay] || null ): null,\r\n    };\r\n  }\r\n\r\n  gotGames = games => {\r\n    games = _.sortBy(games, ['startDatetime', 'id'], ['desc', 'desc']);\r\n    this.gamesInfo = this.prepareGames(games);\r\n    this.onGames.map(callback => callback(this.gamesInfo));\r\n  };\r\n\r\n  prepareGames(games) {\r\n    const live = games.filter(game => !game.finished);\r\n    const finished = games.filter(game => game.finished);\r\n    return {\r\n      games,\r\n      byId: _.fromPairs(games.map(game => [game.id, game])),\r\n      live,\r\n      myLive: this.user ? live.filter(game => game.userIds.includes(this.user.id)) : [],\r\n      otherLive: this.user ? live.filter(game => !game.userIds.includes(this.user.id)) : live,\r\n      finished,\r\n      myFinished: this.user ? finished.filter(game => game.userIds.includes(this.user.id)) : [],\r\n      otherFinished: this.user ? finished.filter(game => !game.userIds.includes(this.user.id)) : live,\r\n      mine: this.user ? games.filter(game => game.userIds.includes(this.user.id)) : [],\r\n    };\r\n  }\r\n\r\n  submitGameMove(game, moves) {\r\n    this.socket.emit(\"submit-game-moves\", {id: game.id, moves});\r\n  }\r\n\r\n  createTournament(data) {\r\n    this.socket.emit(\"create-tournament\", data);\r\n  }\r\n\r\n  joinTournament(tournament) {\r\n    this.socket.emit(\"join-tournament\", tournament.id);\r\n  }\r\n\r\n  leaveTournament(tournament) {\r\n    this.socket.emit(\"leave-tournament\", tournament.id);\r\n  }\r\n\r\n  startTournament(tournament) {\r\n    this.socket.emit(\"start-tournament\", tournament.id);\r\n  }\r\n\r\n  abortTournament(tournament) {\r\n    this.socket.emit(\"abort-tournament\", tournament.id);\r\n  }\r\n\r\n  gotTournaments = tournaments => {\r\n    tournaments = _.sortBy(tournaments, ['startDatetime', 'endDatetime', 'createdDatetime', 'id'], ['desc', 'desc', 'desc', 'desc']);\r\n    this.tournamentsInfo = this.prepareTournaments(tournaments);\r\n    this.onTournaments.map(callback => callback(this.tournamentsInfo));\r\n  };\r\n\r\n  prepareTournaments(tournaments) {\r\n    const future = tournaments.filter(tournament => !tournament.started);\r\n    const live = tournaments.filter(tournament => tournament.started && !tournament.finished);\r\n    const futureAndLive = future.concat(live);\r\n    const finished = tournaments.filter(tournament => tournament.finished);\r\n    return {\r\n      tournaments,\r\n      byId: _.fromPairs(tournaments.map(game => [game.id, game])),\r\n      future, live, futureAndLive, finished,\r\n      myFuture: this.user ? future.filter(tournament => tournament.userIds.includes(this.user.id)) : [],\r\n      myLive: this.user ? live.filter(tournament => tournament.userIds.includes(this.user.id)) : [],\r\n      myFutureAndLive: this.user ? futureAndLive.filter(tournament => tournament.userIds.includes(this.user.id)) : [],\r\n      myFinished: this.user ? finished.filter(tournament => tournament.userIds.includes(this.user.id)) : [],\r\n      otherFuture: this.user ? live.filter(tournament => !tournament.userIds.includes(this.user.id)) : live,\r\n      otherLive: this.user ? future.filter(tournament => !tournament.userIds.includes(this.user.id)) : future,\r\n      otherFutureAndLive: this.user ? futureAndLive.filter(tournament => !tournament.userIds.includes(this.user.id)) : future,\r\n      otherFinished: this.user ? finished.filter(tournament => !tournament.userIds.includes(this.user.id)) : finished,\r\n      mine: this.user ? tournaments.filter(tournament => tournament.userIds.includes(this.user.id)) : [],\r\n    };\r\n  }\r\n}\r\n\r\nexport const client = new Client();\r\nwindow.client = client;\r\n\r\nexport default Client;\r\n","import PropTypes from \"prop-types\";\r\nimport React, { Component, Fragment } from 'react';\r\nimport {\r\n  NavLink,\r\n  Redirect, Route,\r\n  Switch,\r\n  withRouter\r\n} from \"react-router-dom\";\r\nimport { Menu, Tab } from 'semantic-ui-react';\r\n\r\nclass NavigationalTab extends Component {\r\n  constructUrl(path) {\r\n    const {match} = this.props;\r\n    return `${match.url.endsWith('/') ? match.url.slice(0, -1) : match.url}${path ? `/${path}` : ''}`;\r\n  }\r\n\r\n  getPreparedPanesDefaultToAndActiveIndex() {\r\n    const {panes, defaultIndex, match, location} = this.props;\r\n    let defaultTo = null;\r\n    let activeIndex = null;\r\n    let activeTo = match.url;\r\n\r\n    const preparedPanes = panes\r\n      .map((pane, originalIndex) => [pane, originalIndex])\r\n      .filter(([pane]) => pane)\r\n      .map(([pane, originalIndex], index) => {\r\n        if (!pane) {\r\n          return null;\r\n        }\r\n\r\n        const to = this.constructUrl(pane.path);\r\n        if (originalIndex === defaultIndex) {\r\n          defaultTo = to;\r\n        }\r\n        const navigate = pane.navigate !== undefined ? this.constructUrl(pane.navigate) : to;\r\n        if (location.pathname.startsWith(navigate)) {\r\n          activeIndex = index;\r\n          activeTo = to;\r\n        }\r\n\r\n        const menuItem = (\r\n          typeof pane.menuItem === typeof \"\"\r\n            ? {content: pane.menuItem}\r\n            : pane.menuItem\r\n        );\r\n        return {\r\n          to,\r\n          ...pane,\r\n          menuItem: (\r\n            <Menu.Item\r\n              key={pane.path}\r\n              as={NavLink}\r\n              to={navigate}\r\n              {...menuItem}\r\n              icon={pane.icon || menuItem.icon}\r\n            />\r\n          ),\r\n        };\r\n      })\r\n      .filter(preparedPane => preparedPane);\r\n    return {preparedPanes, defaultTo, activeIndex, activeTo}\r\n  }\r\n\r\n  render() {\r\n    const {tab, menu, match, renderActiveOnly, className} = this.props;\r\n    const {preparedPanes, defaultTo, activeIndex, activeTo} = this.getPreparedPanesDefaultToAndActiveIndex();\r\n\r\n    return (\r\n      <Fragment>\r\n        {defaultTo !== null ? (\r\n          <Switch>\r\n            <Redirect exact from={match.url} to={defaultTo} />\r\n          </Switch>\r\n        ) : null}\r\n        <Route path={activeTo}>\r\n          <Tab\r\n            menu={menu}\r\n            renderActiveOnly={renderActiveOnly}\r\n            {...tab}\r\n            panes={preparedPanes}\r\n            activeIndex={activeIndex}\r\n            className={className}\r\n          />\r\n        </Route>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nNavigationalTab.propTypes = {\r\n  panes: PropTypes.arrayOf(PropTypes.shape({\r\n    ...Menu.Item.propTypes,\r\n    path: PropTypes.string,\r\n    menuItem: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\r\n  })).isRequired,\r\n  match: PropTypes.object.isRequired,\r\n  location: PropTypes.object.isRequired,\r\n  tab: PropTypes.object,\r\n  menu: PropTypes.object,\r\n  renderActiveOnly: PropTypes.bool.isRequired,\r\n  defaultIndex: PropTypes.number.isRequired,\r\n};\r\n\r\nNavigationalTab.defaultProps = {\r\n  renderActiveOnly: true,\r\n  defaultIndex: 0,\r\n};\r\n\r\nexport default withRouter(NavigationalTab);\r\n","import _ from \"lodash\";\r\nimport chalk from 'chalk';\r\n\r\nclass InvalidMoveError extends Error {}\r\n\r\nclass Game {\r\n  static PLAYER_A = 'player-a';\r\n  static PLAYER_B = 'player-b';\r\n  static PLAYERS = [\r\n    this.PLAYER_A,\r\n    this.PLAYER_B,\r\n  ];\r\n  static OTHER_PLAYER = {\r\n    [this.PLAYER_A]: this.PLAYER_B,\r\n    [this.PLAYER_B]: this.PLAYER_A,\r\n  };\r\n\r\n  static WORKER_FIRST = 'first-worker';\r\n  static WORKER_SECOND = 'second-worker';\r\n  static WORKERS = [this.WORKER_FIRST, this.WORKER_SECOND];\r\n\r\n  static MOVE_TYPE_PLACE_FIRST_WORKER = 'place-first-worker';\r\n  static MOVE_TYPE_PLACE_SECOND_WORKER = 'place-second-worker';\r\n  static MOVE_TYPE_SELECT_WORKER_TO_MOVE = 'select-worker-to-move';\r\n  static MOVE_TYPE_MOVE_FIRST_WORKER = 'move-first-worker';\r\n  static MOVE_TYPE_MOVE_SECOND_WORKER = 'move-second-worker';\r\n  static MOVE_TYPE_BUILD_AROUND_WORKER = 'build-around-worker';\r\n\r\n  static MOVE_TYPES_START_OF_TURN = [this.MOVE_TYPE_PLACE_FIRST_WORKER, this.MOVE_TYPE_SELECT_WORKER_TO_MOVE];\r\n  static MOVE_TYPES_PLACE_WORKER = [this.MOVE_TYPE_PLACE_FIRST_WORKER, this.MOVE_TYPE_PLACE_SECOND_WORKER];\r\n  static MOVE_TYPES_MOVE_WORKER = [this.MOVE_TYPE_MOVE_FIRST_WORKER, this.MOVE_TYPE_MOVE_SECOND_WORKER];\r\n  static MOVE_TYPES_MOVE_OR_BUILD = [...this.MOVE_TYPES_MOVE_WORKER, this.MOVE_TYPE_BUILD_AROUND_WORKER];\r\n\r\n  static ROWS = Array.from({length: 5}, (value, index) => index);\r\n  static COLUMNS = Array.from({length: 5}, (value, index) => index);\r\n  static MOVE_NOTATION = this.ROWS.map(y => this.COLUMNS.map(x =>\r\n    `${['A', 'B', 'C', 'D', 'E'][x]}${['1', '2', '3', '4', '5'][y]}`));\r\n  static MOVE_RESIGNED_NOTATION = {\r\n    [this.PLAYER_A]: 'RA',\r\n    [this.PLAYER_B]: 'RB',\r\n  };\r\n  static MOVE_REVERSE_NOTATION = {\r\n    ..._.fromPairs(_.flatten(this.ROWS.map(y => this.COLUMNS.map(x =>\r\n      [`${['A', 'B', 'C', 'D', 'E'][x]}${['1', '2', '3', '4', '5'][y]}`, {x, y}])))),\r\n    'RA': [{resign: this.PLAYER_A}],\r\n    'RB': [{resign: this.PLAYER_B}],\r\n  };\r\n  static MOVE_NOTATION_COMPRESSION = _.fromPairs(Object.keys(this.MOVE_REVERSE_NOTATION).sort().map((value, index) =>\r\n    [value, String.fromCharCode(index < 26 ? 65 + index : 48 + (index - 26))]));\r\n  static MOVE_NOTATION_DECOMPRESSION = _.fromPairs(Object.keys(this.MOVE_REVERSE_NOTATION).sort().map((value, index) =>\r\n    [String.fromCharCode(index < 26 ? 65 + index : 48 + (index - 26)), this.MOVE_REVERSE_NOTATION[value]]));\r\n\r\n  static POSITION_NOTATION = _.fromPairs([0, 1, 2, 3, 4].map(\r\n    level => [level, _.fromPairs([null, this.PLAYER_A, this.PLAYER_B].map(\r\n      player => [player, `${level}-${player}`]))]));\r\n  static POSITION_REVERSE_NOTATION = _.fromPairs(_.flatten(Object.entries(this.POSITION_NOTATION).map(\r\n    ([levelStr, notations]) => Object.entries(notations).map(\r\n      ([playerStr, notation]) => [notation, {level: parseInt(levelStr), player: playerStr === \"null\" ? null : playerStr}]))));\r\n  static POSITION_NOTATION_COMPRESSION_MAP = _.fromPairs(_.flatten(Object.entries(this.POSITION_NOTATION).map(\r\n    ([, notations]) => Object.entries(notations).map(\r\n      ([, notation]) => notation))).map((notation, index) => [notation, String.fromCharCode(65 + index)]));\r\n  static POSITION_NOTATION_COMPRESSION = _.fromPairs(Object.entries(this.POSITION_NOTATION).map(\r\n    ([levelStr, notations]) => [levelStr, _.fromPairs(Object.entries(notations).map(\r\n      ([playerStr, notation]) => [playerStr, this.POSITION_NOTATION_COMPRESSION_MAP[notation]]))]));\r\n  static POSITION_NOTATION_DECOMPRESSION = _.fromPairs(Object.entries(this.POSITION_NOTATION_COMPRESSION_MAP).map(\r\n    ([notation, compressedNotation]) => [compressedNotation, this.POSITION_REVERSE_NOTATION[notation]]));\r\n\r\n  static create() {\r\n    const rowsAndColumns = this.getInitialRowsAndColumns();\r\n    const status = this.getInitialStatus();\r\n    return new this(rowsAndColumns, status, null, null, false);\r\n  }\r\n\r\n  static fromMoves(moves) {\r\n    let game = this.create();\r\n    game = game.makeMoves(moves);\r\n\r\n    return game;\r\n  }\r\n\r\n  static fromRowsAndColumns(rowsAndColumns) {\r\n    if (rowsAndColumns.length !== 5) {\r\n      throw new Error(`Expected 5 rows but got ${rowsAndColumns.length}`);\r\n    }\r\n    if (rowsAndColumns.find(row => row.cells.length !== 5)) {\r\n      throw new Error(`Expected 5 columns but some rows had a different number`);\r\n    }\r\n    if (rowsAndColumns.find((row, y) => row.y !== y)) {\r\n      throw new Error(`Some rows had invalid \\`y\\``);\r\n    }\r\n    if (rowsAndColumns.find(row => row.cells.find((cell, x) => cell.x !== x || cell.y !== row.y))) {\r\n      throw new Error(`Some cells had invalid \\`x\\` or \\`y\\``);\r\n    }\r\n    const hasInvalidPlayerOrWorker = cell => (\r\n      (cell.player && !this.PLAYERS.includes(cell.player))\r\n      || (cell.worker && !this.WORKERS.includes(cell.worker))\r\n    );\r\n    if (this.findCell(rowsAndColumns, hasInvalidPlayerOrWorker)) {\r\n      throw new Error(`Some cells had invalid player or worker`);\r\n    }\r\n    if (this.findCell(rowsAndColumns, cell => ![0, 1, 2, 3, 4].includes(cell.level))) {\r\n      throw new Error(`Some cells have invalid level`);\r\n    }\r\n    const playerACount = this.findCells(rowsAndColumns, cell => cell.player === this.PLAYER_A).length;\r\n    const playerBCount = this.findCells(rowsAndColumns, cell => cell.player === this.PLAYER_B).length;\r\n    if (playerACount > 2 || playerBCount > 2) {\r\n      throw new Error(\r\n        `Players can have at most 2 workers, but player A has ${playerACount} and player B has ${playerBCount}`);\r\n    }\r\n    let status;\r\n    const maxLevel = Math.max(..._.flatten(rowsAndColumns.map(row => row.cells.map(cell => cell.level))));\r\n    if (maxLevel === 0) {\r\n      if (playerBCount === 0) {\r\n        if (playerACount === 0) {\r\n          status = {\r\n            nextPlayer: this.PLAYER_A,\r\n            moveType: this.MOVE_TYPE_PLACE_FIRST_WORKER,\r\n            availableMovesMatrix: this.allMovesAreAvailableMatrix(),\r\n            canUndo: false,\r\n            resignedPlayer: null,\r\n          };\r\n        } else if (playerACount === 1) {\r\n          status = {\r\n            nextPlayer: this.PLAYER_A,\r\n            moveType: this.MOVE_TYPE_PLACE_SECOND_WORKER,\r\n            availableMovesMatrix: this.getEmptyCellsAvailableMovesMatrix(rowsAndColumns),\r\n            canUndo: false,\r\n            resignedPlayer: null,\r\n          };\r\n        } else {\r\n          const playerAFirstWorker = this.findCell(rowsAndColumns,\r\n            cell => cell.player === this.PLAYER_A && cell.worker === this.WORKER_FIRST);\r\n          const playerASecondWorker = this.findCell(rowsAndColumns,\r\n            cell => cell.player === this.PLAYER_A && cell.worker === this.WORKER_SECOND);\r\n          if (!playerAFirstWorker || !playerASecondWorker) {\r\n            throw new Error(`Could not find both workers of player A`);\r\n          }\r\n          status = {\r\n            nextPlayer: this.PLAYER_B,\r\n            moveType: this.MOVE_TYPE_PLACE_FIRST_WORKER,\r\n            availableMovesMatrix: this.getEmptyCellsAvailableMovesMatrix(rowsAndColumns),\r\n            canUndo: false,\r\n            resignedPlayer: null,\r\n          };\r\n        }\r\n      } else {\r\n        if (playerACount !== 2) {\r\n          throw new Error(`Player A must put both of their workers before player B can place theirs`);\r\n        }\r\n        if (playerBCount === 1) {\r\n          status = {\r\n            nextPlayer: this.PLAYER_B,\r\n            moveType: this.MOVE_TYPE_PLACE_SECOND_WORKER,\r\n            availableMovesMatrix: this.getEmptyCellsAvailableMovesMatrix(rowsAndColumns),\r\n            canUndo: false,\r\n            resignedPlayer: null,\r\n          };\r\n        } else {\r\n          const playerBFirstWorker = this.findCell(rowsAndColumns,\r\n            cell => cell.player === this.PLAYER_B && cell.worker === this.WORKER_FIRST);\r\n          const playerBSecondWorker = this.findCell(rowsAndColumns,\r\n            cell => cell.player === this.PLAYER_B && cell.worker === this.WORKER_SECOND);\r\n          if (!playerBFirstWorker || !playerBSecondWorker) {\r\n            throw new Error(`Could not find both workers of player B`);\r\n          }\r\n          status = {\r\n            nextPlayer: this.PLAYER_A,\r\n            moveType: this.MOVE_TYPE_SELECT_WORKER_TO_MOVE,\r\n            availableMovesMatrix: this.getPlayerAvailableMovesMatrix(rowsAndColumns, this.PLAYER_A),\r\n            canUndo: false,\r\n            resignedPlayer: null,\r\n          };\r\n        }\r\n      }\r\n    } else {\r\n      if (playerACount !== 2 || playerBCount !== 2) {\r\n        throw new Error(`Both players must have placed both of their workers before they can move and build`);\r\n      }\r\n\r\n      if (this.findCell(rowsAndColumns, cell => cell.level === 4 && cell.player)) {\r\n        throw new Error(`Some workers are on the 4th level`);\r\n      }\r\n      const wonWorkers = this.findCells(rowsAndColumns, cell => cell.level === 3 && cell.player);\r\n      if (wonWorkers.length > 1) {\r\n        throw new Error(`Too many workers have won`);\r\n      }\r\n      const buildCount = _.sum(_.flatten(rowsAndColumns.map(row => row.cells.map(cell => cell.level))));\r\n      if (buildCount % 2 === 0) {\r\n        status = {\r\n          nextPlayer: this.PLAYER_A,\r\n          moveType: this.MOVE_TYPE_SELECT_WORKER_TO_MOVE,\r\n          availableMovesMatrix: this.getPlayerAvailableMovesMatrix(rowsAndColumns, this.PLAYER_A),\r\n          canUndo: false,\r\n          resignedPlayer: null,\r\n        };\r\n      } else {\r\n        status = {\r\n          nextPlayer: this.PLAYER_B,\r\n          moveType: this.MOVE_TYPE_SELECT_WORKER_TO_MOVE,\r\n          availableMovesMatrix: this.getPlayerAvailableMovesMatrix(rowsAndColumns, this.PLAYER_B),\r\n          canUndo: false,\r\n          resignedPlayer: null,\r\n        };\r\n      }\r\n    }\r\n    return new this(rowsAndColumns, status, null, null, false);\r\n  }\r\n\r\n  static fromMoveNotation(fullNotation) {\r\n    const moves = fullNotation\r\n      .split('')\r\n      .map(part => this.MOVE_REVERSE_NOTATION[part]);\r\n    if (moves.filter(move => !move).length) {\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      return this.fromMoves(moves, true);\r\n    } catch (e) {\r\n      return this.fromMoves(moves, false);\r\n    }\r\n  }\r\n\r\n  static fromCompressedMoveNotation(compressedFullNotation) {\r\n    const moves = compressedFullNotation\r\n      .split('')\r\n      .map(part => this.MOVE_NOTATION_DECOMPRESSION[part]);\r\n    if (moves.filter(move => !move).length) {\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      return this.fromMoves(moves, true);\r\n    } catch (e) {\r\n      return this.fromMoves(moves, false);\r\n    }\r\n  }\r\n\r\n  static getPositionNotation(rowsAndColumns) {\r\n    return _.flatten(rowsAndColumns.map(\r\n      row => row.cells.map(\r\n        cell => this.POSITION_NOTATION_COMPRESSION[cell.level][cell.player])))\r\n      .join('');\r\n  }\r\n\r\n  static fromPositionNotation(notation) {\r\n    const rowsAndColumns = this.ROWS.map(y => ({\r\n      y, cells: this.COLUMNS.map(x => ({\r\n        x, y, ...this.POSITION_REVERSE_NOTATION[notation[y * 5 + x]],\r\n      })),\r\n    }));\r\n    return this.fromPosition(rowsAndColumns);\r\n  }\r\n\r\n  static fromCompressedPositionNotation(notation) {\r\n    const rowsAndColumns = this.ROWS.map(y => ({\r\n      y, cells: this.COLUMNS.map(x => ({\r\n        x, y, ...this.POSITION_NOTATION_DECOMPRESSION[notation[y * 5 + x]],\r\n      })),\r\n    }));\r\n    return this.fromPosition(rowsAndColumns);\r\n  }\r\n\r\n  static isValidCompressedPositionNotation(notation) {\r\n    try {\r\n      this.fromCompressedPositionNotation(notation);\r\n      return true;\r\n    } catch(e) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  static fromPosition(rowsAndColumns) {\r\n    let playerACount = 0, playerBCount = 0;\r\n    for (const x of this.ROWS) {\r\n      for (const y of this.COLUMNS) {\r\n        const cell = rowsAndColumns[y].cells[x];\r\n        if (cell.player === this.PLAYER_A) {\r\n          cell.worker = this.WORKERS[playerACount % 2];\r\n          playerACount += 1;\r\n        } else if (cell.player === this.PLAYER_B) {\r\n          cell.worker = this.WORKERS[playerBCount % 2];\r\n          playerBCount += 1;\r\n        }\r\n      }\r\n    }\r\n    return this.fromRowsAndColumns(rowsAndColumns);\r\n  }\r\n\r\n  createStep(rowsAndColumns, status, lastMove) {\r\n    return new this.constructor(rowsAndColumns, status, this, lastMove, false);\r\n  }\r\n\r\n  createNext(rowsAndColumns, status, lastMove) {\r\n    return new this.constructor(rowsAndColumns, status, this, lastMove, true);\r\n  }\r\n\r\n  constructor(rowsAndColumns, status, previous, lastMove, isNextMove) {\r\n    if (!rowsAndColumns || !status) {\r\n      throw new Error(\"You need to pass rowsAndColumns, status, and previous game\");\r\n    }\r\n    this.previous = previous;\r\n    this.history = (this.previous ? this.previous.history : [])\r\n      .filter(game => !game.canUndo)\r\n      .concat([this]);\r\n    this.previousInHistory = this.history[this.history.length - 2];\r\n    this.fullHistory = (this.previous ? this.previous.fullHistory : []).concat(this);\r\n    this.isNextMove = isNextMove;\r\n    this.moveCount = this.previous ? (isNextMove ? this.previous.moveCount + 1 : this.previous.moveCount) : 1;\r\n    this.chainCount = this.previous ? this.previous.chainCount + 1 : 0;\r\n    this.lastMove = lastMove ? lastMove : (status.resignedPlayer ? {resign: status.resignedPlayer} : lastMove);\r\n    this.moves = this.previous ? this.previous.moves.concat([this.lastMove]) : [];\r\n\r\n    this.rowsAndColumns = rowsAndColumns;\r\n\r\n    const missingStatusKeys =\r\n      ['nextPlayer', 'moveType', 'availableMovesMatrix', 'canUndo', 'resignedPlayer']\r\n      .filter(key => status[key] === undefined);\r\n    if (missingStatusKeys.length) {\r\n      throw new Error(`Some status keys were missing: ${missingStatusKeys.join(', ')}`);\r\n    }\r\n    const {nextPlayer, moveType, availableMovesMatrix, canUndo, resignedPlayer} = status;\r\n    this.thisPlayer = previous ? previous.nextPlayer : Game.PLAYER_A;\r\n    this.nextPlayer = nextPlayer;\r\n    this.thisMoveType = previous ? previous.moveType : null;\r\n    this.moveType = moveType;\r\n    this.availableMovesMatrix = availableMovesMatrix;\r\n    this.canUndo = canUndo;\r\n    this.canTakeMoveBack = !!this.previous;\r\n    this.resignedPlayer = resignedPlayer;\r\n    this.moveNotation = resignedPlayer\r\n      ? this.constructor.MOVE_RESIGNED_NOTATION[resignedPlayer]\r\n      : (lastMove\r\n        ? this.constructor.MOVE_NOTATION[lastMove.y][lastMove.x]\r\n        : '');\r\n    this.fullNotation = `${this.previous ? this.previous.fullNotation : ''}${this.moveNotation}`;\r\n    this.compressedFullNotation = this.fullNotation\r\n      .split(/(..)/)\r\n      .filter(part => part)\r\n      .map(part => this.constructor.MOVE_NOTATION_COMPRESSION[part])\r\n      .join('');\r\n    this.positionNotation = this.constructor.getPositionNotation(this.rowsAndColumns);\r\n\r\n    this.winner = this.getWinner();\r\n    if (this.winner) {\r\n      this.finished = true;\r\n    } else if (!this.constructor.hasAvailableMove(this.availableMovesMatrix)) {\r\n      this.finished = true;\r\n      this.winner = this.constructor.OTHER_PLAYER[this.nextPlayer];\r\n    } else {\r\n      this.finished = false;\r\n    }\r\n\r\n    if (this.finished) {\r\n      this.availableMovesMatrix = this.constructor.noMovesAreAvailable();\r\n    }\r\n  }\r\n\r\n  static getAvailableMoves(availableMovesMatrix) {\r\n    return _.flatten(availableMovesMatrix\r\n      .map((row, y) => row\r\n        .map((available, x) => available ? {x, y} : null)))\r\n      .filter(move => move);\r\n  }\r\n\r\n  serialize() {\r\n    return {\r\n      moves: this.moves,\r\n    };\r\n  }\r\n\r\n  static deserialize({moves}) {\r\n    return this.fromMoves(moves);\r\n  }\r\n\r\n  static getInitialRowsAndColumns() {\r\n    return this.ROWS.map(y => ({\r\n      y, cells: this.COLUMNS.map(x => ({\r\n        x, y, level: 0, player: null, worker: null,\r\n      })),\r\n    }));\r\n  }\r\n\r\n  static getInitialStatus() {\r\n    return  {\r\n      nextPlayer: this.PLAYER_A,\r\n      moveType: this.MOVE_TYPE_PLACE_FIRST_WORKER,\r\n      availableMovesMatrix: this.allMovesAreAvailableMatrix(),\r\n      canUndo: false,\r\n      resignedPlayer: null,\r\n    };\r\n  }\r\n\r\n  getPrintout() {\r\n    /* eslint-disable no-useless-computed-key */\r\n    const printMap = {\r\n      [Game.PLAYER_A]: {[0]: 'a', [1]: chalk.bgWhite('b'), [2]: chalk.bgYellow('c'), [3]: chalk.bgRed('d')},\r\n      [Game.PLAYER_B]: {[0]: 'w', [1]: chalk.bgWhite('x'), [2]: chalk.bgYellow('y'), [3]: chalk.bgRed('z')},\r\n      [null]: {[0]: ' ', [1]: chalk.bgWhite(' '), [2]: chalk.bgYellow(' '), [3]: chalk.bgRed(' '), [4]: chalk.bgBlue(' ')},\r\n    };\r\n    /* eslint-enable no-useless-computed-key */\r\n    const cellsPrintout = this.rowsAndColumns\r\n      .map(row => row.cells\r\n        .map(cell => printMap[cell.player][cell.level])\r\n        .join(''))\r\n      .join('\\n');\r\n    const nextPlayerMap = {\r\n      [Game.PLAYER_A]: 'A', [Game.PLAYER_B]: 'B',\r\n    };\r\n    const nextPlayerPrintout = nextPlayerMap[this.nextPlayer];\r\n    const winnerMap = {\r\n      [Game.PLAYER_A]: 'A', [Game.PLAYER_B]: 'B', [null]: '+',\r\n    };\r\n    const winnerPrintout = winnerMap[this.winner];\r\n    return (\r\n      `${nextPlayerPrintout}-----${winnerPrintout}\\n`\r\n      + cellsPrintout.split('\\n').map(row => `|${chalk.black(row)}|`).join('\\n')\r\n      + '\\n+-----+'\r\n    );\r\n  }\r\n\r\n  checkCoordinatesAreValid({x, y}) {\r\n    if (Math.floor(x) !== x || Math.floor(y) !== y) {\r\n      throw new InvalidMoveError(`Coordinates '${JSON.stringify({x, y})}' are not valid`);\r\n    }\r\n    if (this.availableMovesMatrix[y] === undefined || this.availableMovesMatrix[y][x] === undefined) {\r\n      throw new InvalidMoveError(`Coordinates '${JSON.stringify({x, y})}' are out of bounds`);\r\n    }\r\n  }\r\n\r\n  static hasAvailableMove(availableMovesMatrix) {\r\n    return this.getAvailableMoves(availableMovesMatrix).length > 0;\r\n  }\r\n\r\n  isMoveAvailable({x, y}) {\r\n    return this.availableMovesMatrix[y][x];\r\n  }\r\n\r\n  static findCell(rowsAndColumns, condition) {\r\n    return rowsAndColumns.map(row => row.cells.find(condition)).find(cell => cell);\r\n  }\r\n\r\n  static findCells(rowsAndColumns, condition) {\r\n    return _.flatten(rowsAndColumns.map(row => row.cells.filter(condition)));\r\n  }\r\n\r\n  findCell(condition) {\r\n    return this.constructor.findCell(this.rowsAndColumns, condition);\r\n  }\r\n\r\n  findCells(condition) {\r\n    return this.constructor.findCells(this.rowsAndColumns, condition);\r\n  }\r\n\r\n  static canPlayerWin(rowsAndColumns, player) {\r\n    const playerCells = this.findCells(rowsAndColumns, cell => cell.player === player && cell.level === 2);\r\n    if (!playerCells.length) {\r\n      return false;\r\n    }\r\n    const playerWinningMoves = this.findCells(rowsAndColumns, cell => (\r\n      cell.level === 3\r\n      && playerCells.find(playerCell => (\r\n        Math.abs(cell.x - playerCell.x) <= 1\r\n        && Math.abs(cell.y - playerCell.y) <= 1\r\n      ))\r\n    ));\r\n\r\n    return playerWinningMoves.length > 0;\r\n  }\r\n\r\n  getWinner() {\r\n    if (this.resignedPlayer) {\r\n      return this.constructor.OTHER_PLAYER[this.resignedPlayer];\r\n    }\r\n\r\n    const winningCell = this.findCell(cell => cell.player && cell.level === 3);\r\n    if (winningCell) {\r\n      return winningCell.player;\r\n    }\r\n\r\n    if (!this.canUndo && this.constructor.canPlayerWin(this.rowsAndColumns, this.nextPlayer)) {\r\n      return this.nextPlayer;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  static allMovesAreAvailableMatrix() {\r\n    return this.ROWS.map(() => this.COLUMNS.map(() => true));\r\n  }\r\n\r\n  static noMovesAreAvailable() {\r\n    return this.ROWS.map(() => this.COLUMNS.map(() => false));\r\n  }\r\n\r\n  static getEmptyCellsAvailableMovesMatrix(rowsAndColumns) {\r\n    return this.getAvailableMovesMatrix(rowsAndColumns, cell => !cell.player);\r\n  }\r\n\r\n  static getPlayerAvailableMovesMatrix(rowsAndColumns, player) {\r\n    return this.getAvailableMovesMatrix(rowsAndColumns, cell => {\r\n      if (cell.player !== player) {\r\n        return false;\r\n      }\r\n\r\n      return this.hasAvailableMove(this.getMovableAvailableMovesMatrix(rowsAndColumns, cell));\r\n    });\r\n  }\r\n\r\n  static getMovableAvailableMovesMatrix(rowsAndColumns, coordinates) {\r\n    const fromCell = rowsAndColumns[coordinates.y].cells[coordinates.x];\r\n    const maximumLevel = fromCell.level + 1;\r\n    return this.getAvailableMovesMatrix(rowsAndColumns, cell => (\r\n      Math.abs(cell.x - coordinates.x) <= 1\r\n      && Math.abs(cell.y - coordinates.y) <= 1\r\n      && !cell.player\r\n      && cell.level <= 3\r\n      && cell.level <= maximumLevel\r\n      && (this.hasAvailableMove(this.getBuildableAvailableMovesMatrix(this.updateCells(rowsAndColumns, ...[\r\n        {x: fromCell.x, y: fromCell.y, player: null, worker: null},\r\n        {x: cell.x, y: cell.y, player: fromCell.player, worker: fromCell.worker}\r\n      ]), cell)))\r\n    ));\r\n  }\r\n\r\n  static getBuildableAvailableMovesMatrix(rowsAndColumns, coordinates) {\r\n    const fromCell = rowsAndColumns[coordinates.y].cells[coordinates.x];\r\n    return this.getAvailableMovesMatrix(rowsAndColumns, cell => (\r\n      Math.abs(cell.x - coordinates.x) <= 1\r\n      && Math.abs(cell.y - coordinates.y) <= 1\r\n      && !cell.player\r\n      && cell.level < 4\r\n      && (!this.canPlayerWin(this.updateCells(rowsAndColumns, ...[\r\n        {x: cell.x, y: cell.y, level: cell.level + 1},\r\n      ]), this.OTHER_PLAYER[fromCell.player]))\r\n    ));\r\n  }\r\n\r\n  static getAvailableMovesMatrix(rowsAndColumns, isMoveAvailable) {\r\n    return rowsAndColumns.map(row => row.cells.map(isMoveAvailable));\r\n  }\r\n\r\n  checkCanMakeMove(expectedMoveType, coordinates, targetCoordinates) {\r\n    if (this.finished) {\r\n      throw new InvalidMoveError(\"The game has already finished\");\r\n    }\r\n    if (this.moveType !== expectedMoveType) {\r\n      throw new InvalidMoveError(`You cannot perform move of type \"${expectedMoveType}\": you need to perform \"${this.moveType}\"`);\r\n    }\r\n    this.checkCoordinatesAreValid(coordinates);\r\n    if (targetCoordinates) {\r\n      this.checkCoordinatesAreValid(targetCoordinates);\r\n    }\r\n    if (!this.availableMovesMatrix[coordinates.y][coordinates.x]) {\r\n      throw new Error(`Move ${JSON.stringify(coordinates)} is not one of the available ones`);\r\n    }\r\n  }\r\n\r\n  resign(player) {\r\n    return this.createStep(this.rowsAndColumns, {\r\n      nextPlayer: this.nextPlayer,\r\n      moveType: this.moveType,\r\n      availableMovesMatrix: this.availableMovesMatrix,\r\n      canUndo: false,\r\n      resignedPlayer: player,\r\n    }, {resign: player});\r\n  }\r\n\r\n  static updateCells(rowsAndColumns, ...newCells) {\r\n    const updates = {};\r\n    for (const update of newCells) {\r\n      updates[update.y] = updates[update.y] || {};\r\n      updates[update.y][update.x] = update;\r\n    }\r\n    return rowsAndColumns.map(row => !updates[row.y] ? row : ({\r\n      ...row,\r\n      cells: row.cells.map(cell => !updates[cell.y][cell.x] ? cell : ({\r\n        ...cell,\r\n        ...updates[cell.y][cell.x],\r\n      })),\r\n    }));\r\n  }\r\n\r\n  makeMoves(moves) {\r\n    let game = this;\r\n    for (const move of moves) {\r\n      game = game.makeMove(move);\r\n    }\r\n\r\n    return game;\r\n  }\r\n\r\n  makeMove(coordinates) {\r\n    if (coordinates.resign) {\r\n      return this.resign(coordinates.resign);\r\n    }\r\n    const makeMoveMethods = {\r\n      [this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER]: this.placeFirstWorker,\r\n      [this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER]: this.placeSecondWorker,\r\n      [this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE]: this.selectWorkerToMove,\r\n      [this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER]: this.moveFirstWorker,\r\n      [this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER]: this.moveSecondWorker,\r\n      [this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER]: this.buildAroundWorker,\r\n    };\r\n    const makeMoveMethod = makeMoveMethods[this.moveType];\r\n    if (!makeMoveMethod) {\r\n      throw new InvalidMoveError(`Don't know how to perform move of type \"${this.moveType}\"`);\r\n    }\r\n    return makeMoveMethod.bind(this)(coordinates);\r\n  }\r\n\r\n  undo() {\r\n    if (!this.canUndo) {\r\n      throw new Error(\"Cannot undo\");\r\n    }\r\n\r\n    return this.previous;\r\n  }\r\n\r\n  takeMoveBack() {\r\n    if (!this.canTakeMoveBack) {\r\n      throw new Error(\"Cannot take move back\");\r\n    }\r\n\r\n    return this.previous;\r\n  }\r\n\r\n  placeFirstWorker({x, y}) {\r\n    this.checkCanMakeMove(this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER, {x, y});\r\n\r\n    const rowsAndColumns = this.constructor.updateCells(this.rowsAndColumns, {\r\n      x, y,\r\n      player: this.nextPlayer,\r\n      worker: this.constructor.WORKER_FIRST,\r\n    });\r\n    return this.createStep(rowsAndColumns, {\r\n      nextPlayer: this.nextPlayer,\r\n      moveType: this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER,\r\n      availableMovesMatrix: this.constructor.getEmptyCellsAvailableMovesMatrix(rowsAndColumns),\r\n      canUndo: true,\r\n      resignedPlayer: null,\r\n    }, {x, y});\r\n  }\r\n\r\n  placeSecondWorker({x, y}) {\r\n    this.checkCanMakeMove(this.constructor.MOVE_TYPE_PLACE_SECOND_WORKER, {x, y});\r\n\r\n    const rowsAndColumns = this.constructor.updateCells(this.rowsAndColumns, {\r\n      x, y,\r\n      player: this.nextPlayer,\r\n      worker: this.constructor.WORKER_SECOND,\r\n    });\r\n    const nextPlayer = this.constructor.OTHER_PLAYER[this.nextPlayer];\r\n    return this.createNext(rowsAndColumns, {\r\n      nextPlayer: nextPlayer,\r\n      moveType: nextPlayer === this.constructor.PLAYER_A\r\n        ? this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE\r\n        : this.constructor.MOVE_TYPE_PLACE_FIRST_WORKER,\r\n      availableMovesMatrix: nextPlayer === this.constructor.PLAYER_A\r\n        ? this.constructor.getPlayerAvailableMovesMatrix(rowsAndColumns, nextPlayer)\r\n        : this.constructor.getEmptyCellsAvailableMovesMatrix(rowsAndColumns),\r\n      canUndo: false,\r\n      resignedPlayer: null,\r\n    }, {x, y});\r\n  }\r\n\r\n  selectWorkerToMove({x, y}) {\r\n    this.checkCanMakeMove(this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE, {x, y});\r\n\r\n    const cell = this.rowsAndColumns[y].cells[x];\r\n    return this.createStep(this.rowsAndColumns, {\r\n      nextPlayer: this.nextPlayer,\r\n      moveType: cell.worker === this.constructor.WORKER_FIRST\r\n        ? this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER\r\n        : this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER,\r\n      availableMovesMatrix: this.constructor.getMovableAvailableMovesMatrix(this.rowsAndColumns, {x, y}),\r\n      canUndo: true,\r\n      resignedPlayer: null,\r\n    }, {x, y});\r\n  }\r\n\r\n  moveWorker(to, worker) {\r\n    const fromCell = this.findCell(cell => cell.player === this.nextPlayer && cell.worker === worker);\r\n    const toCell = this.rowsAndColumns[to.y].cells[to.x];\r\n    const rowsAndColumns = this.constructor.updateCells(this.rowsAndColumns, ...[\r\n      {x: fromCell.x, y: fromCell.y, player: null, worker: null},\r\n      {x: toCell.x, y: toCell.y, player: fromCell.player, worker: fromCell.worker},\r\n    ]);\r\n    return this.createStep(rowsAndColumns, {\r\n      nextPlayer: this.nextPlayer,\r\n      moveType: this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER,\r\n      availableMovesMatrix: this.constructor.getBuildableAvailableMovesMatrix(rowsAndColumns, to),\r\n      canUndo: true,\r\n      resignedPlayer: null,\r\n    }, {x: to.x, y: to.y});\r\n  }\r\n\r\n  moveFirstWorker({x, y}) {\r\n    this.checkCanMakeMove(this.constructor.MOVE_TYPE_MOVE_FIRST_WORKER, {x, y});\r\n\r\n    return this.moveWorker({x, y}, this.constructor.WORKER_FIRST)\r\n  }\r\n\r\n  moveSecondWorker({x, y}) {\r\n    this.checkCanMakeMove(this.constructor.MOVE_TYPE_MOVE_SECOND_WORKER, {x, y});\r\n\r\n    return this.moveWorker({x, y}, this.constructor.WORKER_SECOND)\r\n  }\r\n\r\n  buildAroundWorker({x, y}) {\r\n    this.checkCanMakeMove(this.constructor.MOVE_TYPE_BUILD_AROUND_WORKER, {x, y});\r\n\r\n    const rowsAndColumns = this.constructor.updateCells(this.rowsAndColumns, {\r\n      x, y, level: this.rowsAndColumns[y].cells[x].level + 1,\r\n    });\r\n    const nextPlayer = this.constructor.OTHER_PLAYER[this.nextPlayer];\r\n    return this.createNext(rowsAndColumns, {\r\n      nextPlayer: nextPlayer,\r\n      moveType: this.constructor.MOVE_TYPE_SELECT_WORKER_TO_MOVE,\r\n      availableMovesMatrix: this.constructor.getPlayerAvailableMovesMatrix(rowsAndColumns, nextPlayer),\r\n      canUndo: false,\r\n      resignedPlayer: null,\r\n    }, {x, y});\r\n  }\r\n}\r\n\r\nexport {\r\n  InvalidMoveError,\r\n};\r\n\r\nexport default Game;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport \"../../styles/html-board.css\";\r\n\r\nclass HtmlBoardBackground extends Component {\r\n  render() {\r\n    let {\r\n      className, clickable, undoable, isCellAvailable, isCellUndoable, small, medium, makeMove, onSelect, selected,\r\n      settings, rowsAndColumns,\r\n    } = this.props;\r\n    const {theme: {scheme, numbers}} = settings;\r\n\r\n    className = classNames(\"board\", \"html-board\", {\r\n      'small-board': small,\r\n      'medium-board': medium,\r\n      editable: !!makeMove && (clickable || undoable),\r\n      selectable: !!onSelect,\r\n      selected,\r\n      'board-theme-default': scheme === '',\r\n      'board-theme-subtle': scheme === 'subtle',\r\n      'board-theme-pastel': scheme === 'pastel',\r\n      'board-theme-green': scheme === 'green',\r\n      'numbered-levels': ['obvious', 'subtle', 'very-subtle'].includes(numbers),\r\n      'obvious-levels': numbers === 'obvious',\r\n      'subtle-levels': numbers === 'subtle',\r\n      'very-subtle-levels': numbers === 'very-subtle',\r\n    }, className);\r\n\r\n    return (\r\n      <div className={className} onClick={onSelect}>\r\n        {rowsAndColumns.map(row => (\r\n          <div key={`row-${row.y}`} className={\"row\"}>\r\n            {row.cells.map(cell => (\r\n              <HtmlBoardCell\r\n                key={`${cell.x}-${cell.y}`}\r\n                cell={cell}\r\n                clickable={clickable || (undoable && isCellUndoable(cell))}\r\n                available={isCellAvailable(cell)}\r\n                undoable={isCellUndoable(cell)}\r\n                settings={settings}\r\n                makeMove={this.props.makeMove}\r\n                undo={this.props.undo}\r\n              />\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHtmlBoardBackground.propTypes = {\r\n  rowsAndColumns: PropTypes.array.isRequired,\r\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.array]).isRequired,\r\n  makeMove: PropTypes.func,\r\n  undo: PropTypes.func,\r\n  small: PropTypes.bool.isRequired,\r\n  medium: PropTypes.bool.isRequired,\r\n  clickable: PropTypes.bool.isRequired,\r\n  undoable: PropTypes.bool.isRequired,\r\n  onSelect: PropTypes.func,\r\n  selected: PropTypes.bool.isRequired,\r\n  isCellAvailable: PropTypes.func.isRequired,\r\n  isCellUndoable: PropTypes.func.isRequired,\r\n  settings: PropTypes.object.isRequired,\r\n  animated: PropTypes.bool.isRequired,\r\n};\r\n\r\nHtmlBoardBackground.defaultProps = {\r\n  className: '',\r\n  small: false,\r\n  medium: false,\r\n  clickable: false,\r\n  selected: false,\r\n  animated: false,\r\n};\r\n\r\nclass HtmlBoardCell extends Component {\r\n  makeMove = () => {\r\n    if (this.props.available && this.props.makeMove) {\r\n      this.props.makeMove(this.props.cell);\r\n    } else if (this.props.undoable && this.props.undo) {\r\n      this.props.undo();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let {cell, clickable, available, undoable, settings: {theme: {numbers}}, makeMove, undo} = this.props;\r\n    const displayLevel = (\r\n      ['obvious', 'subtle', 'very-subtle'].includes(numbers)\r\n      && cell.level > 0\r\n      && cell.level <4\r\n    ) ? cell.level : null;\r\n    return (\r\n      <div\r\n        key={`row-${cell.x}-${cell.y}`}\r\n        className={classNames(\"cell\", `level-${cell.level}`, {available, undoable})}\r\n        onClick={((makeMove && available) || (undo && undoable)) && clickable ? this.makeMove : null}\r\n      >\r\n        <div className={classNames(\"level\", \"level-1\")}>\r\n          <div className={classNames(\"level\", \"level-2\")}>\r\n            <div className={classNames(\"level\", \"level-3\")}>\r\n              {cell.player ? (\r\n                <div className={classNames(\"worker\", `player-${cell.player}`)}>\r\n                  {displayLevel}\r\n                </div>\r\n              ) : cell.level === 4 ? (\r\n                <div className={classNames(\"level\", \"level-4\")} />\r\n              ) : displayLevel}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHtmlBoardCell.propTypes = {\r\n  cell: PropTypes.object.isRequired,\r\n  clickable: PropTypes.bool.isRequired,\r\n  available: PropTypes.bool.isRequired,\r\n  undoable: PropTypes.bool.isRequired,\r\n  settings: PropTypes.object.isRequired,\r\n  makeMove: PropTypes.func,\r\n  undo: PropTypes.func,\r\n};\r\n\r\nHtmlBoardCell.defaultProps = {\r\n  clickable: false,\r\n  available: false,\r\n  undoable: false,\r\n};\r\n\r\nexport default HtmlBoardBackground;\r\n","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as constants from './constants';\r\n\r\nclass LevelIndicatorVerySubtle extends PureComponent {\r\n\trender() {\r\n    const {level} = this.props;\r\n    if (!level) {\r\n      return null;\r\n    }\r\n  \treturn (\r\n    \t<g transform={`translate(${constants.cellSize / 10},${constants.cellSize / 10})`}>\r\n        <text\r\n          dominantBaseline={\"central\"}\r\n          textAnchor={\"middle\"}\r\n          style={{fontSize: `${constants.cellSize * 0.15}px`}}\r\n        >{level}</text>\r\n      </g>\r\n    );\r\n  }\r\n}\r\n\r\nLevelIndicatorVerySubtle.propTypes = {\r\n  level: PropTypes.oneOf([0, 1, 2, 3, 4]).isRequired,\r\n};\r\n\r\nclass LevelIndicatorSubtle extends PureComponent {\r\n\trender() {\r\n  \tconst {level} = this.props;\r\n    if (!level) {\r\n      return null;\r\n    }\r\n  \treturn (\r\n    \t<g transform={`translate(22,22)`}>\r\n        <circle r={constants.cellSize * 0.15} fill={'#bbb'} stroke={'#111'} strokeWidth={2} />\r\n        <text\r\n          dominantBaseline={\"central\"}\r\n          textAnchor={\"middle\"}\r\n          style={{fontSize: `${constants.cellSize * 0.25}px`}}\r\n        >{level}</text>\r\n      </g>\r\n    );\r\n  }\r\n}\r\n\r\nLevelIndicatorSubtle.propTypes = {\r\n  level: PropTypes.oneOf([0, 1, 2, 3, 4]).isRequired,\r\n};\r\n\r\nclass LevelIndicatorObvious extends PureComponent {\r\n\trender() {\r\n  \tconst {level} = this.props;\r\n    if (!level) {\r\n      return null;\r\n    }\r\n  \treturn (\r\n    \t<g transform={`translate(${constants.cellSize / 2},${constants.cellSize / 2})`}>\r\n        <text\r\n          dominantBaseline={\"central\"}\r\n          textAnchor={\"middle\"}\r\n          stroke={'#eee'}\r\n          strokeWidth={constants.cellSize * 0.06}\r\n          paintOrder={'stroke'}\r\n          style={{fontSize: `${constants.cellSize * 0.45}px`}}\r\n        >{level}</text>\r\n      </g>\r\n    );\r\n  }\r\n}\r\n\r\nLevelIndicatorObvious.propTypes = {\r\n  level: PropTypes.oneOf([0, 1, 2, 3, 4]).isRequired,\r\n};\r\n\r\nclass LevelIndicator extends PureComponent {\r\n\tstatic indicatorMap = {\r\n    'very-subtle': LevelIndicatorVerySubtle,\r\n    'subtle': LevelIndicatorSubtle,\r\n    'obvious': LevelIndicatorObvious,\r\n  };\r\n\r\n\trender() {\r\n  \tconst {level, type} = this.props;\r\n    const Indicator = this.constructor.indicatorMap[type];\r\n    if (!Indicator) {\r\n    \treturn null;\r\n    }\r\n  \treturn (\r\n    \t<Indicator level={level} />\r\n    );\r\n  }\r\n}\r\n\r\nLevelIndicator.propTypes = {\r\n  type: PropTypes.oneOf(['very-subtle', 'subtle', 'obvious']).isRequired,\r\n  level: PropTypes.oneOf([0, 1, 2, 3, 4]).isRequired,\r\n};\r\n\r\n\r\nexport default LevelIndicator;\r\n","import React, {PureComponent, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as constants from \"./constants\";\r\n\r\nclass BasePieceDefinition extends PureComponent {\r\n\trender() {\r\n  \tconst {name, path, dimensions, offset} = this.props;\r\n  \treturn (\r\n    \t<Fragment>\r\n        <g id={`piece-${name}-base`} transform={[\r\n      \t\t`translate(${constants.cellSize / 2},${constants.cellSize / 2})`,\r\n        \t`scale(${(constants.pieceScaling)},${(constants.pieceScaling)})`,\r\n        \t`translate(${-dimensions.x / 2 + offset.x},${-dimensions.y / 2 + offset.y})`,\r\n      \t].join(',')}>{path}</g>\r\n        <g id={`piece-${name}-white`}>\r\n          <use xlinkHref={`#piece-${name}-base`} strokeWidth={constants.pieceStrokeWidth} stroke={\"#111\"} />\r\n          <use xlinkHref={`#piece-${name}-base`} fill={'white'} />\r\n        </g>\r\n        <g id={`piece-${name}-black`}>\r\n          <use xlinkHref={`#piece-${name}-base`} strokeWidth={constants.pieceStrokeWidth} stroke={\"#bbb\"} />\r\n          <use xlinkHref={`#piece-${name}-base`} fill={'black'} />\r\n        </g>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nBasePieceDefinition.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  path: PropTypes.node.isRequired,\r\n  dimensions: PropTypes.object.isRequired,\r\n  offset: PropTypes.object.isRequired,\r\n};\r\n\r\nclass BasePiece extends PureComponent {\r\n\tstatic rotateTransform =\r\n  \t`rotate(180,${constants.cellSize / 2},${constants.cellSize / 2})`;\r\n\r\n\trender() {\r\n  \tconst {name, colour, rotated} = this.props;\r\n  \treturn (\r\n    \t<use\r\n        xlinkHref={`#piece-${name}-${colour}`}\r\n        transform={rotated ? this.constructor.rotateTransform : undefined}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nBasePiece.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  colour: PropTypes.oneOf(['white', 'black']),\r\n  rotated: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst definePiece = (className, {path, dimensions, offset = {x: 0, y: 0}}) => {\r\n  class PieceDefinitionFor extends PureComponent {\r\n    render() {\r\n      return (\r\n        <BasePieceDefinition\r\n          name={className}\r\n          path={path}\r\n          dimensions={dimensions}\r\n          offset={offset}\r\n          />\r\n      );\r\n    }\r\n  }\r\n  PieceDefinitionFor.displayName = `${className}Definition`;\r\n\r\n  class PieceFor extends PureComponent {\r\n    static Definition = PieceDefinitionFor;\r\n\r\n    render() {\r\n      const {colour, rotated} = this.props;\r\n      return (\r\n        <BasePiece\r\n          name={className}\r\n          colour={colour}\r\n          rotated={rotated}\r\n        />\r\n      );\r\n    }\r\n  }\r\n  PieceFor.displayName = className;\r\n\r\n  return PieceFor;\r\n};\r\n\r\nconst PiecePawn = definePiece('PiecePawn', {\r\n  path: <path d=\"M105.1 224H80a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h16v5.49c0 44-4.14 86.6-24 122.51h176c-19.89-35.91-24-78.51-24-122.51V288h16a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-25.1c29.39-18.38 49.1-50.78 49.1-88a104 104 0 0 0-208 0c0 37.22 19.71 69.62 49.1 88zM304 448H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z\" />,\r\n  dimensions: {x: 320, y: 480},\r\n  offset: {x: 0, y: -38},\r\n});\r\n\r\nconst PieceKing = definePiece('PieceKing', {\r\n  path: <path d=\"M400 448H48a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h352a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm16-288H256v-48h40a8 8 0 0 0 8-8V56a8 8 0 0 0-8-8h-40V8a8 8 0 0 0-8-8h-48a8 8 0 0 0-8 8v40h-40a8 8 0 0 0-8 8v48a8 8 0 0 0 8 8h40v48H32a32 32 0 0 0-30.52 41.54L74.56 416h298.88l73.08-214.46A32 32 0 0 0 416 160z\" />,\r\n  dimensions: {x: 448, y: 512},\r\n});\r\n\r\nconst PieceCircle = definePiece('PieceCircle', {\r\n  path: <path d=\"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z\" />,\r\n  dimensions: {x: 512, y: 512},\r\n});\r\n\r\nconst PieceCertificate = definePiece('PieceCertificate', {\r\n  path: <path d=\"M458.622 255.92l45.985-45.005c13.708-12.977 7.316-36.039-10.664-40.339l-62.65-15.99 17.661-62.015c4.991-17.838-11.829-34.663-29.661-29.671l-61.994 17.667-15.984-62.671C337.085.197 313.765-6.276 300.99 7.228L256 53.57 211.011 7.229c-12.63-13.351-36.047-7.234-40.325 10.668l-15.984 62.671-61.995-17.667C74.87 57.907 58.056 74.738 63.046 92.572l17.661 62.015-62.65 15.99C.069 174.878-6.31 197.944 7.392 210.915l45.985 45.005-45.985 45.004c-13.708 12.977-7.316 36.039 10.664 40.339l62.65 15.99-17.661 62.015c-4.991 17.838 11.829 34.663 29.661 29.671l61.994-17.667 15.984 62.671c4.439 18.575 27.696 24.018 40.325 10.668L256 458.61l44.989 46.001c12.5 13.488 35.987 7.486 40.325-10.668l15.984-62.671 61.994 17.667c17.836 4.994 34.651-11.837 29.661-29.671l-17.661-62.015 62.65-15.99c17.987-4.302 24.366-27.367 10.664-40.339l-45.984-45.004z\" />,\r\n  dimensions: {x: 512, y: 512},\r\n});\r\n\r\nconst PieceSun = definePiece('PieceSun', {\r\n  path: <path d=\"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z\" />,\r\n  dimensions: {x: 512, y: 512},\r\n});\r\n\r\nconst PieceRocket = definePiece('PieceRocket', {\r\n  path: <path d=\"M505.05 19.1a15.89 15.89 0 0 0-12.2-12.2C460.65 0 435.46 0 410.36 0c-103.2 0-165.1 55.2-211.29 128H94.87A48 48 0 0 0 52 154.49l-49.42 98.8A24 24 0 0 0 24.07 288h103.77l-22.47 22.47a32 32 0 0 0 0 45.25l50.9 50.91a32 32 0 0 0 45.26 0L224 384.16V488a24 24 0 0 0 34.7 21.49l98.7-49.39a47.91 47.91 0 0 0 26.5-42.9V312.79c72.59-46.3 128-108.4 128-211.09.1-25.2.1-50.4-6.85-82.6zM384 168a40 40 0 1 1 40-40 40 40 0 0 1-40 40z\" />,\r\n  dimensions: {x: 512, y: 512},\r\n});\r\n\r\nconst PieceBug = definePiece('PieceBug', {\r\n  path: <path d=\"M511.988 288.9c-.478 17.43-15.217 31.1-32.653 31.1H424v16c0 21.864-4.882 42.584-13.6 61.145l60.228 60.228c12.496 12.497 12.496 32.758 0 45.255-12.498 12.497-32.759 12.496-45.256 0l-54.736-54.736C345.886 467.965 314.351 480 280 480V236c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v244c-34.351 0-65.886-12.035-90.636-32.108l-54.736 54.736c-12.498 12.497-32.759 12.496-45.256 0-12.496-12.497-12.496-32.758 0-45.255l60.228-60.228C92.882 378.584 88 357.864 88 336v-16H32.666C15.23 320 .491 306.33.013 288.9-.484 270.816 14.028 256 32 256h56v-58.745l-46.628-46.628c-12.496-12.497-12.496-32.758 0-45.255 12.498-12.497 32.758-12.497 45.256 0L141.255 160h229.489l54.627-54.627c12.498-12.497 32.758-12.497 45.256 0 12.496 12.497 12.496 32.758 0 45.255L424 197.255V256h56c17.972 0 32.484 14.816 31.988 32.9zM257 0c-61.856 0-112 50.144-112 112h224C369 50.144 318.856 0 257 0z\" />,\r\n  dimensions: {x: 512, y: 512},\r\n});\r\n\r\nconst PieceEye = definePiece('PieceEye', {\r\n  path: <path d=\"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z\" />,\r\n  dimensions: {x: 512, y: 512},\r\n});\r\n\r\nconst PieceUser = definePiece('PieceUser', {\r\n  path: <path d=\"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\" />,\r\n  dimensions: {x: 512, y: 512},\r\n});\r\n\r\nclass Piece extends PureComponent {\r\n\tstatic pieceStyleMap = {\r\n    'pawn': PiecePawn,\r\n    'king': PieceKing,\r\n    'circle': PieceCircle,\r\n    'certificate': PieceCertificate,\r\n    'sun': PieceSun,\r\n    'rocket': PieceRocket,\r\n    'bug': PieceBug,\r\n    'eye': PieceEye,\r\n    'user': PieceUser,\r\n  };\r\n\r\n\trender() {\r\n  \tconst {style, colour, rotated} = this.props;\r\n    const PieceStyle = this.constructor.pieceStyleMap[style];\r\n  \treturn (\r\n    \t<PieceStyle colour={colour} rotated={rotated} />\r\n    );\r\n  }\r\n}\r\n\r\nPiece.propTypes = {\r\n  style: PropTypes.oneOf(Object.keys(Piece.pieceStyleMap)).isRequired,\r\n  colour: PropTypes.oneOf(['white', 'black']).isRequired,\r\n  rotated: PropTypes.bool.isRequired,\r\n};\r\n\r\nclass PieceDefinitions extends PureComponent {\r\n\trender() {\r\n  \treturn Object.values(Piece.pieceStyleMap)\r\n    \t.map(PieceStyle => <PieceStyle.Definition key={PieceStyle.displayName || PieceStyle.name} />);\r\n  }\r\n}\r\nPiece.Definitions = PieceDefinitions;\r\n\r\nexport default Piece;\r\n","export const cellSize = 100;\r\nexport const pieceStrokeWidth = 0.8 * cellSize;\r\nexport const borderWidth = 5;\r\nexport const pieceScaling = 0.1;\r\n","import React, {Fragment, PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport * as constants from './constants';\r\nimport LevelIndicator from \"./LevelIndicator\";\r\nimport Piece from \"./Piece\";\r\nimport Game from \"../../../game/game\";\r\n\r\nclass CellDefinitions extends PureComponent {\r\n\trender() {\r\n  \treturn (\r\n    \t<Fragment>\r\n        <rect\r\n          id={`cell-border`}\r\n          width={constants.cellSize}\r\n          height={constants.cellSize}\r\n        />\r\n        <rect\r\n          id={`cell-0`}\r\n          width={constants.cellSize - constants.borderWidth * 2}\r\n          height={constants.cellSize - constants.borderWidth * 2}\r\n          transform={`translate(${(constants.borderWidth)},${(constants.borderWidth)})`}\r\n        />\r\n        <g id={`cell-1`}>\r\n          <rect\r\n            className={'border'}\r\n            width={constants.cellSize - constants.borderWidth * 2}\r\n            height={constants.cellSize - constants.borderWidth * 2}\r\n            transform={`translate(${(constants.borderWidth)},${(constants.borderWidth)})`}\r\n          />\r\n          <rect\r\n            className={'fill'}\r\n            width={constants.cellSize - constants.borderWidth * 4}\r\n            height={constants.cellSize - constants.borderWidth * 4}\r\n            transform={`translate(${constants.borderWidth * 2},${constants.borderWidth * 2})`}\r\n          />\r\n        </g>\r\n        <g id={`cell-2`}>\r\n          <rect\r\n            className={'border'}\r\n            width={constants.cellSize - constants.borderWidth * 4}\r\n            height={constants.cellSize - constants.borderWidth * 4}\r\n            transform={`translate(${constants.borderWidth * 2},${constants.borderWidth * 2})`}\r\n          />\r\n          <rect\r\n            className={'fill'}\r\n            width={constants.cellSize - constants.borderWidth * 6}\r\n            height={constants.cellSize - constants.borderWidth * 6}\r\n            transform={`translate(${constants.borderWidth * 3},${constants.borderWidth * 3})`}\r\n          />\r\n        </g>\r\n        <g id={`cell-3`}>\r\n          <rect\r\n            className={'border'}\r\n            width={constants.cellSize - constants.borderWidth * 6}\r\n            height={constants.cellSize - constants.borderWidth * 6}\r\n            transform={`translate(${constants.borderWidth * 3},${constants.borderWidth * 3})`}\r\n          />\r\n          <rect\r\n            className={'fill'}\r\n            width={constants.cellSize - constants.borderWidth * 8}\r\n            height={constants.cellSize - constants.borderWidth * 8}\r\n            transform={`translate(${constants.borderWidth * 4},${constants.borderWidth * 4})`}\r\n          />\r\n        </g>\r\n        <g id={`cell-4`}>\r\n          <rect\r\n            className={'border'}\r\n            width={constants.cellSize - constants.borderWidth * 8}\r\n            height={constants.cellSize - constants.borderWidth * 8}\r\n            transform={`translate(${constants.borderWidth * 4},${constants.borderWidth * 4})`}\r\n          />\r\n          <rect\r\n            className={'fill'}\r\n            width={constants.cellSize - constants.borderWidth * 10}\r\n            height={constants.cellSize - constants.borderWidth * 10}\r\n            transform={`translate(${constants.borderWidth * 5},${constants.borderWidth * 5})`}\r\n          />\r\n        </g>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nclass Cell extends PureComponent {\r\n  static Definitions = CellDefinitions;\r\n\r\n\tstatic levelMap = {\r\n    0: '#cell-0',\r\n    1: '#cell-1',\r\n    2: '#cell-2',\r\n    3: '#cell-3',\r\n    4: '#cell-4',\r\n  };\r\n\r\n\tstate = {\r\n\t  previousLevel: this.props.level,\r\n\t  currentLevel: this.props.level,\r\n  };\r\n\r\n\tlevelsAnimate = [0, 1, 2, 3, 4].map(i => React.createRef());\r\n\r\n\tstatic getDerivedStateFromProps(props, state) {\r\n    if (props.animated && props.level !== state.level) {\r\n      return {previousLevel: state.currentLevel, currentLevel: props.level};\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (this.props.animated && this.state.currentLevel !== this.state.previousLevel) {\r\n      setTimeout(() => {\r\n        this.levelsAnimate\r\n          .filter((levelAnimate, i) => (\r\n            (this.state.previousLevel <= i && i <= this.state.currentLevel)\r\n            || (this.state.currentLevel <= i && i <= this.state.previousLevel)\r\n          ))\r\n          .filter(levelAnimate => levelAnimate.current)\r\n          .map(levelAnimate => levelAnimate.current.beginElement());\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n\trender() {\r\n  \tconst {\r\n  \t  x, y, available, undoable, level, player, onClick, animated, allowControl,\r\n      theme: {pieces = 'king', rotateOpponent = true, numbers},\r\n    } = this.props;\r\n  \tconst {previousLevel, currentLevel} = this.state;\r\n  \tconst isPlayerAOpponent = !allowControl.includes(Game.PLAYER_A) && allowControl.includes(Game.PLAYER_B);\r\n  \tconst isPlayerBOpponent = !isPlayerAOpponent;\r\n  \treturn (\r\n    \t<g transform={`translate(${x * 100},${y * 100})`}>\r\n        <use\r\n          xlinkHref={`#cell-border`}\r\n          className={classNames({available, undoable})}\r\n          onClick={onClick}\r\n        />\r\n        <g className={'cell-contents'}>\r\n          {animated ? ([0, 1, 2, 3, 4].map(i => (\r\n            <use key={i} xlinkHref={`${this.constructor.levelMap[i]}`} opacity={i <= level ? 1 : 0}>\r\n              <animate\r\n                ref={this.levelsAnimate[i]}\r\n                attributeName={'opacity'}\r\n                attributeType={'XML'}\r\n                type={'translate'}\r\n                from={previousLevel < i ? 0 : 1}\r\n                to={currentLevel < i ? 0 : 1}\r\n                dur={'0.2s'}\r\n                repeatCount={1}\r\n                fill={'freeze'}\r\n              />\r\n            </use>\r\n          ))) : ([0, 1, 2, 3, 4].filter(i => i <= level).map(i => (\r\n            <Fragment key={i}>\r\n              <use xlinkHref={`${this.constructor.levelMap[i]}`} />\r\n              {player === Game.PLAYER_A ? <Piece style={pieces} colour={'white'} rotated={rotateOpponent && isPlayerAOpponent} /> : null}\r\n              {player === Game.PLAYER_B ? <Piece style={pieces} colour={'black'} rotated={rotateOpponent && isPlayerBOpponent} /> : null}\r\n            </Fragment>\r\n          )))}\r\n          {numbers ? <LevelIndicator level={level} type={numbers} /> : null}\r\n        </g>\r\n      </g>\r\n    );\r\n  }\r\n}\r\n\r\nCell.propTypes = {\r\n  x: PropTypes.number.isRequired,\r\n  y: PropTypes.number.isRequired,\r\n  available: PropTypes.bool.isRequired,\r\n  undoable: PropTypes.bool.isRequired,\r\n  level: PropTypes.number.isRequired,\r\n  player: PropTypes.string,\r\n  onClick: PropTypes.func,\r\n  animated: PropTypes.bool.isRequired,\r\n  allowControl: PropTypes.array.isRequired,\r\n  theme: PropTypes.object.isRequired,\r\n};\r\n\r\nCell.defaultProps = {\r\n  animated: false,\r\n};\r\n\r\nexport default Cell;\r\n","import React, {Fragment, PureComponent} from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport * as constants from \"./constants\";\r\n\r\nclass ArrowDefinition extends PureComponent {\r\n  static arrowDimensions = {x: 215.81, y: 439.04};\r\n  static arrowOffset = {x: -20, y: -15};\r\n  static arrowScaling = 0.75;\r\n  static hammerDimensions = {x: 564.48, y: 501.76};\r\n  static hammerOffset = {x: 50, y: -50};\r\n  static hammerScaling = 0.75 * 0.75;\r\n\r\n  render() {\r\n    const {arrowDimensions, arrowOffset, arrowScaling, hammerDimensions, hammerOffset, hammerScaling} = this.constructor;\r\n\r\n    return (\r\n      <Fragment>\r\n        <path\r\n          id={\"arrow-move-base\"}\r\n          d={\"M168 345.941V44c0-6.627-5.373-12-12-12h-56c-6.627 0-12 5.373-12 12v301.941H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.569 9.373 33.941 0l86.059-86.059c15.119-15.119 4.411-40.971-16.971-40.971H168z\"}\r\n          transform={[\r\n            `translate(${constants.cellSize / 2},${constants.cellSize / 2})`,\r\n            `scale(${(constants.pieceScaling * arrowScaling)},${(constants.pieceScaling * arrowScaling)})`,\r\n            `translate(${-arrowDimensions.x / 2 + arrowOffset.x},${-arrowDimensions.y / 2 + arrowOffset.y})`,\r\n          ].join(',')}\r\n        />\r\n        <path\r\n          id={\"arrow-build-base\"}\r\n          d={\"M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z\"}\r\n          transform={[\r\n            `translate(${constants.cellSize / 2},${constants.cellSize / 2})`,\r\n            `scale(${(constants.pieceScaling * hammerScaling)},${(constants.pieceScaling * hammerScaling)})`,\r\n            `rotate(135)`,\r\n            `translate(${-hammerDimensions.x / 2 + hammerOffset.x},${-hammerDimensions.y / 2 + hammerOffset.y})`,\r\n          ].join(',')}\r\n        />\r\n        <g id={\"arrow-move-white\"}>\r\n          <use xlinkHref={\"#arrow-move-base\"} strokeWidth={constants.pieceStrokeWidth} stroke={\"#111\"} />\r\n          <use xlinkHref={\"#arrow-move-base\"} fill={'white'} />\r\n        </g>\r\n        <g id={\"arrow-move-black\"}>\r\n          <use xlinkHref={\"#arrow-move-base\"} strokeWidth={constants.pieceStrokeWidth} stroke={\"#bbb\"} />\r\n          <use xlinkHref={\"#arrow-move-base\"} fill={'black'} />\r\n        </g>\r\n        <g id={\"arrow-build-white\"}>\r\n          <use xlinkHref={\"#arrow-build-base\"} strokeWidth={constants.pieceStrokeWidth} stroke={\"#111\"} />\r\n          <use xlinkHref={\"#arrow-build-base\"} fill={'white'} />\r\n        </g>\r\n        <g id={\"arrow-build-black\"}>\r\n          <use xlinkHref={\"#arrow-build-base\"} strokeWidth={constants.pieceStrokeWidth} stroke={\"#bbb\"} />\r\n          <use xlinkHref={\"#arrow-build-base\"} fill={'black'} />\r\n        </g>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nclass Arrow extends PureComponent {\r\n  static Definition = ArrowDefinition;\r\n  static offsetX = constants.cellSize * 0.10;\r\n  static smallScaling = 0.75;\r\n\r\n  static rotationMap = {\r\n    '0,1': 0,\r\n    '-1,1': 45,\r\n    '-1,0': 90,\r\n    '-1,-1': 135,\r\n    '0,-1': 180,\r\n    '1,-1': -135,\r\n    '1,0': -90,\r\n    '1,1': -45,\r\n  };\r\n\r\n  render() {\r\n    const {offsetX, smallScaling} = this.constructor;\r\n    const {from, to, colour, type, small} = this.props;\r\n    const diff = {x: to.x - from.x, y: to.y - from.y};\r\n    const rotation = this.constructor.rotationMap[`${diff.x},${diff.y}`];\r\n    const offsetYFactor = Math.sqrt(Math.abs(diff.x) + Math.abs(diff.y));\r\n\r\n    return (\r\n      <use\r\n        xlinkHref={`#arrow-${type}-${colour}`}\r\n        transform={[\r\n          `translate(${constants.cellSize * from.x},${constants.cellSize * from.y})`,\r\n          `rotate(${rotation},${constants.cellSize / 2},${constants.cellSize / 2})`,\r\n          `translate(${offsetX},${constants.cellSize / 2 * offsetYFactor})`,\r\n          ...(small ? [\r\n            `translate(${constants.cellSize / 2},${constants.cellSize / 2})`,\r\n            `scale(${smallScaling})`,\r\n            `translate(${-constants.cellSize / 2},${-constants.cellSize / 2})`,\r\n          ] : []),\r\n        ].filter(transform => transform).join(',')}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nArrow.propTypes = {\r\n  from: PropTypes.object.isRequired,\r\n  to: PropTypes.object.isRequired,\r\n  colour: PropTypes.oneOf(['white', 'black']).isRequired,\r\n  type: PropTypes.oneOf(['move', 'build']).isRequired,\r\n  small: PropTypes.bool.isRequired,\r\n};\r\n\r\nArrow.defaultProps = {\r\n  small: false,\r\n};\r\n\r\nexport default Arrow;\r\n","import React, {Fragment, PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport _ from \"lodash\";\r\nimport Game from \"../../../game/game\";\r\nimport * as constants from './constants';\r\nimport Cell from \"./Cell\";\r\nimport Piece from \"./Piece\";\r\nimport '../../../styles/svg-board.css';\r\nimport Arrow from \"./Arrow\";\r\n\r\nclass SvgBoardBackground extends PureComponent {\r\n  render() {\r\n    let {\r\n      className, clickable, undoable, isCellAvailable, isCellUndoable, small, medium, makeMove, onSelect, selected,\r\n      allowControl, settings, rowsAndColumns, transformation, animated, showArrows, game, arrows,\r\n    } = this.props;\r\n    const {theme} = settings;\r\n\r\n    className = classNames(\"board\", \"svg-board\", `board-theme-${theme.scheme || 'default'}`, {\r\n      'small-board': small,\r\n      'medium-board': medium,\r\n      editable: !!makeMove && (clickable || undoable),\r\n      selectable: !!onSelect,\r\n      selected,\r\n    }, className);\r\n    const rowCount = rowsAndColumns.length;\r\n    const columnCount= Math.max(...rowsAndColumns.map(row => row.cells.length)) || 0;\r\n\r\n    return (\r\n      <svg\r\n        className={className}\r\n        viewBox={`0 0 ${constants.cellSize * columnCount} ${constants.cellSize * rowCount}`}\r\n        style={{'--column-count': columnCount, '--row-count': rowCount}}\r\n        preserveAspectRatio={\"xMinYMin meet\"}\r\n        onClick={onSelect}\r\n      >\r\n        <g data-key={'rows'}>\r\n          {rowsAndColumns.map(row => (\r\n            <g data-key={`row-${row.y}`} key={`row-${row.y}`}>\r\n              {row.cells.map(cell => (\r\n                <SvgBoardCell\r\n                  key={`${cell.x}-${cell.y}`}\r\n                  cell={cell}\r\n                  clickable={clickable || (undoable && isCellUndoable(cell))}\r\n                  available={isCellAvailable(cell)}\r\n                  undoable={isCellUndoable(cell)}\r\n                  allowControl={allowControl}\r\n                  settings={settings}\r\n                  makeMove={this.props.makeMove}\r\n                  undo={this.props.undo}\r\n                  theme={theme}\r\n                  animated={animated}\r\n                />\r\n              ))}\r\n            </g>\r\n          ))}\r\n        </g>\r\n        {animated ? (\r\n          <SvgBoardPieces rowsAndColumns={rowsAndColumns} theme={theme} allowControl={allowControl} />\r\n        ) : null}\r\n        {showArrows ? (\r\n          arrows ? (\r\n            arrows.map((arrow, index) => (\r\n              <Arrow key={index} {...arrow} />\r\n            ))\r\n          ) : (\r\n            <Fragment>\r\n              <SvgBoardHistoryArrows game={game} transformation={transformation} />\r\n              {/*<SvgBoardAvailableMovesArrows game={game} isCellAvailable={isCellAvailable} transformation={transformation} />*/}\r\n            </Fragment>\r\n          )\r\n        ) : null}\r\n      </svg>\r\n    );\r\n  }\r\n}\r\n\r\nSvgBoardBackground.propTypes = {\r\n  rowsAndColumns: PropTypes.array.isRequired,\r\n  transformation: PropTypes.func,\r\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.array]).isRequired,\r\n  makeMove: PropTypes.func,\r\n  undo: PropTypes.func,\r\n  small: PropTypes.bool.isRequired,\r\n  medium: PropTypes.bool.isRequired,\r\n  clickable: PropTypes.bool.isRequired,\r\n  undoable: PropTypes.bool.isRequired,\r\n  onSelect: PropTypes.func,\r\n  selected: PropTypes.bool.isRequired,\r\n  isCellAvailable: PropTypes.func.isRequired,\r\n  isCellUndoable: PropTypes.func.isRequired,\r\n  allowControl: PropTypes.array.isRequired,\r\n  settings: PropTypes.object.isRequired,\r\n  animated: PropTypes.bool.isRequired,\r\n  showArrows: PropTypes.bool.isRequired,\r\n  game: PropTypes.instanceOf(Game),\r\n  arrows: PropTypes.array,\r\n};\r\n\r\nSvgBoardBackground.defaultProps = {\r\n  className: '',\r\n  small: false,\r\n  medium: false,\r\n  clickable: false,\r\n  selected: false,\r\n  allowControl: [Game.PLAYER_A, Game.PLAYER_B],\r\n  animated: false,\r\n  showArrows: false,\r\n};\r\n\r\nclass SvgBoardBackgroundDefinitions extends PureComponent {\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <svg className={classNames('board', 'svg-board')} style={{display: 'none'}}>\r\n          <defs>\r\n            <Cell.Definitions />\r\n            <Piece.Definitions />\r\n            <Arrow.Definition />\r\n          </defs>\r\n        </svg>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\nSvgBoardBackground.Definitions = SvgBoardBackgroundDefinitions;\r\n\r\nclass SvgBoardHistoryArrows extends PureComponent {\r\n  getPlayerMoves() {\r\n    const {transformation} = this.props;\r\n    const {player, relevantHistory} = this.getRelevantHistory();\r\n    const gameWithPieceMove = relevantHistory\r\n      .find(game => Game.MOVE_TYPES_MOVE_WORKER.includes(game.thisMoveType));\r\n    const gameWithBuildMove = relevantHistory\r\n      .find(game => game.thisMoveType === Game.MOVE_TYPE_BUILD_AROUND_WORKER);\r\n\r\n    const {move, build} = {\r\n      move: gameWithPieceMove ? {\r\n        from: gameWithPieceMove.previous.lastMove,\r\n        to: gameWithPieceMove.lastMove,\r\n      } : null,\r\n      build: gameWithBuildMove ? {\r\n        from: gameWithBuildMove.previous.lastMove,\r\n        to: gameWithBuildMove.lastMove,\r\n      }: null,\r\n    };\r\n\r\n    if (transformation) {\r\n      if (move) {\r\n        move.from = transformation.reverseCoordinates(gameWithPieceMove.previous.rowsAndColumns, move.from);\r\n        move.to = transformation.reverseCoordinates(gameWithPieceMove.rowsAndColumns, move.to);\r\n        move.type = 'move';\r\n      }\r\n      if (build) {\r\n        build.from = transformation.reverseCoordinates(gameWithBuildMove.previous.rowsAndColumns, build.from);\r\n        build.to = transformation.reverseCoordinates(gameWithBuildMove.rowsAndColumns, build.to);\r\n        build.type = 'build';\r\n      }\r\n    }\r\n\r\n    return {player, move, build};\r\n  }\r\n\r\n  getRelevantHistory() {\r\n    const {game} = this.props;\r\n\r\n    const relevantHistory = [game];\r\n    const player = game.thisPlayer;\r\n    let iteratingGame = game;\r\n    while (iteratingGame.previous) {\r\n      iteratingGame = iteratingGame.previous;\r\n      if (iteratingGame.thisPlayer !== player) {\r\n        break;\r\n      }\r\n      relevantHistory.push(iteratingGame);\r\n    }\r\n\r\n    return {player, relevantHistory};\r\n  }\r\n\r\n  render() {\r\n    const {game} = this.props;\r\n    if (!game) {\r\n      return null;\r\n    }\r\n\r\n    const {player, move, build} = this.getPlayerMoves();\r\n    if (!move && !build) {\r\n      return null;\r\n    }\r\n    const colour = player === Game.PLAYER_A ? 'white' : 'black';\r\n\r\n    let moveArrow = null, buildArrow = null;\r\n    if (move) {\r\n      moveArrow = <Arrow key={'move'} from={move.from} to={move.to} colour={colour} type={'move'} />;\r\n    }\r\n    if (build) {\r\n      buildArrow = <Arrow key={'build'} from={build.from} to={build.to} colour={colour} type={'build'} />;\r\n    }\r\n\r\n    return [moveArrow, buildArrow];\r\n  }\r\n}\r\n\r\nSvgBoardHistoryArrows.propTypes = {\r\n  game: PropTypes.instanceOf(Game),\r\n  transformation: PropTypes.func,\r\n};\r\n\r\nclass SvgBoardAvailableMovesArrows extends PureComponent {\r\n  render() {\r\n    const {game, transformation, isCellAvailable} = this.props;\r\n    if (!game) {\r\n      return null;\r\n    }\r\n    if (!Game.MOVE_TYPES_MOVE_OR_BUILD.includes(game.moveType)) {\r\n      return null;\r\n    }\r\n\r\n    let from = game.lastMove;\r\n    let availableCells = game.findCells(isCellAvailable);\r\n    if (transformation) {\r\n      from = transformation.reverseCoordinates(game.rowsAndColumns, from);\r\n      availableCells = availableCells.map(cell => transformation.reverseCoordinates(game.rowsAndColumns, cell));\r\n    }\r\n    const colour = game.nextPlayer === Game.PLAYER_A ? 'white' : 'black';\r\n    const type = game.moveType === Game.MOVE_TYPE_BUILD_AROUND_WORKER ? 'build' : 'move';\r\n\r\n    return availableCells.map((cell, index) => (\r\n      <Arrow key={index} from={from} to={cell} colour={colour} type={type} small />\r\n    ));\r\n  }\r\n}\r\n\r\nSvgBoardAvailableMovesArrows.propTypes = {\r\n  game: PropTypes.instanceOf(Game),\r\n  isCellAvailable: PropTypes.func.isRequired,\r\n  transformation: PropTypes.func,\r\n};\r\n\r\nclass SvgBoardPieces extends PureComponent {\r\n  render() {\r\n    const {rowsAndColumns, theme, allowControl} = this.props;\r\n\r\n    const pieces = _.sortBy(Game.findCells(rowsAndColumns, cell => cell.player), ['player', 'worker']);\r\n\r\n    return (\r\n      <g data-key={'pieces'} style={{pointerEvents: 'none'}}>\r\n        {pieces.map(cell => (\r\n          <SvgBoardPiece\r\n            key={`${cell.player}-${cell.worker}`}\r\n            cell={cell}\r\n            theme={theme}\r\n            allowControl={allowControl}\r\n          />\r\n        ))}\r\n      </g>\r\n    );\r\n  }\r\n}\r\n\r\nSvgBoardPieces.propTypes = {\r\n  rowsAndColumns: PropTypes.array.isRequired,\r\n  theme: PropTypes.object.isRequired,\r\n  allowControl: PropTypes.array.isRequired,\r\n};\r\n\r\nclass SvgBoardPiece extends PureComponent {\r\n  state = {\r\n    previousPosition: {x: this.props.cell.x, y: this.props.cell.y},\r\n    position: {x: this.props.cell.x, y: this.props.cell.y},\r\n  };\r\n\r\n  animateTransform = React.createRef();\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.cell.x !== state.position.x || props.cell.y !== state.position.y) {\r\n      return {previousPosition: state.position, position: {x: props.cell.x, y: props.cell.y}};\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (this.state.position !== prevState.position) {\r\n      setTimeout(() => {\r\n        if (this.animateTransform.current) {\r\n          this.animateTransform.current.beginElement();\r\n        }\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {cell, theme, allowControl} = this.props;\r\n    const {previousPosition, position} = this.state;\r\n  \tconst isPlayerAOpponent = !allowControl.includes(Game.PLAYER_A) && allowControl.includes(Game.PLAYER_B);\r\n  \tconst isPlayerBOpponent = !isPlayerAOpponent;\r\n    return (\r\n      <g transform={`translate(${position.x * 100},${position.y * 100})`}>\r\n        <Piece\r\n          style={theme.pieces || 'king'}\r\n          colour={cell.player === Game.PLAYER_A ? 'white' : 'black'}\r\n          rotated={theme.rotateOpponent && (cell.player === Game.PLAYER_A ? isPlayerAOpponent : isPlayerBOpponent)}\r\n        />\r\n        <animateTransform\r\n          ref={this.animateTransform}\r\n          attributeName={'transform'}\r\n          attributeType={'XML'}\r\n          type={'translate'}\r\n          from={`${previousPosition.x * 100} ${previousPosition.y * 100}`}\r\n          to={`${position.x * 100} ${position.y * 100}`}\r\n          dur={'0.1s'}\r\n          repeatCount={1}\r\n          fill={'freeze'}\r\n        />\r\n      </g>\r\n    );\r\n  }\r\n}\r\n\r\nSvgBoardPiece.propTypes = {\r\n  cell: PropTypes.object.isRequired,\r\n  theme: PropTypes.object.isRequired,\r\n  allowControl: PropTypes.array.isRequired,\r\n};\r\n\r\nclass SvgBoardCell extends PureComponent {\r\n  makeMove = () => {\r\n    if (this.props.available && this.props.makeMove) {\r\n      this.props.makeMove(this.props.cell);\r\n    } else if (this.props.undoable && this.props.undo) {\r\n      this.props.undo();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let {cell, clickable, available, undoable, settings: {theme}, makeMove, undo, animated, allowControl} = this.props;\r\n    return (\r\n      <Cell\r\n        x={cell.x}\r\n        y={cell.y}\r\n        available={available}\r\n        undoable={undoable}\r\n        level={cell.level}\r\n        player={cell.player}\r\n        allowControl={allowControl}\r\n        animated={animated}\r\n        theme={theme}\r\n        onClick={((makeMove && available) || (undo && undoable)) && clickable ? this.makeMove : null}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nSvgBoardCell.propTypes = {\r\n  cell: PropTypes.object.isRequired,\r\n  clickable: PropTypes.bool.isRequired,\r\n  available: PropTypes.bool.isRequired,\r\n  undoable: PropTypes.bool.isRequired,\r\n  settings: PropTypes.object.isRequired,\r\n  makeMove: PropTypes.func,\r\n  undo: PropTypes.func,\r\n  animated: PropTypes.bool.isRequired,\r\n  allowControl: PropTypes.array.isRequired,\r\n};\r\n\r\nSvgBoardCell.defaultProps = {\r\n  clickable: false,\r\n  available: false,\r\n  undoable: false,\r\n  animated: false,\r\n  allowControl: [Game.PLAYER_A, Game.PLAYER_B],\r\n};\r\n\r\nexport default SvgBoardBackground;\r\n","import SvgBoardBackground from \"./SvgBoardBackground\";\r\n\r\nexport default SvgBoardBackground;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Game from \"../../game/game\";\r\nimport HtmlBoardBackground from \"./HtmlBoardBackground\";\r\nimport SvgBoardBackground from \"./SvgBoardBackground\";\r\nimport \"../../styles/board.css\";\r\nimport \"../../styles/board-theme.css\";\r\n\r\nclass BoardBackground extends Component {\r\n  render() {\r\n    let {renderer = 'svg', ...props} = this.props;\r\n\r\n    const renderers = {\r\n      'html': HtmlBoardBackground,\r\n      'svg': SvgBoardBackground,\r\n    };\r\n    const Renderer = renderers[renderer];\r\n    return <Renderer {...props} />;\r\n  }\r\n}\r\n\r\nBoardBackground.propTypes = {\r\n  rowsAndColumns: PropTypes.array.isRequired,\r\n  transformation: PropTypes.func,\r\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.array]).isRequired,\r\n  makeMove: PropTypes.func,\r\n  undo: PropTypes.func,\r\n  small: PropTypes.bool.isRequired,\r\n  medium: PropTypes.bool.isRequired,\r\n  clickable: PropTypes.bool.isRequired,\r\n  undoable: PropTypes.bool.isRequired,\r\n  onSelect: PropTypes.func,\r\n  selected: PropTypes.bool.isRequired,\r\n  isCellAvailable: PropTypes.func.isRequired,\r\n  isCellUndoable: PropTypes.func.isRequired,\r\n  allowControl: PropTypes.array.isRequired,\r\n  settings: PropTypes.object.isRequired,\r\n  animated: PropTypes.bool.isRequired,\r\n  showArrows: PropTypes.bool.isRequired,\r\n  game: PropTypes.instanceOf(Game),\r\n  arrows: PropTypes.array,\r\n};\r\n\r\nBoardBackground.defaultProps = {\r\n  className: '',\r\n  small: false,\r\n  medium: false,\r\n  clickable: false,\r\n  selected: false,\r\n  allowControl: [Game.PLAYER_A, Game.PLAYER_B],\r\n  animated: false,\r\n  showArrows: false,\r\n};\r\n\r\nexport default BoardBackground;\r\n","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _  from 'lodash';\r\nimport Game from \"../../game/game\";\r\nimport BoardBackground from \"./BoardBackground\";\r\nimport {Menu} from \"semantic-ui-react\";\r\n\r\nclass Board extends PureComponent {\r\n  makeMove = (cell) => {\r\n    const {game: {rowsAndColumns}, transformation} = this.props;\r\n    if (transformation) {\r\n      cell = transformation.coordinates(rowsAndColumns, cell);\r\n    }\r\n    this.props.makeMove(this.props.game.makeMove({x: cell.x, y: cell.y}));\r\n  };\r\n\r\n  undo = () => {\r\n    this.props.makeMove(this.props.game.canUndo ? this.props.game.undo() : this.props.game.takeMoveBack());\r\n  };\r\n\r\n  onSelect = () => {\r\n    this.props.onSelect(this.props.game);\r\n  };\r\n\r\n  isCellAvailable = cell => {\r\n    const {game: {rowsAndColumns}, transformation} = this.props;\r\n    if (transformation) {\r\n      cell = transformation.coordinates(rowsAndColumns, cell);\r\n    }\r\n    return this.props.game.isMoveAvailable(cell);\r\n  };\r\n\r\n  isCellUndoable = cell => {\r\n    const {game: {rowsAndColumns}, transformation} = this.props;\r\n    if (transformation) {\r\n      cell = transformation.coordinates(rowsAndColumns, cell);\r\n    }\r\n    if (this.props.minChainCount === undefined || this.props.minChainCount === null) {\r\n      if (this.props.allowControl.length === 2) {\r\n        return true;\r\n      }\r\n      if (!this.props.game.canUndo) {\r\n        return false;\r\n      }\r\n    } else {\r\n      if (this.props.game.chainCount <= this.props.minChainCount) {\r\n        return false;\r\n      }\r\n    }\r\n    const lastMove = this.props.game.lastMove;\r\n    if (!lastMove) {\r\n      return false;\r\n    }\r\n    return lastMove.x === cell.x && lastMove.y === cell.y;\r\n  };\r\n\r\n  isGameUndoable() {\r\n    return !!this.props.game.findCell(this.isCellUndoable);\r\n  }\r\n\r\n  render() {\r\n    const {game, transformation, allowControl, onSelect, makeMove, animated} = this.props;\r\n    let rowsAndColumns = game.rowsAndColumns;\r\n    if (transformation) {\r\n      rowsAndColumns = transformation(rowsAndColumns);\r\n    }\r\n\r\n    return (\r\n      <BoardBackground\r\n        {...this.props}\r\n        isCellAvailable={animated ? this.isCellAvailable : () => false}\r\n        isCellUndoable={animated ? this.isCellUndoable : () => false}\r\n        clickable={allowControl.includes(game.nextPlayer)}\r\n        undoable={animated ? this.isGameUndoable() : false}\r\n        onSelect={onSelect ? this.onSelect : null}\r\n        makeMove={makeMove ? this.makeMove : null}\r\n        undo={makeMove ? this.undo : null}\r\n        rowsAndColumns={rowsAndColumns}\r\n        transformation={transformation}\r\n        game={game}\r\n        animated={animated}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nBoard.propTypes = {\r\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.array]).isRequired,\r\n  game: PropTypes.instanceOf(Game).isRequired,\r\n  transformation: PropTypes.func,\r\n  makeMove: PropTypes.func,\r\n  minChainCount: PropTypes.number,\r\n  small: PropTypes.bool.isRequired,\r\n  medium: PropTypes.bool.isRequired,\r\n  onSelect: PropTypes.func,\r\n  selected: PropTypes.bool.isRequired,\r\n  allowControl: PropTypes.array.isRequired,\r\n  settings: PropTypes.object.isRequired,\r\n  animated: PropTypes.bool.isRequired,\r\n};\r\n\r\nBoard.defaultProps = {\r\n  className: '',\r\n  small: false,\r\n  medium: false,\r\n  selected: false,\r\n  allowControl: [Game.PLAYER_A, Game.PLAYER_B],\r\n  animated: false,\r\n};\r\n\r\nclass BoardTransformation extends PureComponent {\r\n  state = {\r\n    rotations: 0,\r\n    flippedHorizontally: false,\r\n  };\r\n\r\n  // noinspection JSSuspiciousNameCombination\r\n  static transformationMap = {\r\n    '0,false': null,\r\n    // makeTransformRowsAndColumns({transpose:  false, flipX: false, flipY: false}),\r\n    '1,false': this.makeTransformRowsAndColumns({transpose: true, flipX: false, flipY: true}),\r\n    '2,false': this.makeTransformRowsAndColumns({transpose: false, flipX: true, flipY: true}),\r\n    '3,false': this.makeTransformRowsAndColumns({transpose: true, flipX: true, flipY: false}),\r\n    '0,true': this.makeTransformRowsAndColumns({transpose: false, flipX: true, flipY: false}),\r\n    '1,true': this.makeTransformRowsAndColumns({transpose: true, flipX: true, flipY: true}),\r\n    '2,true': this.makeTransformRowsAndColumns({transpose: false, flipX: false, flipY: true}),\r\n    '3,true': this.makeTransformRowsAndColumns({transpose: true, flipX: false, flipY: false}),\r\n  };\r\n\r\n  static makeTransformRowsAndColumns(config) {\r\n    const transformRowsAndColumns = rowsAndColumns => {\r\n      return this.transformRowsAndColumns(rowsAndColumns, config);\r\n    };\r\n    transformRowsAndColumns.coordinates = (rowsAndColumns, coordinates) => {\r\n      return this.reverseTransformCoordinates(rowsAndColumns, coordinates, config);\r\n    };\r\n    // We can tell if the board is flipped (horizontally or vertically)\r\n    const flipped = config.transpose ^ config.flipX ^ config.flipY;\r\n    const reverseConfig = config.transpose && !flipped ? {\r\n      transpose: config.transpose,\r\n      flipX: !config.flipX,\r\n      flipY: !config.flipY,\r\n    } : config;\r\n    transformRowsAndColumns.reverseCoordinates = (rowsAndColumns, coordinates) => {\r\n      return this.reverseTransformCoordinates(rowsAndColumns, coordinates, reverseConfig);\r\n    };\r\n\r\n    return transformRowsAndColumns;\r\n  }\r\n\r\n  static transformRowsAndColumns(rowsAndColumns, config) {\r\n    let {newRowCount, newColumnCount} = this.getNewRowAndColumnCount(rowsAndColumns, config);\r\n    const newXs = _.range(newColumnCount);\r\n    const newYs = _.range(newRowCount);\r\n\r\n    return newYs.map(newY => ({\r\n      y: newY,\r\n      cells: newXs.map(newX => {\r\n        let {oldX, oldY} = this.getOldCoordinates( {newX, newY}, {newRowCount, newColumnCount}, config);\r\n        return {\r\n        ...rowsAndColumns[oldY].cells[oldX],\r\n          x: newX, y: newY,\r\n        };\r\n      }),\r\n    }));\r\n  }\r\n\r\n  static reverseTransformCoordinates(rowsAndColumns, coordinates, config) {\r\n    let {newRowCount, newColumnCount} = this.getNewRowAndColumnCount(rowsAndColumns, config);\r\n    const {x: newX, y: newY} = coordinates;\r\n    const {oldX, oldY} = this.getOldCoordinates( {newX, newY}, {newRowCount, newColumnCount}, config);\r\n\r\n    return {x: oldX, y: oldY};\r\n  }\r\n\r\n  static getNewRowAndColumnCount(rowsAndColumns, config) {\r\n    const rowCount = rowsAndColumns.length;\r\n    const columnCount = Math.max(...rowsAndColumns.map(row => row.cells.length)) || 0;\r\n    const {transpose} = config;\r\n    let newRowCount, newColumnCount;\r\n    if (transpose) {\r\n      [newColumnCount, newRowCount] = [rowCount, columnCount];\r\n    } else {\r\n      [newColumnCount, newRowCount] = [columnCount, rowCount];\r\n    }\r\n    return {newRowCount, newColumnCount};\r\n  }\r\n\r\n  static getOldCoordinates({newX, newY}, {newColumnCount, newRowCount}, config) {\r\n    const {transpose, flipX, flipY} = config;\r\n    let oldX, oldY;\r\n    if (transpose) {\r\n      [oldX, oldY] = [newY, newX];\r\n    } else {\r\n      [oldX, oldY] = [newX, newY];\r\n    }\r\n    if (flipX) {\r\n      oldX = newColumnCount - 1 - oldX;\r\n    }\r\n    if (flipY) {\r\n      oldY = newRowCount - 1 - oldY;\r\n    }\r\n    return {oldX, oldY};\r\n  }\r\n\r\n   updateOrientation = method => {\r\n     this.setState(method, () => {\r\n       if (this.props.onChange) {\r\n         const {rotations, flippedHorizontally} = this.state;\r\n         const transformation = this.constructor.transformationMap[`${rotations},${flippedHorizontally}`];\r\n         this.props.onChange({rotations, flippedHorizontally, transformation});\r\n       }\r\n     });\r\n   };\r\n\r\n  rotateCounterClockwise = () => {\r\n    this.updateOrientation(state => ({\r\n      rotations: (state.rotations + 3) % 4,\r\n    }));\r\n  };\r\n\r\n  rotateClockwise = () => {\r\n    this.updateOrientation(state => ({\r\n      rotations: (state.rotations + 1) % 4,\r\n    }));\r\n  };\r\n\r\n  flipHorizontally = () => {\r\n    this.updateOrientation(state => ({\r\n      flippedHorizontally: !state.flippedHorizontally,\r\n    }));\r\n  };\r\n\r\n  flipVertically = () => {\r\n    this.updateOrientation(state => ({\r\n      rotations: (state.rotations + 2) % 4,\r\n      flippedHorizontally: !state.flippedHorizontally,\r\n    }));\r\n  };\r\n\r\n  reset = () => {\r\n    this.updateOrientation(state => ({\r\n      rotations: 0,\r\n      flippedHorizontally: false,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const {rotations, flippedHorizontally} = this.state;\r\n\r\n    return (\r\n      <Menu size={'massive'} items={[\r\n        {key: 'rotate-counter-clockwise', icon: 'undo', onClick: this.rotateCounterClockwise},\r\n        {key: 'rotate-clockwise', icon: 'redo', onClick: this.rotateClockwise},\r\n        {key: 'flip-horizontal', icon: 'arrows alternate horizontal', onClick: this.flipHorizontally},\r\n        {key: 'flip-vertical', icon: 'arrows alternate vertical', onClick: this.flipVertically},\r\n        {key: 'home', icon: 'home', onClick: this.reset, disabled: !rotations && !flippedHorizontally},\r\n      ]} />\r\n    );\r\n  }\r\n}\r\n\r\nBoardTransformation.propTypes = {\r\n  onChange: PropTypes.func,\r\n};\r\n\r\nexport {\r\n  BoardTransformation,\r\n};\r\n\r\nexport default Board;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Game from \"../../game/game\";\r\nimport BoardBackground from \"./BoardBackground\";\r\n\r\nclass ThemeDemoBoard extends Component {\r\n  static demoRowsAndColumns = [\r\n    {\r\n      y: 0,\r\n      cells: [\r\n        {x: 0, y: 0, player: null, worker: null, level: 0},\r\n        {x: 1, y: 0, player: null, worker: null, level: 1},\r\n        {x: 2, y: 0, player: null, worker: null, level: 2},\r\n        {x: 3, y: 0, player: null, worker: null, level: 3},\r\n        {x: 4, y: 0, player: null, worker: null, level: 4},\r\n        {x: 5, y: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST, level: 0},\r\n        {x: 6, y: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST, level: 0},\r\n      ],\r\n    },\r\n  ];\r\n  static demoRowsAndColumnsAnimated = [\r\n    {\r\n      y: 0,\r\n      cells: [\r\n        {x: 0, y: 0, player: null, worker: null, level: 0},\r\n        {x: 1, y: 0, player: null, worker: null, level: 1},\r\n        {x: 2, y: 0, player: null, worker: null, level: 2},\r\n        {x: 3, y: 0, player: null, worker: null, level: 3},\r\n        {x: 4, y: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST, level: 3},\r\n        {x: 5, y: 0, player: null, worker: null, level: 0},\r\n        {x: 6, y: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST, level: 0},\r\n      ],\r\n    },\r\n  ];\r\n  static arrows = [\r\n    {from: {x: 5, y: 0}, to: {x: 4, y: 0}, colour: 'white', type: 'build'},\r\n    {from: {x: 4, y: 0}, to: {x: 5, y: 0}, colour: 'white', type: 'move'},\r\n  ];\r\n\r\n  state = {\r\n    rowsAndColumns: this.constructor.demoRowsAndColumns,\r\n  };\r\n\r\n  isCellAvailable = () => {\r\n    return false;\r\n  };\r\n\r\n  isCellUndoable = () => {\r\n    return false;\r\n  };\r\n\r\n  animate = () => {\r\n    this.setState(state => ({\r\n      rowsAndColumns: state.rowsAndColumns === this.constructor.demoRowsAndColumns\r\n        ? this.constructor.demoRowsAndColumnsAnimated\r\n        : this.constructor.demoRowsAndColumns,\r\n    }));\r\n  };\r\n  animationInterval = this.props.settings.theme.animations ? setInterval(this.animate, 2000) : null;\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (this.props.settings.theme.animations !== prevProps.settings.theme.animations) {\r\n      if (this.props.settings.theme.animations) {\r\n        if (!this.animationInterval) {\r\n          this.animationInterval = setInterval(this.animate, 2000);\r\n        }\r\n      } else {\r\n        if (this.animationInterval) {\r\n          clearInterval(this.animationInterval);\r\n          this.animationInterval = null;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.animationInterval) {\r\n      clearInterval(this.animationInterval);\r\n      this.animationInterval = null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {small, medium, settings} = this.props;\r\n    const {rowsAndColumns} = this.state;\r\n\r\n    return (\r\n      <BoardBackground\r\n        small={small}\r\n        medium={medium}\r\n        allowControl={[Game.PLAYER_A, Game.PLAYER_B]}\r\n        rowsAndColumns={rowsAndColumns}\r\n        undoable={false}\r\n        isCellAvailable={this.isCellAvailable}\r\n        isCellUndoable={this.isCellUndoable}\r\n        arrows={settings.theme.arrows ? this.constructor.arrows : undefined}\r\n        settings={settings}\r\n        animated={settings.theme.animations}\r\n        showArrows={settings.theme.arrows}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nThemeDemoBoard.propTypes = {\r\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.array]).isRequired,\r\n  small: PropTypes.bool.isRequired,\r\n  medium: PropTypes.bool.isRequired,\r\n  settings: PropTypes.object.isRequired,\r\n};\r\n\r\nThemeDemoBoard.defaultProps = {\r\n  className: '',\r\n  small: false,\r\n  medium: false,\r\n};\r\n\r\nexport default ThemeDemoBoard;\r\n","import Board from './Board';\r\nimport ThemeDemoBoard from './ThemeDemoBoard';\r\n\r\nexport {\r\n  ThemeDemoBoard,\r\n};\r\n\r\nexport default Board;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Game from \"../../game/game\";\r\nimport BoardBackground from \"./BoardBackground\";\r\n\r\nclass PlayerColourBoard extends Component {\r\n  static colours = {\r\n    [Game.PLAYER_A]: [\r\n      {\r\n        y: 0,\r\n        cells: [\r\n          {x: 0, y: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST, level: 0},\r\n        ],\r\n      },\r\n    ],\r\n    [Game.PLAYER_B]: [\r\n      {\r\n        y: 0,\r\n        cells: [\r\n          {x: 0, y: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST, level: 0},\r\n        ],\r\n      },\r\n    ],\r\n  };\r\n\r\n  isCellAvailable = () => {\r\n    return false;\r\n  };\r\n\r\n  isCellUndoable = () => {\r\n    return false;\r\n  };\r\n\r\n  render() {\r\n    const {small, medium, player, settings, allowControl} = this.props;\r\n\r\n    return (\r\n      <BoardBackground\r\n        small={small}\r\n        medium={medium}\r\n        rowsAndColumns={this.constructor.colours[player]}\r\n        undoable={false}\r\n        isCellAvailable={this.isCellAvailable}\r\n        isCellUndoable={this.isCellUndoable}\r\n        settings={settings}\r\n        allowControl={allowControl}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nPlayerColourBoard.propTypes = {\r\n  settings: PropTypes.object.isRequired,\r\n  player: PropTypes.oneOf(Game.PLAYERS).isRequired,\r\n  allowControl: PropTypes.array.isRequired,\r\n  small: PropTypes.bool.isRequired,\r\n  medium: PropTypes.bool.isRequired,\r\n};\r\n\r\nPlayerColourBoard.defaultProps = {\r\n  small: false,\r\n  medium: false,\r\n};\r\n\r\nexport default PlayerColourBoard;\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport '../styles/play.css';\r\nimport Game from \"../game/game\";\r\nimport Board from \"./Board\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  Grid,\r\n  Header,\r\n  Label,\r\n  Menu,\r\n  Modal,\r\n  Pagination, Responsive,\r\n  Segment,\r\n  Statistic\r\n} from \"semantic-ui-react\";\r\nimport classNames from 'classnames';\r\nimport {BoardTransformation} from \"./Board/Board\";\r\nimport keydown, {Keys} from \"react-keydown\";\r\nimport PlayerColourBoard from \"./Board/PlayerColourBoard\";\r\n\r\nclass Play extends Component {\r\n  static MOVE_TYPE_NAMES = {\r\n    [Game.MOVE_TYPE_PLACE_FIRST_WORKER]: \"Place a worker\",\r\n    [Game.MOVE_TYPE_PLACE_SECOND_WORKER]: \"Place a worker\",\r\n    [Game.MOVE_TYPE_SELECT_WORKER_TO_MOVE]: \"Select a worker\",\r\n    [Game.MOVE_TYPE_MOVE_FIRST_WORKER]: \"Move worker\",\r\n    [Game.MOVE_TYPE_MOVE_SECOND_WORKER]: \"Move worker\",\r\n    [Game.MOVE_TYPE_BUILD_AROUND_WORKER]: \"Build\",\r\n  };\r\n\r\n  state = {\r\n    selectedGame: null,\r\n    game: this.props.game,\r\n    transformation: null,\r\n  };\r\n\r\n  autoSubmitModal = React.createRef();\r\n\r\n  makeMove = game => {\r\n    if (this.props.submit) {\r\n      this.setState({game})\r\n    } else {\r\n      this.props.makeMove(game);\r\n    }\r\n    if (this.props.onDisplayPositionChange) {\r\n      this.props.onDisplayPositionChange(game);\r\n    }\r\n  };\r\n\r\n  takeMoveBack = () => {\r\n    this.makeMove(this.state.game.takeMoveBack());\r\n  };\r\n\r\n  undo = () => {\r\n    this.makeMove(this.state.game.undo());\r\n  };\r\n\r\n  newGame = () => {\r\n    this.makeMove(Game.create());\r\n  };\r\n\r\n  selectGame = game => {\r\n    const selectedGame = game === this.state.game ? null : game;\r\n    this.setState({selectedGame});\r\n    if (this.props.onSelectedGameChange) {\r\n      this.props.onSelectedGameChange(selectedGame);\r\n    }\r\n  };\r\n\r\n  makeMoveToSelected = game => {\r\n    this.selectGame(game);\r\n  };\r\n\r\n  takeMoveBackToSelected = () => {\r\n    this.selectGame(this.state.selectedGame.takeMoveBack());\r\n  };\r\n\r\n  undoToSelected = () => {\r\n    this.selectGame(this.state.selectedGame.undo());\r\n  };\r\n\r\n  deselectGame = () => {\r\n    this.selectGame(null);\r\n  };\r\n\r\n  submit = () => {\r\n    const moves = this.getMovesToSubmit();\r\n    if (moves.length) {\r\n      this.props.submit(moves, this.state.game);\r\n    }\r\n  };\r\n\r\n  getMovesToSubmit() {\r\n    const {game: propsGame} = this.props;\r\n    const {game: stateGame} = this.state;\r\n    const history = stateGame.fullHistory;\r\n    const propsGameIndex = history.findIndex(\r\n      game => game.compressedFullNotation === propsGame.compressedFullNotation);\r\n    if (propsGameIndex < 0) {\r\n      console.error(\"Could not find live game in history\");\r\n      return [];\r\n    }\r\n    const newHistory = history.slice(propsGameIndex + 1);\r\n    const moves = newHistory.map(game => game.lastMove);\r\n\r\n    return moves;\r\n  }\r\n\r\n  resignOrAbort = () => {\r\n    this.props.submit(\"resign\");\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props.game !== prevProps.game) {\r\n      const gameChanged = (\r\n        !this.props.game\r\n        || !prevProps.game\r\n        || this.props.game.compressedFullNotation !== prevProps.game.compressedFullNotation\r\n        || this.props.game.positionNotation !== prevProps.game.positionNotation\r\n      );\r\n      if (gameChanged) {\r\n        this.selectGame(null);\r\n        this.setState({game: this.props.game, resigning: false});\r\n      }\r\n    }\r\n    if (this.props.user && this.props.user.settings.autoSubmitMoves) {\r\n      if (!this.canSubmit(prevProps, prevState) && this.canSubmit()) {\r\n        this.submit();\r\n      }\r\n    }\r\n  }\r\n\r\n  changeAutoSubmitMoves = () => {\r\n    if (!this.props.user.settings.autoSubmitMoves) {\r\n      this.autoSubmitModal.current.handleOpen();\r\n    } else {\r\n      this.props.changeSettings({...this.props.user.settings, autoSubmitMoves: false});\r\n    }\r\n  };\r\n\r\n  doAutoSubmitMoves = () => {\r\n    this.props.changeSettings({...this.props.user.settings, autoSubmitMoves: true});\r\n    if (this.canSubmit()) {\r\n      this.submit();\r\n    }\r\n  };\r\n\r\n  canSubmit(props = this.props, state = this.state) {\r\n    const {submit} = props;\r\n    const {selectedGame, game} = state;\r\n    return (\r\n      !!submit\r\n      && !selectedGame\r\n      && game !== props.game\r\n      && !!this.getMovesToSubmit().length\r\n      && (\r\n        game.finished\r\n        || game.nextPlayer !== props.game.nextPlayer\r\n      )\r\n    );\r\n  }\r\n\r\n  onTransformationChange = ({transformation}) => {\r\n    this.setState({transformation});\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      user, defaultSettings, names, allowControl, matchGame, children,\r\n    } = this.props;\r\n    const {selectedGame, game, transformation} = this.state;\r\n    const displayGame = selectedGame || game;\r\n    const isMyGame = allowControl.length > 0;\r\n    const canSubmit = this.canSubmit();\r\n    const tooShortToResign = matchGame ? matchGame.tooShortToResign : false;\r\n    const settings = user ? user.settings : defaultSettings;\r\n  \tconst isPlayerBOpponent = allowControl.includes(Game.PLAYER_A);\r\n\r\n  \tconst controlsNode = (\r\n  \t  <Fragment>\r\n        <Grid.Row>\r\n          <PlayPlayer\r\n            player={isPlayerBOpponent ? Game.PLAYER_B : Game.PLAYER_A}\r\n            canSubmit={false}\r\n            submit={this.props.submit ? this.submit : null}\r\n            changeAutoSubmitMoves={this.changeAutoSubmitMoves}\r\n            game={canSubmit ? game.previous : game}\r\n            settings={settings}\r\n            names={names}\r\n            allowControl={allowControl}\r\n          />\r\n        </Grid.Row>\r\n        <Grid.Row>\r\n          <PlayPlayer\r\n            player={isPlayerBOpponent ? Game.PLAYER_A : Game.PLAYER_B}\r\n            canSubmit={canSubmit}\r\n            submit={this.props.submit ? this.submit : null}\r\n            changeAutoSubmitMoves={this.changeAutoSubmitMoves}\r\n            game={canSubmit ? game.previous : game}\r\n            settings={settings}\r\n            names={names}\r\n            allowControl={allowControl}\r\n          />\r\n        </Grid.Row>\r\n        <Grid.Row>\r\n          <PlayNavigation game={game} selectedGame={selectedGame} selectGame={this.selectGame} />\r\n        </Grid.Row>\r\n        <Grid.Row>\r\n          <BoardTransformation onChange={this.onTransformationChange} />\r\n        </Grid.Row>\r\n        {children}\r\n      </Fragment>\r\n    );\r\n  \tconst boardNode = (\r\n      <Board\r\n        game={displayGame}\r\n        transformation={transformation}\r\n        makeMove={selectedGame ? this.makeMoveToSelected : this.makeMove}\r\n        minChainCount={this.props.submit ? this.props.game.chainCount : (\r\n          this.props.game.canUndo ? this.props.game.previous.chainCount : this.props.game.chainCount\r\n        )}\r\n        allowControl={displayGame === game ? allowControl : undefined}\r\n        settings={settings}\r\n        animated={settings.theme.animations}\r\n        showArrows={settings.theme.arrows}\r\n      />\r\n    );\r\n\r\n    return (\r\n      <Fragment>\r\n        <Segment style={{textAlign: \"center\"}}>\r\n          <Grid centered columns={'equal'} textAlign={'center'}>\r\n            <Responsive as={Grid.Row} minWidth={800}>\r\n              <Grid.Column>{controlsNode}</Grid.Column>\r\n              <Grid.Column>{boardNode}</Grid.Column>\r\n            </Responsive>\r\n            <Responsive as={Fragment} maxWidth={800}>\r\n              <Grid.Row>\r\n                <Grid.Column stretched={false} textAlign={'center'}>\r\n                  {boardNode}\r\n                </Grid.Column>\r\n              </Grid.Row>\r\n              <Grid.Row>\r\n                <Grid.Column stretched={false} textAlign={'center'}>\r\n                  {controlsNode}\r\n                </Grid.Column>\r\n              </Grid.Row>\r\n            </Responsive>\r\n          </Grid>\r\n        </Segment>\r\n        {this.props.submit && isMyGame ? (\r\n          <Segment>\r\n            <Statistic.Group widths={\"two\"} size={\"tiny\"}>\r\n              <Statistic value={\r\n                <Modal\r\n                  trigger={<Button negative disabled={!!selectedGame || this.props.game.finished}>{tooShortToResign ? 'Abort' : 'Resign'}</Button>}\r\n                  header={tooShortToResign ? 'Abort?' : 'Resign?'}\r\n                  content={`Are you sure you want to ${tooShortToResign ? 'abort' : 'forfeit'}?${tooShortToResign ? ' This game is too short to resign.' : ''}`}\r\n                  actions={[{key: 'resign', content: tooShortToResign ? 'Abort' : 'Resign', negative: true, onClick: this.resignOrAbort}, { key: 'continue', content: 'Continue', inverted: true, secondary: true }]}\r\n                />\r\n              } />\r\n              <Statistic value={<Button negative onClick={this.props.submit ? this.takeMoveBack : this.undo} disabled={!!selectedGame || (this.props.submit ? game.chainCount <= this.props.game.chainCount : !game.canUndo)}>Undo</Button>} />\r\n            </Statistic.Group>\r\n          </Segment>\r\n        ) : null}\r\n        {!this.props.submit ? (\r\n          <Segment>\r\n            <Statistic.Group widths={\"two\"} size={\"small\"}>\r\n              <Statistic value={<Button negative onClick={this.takeMoveBack} disabled={!!selectedGame || !game.previous}>Take Back a Move</Button>}/>\r\n              <Statistic value={<Button negative onClick={this.newGame} disabled={!!selectedGame || !game.previous}>New Game</Button>} />\r\n            </Statistic.Group>\r\n          </Segment>\r\n        ) : null}\r\n        <PlayHistory\r\n          game={game}\r\n          selectedGame={selectedGame}\r\n          selectGame={this.selectGame}\r\n          user={user}\r\n          defaultSettings={defaultSettings}\r\n        />\r\n        {selectedGame ? (\r\n          <Segment textAlign={\"center\"}>\r\n            <Header as={\"h2\"}>Reviewing previous move</Header>\r\n            <Statistic.Group widths={\"three\"} size={\"small\"}>\r\n              {selectedGame.finished ? (\r\n                <Statistic color={\"green\"} value={names[selectedGame.winner]} label={\"Won!\"} />\r\n              ) : (\r\n                <Statistic value={names[selectedGame.nextPlayer]} label={this.constructor.MOVE_TYPE_NAMES[selectedGame.moveType]} />\r\n              )}\r\n              <Statistic value={selectedGame.moveCount} label={\"Move\"} />\r\n              <Statistic value={<Button negative onClick={this.undoToSelected} disabled={!selectedGame.canUndo}>Undo</Button>} />\r\n            </Statistic.Group>\r\n            <Statistic.Group widths={\"two\"} size={\"small\"}>\r\n              <Statistic value={<Button negative onClick={this.takeMoveBackToSelected} disabled={!selectedGame.previous}>Take Back a Move</Button>}/>\r\n              <Statistic value={<Button negative onClick={this.deselectGame}>Stop reviewing</Button>} />\r\n            </Statistic.Group>\r\n          </Segment>\r\n        ) : null}\r\n        <Modal\r\n          ref={this.autoSubmitModal}\r\n          header={'Auto submit moves'}\r\n          content={'Are you sure you want to be auto submitting your moves?'}\r\n          actions={[\r\n            {key: 'yes', content: 'Auto submit', onClick: this.doAutoSubmitMoves, primary: true},\r\n            {key: 'no', content: 'No, manually submit moves', secondary: true},\r\n          ]}\r\n        />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nPlay.propTypes = {\r\n  user: PropTypes.object,\r\n  defaultSettings: PropTypes.object.isRequired,\r\n  otherUser: PropTypes.object,\r\n  settings: PropTypes.object,\r\n  changeSettings: PropTypes.func,\r\n  game: PropTypes.instanceOf(Game).isRequired,\r\n  matchGame: PropTypes.object,\r\n  makeMove: PropTypes.func,\r\n  submit: PropTypes.func,\r\n  challengeUser: PropTypes.func,\r\n  stopChallengeUser: PropTypes.func,\r\n  challengedUser: PropTypes.object,\r\n  names: PropTypes.object.isRequired,\r\n  allowControl: PropTypes.array.isRequired,\r\n  children: PropTypes.node,\r\n  onSelectedGameChange: PropTypes.func,\r\n  onDisplayPositionChange: PropTypes.func,\r\n};\r\n\r\nPlay.defaultProps = {\r\n  names: {\r\n    [Game.PLAYER_A]: \"Player A\",\r\n    [Game.PLAYER_B]: \"Player B\",\r\n  },\r\n  allowControl: [Game.PLAYER_A, Game.PLAYER_B],\r\n};\r\n\r\nclass PlayPlayer extends Component {\r\n  static MOVE_TYPE_NAMES = {\r\n    [Game.MOVE_TYPE_PLACE_FIRST_WORKER]: \"Place a worker\",\r\n    [Game.MOVE_TYPE_PLACE_SECOND_WORKER]: \"Place a worker\",\r\n    [Game.MOVE_TYPE_SELECT_WORKER_TO_MOVE]: \"Select a worker\",\r\n    [Game.MOVE_TYPE_MOVE_FIRST_WORKER]: \"Move worker\",\r\n    [Game.MOVE_TYPE_MOVE_SECOND_WORKER]: \"Move worker\",\r\n    [Game.MOVE_TYPE_BUILD_AROUND_WORKER]: \"Build\",\r\n  };\r\n\r\n  render() {\r\n    const {game, player, allowControl, names, settings, canSubmit, submit, changeAutoSubmitMoves} = this.props;\r\n    const isPlayerControlled = allowControl.includes(player);\r\n    const isPlayersTurn = game.nextPlayer === player;\r\n    const playerWon = game.winner === player;\r\n\r\n    return (\r\n      <Menu\r\n        stackable\r\n        className={classNames({attention: !game.finished && isPlayerControlled && isPlayersTurn && !canSubmit})}\r\n        size={'massive'}\r\n        inverted={game.finished || player === Game.PLAYER_B}\r\n        color={game.finished ? (playerWon ? 'green' : 'red') : undefined}\r\n        items={[\r\n          {key: 'icon',\r\n            icon: game.finished ? (playerWon ? 'trophy' : 'thumbs down') : (isPlayersTurn ? 'play' : 'hourglass'),\r\n            content: (\r\n              <Fragment>\r\n                <PlayerColourBoard medium settings={settings} player={player} allowControl={allowControl} />\r\n                {names[player]}\r\n              </Fragment>\r\n            )},\r\n          {key: 'instructions', content: (\r\n            game.finished\r\n              ? (playerWon ? 'Won' : 'Lost')\r\n              : (\r\n                canSubmit\r\n                  ? (\r\n                    settings.autoSubmitMoves\r\n                      ? 'Auto-submitting'\r\n                      : (\r\n                        <Button\r\n                          positive\r\n                          onClick={submit}\r\n                          className={'attention'}\r\n                        >\r\n                          Submit\r\n                        </Button>\r\n                      )\r\n                  ) : (\r\n                    isPlayersTurn\r\n                      ? this.constructor.MOVE_TYPE_NAMES[game.moveType]\r\n                      : 'Waiting for opponent'\r\n                  )\r\n              )\r\n          )},\r\n          !game.finished && submit && allowControl.includes(player) ? {\r\n            key: 'auto-submit', content: (\r\n              <Checkbox\r\n                label={'Auto submit moves'}\r\n                toggle\r\n                checked={settings.autoSubmitMoves}\r\n                onChange={changeAutoSubmitMoves}\r\n              />\r\n            )\r\n          } : null,\r\n        ].filter(item => item)}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nPlayPlayer.propTypes = {\r\n  settings: PropTypes.object,\r\n  game: PropTypes.instanceOf(Game).isRequired,\r\n  names: PropTypes.object.isRequired,\r\n  allowControl: PropTypes.array.isRequired,\r\n  player: PropTypes.oneOf(Game.PLAYERS).isRequired,\r\n  canSubmit: PropTypes.bool.isRequired,\r\n  submit: PropTypes.func,\r\n  changeAutoSubmitMoves: PropTypes.func.isRequired,\r\n};\r\n\r\nclass PlayHistory extends Component {\r\n  state = {\r\n    activePage: 1,\r\n  };\r\n\r\n  onPageChange = (e, {activePage}) => {\r\n    this.setState({activePage});\r\n  };\r\n\r\n  render() {\r\n    const {game, selectedGame, user, defaultSettings, selectGame, pageSize} = this.props;\r\n    const {activePage} = this.state;\r\n\r\n    const totalPages = Math.ceil((game.history.length - 1) / pageSize);\r\n    const visibleGames = [...game.history]\r\n      .slice(1 + (totalPages - activePage) * pageSize, 1 + (totalPages - activePage) * pageSize + pageSize)\r\n      .reverse();\r\n    const lastVisibleGame = visibleGames[visibleGames.length - 1];\r\n\r\n    return (\r\n      <Segment>\r\n        <Grid centered>\r\n          <Grid.Row>\r\n            <PlayNavigation game={game} selectedGame={selectedGame} selectGame={selectGame} />\r\n          </Grid.Row>\r\n          <Grid.Row>\r\n            {visibleGames.map(previousGame => (\r\n              <Fragment key={previousGame.chainCount}>\r\n                {previousGame.moveCount % 2 === 1 ? (\r\n                  <Label content={previousGame.moveCount - 1} />\r\n                ) : null}\r\n                <Board\r\n                  game={previousGame}\r\n                  small\r\n                  onSelect={selectGame}\r\n                  selected={previousGame === selectedGame}\r\n                  settings={user ? user.settings : defaultSettings}\r\n                />\r\n              </Fragment>\r\n            ))}\r\n            {lastVisibleGame && (lastVisibleGame.moveCount % 2 === 0) ? (\r\n              <Label content={lastVisibleGame.moveCount - 2} />\r\n            ) : null}\r\n          </Grid.Row>\r\n          <Grid.Row>\r\n            <Pagination\r\n              totalPages={totalPages}\r\n              activePage={activePage}\r\n              onPageChange={this.onPageChange}\r\n              pointing\r\n              secondary\r\n            />\r\n          </Grid.Row>\r\n        </Grid>\r\n      </Segment>\r\n    );\r\n  }\r\n}\r\n\r\nPlayHistory.propTypes = {\r\n  game: PropTypes.instanceOf(Game).isRequired,\r\n  selectedGame: PropTypes.instanceOf(Game),\r\n  user: PropTypes.object,\r\n  defaultSettings: PropTypes.object.isRequired,\r\n  selectGame: PropTypes.func,\r\n  pageSize: PropTypes.number.isRequired,\r\n};\r\n\r\nPlayHistory.defaultProps = {\r\n  pageSize: 10,\r\n};\r\n\r\nclass PlayNavigation extends Component {\r\n  static keys = [\r\n    'left', 'right', 'shift+left', 'shift+right', 'home', 'end',\r\n  ];\r\n\r\n  componentWillReceiveProps({keydown}) {\r\n    if (keydown.event) {\r\n      const {which, shiftKey} = keydown.event;\r\n      if (which === Keys.left && shiftKey) {\r\n        this.goToCurrentMove();\r\n      } else if (which === Keys.home) {\r\n        this.goToCurrentMove();\r\n      } else if (which === Keys.left && !shiftKey) {\r\n        this.goToNextMove();\r\n      } else if (which === Keys.right && !shiftKey) {\r\n        this.goToPreviousMove();\r\n      } else if (which === Keys.right && shiftKey) {\r\n        this.goToFirstMove();\r\n      } else if (which === Keys.home) {\r\n        this.goToFirstMove();\r\n      }\r\n    }\r\n  }\r\n\r\n  get gameIndexes() {\r\n    const {game, selectedGame} = this.props;\r\n    const selectedGameIndex = game.history.indexOf(selectedGame || game);\r\n    let mostRecentAncestorGameIndex = selectedGameIndex;\r\n    let ancestor = selectedGame;\r\n    while (mostRecentAncestorGameIndex === -1 && ancestor) {\r\n      ancestor = ancestor.previousInHistory;\r\n      mostRecentAncestorGameIndex = game.history.indexOf(ancestor);\r\n    }\r\n    const lastGameIndex = game.history.length - 1;\r\n\r\n    return {selectedGameIndex, lastGameIndex, mostRecentAncestorGameIndex};\r\n  }\r\n\r\n  canGoToCurrentMove() {\r\n    const {selectedGameIndex, lastGameIndex} = this.gameIndexes;\r\n\r\n    return selectedGameIndex !== lastGameIndex;\r\n  }\r\n\r\n  goToCurrentMove = () => {\r\n    if (!this.canGoToCurrentMove()) {\r\n      return;\r\n    }\r\n    this.props.selectGame(this.props.game);\r\n  };\r\n\r\n  canGoToNextMove() {\r\n    const {selectedGameIndex, lastGameIndex} = this.gameIndexes;\r\n\r\n    return selectedGameIndex >= 0 && selectedGameIndex !== lastGameIndex;\r\n  }\r\n\r\n  goToNextMove = () => {\r\n    if (!this.canGoToNextMove()) {\r\n      return;\r\n    }\r\n    const selectedGameIndex = this.props.game.history.indexOf(this.props.selectedGame || this.props.game);\r\n    this.props.selectGame(this.props.game.history[selectedGameIndex + 1]);\r\n  };\r\n\r\n  goToAncestor = () => {\r\n    const {mostRecentAncestorGameIndex} = this.gameIndexes;\r\n    this.props.selectGame(this.props.game.history[mostRecentAncestorGameIndex]);\r\n  };\r\n\r\n  canGoToPreviousMove() {\r\n    const {selectedGameIndex} = this.gameIndexes;\r\n\r\n    return selectedGameIndex >= 0 && selectedGameIndex !== 0;\r\n  }\r\n\r\n  goToPreviousMove = () => {\r\n    if (!this.canGoToPreviousMove()) {\r\n      return;\r\n    }\r\n    this.props.selectGame((this.props.selectedGame || this.props.game).previousInHistory);\r\n  };\r\n\r\n  goToPreviousVariationMove = () => {\r\n    this.props.selectGame(this.props.selectedGame.previousInHistory);\r\n  };\r\n\r\n  canGoToFirstMove() {\r\n    const {selectedGameIndex} = this.gameIndexes;\r\n\r\n    return selectedGameIndex !== 0;\r\n  }\r\n\r\n  goToFirstMove = () => {\r\n    if (!this.canGoToFirstMove()) {\r\n      return;\r\n    }\r\n    this.props.selectGame(this.props.game.history[0]);\r\n  };\r\n\r\n  render() {\r\n    const {game, selectedGame} = this.props;\r\n    const {selectedGameIndex, mostRecentAncestorGameIndex} = this.gameIndexes;\r\n\r\n    return (\r\n      <Menu size={'massive'} items={[\r\n        {key: 'current', icon: 'fast backward', onClick: this.goToCurrentMove, disabled: !this.canGoToCurrentMove()},\r\n        ...(selectedGameIndex >= 0 ? [\r\n          {key: 'previous', icon: 'backward', onClick: this.goToNextMove, disabled: !this.canGoToNextMove()},\r\n          {key: 'moveCount', content: selectedGameIndex >= 0 ? `${(selectedGame || game).moveCount}/${game.moveCount}` : selectedGame.moveCount, disabled: game.finished},\r\n          {key: 'next', icon: 'forward', onClick: this.goToPreviousMove, disabled: !this.canGoToPreviousMove()},\r\n        ] : [\r\n          {key: 'goToAncestor', content: `Return to ${mostRecentAncestorGameIndex}/${game.moveCount}`, onClick: this.goToAncestor},\r\n        ]),\r\n        {key: 'first', icon: 'fast forward', onClick: this.goToFirstMove, disabled: !this.canGoToFirstMove()},\r\n        ...(selectedGameIndex >= 0 ? [] : [\r\n          {key: 'ancestor', content: `Variation ${selectedGame.moveCount}/${mostRecentAncestorGameIndex}`, disabled: true},\r\n          {key: 'next', icon: 'forward', onClick: this.goToPreviousVariationMove, disabled: selectedGame.moveCount <= 1},\r\n        ]),\r\n      ]} />\r\n    );\r\n  }\r\n}\r\n\r\nPlayNavigation.propTypes = {\r\n  game: PropTypes.instanceOf(Game).isRequired,\r\n  selectedGame: PropTypes.instanceOf(Game),\r\n  selectGame: PropTypes.func.isRequired,\r\n};\r\n\r\nPlayNavigation = keydown(PlayNavigation.keys)(PlayNavigation);\r\n\r\nexport default Play;\r\n","export const copyToClipboard = text => {\r\n    const textArea = document.createElement(\"textarea\");\r\n    // This won't work\r\n    // textArea.style.display = 'none'\r\n    document.body.appendChild(textArea);\r\n    textArea.value = text;\r\n    textArea.select();\r\n    document.execCommand(\"copy\");\r\n    document.body.removeChild(textArea);\r\n};\r\n","import React, {Component} from 'react';\r\nimport {client} from \"./client\";\r\n\r\nclass ClientWatcher extends Component {\r\n  static SubComponent = null;\r\n\r\n  static forComponent(Component) {\r\n    class ClientWatcherForComponent extends this {\r\n      static SubComponent = Component;\r\n    }\r\n\r\n    return ClientWatcherForComponent;\r\n  }\r\n\r\n  state = {\r\n    connected: client.connected,\r\n    available: client.available,\r\n    disconnected: client.disconnected,\r\n    user: client.user,\r\n    username: client.user ? client.user.name : null,\r\n    usersInfo: client.usersInfo,\r\n    gamesInfo: client.gamesInfo,\r\n    tournamentsInfo: client.tournamentsInfo,\r\n  };\r\n\r\n  componentDidMount() {\r\n    client.subscribe({\r\n      onConnect: this.connectionChanged,\r\n      onDisconnect: this.connectionChanged,\r\n      onUser: this.gotUser,\r\n      onUsers: this.gotUsers,\r\n      onGames: this.gotGames,\r\n      onTournaments: this.gotTournaments,\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    client.unsubscribe({\r\n      onUser: this.gotUser,\r\n      onUsers: this.gotUsers,\r\n      onGames: this.gotGames,\r\n      onTournaments: this.gotTournaments,\r\n    });\r\n  }\r\n\r\n  connectionChanged = connected => {\r\n    this.setState({connected, disconnected: client.disconnected, available: client.available});\r\n  };\r\n\r\n  gotUser = user => {\r\n    this.setState({user});\r\n  };\r\n\r\n  gotUsers = usersInfo => {\r\n    this.setState({usersInfo});\r\n  };\r\n\r\n  gotGames = gamesInfo => {\r\n    this.setState({gamesInfo});\r\n  };\r\n\r\n  gotTournaments = tournamentsInfo => {\r\n    this.setState({tournamentsInfo});\r\n  };\r\n\r\n  render() {\r\n    const {connected, disconnected, available, user, usersInfo, gamesInfo, tournamentsInfo} = this.state;\r\n    const SubComponent = this.constructor.SubComponent;\r\n    return (\r\n      <SubComponent\r\n        {...this.props}\r\n        connected={connected}\r\n        disconnected={disconnected}\r\n        available={available}\r\n        client={client}\r\n        user={user}\r\n        usersInfo={usersInfo}\r\n        gamesInfo={gamesInfo}\r\n        tournamentsInfo={tournamentsInfo}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport const withClient = Component => {\r\n  return ClientWatcher.forComponent(Component);\r\n};\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Play from \"./Play\";\r\nimport Game from \"../game/game\";\r\nimport {Grid, Modal, Menu} from \"semantic-ui-react\";\r\nimport * as utils from \"../utils\";\r\nimport {withClient} from \"../client/withClient\";\r\n\r\nclass Hotseat extends Component {\r\n  state = {\r\n    selectedGame: null,\r\n    error: false,\r\n    ...this.constructor.getGameAndErrorFromUrlPosition(),\r\n  };\r\n\r\n  static getGameAndErrorFromUrlPosition() {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const position = params.get('position');\r\n    if (position) {\r\n      let game, error;\r\n      try {\r\n        game = Game.fromCompressedMoveNotation(position);\r\n        if (!game) {\r\n          error = 'The position was not valid';\r\n        } else {\r\n          error = null;\r\n        }\r\n      } catch (e) {\r\n        game = null;\r\n        error = 'The series of moves where not valid';\r\n      }\r\n      if (!game) {\r\n        return {game: Game.create(), error};\r\n      }\r\n      return {game, error: false};\r\n    } else {\r\n      return {game: Game.create(), error: false};\r\n    }\r\n  }\r\n\r\n  dismissUrlPositionError = () =>{\r\n    this.setState({error: null});\r\n  };\r\n\r\n  makeMove = newGame => {\r\n    this.setState({game: newGame});\r\n  };\r\n\r\n  share = () => {\r\n    const url = this.props.location.pathname;\r\n    if (navigator.share) {\r\n      const game = this.state.game;\r\n      navigator.share({\r\n        title: `Thyra Online - Game after ${game.moveCount} moves`,\r\n        text: `Review Santorini game between after ${game.moveCount} moves`,\r\n        url,\r\n      }).catch(() => {\r\n        utils.copyToClipboard(url);\r\n        alert('Link copied to clipboard');\r\n      });\r\n    } else {\r\n      utils.copyToClipboard(url);\r\n      alert('Link copied to clipboard');\r\n    }\r\n  };\r\n\r\n  onSelectedGameChange = selectedGame => {\r\n    this.setState({selectedGame});\r\n  };\r\n\r\n  render() {\r\n    const {game, error, selectedGame} = this.state;\r\n    const {user, client} = this.props;\r\n\r\n    return (\r\n      <Fragment>\r\n        <Modal\r\n          open={error}\r\n          size={'mini'}\r\n          onClose={this.dismissUrlPositionError}\r\n          header={'Could not load shared position'}\r\n          content={`${error}. Please check that you copied the full URL`}\r\n          actions={[{key: 'ok', content: 'OK', positive: true}]}\r\n        />\r\n        <Grid centered>\r\n          <Grid.Row>\r\n            <Menu inverted size={'massive'} items={[\r\n              {key: 'share', icon: 'share', content: 'Share position', color: 'green', active: true, as: 'a',\r\n                href: `?position=${(selectedGame || game).compressedFullNotation}`,\r\n                title: navigator.share ? 'Click to open the sharing menu' : 'Click to copy URL to game'}\r\n            ]} />\r\n          </Grid.Row>\r\n        </Grid>\r\n        <Play\r\n          user={user}\r\n          defaultSettings={client.settings}\r\n          game={game}\r\n          makeMove={this.makeMove}\r\n          onSelectedGameChange={this.onSelectedGameChange}\r\n        />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nHotseat.propTypes = {\r\n  user: PropTypes.object,\r\n};\r\n\r\nexport default withClient(Hotseat);\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport jdenticon from \"jdenticon\";\r\nimport classNames from \"classnames\";\r\n\r\nclass HashedIcon extends Component {\r\n  ref = React.createRef();\r\n\r\n  componentDidMount() {\r\n    this.updateIcon();\r\n  }\r\n\r\n  updateIcon() {\r\n    if (this.ref.current) {\r\n      jdenticon.update(this.ref.current);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.hash !== this.props) {\r\n      this.updateIcon();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {hash, floated, size, textSized} = this.props;\r\n    return (\r\n      <svg\r\n        ref={this.ref}\r\n        className={classNames([\"ui\", \"mini\", \"right\", \"floated\", \"image\"], {floated: !!floated, [floated]: !!floated, [size]: !!size, 'text-sized': textSized})}\r\n        data-jdenticon-value={hash}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nHashedIcon.propTypes = {\r\n  hash: PropTypes.string.isRequired,\r\n  floated: PropTypes.oneOf(['left', 'right']),\r\n  size: PropTypes.oneOf(['mini', 'tiny', 'small', 'medium', 'large', 'big', 'huge', 'massive']),\r\n  textSized: PropTypes.bool.isRequired,\r\n};\r\n\r\nHashedIcon.defaultProps = {\r\n  textSized: false,\r\n};\r\n\r\nexport default HashedIcon;\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Icon, Label, Card, Grid, Pagination} from \"semantic-ui-react\";\r\nimport moment from 'moment';\r\n\r\nimport Game from \"../game/game\";\r\nimport Board from \"./Board\";\r\nimport HashedIcon from \"./HashedIcon\";\r\nimport classNames from \"classnames\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nexport class GameCard extends Component {\r\n  selectLiveGame = () => {\r\n    this.props.selectLiveGame(this.props.game);\r\n  };\r\n\r\n  render() {\r\n    const {user, usersById, tournamentsById, game, terse, live, currentGameId} = this.props;\r\n\r\n    const tournament = tournamentsById[game.tournamentId];\r\n\r\n    const gameGame = Game.deserialize(game.game);\r\n    const playerA = usersById[game.userIds[0]];\r\n    const playerB = usersById[game.userIds[1]];\r\n    const nextPlayerUser = gameGame.nextPlayer === Game.PLAYER_A ? playerA : playerB;\r\n    const playerAToPlay = nextPlayerUser === playerA;\r\n    const playerBToPlay = nextPlayerUser === playerB;\r\n    const isUserPlayerA = user ? playerA.id === user.id : false;\r\n    const isUserPlayerB = user ? playerB.id === user.id : false;\r\n    const winnerUser = game.finished ? (game.winner === Game.PLAYER_A ? playerA : playerB) : null;\r\n    const isMyGame = isUserPlayerA || isUserPlayerB;\r\n    const isMyTurn = (isUserPlayerA && playerAToPlay) || (isUserPlayerB && playerBToPlay);\r\n    const showPlayerA = !terse || !isMyGame || isUserPlayerB;\r\n    const showPlayerB = !terse || !isMyGame || isUserPlayerA;\r\n\r\n    return (\r\n      <Card\r\n        as={NavLink}\r\n        to={`/game/${game.id}`}\r\n        onClick={this.selectLiveGame}\r\n        style={{\r\n          ...(!terse ? {} : {width: 'auto'}),\r\n          ...(game.id === currentGameId ? {backgroundColor: 'lightgreen'} : {}),\r\n        }}\r\n        className={classNames({attention: live && isMyTurn})}\r\n      >\r\n        <Card.Content>\r\n          {!terse ? (\r\n            <Board\r\n              className={'ui image floated right mini'}\r\n              game={gameGame}\r\n              small\r\n              settings={user ? user.settings : undefined}\r\n            />\r\n          ) : null}\r\n          <Card.Header>\r\n            {!(showPlayerA && showPlayerB) ? \" vs \" : null}\r\n            {showPlayerA ? (\r\n              <Label color={winnerUser === playerA || isMyTurn ? 'green' : undefined} >\r\n                {winnerUser === playerA ? <Icon name={'trophy'}/> : null}\r\n                {playerAToPlay ? <Icon name={'caret right'}/> : null}\r\n                {playerA.name}\r\n                <HashedIcon floated={'right'} size={'mini'} textSized hash={playerA.id} />\r\n              </Label>\r\n            ) : null}\r\n            {showPlayerA && showPlayerB ? \" vs \" : null}\r\n            {showPlayerB ? (\r\n              <Label color={winnerUser === playerB || isMyTurn ? 'green' : undefined} >\r\n                {winnerUser === playerB ? <Icon name={'trophy'}/> : null}\r\n                {playerBToPlay ? <Icon name={'caret right'} color={\"green\"}/> : null}\r\n                {playerB.name}\r\n                <HashedIcon floated={'right'} size={'mini'} textSized hash={playerB.id} />\r\n              </Label>\r\n            ) : null}\r\n          </Card.Header>\r\n          {!terse ? (\r\n            <Card.Meta>\r\n              {isMyGame ? <Label icon={{name: 'user', color: 'green'}} content={'My game'} /> : null}\r\n              {\" \"}\r\n              {!game.finished ? <Label icon={{name: 'circle', color: 'green'}} content={'Live'} /> : null}\r\n              {\" \"}\r\n              <Label content={`Move ${game.move}`} icon={'play'} />\r\n              {\" \"}\r\n              <Label content={moment(game.endDatetime || game.startDatetime).from()} icon={'calendar'} />\r\n              {\" \"}\r\n              {tournament ? <Label content={tournament.name} icon={'sitemap'} /> : null}\r\n            </Card.Meta>\r\n          ) : (\r\n            tournament ? <Label icon={'sitemap'} /> : null\r\n          )}\r\n        </Card.Content>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nGameCard.propTypes = {\r\n  user: PropTypes.object,\r\n  usersById: PropTypes.object.isRequired,\r\n  tournamentsById: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n  selectLiveGame: PropTypes.func.isRequired,\r\n  terse: PropTypes.bool.isRequired,\r\n  live: PropTypes.bool.isRequired,\r\n  currentGameId: PropTypes.string,\r\n};\r\n\r\nGameCard.defaultProps = {\r\n  terse: false,\r\n  live: false,\r\n};\r\n\r\nclass GameList extends Component {\r\n  state = {\r\n    activePage: 1,\r\n  };\r\n\r\n  onPageChange = (e, {activePage}) => {\r\n    this.setState({activePage});\r\n  };\r\n\r\n  render() {\r\n    const {user, usersById, tournamentsById, games, terse, live, selectLiveGame, currentGameId, pageSize} = this.props;\r\n    if (!Object.values(usersById).length) {\r\n      return null;\r\n    }\r\n    let {activePage} = this.state;\r\n\r\n    const totalPages = Math.ceil(games.length / pageSize);\r\n    if (activePage > totalPages) {\r\n      activePage = totalPages;\r\n    }\r\n    const visibleGames = games\r\n      .slice((totalPages - activePage) * pageSize, (totalPages - activePage) * pageSize + pageSize)\r\n      .reverse();\r\n\r\n    return (\r\n      <Fragment>\r\n        <Card.Group style={{maxHeight: '300px', overflowY: 'auto', flexWrap: !terse ? undefined : 'unset'}}>\r\n          {visibleGames.map(game => (\r\n            <GameCard\r\n              key={game.id}\r\n              user={user}\r\n              usersById={usersById}\r\n              tournamentsById={tournamentsById}\r\n              game={game}\r\n              selectLiveGame={selectLiveGame}\r\n              terse={terse}\r\n              live={live}\r\n              currentGameId={currentGameId}\r\n            />\r\n          ))}\r\n        </Card.Group>\r\n        {totalPages > 1 ? (\r\n          <Grid centered>\r\n            <Grid.Row>\r\n              <Pagination\r\n                totalPages={totalPages}\r\n                activePage={activePage}\r\n                onPageChange={this.onPageChange}\r\n                pointing\r\n                secondary\r\n              />\r\n            </Grid.Row>\r\n          </Grid>\r\n        ) : null}\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nGameList.propTypes = {\r\n  user: PropTypes.object,\r\n  usersById: PropTypes.object.isRequired,\r\n  tournamentsById: PropTypes.object.isRequired,\r\n  games: PropTypes.array.isRequired,\r\n  selectLiveGame: PropTypes.func.isRequired,\r\n  terse: PropTypes.bool.isRequired,\r\n  live: PropTypes.bool.isRequired,\r\n  currentGameId: PropTypes.string,\r\n  pageSize: PropTypes.number.isRequired,\r\n};\r\n\r\nGameList.defaultProps = {\r\n  terse: false,\r\n  live: false,\r\n  pageSize: 10,\r\n};\r\n\r\nexport default GameList;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Button, Form, Input, Modal, Segment} from \"semantic-ui-react\";\r\nimport {withClient} from \"../client/withClient\";\r\nimport Client from \"../client/client\";\r\n\r\nclass CreateTournament extends Component {\r\n  state = {\r\n    name: '',\r\n    gameCount: '1',\r\n  };\r\n\r\n  createTournament = () => {\r\n    const {client} = this.props;\r\n    const {name, gameCount} = this.state;\r\n    client.createTournament({name, gameCount: parseInt(gameCount, 10)});\r\n  };\r\n\r\n  onClose = () => {\r\n    this.setState({name: '', gameCount: 1});\r\n  };\r\n\r\n  setValue = (e, {name, value}) => {\r\n    this.setState({[name]: value});\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Modal\r\n        size={'mini'}\r\n        trigger={<Button color={'yellow'} icon={'sitemap'} content={'Create tournament'} />}\r\n        header={'Create tournament'}\r\n        content={\r\n          <Segment>\r\n            <Form>\r\n              <Form.Field\r\n                name={'name'}\r\n                control={Input}\r\n                label={'Name'}\r\n                placeholder={'Tournament name'}\r\n                onChange={this.setValue}\r\n                required\r\n                defaultValue={this.state.name}\r\n              />\r\n              <Form.Field\r\n                name={'gameCount'}\r\n                control={Input}\r\n                label={`${this.state.gameCount} game(s) between each pair of players`}\r\n                placeholder={'Game count between each pair of players'}\r\n                onChange={this.setValue}\r\n                type={'range'}\r\n                min={1}\r\n                max={5}\r\n                defaultValue={this.state.gameCount}\r\n                required\r\n              />\r\n            </Form>\r\n          </Segment>\r\n        }\r\n        actions={[\r\n          {key: 'cancel', content: 'Cancel'},\r\n          {key: 'create', positive: true, content: 'Create Tournament', onClick: this.createTournament, disabled: !this.state.name},\r\n        ]}\r\n        onClose={this.onClose}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nCreateTournament.propTypes = {\r\n  client: PropTypes.instanceOf(Client),\r\n};\r\n\r\nexport default withClient(CreateTournament);\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Label, Card, Grid, Pagination} from \"semantic-ui-react\";\r\nimport moment from 'moment';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nclass TournamentCard extends Component {\r\n  selectLiveTournament = () => {\r\n    this.props.selectLiveTournament(this.props.tournament);\r\n  };\r\n\r\n  render() {\r\n    const {user, usersById, currentTournamentId, tournament, terse} = this.props;\r\n\r\n    const isMyTournament = user ? tournament.userIds.includes(user.id) : false;\r\n    const didUserCreated = user ? tournament.creatorUserId === user.id : false;\r\n    const didUserWin = tournament.finished ? tournament.winnerUserId === user.id : false;\r\n    const creator = usersById[tournament.creatorUserId];\r\n\r\n    const statusLabel = (\r\n      <Label\r\n        content={tournament.started ? (tournament.finished ? 'Finished' : `Round ${tournament.round}/${tournament.rounds}`) : 'Waiting'}\r\n        icon={{\r\n          name: tournament.started ? (tournament.finished ? 'trophy' : 'play') : 'hourglass',\r\n          colour: tournament.started ? 'green' : undefined,\r\n        }}\r\n      />\r\n    );\r\n\r\n    return (\r\n      <Card\r\n        as={NavLink}\r\n        to={`/tournament/${tournament.id}`}\r\n        // onClick={this.selectLiveTournament}\r\n        style={{\r\n          ...(!terse ? {} : {width: 'auto'}),\r\n          ...(tournament.id === currentTournamentId ? {backgroundColor: 'lightgreen'} : {}),\r\n        }}\r\n      >\r\n        <Card.Content>\r\n          <Card.Header>\r\n            <Label content={tournament.name} /> by\r\n            <Label color={didUserCreated ? 'green' : undefined} content={creator.name} />\r\n            {terse ? statusLabel : null}\r\n          </Card.Header>\r\n          {!terse ? (\r\n            <Card.Meta>\r\n              {isMyTournament ? <Label icon={{name: 'user', color: 'green'}} content={'Participating'} /> : null}\r\n              {\" \"}\r\n              {didUserWin ? <Label icon={{name: 'trophy', color: 'yellow'}} content={'Won'} /> : (\r\n                tournament.finished ? (\r\n                  <Label icon={'trophy'} content={usersById[tournament.winnerUserId] ? usersById[tournament.winnerUserId].name : tournament.winnerUserId} />\r\n                ) : null\r\n              )}\r\n              {\" \"}\r\n              {tournament.started && !tournament.finished ? <Label icon={{name: 'circle', color: 'green'}} content={'Live'} /> : null}\r\n              {\" \"}\r\n              {statusLabel}\r\n              {\" \"}\r\n              <Label content={`${tournament.userIds.length} players`} icon={'users'} />\r\n              {\" \"}\r\n              <Label content={moment(tournament.endDatetime || tournament.startDatetime || tournament.createdDate).from()} icon={'calendar'} />\r\n            </Card.Meta>\r\n          ) : null}\r\n        </Card.Content>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nTournamentCard.propTypes = {\r\n  user: PropTypes.object,\r\n  usersById: PropTypes.object.isRequired,\r\n  tournament: PropTypes.object.isRequired,\r\n  currentTournamentId: PropTypes.string,\r\n  selectLiveTournament: PropTypes.func.isRequired,\r\n  terse: PropTypes.bool.isRequired,\r\n};\r\n\r\nTournamentCard.defaultProps = {\r\n  terse: false,\r\n};\r\n\r\nclass TournamentList extends Component {\r\n  state = {\r\n    activePage: 1,\r\n  };\r\n\r\n  onPageChange = (e, {activePage}) => {\r\n    this.setState({activePage});\r\n  };\r\n\r\n  render() {\r\n    const {user, usersById, tournaments, terse, selectLiveTournament, currentTournamentId, pageSize} = this.props;\r\n    if (!Object.values(usersById).length) {\r\n      return null;\r\n    }\r\n    let {activePage} = this.state;\r\n\r\n    const totalPages = Math.ceil(tournaments.length / pageSize);\r\n    if (activePage > totalPages) {\r\n      activePage = totalPages;\r\n    }\r\n    const visibleTournaments = tournaments\r\n      .slice((totalPages - activePage) * pageSize, (totalPages - activePage) * pageSize + pageSize)\r\n      .reverse();\r\n\r\n    return (\r\n      <Fragment>\r\n        <Card.Group style={{maxHeight: '300px', overflowY: 'auto', flexWrap: !terse ? undefined : 'unset'}}>\r\n          {visibleTournaments.map(tournament => (\r\n            <TournamentCard\r\n              key={tournament.id}\r\n              user={user}\r\n              usersById={usersById}\r\n              tournament={tournament}\r\n              currentTournamentId={currentTournamentId}\r\n              selectLiveTournament={selectLiveTournament}\r\n              terse={terse}\r\n            />\r\n          ))}\r\n        </Card.Group>\r\n        {totalPages > 1 ? (\r\n          <Grid centered>\r\n            <Grid.Row>\r\n              <Pagination\r\n                totalPages={totalPages}\r\n                activePage={activePage}\r\n                onPageChange={this.onPageChange}\r\n                pointing\r\n                secondary\r\n              />\r\n            </Grid.Row>\r\n          </Grid>\r\n        ) : null}\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nTournamentList.propTypes = {\r\n  user: PropTypes.object,\r\n  usersById: PropTypes.object.isRequired,\r\n  tournaments: PropTypes.array.isRequired,\r\n  selectLiveTournament: PropTypes.func.isRequired,\r\n  terse: PropTypes.bool.isRequired,\r\n  currentTournamentId: PropTypes.string,\r\n  pageSize: PropTypes.number.isRequired,\r\n};\r\n\r\nTournamentList.defaultProps = {\r\n  terse: false,\r\n  pageSize: 10,\r\n};\r\n\r\nexport default TournamentList;\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport {Tab, Button, Icon, Input, Label, Card, Segment, Modal, Checkbox} from \"semantic-ui-react\";\r\n\r\nimport {withClient} from \"../client/withClient\";\r\nimport HashedIcon from \"./HashedIcon\";\r\nimport GameList from \"./GameList\";\r\nimport CreateTournament from \"./CreateTournament\";\r\nimport TournamentList from \"./TournamentList\";\r\n\r\nclass UserList extends Component {\r\n  render() {\r\n    const {client, user, users, challengedUser, readyToPlayUsers, readyToPlayMeUsers} = this.props;\r\n    return (\r\n      <Card.Group style={{maxHeight: '300px', overflowY: 'auto'}}>\r\n        {users.map(otherUser => (\r\n          <UserCard\r\n            key={otherUser.id}\r\n            client={client}\r\n            user={user}\r\n            otherUser={otherUser}\r\n            challengedUser={challengedUser}\r\n            readyToPlayUsers={readyToPlayUsers}\r\n            readyToPlayMeUsers={readyToPlayMeUsers}\r\n          />\r\n        ))}\r\n      </Card.Group>\r\n    );\r\n  }\r\n}\r\n\r\nUserList.propTypes = {\r\n  client: PropTypes.object,\r\n  user: PropTypes.object,\r\n  users: PropTypes.array.isRequired,\r\n  challengedUser: PropTypes.object,\r\n  readyToPlayUsers: PropTypes.array,\r\n  readyToPlayMeUsers: PropTypes.array,\r\n};\r\n\r\nclass UserCard extends Component {\r\n  changeReadyToPlay = () => {\r\n    this.props.client.changeReadyToPlay(!this.props.user.readyToPlay);\r\n  };\r\n\r\n  challengeUser = () => {\r\n    this.props.client.changeReadyToPlay(this.props.user.readyToPlay === this.props.otherUser.id ? false : this.props.otherUser.id);\r\n  };\r\n\r\n  render() {\r\n    const {client, user, otherUser, challengedUser, readyToPlayUsers, readyToPlayMeUsers} = this.props;\r\n    let playButtonColour, playButtonAttention, playButtonIcon, playButtonOnClick, playButtonLabel;\r\n    if (client && user) {\r\n      if (user.id === otherUser.id) {\r\n        playButtonOnClick = this.changeReadyToPlay;\r\n        if (user.readyToPlay) {\r\n          playButtonColour = 'green';\r\n          playButtonIcon = {loading: true, name: 'circle notch'};\r\n          if (challengedUser) {\r\n            playButtonLabel = `Waiting for ${challengedUser.name}...`;\r\n          } else {\r\n            playButtonLabel = 'Waiting for opponent...';\r\n          }\r\n        } else {\r\n          playButtonColour = 'yellow';\r\n          playButtonIcon = {name: 'play'};\r\n          if (readyToPlayMeUsers && readyToPlayMeUsers.length) {\r\n            if (readyToPlayMeUsers.length === 1) {\r\n              playButtonLabel = `${readyToPlayMeUsers[0].name} has challenged you`;\r\n              playButtonAttention = true;\r\n            } else {\r\n              playButtonLabel = `${readyToPlayMeUsers.length} users have challenged you`;\r\n              playButtonAttention = true;\r\n            }\r\n          } else if (readyToPlayUsers && readyToPlayUsers.length) {\r\n            if (readyToPlayUsers.length === 1) {\r\n              playButtonLabel = `Play ${readyToPlayUsers[0].name}`;\r\n            } else {\r\n              playButtonLabel = `${readyToPlayUsers.length} users ready to play`;\r\n            }\r\n          } else {\r\n            playButtonLabel = 'Play';\r\n          }\r\n        }\r\n      } else {\r\n        playButtonOnClick = this.challengeUser;\r\n        if (challengedUser && challengedUser.id === otherUser.id) {\r\n          playButtonColour = 'green';\r\n          playButtonIcon = {loading: true, name: 'circle notch'};\r\n          playButtonLabel = `Waiting for ${otherUser.name}...`;\r\n        } else if (!otherUser.online) {\r\n          playButtonLabel = null;\r\n          playButtonOnClick = null;\r\n        } else {\r\n          playButtonColour = 'yellow';\r\n          playButtonIcon = {name: 'play'};\r\n          if (otherUser.readyToPlay === user.id) {\r\n            playButtonLabel = `${otherUser.name} has challenged you`;\r\n            playButtonAttention = true;\r\n          } else if (otherUser.readyToPlay === true) {\r\n            playButtonLabel = `${otherUser.name} is ready to Play`;\r\n          } else {\r\n            playButtonLabel = `Challenge ${otherUser.name}`;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Card>\r\n        <Card.Content>\r\n          <HashedIcon floated={'right'} size={'mini'} hash={otherUser.id} />\r\n          <Card.Header>\r\n            {otherUser.name}\r\n            {\" \"}\r\n            {client && user && user.id === otherUser.id ? (\r\n              <EditUser client={client} user={user} trigger={<Label as={'a'} icon={'edit'} content={'Edit'}/>} />\r\n            ) : null}\r\n          </Card.Header>\r\n          <Card.Meta>\r\n            {user && otherUser.id === user.id ? <Label><Icon name={\"user\"} color={\"green\"} />Me</Label> : null}\r\n            {\" \"}\r\n            {user && otherUser.id === user.id ? <EditUser client={client} user={user} trigger={<Label as={'a'}><Icon name={\"lock\"} color={user.hasPassword ? \"green\" : \"red\"} />{user.hasPassword ? '' : 'No password'}</Label>} /> : null}\r\n            {\" \"}\r\n            {otherUser.readyToPlay ? <Label><Icon loading name={\"circle notch\"} color={\"green\"} />Ready</Label> : null}\r\n            {\" \"}\r\n            {otherUser.online ? <Label><Icon name={\"circle\"} color={\"green\"} />Online</Label> : null}\r\n            {\" \"}\r\n            <Label\r\n              title={`${otherUser.isUserRatingProvisional ? 'Provisional - ' : ''}Won ${otherUser.winCount} out of ${otherUser.gameCount}`}\r\n              color={{1: 'yellow', 2: 'grey', 3: 'brown'}[otherUser.rank]}\r\n            >\r\n              <Icon\r\n                name={otherUser.isUserRatingProvisional ? \"question\" : \"star outline\"}\r\n                color={otherUser.isUserRatingProvisional ? \"orange\" : undefined}\r\n              />\r\n              {\" \"}{otherUser.score}\r\n            </Label>\r\n            {\" \"}\r\n            <Label icon={'trophy'} content={` ${otherUser.winCount}/${otherUser.gameCount}`} />\r\n            {\" \"}\r\n            {otherUser.tournamentWinCount ? (\r\n              <Label\r\n                icon={{name: 'sitemap', color: 'yellow'}}\r\n                content={otherUser.tournamentWinCount}\r\n                title={`Won ${otherUser.tournamentWinCount}/${otherUser.tournamentCount} tournaments entered`}\r\n              />\r\n              ) : null}\r\n          </Card.Meta>\r\n        </Card.Content>\r\n        {playButtonLabel ? <Card.Content extra>\r\n          <div className='ui two buttons'>\r\n            <Button className={classNames({attention: playButtonAttention})} color={playButtonColour} onClick={playButtonOnClick}>\r\n              <Icon {...playButtonIcon} />\r\n              {playButtonLabel}\r\n            </Button>\r\n          </div>\r\n        </Card.Content> : null}\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nUserCard.propTypes = {\r\n  client: PropTypes.object,\r\n  user: PropTypes.object,\r\n  otherUser: PropTypes.object.isRequired,\r\n  changeReadyToPlay: PropTypes.func,\r\n  challengedUser: PropTypes.object,\r\n  readyToPlayUsers: PropTypes.array,\r\n  readyToPlayMeUsers: PropTypes.array,\r\n};\r\n\r\nclass EditUser extends Component {\r\n  state = {\r\n    user: this.props.user,\r\n    username: this.props.user.name,\r\n    password: '',\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.user !== state.user) {\r\n      return {\r\n        user: props.user,\r\n        username: props.user ? props.user.name : null,\r\n      };\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  changeUsername = ({target: {value}}) => {\r\n    this.setState({username: value});\r\n  };\r\n\r\n  changePassword = ({target: {value}}) => {\r\n    this.setState({password: value});\r\n  };\r\n\r\n  updateUsername = () => {\r\n    this.props.client.changeUsername(this.state.username);\r\n  };\r\n\r\n  updatePassword = () => {\r\n    this.props.client.changePassword(this.state.password);\r\n    this.setState({password: ''});\r\n  };\r\n\r\n  render() {\r\n    const {username, password} = this.state;\r\n    const {user, trigger} = this.props;\r\n\r\n    return (\r\n      <Modal\r\n        trigger={trigger}\r\n        size={'small'}\r\n        header={'Edit user'}\r\n        content={(\r\n          <Segment>\r\n            <Input label={'Name'} value={username} onChange={this.changeUsername} action={{content: 'Change', onClick: this.updateUsername}} />\r\n            <br />\r\n            <Input label={{content: user.hasPassword ? 'Password is set' : 'Set a password', color: user.hasPassword ? 'green' : 'red'}} value={password} onChange={this.changePassword} action={{content: 'Change', color: user.hasPassword ? undefined : 'green', onClick: this.updatePassword}} />\r\n          </Segment>\r\n        )}\r\n        actions={[\r\n          {key: 'cancel', negative: true, content: 'Cancel'},\r\n        ]}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nEditUser.propTypes = {\r\n  client: PropTypes.object.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n  trigger: PropTypes.node.isRequired,\r\n};\r\n\r\nexport class LogIn extends Component {\r\n  state = {\r\n    username: '',\r\n    password: '',\r\n    mergeUsers: false,\r\n  };\r\n\r\n  changeUsername = ({target: {value}}) => {\r\n    this.setState({username: value});\r\n  };\r\n\r\n  changePassword = ({target: {value}}) => {\r\n    this.setState({password: value});\r\n  };\r\n\r\n  changeMergeUsers = ({target: {checked}}) => {\r\n    this.setState({mergeUsers: checked});\r\n  };\r\n\r\n  logIn = () => {\r\n    this.props.client.logIn(this.state.username, this.state.password, this.mergeUsers);\r\n    this.setState({username: '', password: ''});\r\n  };\r\n\r\n  render() {\r\n    const {username, password, mergeUsers} = this.state;\r\n\r\n    return (\r\n      <Modal\r\n        ref={this.modal}\r\n        trigger={<Label as={'a'} icon={'sign in'} content={'Log In'} float={'left'} />}\r\n        size={'small'}\r\n        header={'Log In'}\r\n        content={(\r\n          <Segment>\r\n            <Input label={'Name'} value={username} onChange={this.changeUsername}/>\r\n            <br />\r\n            <Input label={'Password'} value={password} onChange={this.changePassword} />\r\n            <br />\r\n            <Checkbox\r\n              label={'Merge users'}\r\n              checked={mergeUsers}\r\n              onChange={this.changeMergeUsers}\r\n            />\r\n          </Segment>\r\n        )}\r\n        actions={[\r\n          {key: 'cancel', negative: true, content: 'Cancel'},\r\n          {key: 'logIn', positive: true, content: 'Log In', onClick: this.logIn},\r\n        ]}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nLogIn.propTypes = {\r\n  client: PropTypes.object.isRequired,\r\n};\r\n\r\nexport class LogOut extends Component {\r\n  logOut = () => {\r\n    this.props.client.logOut();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Label as={'a'} icon={'log out'} content={'Log Out'} onClick={this.logOut} />\r\n    );\r\n  }\r\n}\r\n\r\nLogOut.propTypes = {\r\n  client: PropTypes.object.isRequired,\r\n};\r\n\r\nclass Lobby extends Component {\r\n  changeReadyToPlay = () => {\r\n    this.props.client.changeReadyToPlay(!this.props.user.readyToPlay);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      client, user,\r\n      usersInfo: {byId: usersById, users, online, offline, challengedUser, readyToPlay, readyToPlayMe},\r\n      gamesInfo: {myLive, otherLive, myFinished, otherFinished}, selectLiveGame, selectLiveTournament,\r\n      tournamentsInfo,\r\n    } = this.props;\r\n    const {byId: tournamentsById} = tournamentsInfo;\r\n\r\n    if (!user) {\r\n      return <Tab.Pane>Connecting to server...</Tab.Pane>;\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <Card.Group centered>\r\n          {user ? (\r\n            <UserCard\r\n              client={client}\r\n              otherUser={user}\r\n              user={user}\r\n              challengedUser={challengedUser}\r\n              readyToPlayUsers={readyToPlay}\r\n              readyToPlayMeUsers={readyToPlayMe}\r\n            />\r\n          ) : null}\r\n        </Card.Group>\r\n        <Segment>\r\n          <Tab menu={{pointing: true}} panes={[\r\n            {key: 'my-live', label: \"My Live games\", items: myLive, color: 'green'},\r\n            {key: 'other-live', label: \"Other Live games\", items: otherLive, color: 'green'},\r\n            {key: 'my-past', label: \"My Past games\", items: myFinished},\r\n            {key: 'other-past', label: \"Other Past games\", items: otherFinished},\r\n          ].filter(({items}) => items.length).map(({key, label, items, color}) => (\r\n            {menuItem: {key, content: <Fragment>{label} <Label content={items.length} color={color} /></Fragment>}, render: () => (\r\n              <GameList user={user} usersById={usersById} tournamentsById={tournamentsById} games={items} selectLiveGame={selectLiveGame} />\r\n            )}\r\n          ))} />\r\n        </Segment>\r\n        <Segment>\r\n          <CreateTournament />\r\n          <br/><br/>\r\n          <Tab menu={{pointing: true}} panes={[\r\n            {key: 'my-live', label: \"My Future & Running tournaments\", items: tournamentsInfo.myFutureAndLive, color: 'green'},\r\n            {key: 'other-live', label: \"Other Future and Running tournaments\", items: tournamentsInfo.otherFutureAndLive, color: 'green'},\r\n            {key: 'my-past', label: \"My Past tournaments\", items: tournamentsInfo.myFinished},\r\n            {key: 'other-past', label: \"Other Past tournaments\", items: tournamentsInfo.otherFinished},\r\n          ].filter(({items}) => items.length).map(({key, label, items, color}) => (\r\n            {menuItem: {key, content: <Fragment>{label} <Label content={items.length} color={color} /></Fragment>}, render: () => (\r\n              <TournamentList\r\n                user={user}\r\n                usersById={usersById}\r\n                tournaments={items}\r\n                selectLiveTournament={selectLiveTournament}\r\n              />\r\n            )}\r\n          ))} />\r\n        </Segment>\r\n        <Segment>\r\n          <Tab menu={{pointing: true}} panes={[\r\n            {key: 'online', label: \"Online Users\", items: online, color: 'green'},\r\n            {key: 'offline', label: \"Offline Users\", items: offline},\r\n            {key: 'all', label: \"All Users\", items: users},\r\n          ].filter(({items}) => items.length).map(({key, label, items, color}) => (\r\n            {menuItem: {key, content: <Fragment>{label} <Label content={items.length} color={color} /></Fragment>}, render: () => (\r\n              <UserList\r\n                client={client}\r\n                users={items}\r\n                user={user}\r\n                challengedUser={challengedUser}\r\n                readyToPlayUsers={readyToPlay}\r\n                readyToPlayMeUsers={readyToPlayMe}\r\n              />\r\n            )}\r\n          ))} />\r\n        </Segment>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nLobby.propTypes = {\r\n  client: PropTypes.object.isRequired,\r\n  user: PropTypes.object,\r\n  usersInfo: PropTypes.object.isRequired,\r\n  gamesInfo: PropTypes.object.isRequired,\r\n  tournamentsInfo: PropTypes.object.isRequired,\r\n  selectLiveGame: PropTypes.func.isRequired,\r\n  selectLiveTournament: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withClient(Lobby);\r\n","import React, {Component} from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport {Checkbox, Form, Grid, Header, Label, Modal, Segment, Tab} from \"semantic-ui-react\";\r\nimport Client from \"../client/client\";\r\nimport {withClient} from \"../client/withClient\";\r\nimport {ThemeDemoBoard} from \"./Board\";\r\n\r\nclass SettingsContent extends Component {\r\n  themeSchemeOptions = [\r\n    {value: '', label: 'Default'},\r\n    {value: 'subtle', label: 'Subtle'},\r\n    {value: 'pastel', label: 'Pastel'},\r\n    {value: 'green', label: 'Green'},\r\n  ];\r\n  themePiecesOptions = [\r\n    {value: 'pawn', label: 'Pawn'},\r\n    {value: 'king', label: 'King'},\r\n    {value: 'circle', label: 'Circle'},\r\n    {value: 'certificate', label: 'Star'},\r\n    {value: 'sun', label: 'Sun'},\r\n    {value: 'rocket', label: 'Rocket'},\r\n    {value: 'bug', label: 'Bug'},\r\n    {value: 'eye', label: 'Eye'},\r\n    {value: 'user', label: 'User'},\r\n  ];\r\n  themeNumbersOptions = [\r\n    {value: '', label: 'None'},\r\n    {value: 'obvious', label: 'Obvious'},\r\n    {value: 'subtle', label: 'Subtle'},\r\n    {value: 'very-subtle', label: 'Very subtle'},\r\n  ];\r\n\r\n  themeDemoBoard = overrides => {\r\n    const {settings: {theme}} = this.props;\r\n    return (\r\n      <ThemeDemoBoard medium settings={{theme: {...theme, animations: false, ...overrides}}}/>\r\n    );\r\n  };\r\n\r\n  updateAutoSubmitMove = (e, {checked}) => {\r\n    this.props.updateSettings({autoSubmitMoves: checked});\r\n  };\r\n\r\n  updateEnableNotifications = (e, {checked}) => {\r\n    this.props.updateSettings({enableNotifications: checked});\r\n  };\r\n\r\n  updateThemeRotateOpponent = (e, {checked}) => {\r\n    this.props.updateSettings({theme: {rotateOpponent: checked}});\r\n  };\r\n\r\n  updateAnimations = (e, {checked}) => {\r\n    this.props.updateSettings({theme: {animations: checked}});\r\n  };\r\n\r\n  updateArrows = (e, {checked}) => {\r\n    this.props.updateSettings({theme: {arrows: checked}});\r\n  };\r\n\r\n  updateThemeNumbers = (e, {value}) => {\r\n    this.props.updateSettings({theme: {numbers: value}});\r\n  };\r\n\r\n  updateThemeScheme = (e, {value}) => {\r\n    this.props.updateSettings({theme: {scheme: value}});\r\n  };\r\n\r\n  updateThemePieces = (e, {value}) => {\r\n    this.props.updateSettings({theme: {pieces: value}});\r\n  };\r\n\r\n  render() {\r\n    const {settings: {autoSubmitMoves, enableNotifications, theme}} = this.props;\r\n    const {pieces = 'king', scheme, rotateOpponent, animations, arrows, numbers} = theme;\r\n\r\n    return (\r\n      <Tab menu={{pointing: true, attached: false}} panes={[\r\n        {menuItem: 'Playing', render: () => (\r\n          <Segment>\r\n            <Form>\r\n              <Form.Group>\r\n                <Checkbox\r\n                  label={'Auto-submit online moves'}\r\n                  name={'autoSubmitMoves'}\r\n                  checked={autoSubmitMoves}\r\n                  onChange={this.updateAutoSubmitMove}\r\n                />\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Checkbox\r\n                  label={'Enable notifications'}\r\n                  name={'enableNotifications'}\r\n                  checked={enableNotifications}\r\n                  onChange={this.updateEnableNotifications}\r\n                />\r\n              </Form.Group>\r\n            </Form>\r\n          </Segment>\r\n        )},\r\n        {menuItem: 'Theme', render: () => (\r\n          <Segment>\r\n            <Grid stackable columns={'equal'} verticalAlign={'middle'}>\r\n              <Grid.Row>\r\n                <Grid.Column textAlign={'center'}>\r\n                  {this.themeDemoBoard({animations: theme.animations})}\r\n                </Grid.Column>\r\n              </Grid.Row>\r\n              <Grid.Row>\r\n                <Tab menu={{pointing: true, attached: false}} panes={[\r\n                  {menuItem: 'Pieces', render: () => (\r\n                    <Tab.Pane>\r\n                    <Grid stackable columns={'equal'} verticalAlign={'middle'}>\r\n                      <Grid.Row>\r\n                        <Grid.Column width={4}>\r\n                          <Checkbox\r\n                            label={'Rotate Opponent'}\r\n                            name={'theme.rotateOpponent'}\r\n                            checked={rotateOpponent}\r\n                            onChange={this.updateThemeRotateOpponent}\r\n                          />\r\n                        </Grid.Column>\r\n                        <Grid.Column floated={'right'} textAlign={'right'}>\r\n                          {this.themeDemoBoard({rotateOpponent: true})}\r\n                        </Grid.Column>\r\n                      </Grid.Row>\r\n                      <Grid.Row>\r\n                        <Grid.Column width={4}>\r\n                          <Checkbox\r\n                            label={'Animation'}\r\n                            name={'theme.animations'}\r\n                            checked={animations}\r\n                            onChange={this.updateAnimations}\r\n                          />\r\n                        </Grid.Column>\r\n                        <Grid.Column floated={'right'} textAlign={'right'}>\r\n                          {this.themeDemoBoard({animations: true})}\r\n                        </Grid.Column>\r\n                      </Grid.Row>\r\n                      <Grid.Row>\r\n                        <Grid.Column width={4}>\r\n                          <Checkbox\r\n                            label={'Arrows'}\r\n                            name={'theme.arrows'}\r\n                            checked={arrows}\r\n                            onChange={this.updateArrows}\r\n                          />\r\n                        </Grid.Column>\r\n                        <Grid.Column floated={'right'} textAlign={'right'}>\r\n                          {this.themeDemoBoard({arrows: true})}\r\n                        </Grid.Column>\r\n                      </Grid.Row>\r\n                      <Grid.Row>\r\n                        <Grid.Column textAlign={'center'}>\r\n                          <Form.Field><Header as={'h2'}>Pieces:</Header></Form.Field>\r\n                        </Grid.Column>\r\n                      </Grid.Row>\r\n                      {this.themePiecesOptions.map(option => (\r\n                        <Grid.Row key={`theme-pieces-${option.value}`}>\r\n                          <Grid.Column width={4}>\r\n                            <Checkbox\r\n                              radio\r\n                              label={option.label}\r\n                              name={'theme.pieces'}\r\n                              value={option.value}\r\n                              checked={pieces === option.value}\r\n                              onChange={this.updateThemePieces}\r\n                            />\r\n                          </Grid.Column>\r\n                          <Grid.Column floated={'right'} textAlign={'right'}>\r\n                            {this.themeDemoBoard({pieces: option.value})}\r\n                          </Grid.Column>\r\n                        </Grid.Row>\r\n                      ))}\r\n                    </Grid>\r\n                  </Tab.Pane>\r\n                  )},\r\n                  {menuItem: 'Board', render: () => (\r\n                    <Tab.Pane>\r\n                      <Grid stackable columns={'equal'} verticalAlign={'middle'}>\r\n                        {this.themeSchemeOptions.map(option => (\r\n                          <Grid.Row key={`theme-scheme-${option.value}`}>\r\n                            <Grid.Column width={4}>\r\n                              <Checkbox\r\n                                radio\r\n                                label={option.label}\r\n                                name={'theme.scheme'}\r\n                                value={option.value}\r\n                                checked={scheme === option.value}\r\n                                onChange={this.updateThemeScheme}\r\n                              />\r\n                            </Grid.Column>\r\n                            <Grid.Column floated={'right'} textAlign={'right'}>\r\n                              {this.themeDemoBoard({scheme: option.value})}\r\n                            </Grid.Column>\r\n                          </Grid.Row>\r\n                        ))}\r\n                      </Grid>\r\n                    </Tab.Pane>\r\n                  )},\r\n                  {menuItem: 'Level Indicators', render: () => (\r\n                    <Tab.Pane>\r\n                      <Grid stackable columns={'equal'} verticalAlign={'middle'}>\r\n                        {this.themeNumbersOptions.map(option => (\r\n                          <Grid.Row key={`theme-numbers-${option.value}`}>\r\n                            <Grid.Column width={4}>\r\n                              <Checkbox\r\n                                radio\r\n                                label={option.label}\r\n                                name={'theme.numbers'}\r\n                                value={option.value}\r\n                                checked={numbers === option.value}\r\n                                onChange={this.updateThemeNumbers}\r\n                              />\r\n                            </Grid.Column>\r\n                            <Grid.Column floated={'right'} textAlign={'right'}>\r\n                              {this.themeDemoBoard({numbers: option.value})}\r\n                            </Grid.Column>\r\n                          </Grid.Row>\r\n                        ))}\r\n                      </Grid>\r\n                    </Tab.Pane>\r\n                  )}\r\n                ]} />\r\n              </Grid.Row>\r\n            </Grid>\r\n          </Segment>\r\n        )},\r\n      ]} />\r\n    );\r\n  }\r\n}\r\n\r\nSettingsContent.propTypes = {\r\n  settings: PropTypes.object.isRequired,\r\n  updateSettings: PropTypes.func.isRequired,\r\n};\r\n\r\nclass Settings extends Component {\r\n  state = {\r\n    user: null,\r\n    settings: Client.getDefaultSettings(),\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.user && props.user !== state.user) {\r\n      return {\r\n        user: props.user,\r\n        settings: props.user.settings || Client.getDefaultSettings(),\r\n      };\r\n    }\r\n\r\n    return {};\r\n  }\r\n\r\n  updateSettings = update => {\r\n    this.setState(state => ({\r\n      settings: {\r\n        ...state.settings,\r\n        ...update,\r\n        theme: {\r\n          ...state.settings.theme,\r\n          ...update.theme,\r\n        },\r\n      },\r\n    }));\r\n  };\r\n\r\n  save = () => {\r\n    this.props.client.updateSettings(this.state.settings);\r\n  };\r\n\r\n  render() {\r\n    const {settings} = this.state;\r\n\r\n    return (\r\n      <Modal\r\n        trigger={<Label as={'a'} icon={'cog'} content={'Settings'} />}\r\n        size={'small'}\r\n        header={'Settings'}\r\n        actions={[\r\n          {key: 'cancel', content: 'Cancel'},\r\n          {key: 'save', content: 'Save', positive: true, onClick: this.save},\r\n        ]}\r\n        content={{scrolling: true, content: <SettingsContent settings={settings} updateSettings={this.updateSettings} />}}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nSettings.propTypes = {\r\n  client: PropTypes.object.isRequired,\r\n  user: PropTypes.object,\r\n};\r\n\r\nexport default withClient(Settings);\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Grid, Icon, Label, Menu, Modal, Responsive, Segment, Tab} from \"semantic-ui-react\";\r\nimport { createSelector } from 'reselect';\r\n\r\nimport {withClient} from \"../client/withClient\";\r\nimport Game from \"../game/game\";\r\nimport Play from \"./Play\";\r\nimport {NavLink, Route, Switch, withRouter} from \"react-router-dom\";\r\nimport * as utils from \"../utils\";\r\nimport HashedIcon from \"./HashedIcon\";\r\nimport Settings from \"./Settings\";\r\nimport GameList from \"./GameList\";\r\n\r\nclass OnlineGamePlayer extends Component {\r\n  render() {\r\n    const {game, player} = this.props;\r\n    let initialPlayer, resultingPlayerScore;\r\n    if (game) {\r\n      if (game.initialPlayerA.id === player.id) {\r\n        initialPlayer = game.initialPlayerA;\r\n        resultingPlayerScore = game.resultingPlayerAScore;\r\n      } else if (game.initialPlayerB.id === player.id) {\r\n        initialPlayer = game.initialPlayerB;\r\n        resultingPlayerScore = game.resultingPlayerBScore;\r\n      } else {\r\n        initialPlayer = null;\r\n        resultingPlayerScore = null;\r\n      }\r\n    } else {\r\n      initialPlayer = null;\r\n      resultingPlayerScore = null;\r\n    }\r\n    const isWinner = game && game.winnerUserId === player.id;\r\n    return (\r\n      <Fragment>\r\n        {isWinner ? <Icon name={'trophy'} color={\"green\"} /> : null}{\" \"}\r\n        <span style={isWinner ? {color: '#21BA45'} : undefined}>\r\n          {player.name}\r\n          {initialPlayer && !game.tournamentId ? (\r\n            <Fragment>\r\n              {\" \"}({resultingPlayerScore ? (\r\n                <Fragment>\r\n                  {isWinner ? `+${initialPlayer.winPoints}` : initialPlayer.losePoints}\r\n                  {\" \"}<Icon name={'long arrow alternate right'} />{\" \"}\r\n                  {resultingPlayerScore}\r\n                </Fragment>\r\n              ) : (\r\n                <Fragment>\r\n                  {initialPlayer.score}\r\n                  {\" \"}+{initialPlayer.winPoints}/{initialPlayer.losePoints}\r\n                </Fragment>\r\n              )})\r\n            </Fragment>\r\n          ) : null}\r\n        </span>\r\n        <HashedIcon floated={'right'} size={'mini'} hash={player.id} />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nOnlineGamePlayer.propTypes = {\r\n  game: PropTypes.object,\r\n  player: PropTypes.object.isRequired,\r\n};\r\n\r\nclass ChosenOnlineGame extends Component {\r\n  state = {\r\n    selectedGame: null,\r\n  };\r\n\r\n  gameSelector = createSelector([\r\n    props => props.match.params.id,\r\n    props => props.gamesInfo.byId,\r\n  ], (gameId, gamesById) => gamesById[gameId]);\r\n\r\n  get game() {\r\n    return this.gameSelector(this.props);\r\n  }\r\n\r\n  playersInfoSelector = createSelector([\r\n    props => props.user,\r\n    props => props.usersInfo,\r\n    () => this.game,\r\n  ], (user, {byId: usersById}, game) => {\r\n    const playerA = usersById[game.userIds[0]];\r\n    const playerB = usersById[game.userIds[1]];\r\n    const isUserPlayerA = user ? playerA.id === user.id : false;\r\n    const isUserPlayerB = user ? playerB.id === user.id : false;\r\n    const userPlayer = isUserPlayerA ? Game.PLAYER_A : isUserPlayerB ? Game.PLAYER_B : null;\r\n    const otherUser = isUserPlayerA ? playerB : isUserPlayerB ? playerA : null;\r\n\r\n    return {\r\n      playerA, playerB,\r\n      isUserPlayerA, isUserPlayerB,\r\n      userPlayer, otherUser,\r\n    };\r\n  });\r\n\r\n  get playersInfo() {\r\n    return this.playersInfoSelector(this.props);\r\n  }\r\n\r\n  gameGameSelector = createSelector([\r\n    () => this.game,\r\n  ], game => game ? Game.deserialize(game.game) : null);\r\n\r\n  get gameGame() {\r\n    return this.gameGameSelector(this.props);\r\n  }\r\n\r\n  dismissUrlGameError = () => {\r\n    this.props.selectLiveGame(null);\r\n  };\r\n\r\n  submit = moves => {\r\n    this.props.client.submitGameMove(this.game, moves);\r\n  };\r\n\r\n  componentDidMount() {\r\n    const game = this.game;\r\n    if (game) {\r\n      this.props.selectLiveGame(game);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const game = this.game;\r\n    if (game) {\r\n      this.props.selectLiveGame(game);\r\n    }\r\n  }\r\n\r\n  close = () => {\r\n    this.props.selectLiveGame(null);\r\n  };\r\n\r\n  changeSettings = settings => {\r\n    this.props.client.updateSettings(settings);\r\n  };\r\n\r\n  shareGame = e => {\r\n    const url = this.props.location.pathname;\r\n    if (navigator.share) {\r\n      const game = this.game;\r\n      const {playerA, playerB} = this.playersInfo;\r\n      navigator.share({\r\n        title: `Thyra Online - ${game.finished ? 'Review' : 'Live'} ${playerA.name} vs ${playerB.name}`,\r\n        text: `${game.finished? 'Review finished': 'Watch live'} Santorini game between ${playerA.name} and ${playerB.name}`,\r\n        url,\r\n      }).catch(() => {\r\n        utils.copyToClipboard(url);\r\n        alert('Link copied to clipboard');\r\n      });\r\n    } else {\r\n      utils.copyToClipboard(url);\r\n      alert('Link copied to clipboard');\r\n    }\r\n    e.preventDefault();\r\n  };\r\n\r\n  challengeUser = () => {\r\n    const {otherUser} = this.playersInfo;\r\n    if (otherUser) {\r\n      this.props.client.changeReadyToPlay(otherUser.id);\r\n    }\r\n  };\r\n\r\n  stopChallengeUser = () => {\r\n    this.props.client.changeReadyToPlay(false);\r\n  };\r\n\r\n  onSelectedGameChange = selectedGame => {\r\n    this.setState({selectedGame});\r\n  };\r\n\r\n  copyPlayPosition = () => {\r\n    utils.copyToClipboard((this.state.selectedGame || this.state.game).positionNotation);\r\n    alert('Play position copied to clipboard');\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      location, user, client, game, selectLiveGame,\r\n      usersInfo: {challengedUser, byId: usersById}, gamesInfo: {otherLive: otherLiveGames, myLive: myLiveGames},\r\n      tournamentsInfo: {byId: tournamentsById},\r\n    } = this.props;\r\n    const {selectedGame} = this.state;\r\n    const {gameGame} = this;\r\n\r\n    if (!gameGame) {\r\n      return (\r\n        <Fragment>\r\n          <Modal\r\n            open={true}\r\n            size={'mini'}\r\n            onClose={this.dismissUrlGameError}\r\n            header={'Could not find game'}\r\n            content={'This game cannot be found. Please check that you copied the full URL, or perhaps the game was aborted'}\r\n            actions={[{key: 'ok', content: 'OK', positive: true}]}\r\n          />\r\n          Could not find game\r\n        </Fragment>\r\n      );\r\n    }\r\n\r\n    const {otherUser, playerA, playerB, isUserPlayerA, isUserPlayerB, userPlayer} = this.playersInfo;\r\n    if (!playerA || !playerB) {\r\n      return null;\r\n    }\r\n\r\n    const gamesNode = (\r\n      <Segment>\r\n        <GameList\r\n          user={user}\r\n          selectLiveGame={selectLiveGame}\r\n          games={myLiveGames}\r\n          usersById={usersById}\r\n          tournamentsById={tournamentsById}\r\n          terse\r\n          live\r\n          currentGameId={game ? game.id : null}\r\n        />\r\n        {otherLiveGames.length ? (\r\n          <GameList\r\n            user={user}\r\n            selectLiveGame={selectLiveGame}\r\n            games={otherLiveGames}\r\n            usersById={usersById}\r\n            tournamentsById={tournamentsById}\r\n            terse\r\n            live\r\n            currentGameId={game ? game.id : null}\r\n          />\r\n        ) : null}\r\n      </Segment>\r\n    );\r\n    const tournament = game ? tournamentsById[game.tournamentId] : null;\r\n\r\n    return (\r\n      <Fragment>\r\n        <Settings/>\r\n        <Grid centered>\r\n          <Grid.Row>\r\n            <Menu stackable size={'massive'} inverted items={[\r\n              {key: 'close', content: 'Close', icon: 'x', onClick: this.close, color: 'red', active: true},\r\n              {key: 'share', content: 'Share Game', icon: 'share', onClick: this.shareGame, as: NavLink,\r\n                to: location.pathname, color: 'green', active: true,\r\n                title: navigator.share ? 'Click to open the sharing menu' : 'Click to copy URL to game'},\r\n              {key: 'play', content: 'Play position', icon: 'retweet', as: NavLink,\r\n                to: `/hotseat?position=${(selectedGame || gameGame).compressedFullNotation}`, color: 'green', active: true,\r\n                title: 'Click to open hotseat with this game', target: '_blank'},\r\n              process.env.REACT_APP_DEBUG ? {key: 'edit', content: 'Edit position', icon: 'edit', as: NavLink,\r\n                to: `/edit-position?position=${(selectedGame || gameGame).positionNotation}`, color: 'green', active: true,\r\n                title: 'Click to edit the position for this game', target: '_blank'} : null,\r\n              process.env.REACT_APP_DEBUG ? {key: 'copy-play', icon: 'clipboard', content: 'Copy play position', color: 'green', active: true,\r\n                title: 'Click to copy play position to position', onClick: this.copyPlayPosition} : null,\r\n            ].filter(item => item)} />\r\n          </Grid.Row>\r\n          <Grid.Row>\r\n            <Menu stackable size={'massive'} items={[\r\n              {key: 'player-a', content: (\r\n                <Fragment>\r\n                  {isUserPlayerA ? <Label color={'green'} icon={\"user\"} content={'Me'} /> : null}\r\n                  <OnlineGamePlayer game={game} player={playerA} />\r\n                </Fragment>\r\n              ), color: isUserPlayerA ? 'green' : undefined},\r\n              {key: 'player-b', content: (\r\n                <Fragment>\r\n                  {isUserPlayerB ? <Label color={'green'} icon={\"user\"} content={'Me'} /> : null}\r\n                  <OnlineGamePlayer game={game} player={playerB} />\r\n                </Fragment>\r\n              ), color: isUserPlayerB ? 'green' : undefined},\r\n              tournament ? {key: 'tournament', content: (\r\n                <NavLink to={`/tournament/${tournament.id}`}>\r\n                  <Icon name={'sitemap'} /> {tournament.name}\r\n                </NavLink>\r\n              ), as: 'span'} : null,\r\n            ].filter(item => item)}/>\r\n          </Grid.Row>\r\n        </Grid>\r\n        <Responsive as={Fragment} maxWidth={800}>\r\n          {gamesNode}\r\n        </Responsive>\r\n        <Play\r\n          user={user}\r\n          defaultSettings={client.settings}\r\n          otherUser={otherUser}\r\n          changeSettings={this.changeSettings}\r\n          game={gameGame}\r\n          matchGame={game}\r\n          names={{[Game.PLAYER_A]: playerA.name, [Game.PLAYER_B]: playerB.name}}\r\n          allowControl={[userPlayer].filter(player => player)}\r\n          submit={this.submit}\r\n          challengeUser={this.challengeUser}\r\n          stopChallengeUser={this.stopChallengeUser}\r\n          challengedUser={challengedUser}\r\n          onSelectedGameChange={this.onSelectedGameChange}\r\n        >\r\n          <Responsive as={Grid.Row} minWidth={800}>\r\n            {gamesNode}\r\n          </Responsive>\r\n        </Play>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nChosenOnlineGame.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n  location: PropTypes.object.isRequired,\r\n  client: PropTypes.object.isRequired,\r\n  user: PropTypes.object,\r\n  usersInfo: PropTypes.object.isRequired,\r\n  gamesInfo: PropTypes.object.isRequired,\r\n  tournamentsInfo: PropTypes.object.isRequired,\r\n  selectLiveGame: PropTypes.func.isRequired,\r\n  game: PropTypes.object,\r\n};\r\n\r\nChosenOnlineGame = withRouter(withClient(ChosenOnlineGame));\r\n\r\nclass OnlineGame extends Component {\r\n  gameGameSelector = createSelector([\r\n    props => props.game,\r\n  ], game => game ? Game.deserialize(game.game) : null);\r\n\r\n  get gameGame() {\r\n    return this.gameGameSelector(this.props);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      selectLiveGame, game, user, usersInfo: {byId}, gamesInfo: {myLive, otherLive, myFinished, otherFinished},\r\n      tournamentsInfo: {byId: tournamentsById},\r\n    } = this.props;\r\n    if (!Object.values(byId).length) {\r\n      return null;\r\n    }\r\n    const gameGame = this.gameGame;\r\n    return (\r\n      <Switch>\r\n        <Route exact path={this.props.match.path}>\r\n          <Segment>\r\n            <Tab menu={{pointing: true}} panes={[\r\n              {key: 'my-live', label: \"My Live games\", items: myLive, color: 'green'},\r\n              {key: 'other-live', label: \"Other Live games\", items: otherLive, color: 'green'},\r\n              {key: 'my-past', label: \"My Past games\", items: myFinished},\r\n              {key: 'other-past', label: \"Other Past games\", items: otherFinished},\r\n            ].filter(({items}) => items.length).map(({key, label, items, color}) => (\r\n              {menuItem: {key, content: <Fragment>{label} <Label content={items.length} color={color} /></Fragment>}, render: () => (\r\n                <GameList user={user} usersById={byId} tournamentsById={tournamentsById} games={items} selectLiveGame={selectLiveGame} />\r\n              )}\r\n            ))} />\r\n          </Segment>\r\n        </Route>\r\n        <Route path={`${this.props.match.path}/:id`}>\r\n          <ChosenOnlineGame game={game} gameGame={gameGame} selectLiveGame={selectLiveGame} />\r\n        </Route>\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nOnlineGame.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n  game: PropTypes.object,\r\n  client: PropTypes.object.isRequired,\r\n  user: PropTypes.object,\r\n  usersInfo: PropTypes.object.isRequired,\r\n  gamesInfo: PropTypes.object.isRequired,\r\n  tournamentsInfo: PropTypes.object.isRequired,\r\n  selectLiveGame: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withRouter(withClient(OnlineGame));\r\n","import notifications from './notifications';\r\n\r\nexport default {\r\n  notifications,\r\n};\r\n","import {client} from \"../client/client\";\r\n\r\nclass Notifications {\r\n  constructor() {\r\n    this.user = client.user;\r\n    client.subscribe({onUser: this.onUser});\r\n  }\r\n\r\n  onUser = user => {\r\n    this.user = user;\r\n  };\r\n\r\n  async requestPermission() {\r\n    if (window.Notification && window.Notification.permission !== 'denied') {\r\n      await window.Notification.requestPermission();\r\n    }\r\n  }\r\n\r\n  async notify() {\r\n    if (!this.user || !this.user.settings.enableNotifications) {\r\n      return;\r\n    }\r\n    await this.requestPermission();\r\n    if (window.Notification && window.Notification.permission === \"granted\") {\r\n      try {\r\n        new Notification(...arguments);\r\n      } catch (e) {\r\n        console.error(\"Could not send notification\", e);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst notifications = new Notifications();\r\n\r\nexport default notifications;\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport classNames from 'classnames';\r\nimport {Button, Grid, Icon, Label, Menu, Modal, Segment, Statistic, Tab, Table} from \"semantic-ui-react\";\r\n\r\nimport {withClient} from \"../client/withClient\";\r\nimport {NavLink, Route, Switch, withRouter} from \"react-router-dom\";\r\nimport * as utils from \"../utils\";\r\nimport HashedIcon from \"./HashedIcon\";\r\n// import TournamentList from \"./TournamentList\";\r\nimport {GameCard} from \"./GameList\";\r\nimport {createSelector} from \"reselect\";\r\nimport '../styles/tournament.css';\r\nimport CreateTournament from \"./CreateTournament\";\r\nimport TournamentList from \"./TournamentList\";\r\n\r\nclass ChosenOnlineTournament extends Component {\r\n  tournamentSelector = createSelector([\r\n    props => props.match.params.id,\r\n    props => props.tournamentsInfo.byId,\r\n  ], (tournamentId, tournamentsById) => tournamentsById[tournamentId]);\r\n\r\n  get tournament() {\r\n    return this.tournamentSelector(this.props);\r\n  }\r\n\r\n  dismissUrlTournamentError = () => {\r\n    this.props.selectLiveTournament(null);\r\n  };\r\n\r\n  componentDidMount() {\r\n    const {tournament} = this;\r\n    if (tournament) {\r\n      this.props.selectLiveTournament(tournament);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const {tournament} = this;\r\n    if (tournament) {\r\n      this.props.selectLiveTournament(tournament);\r\n    }\r\n  }\r\n\r\n  close = () => {\r\n    this.props.selectLiveTournament(null);\r\n  };\r\n\r\n  shareTournament = e => {\r\n    const url = this.props.location.pathname;\r\n    if (navigator.share) {\r\n      const {tournament} = this;\r\n      navigator.share({\r\n        title: `Thyra Online - ${tournament.started ? (tournament.finished ? 'Past' : 'Live') : 'Future'} tournament ${tournament.name}`,\r\n        text: `${tournament.started ? (tournament.finished ? 'Review Past' : 'Watch Live') : 'Future'} Santorini tournament ${tournament.name}`,\r\n        url,\r\n      }).catch(() => {\r\n        utils.copyToClipboard(url);\r\n        alert('Link copied to clipboard');\r\n      });\r\n    } else {\r\n      utils.copyToClipboard(url);\r\n      alert('Link copied to clipboard');\r\n    }\r\n    e.preventDefault();\r\n  };\r\n\r\n  toggleParticipation = () => {\r\n    const {tournament} = this;\r\n    this.props.toggleParticipation(tournament);\r\n  };\r\n\r\n  startTournament = () => {\r\n    const {tournament} = this;\r\n    this.props.startTournament(tournament);\r\n  };\r\n\r\n  abortTournament = () => {\r\n    const {tournament} = this;\r\n    this.props.abortTournament(tournament);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      location, user, selectLiveGame,\r\n      usersInfo: {byId: usersById}, gamesInfo: {byId: gamesById}, tournamentsInfo,\r\n    } = this.props;\r\n    const {byId: tournamentsById} = tournamentsInfo;\r\n    const {tournament} = this;\r\n\r\n    if (!tournament) {\r\n      return (\r\n        <Fragment>\r\n          <Modal\r\n            open={true}\r\n            size={'mini'}\r\n            onClose={this.dismissUrlTournamentError}\r\n            header={'Could not find tournament'}\r\n            content={'This tournament cannot be found. Please check that you copied the full URL, or perhaps the tournament was aborted'}\r\n            actions={[{key: 'ok', content: 'OK', positive: true}]}\r\n          />\r\n          Could not find tournament\r\n        </Fragment>\r\n      );\r\n    }\r\n\r\n    const players = _.orderBy(tournament.userIds.map(otherUserId => usersById[otherUserId]), [\r\n      user => tournament.userStats ? tournament.userStats[user.id].points : 0,\r\n      user => tournament.userStats ? tournament.userStats[user.id].initialScore.score : 0,\r\n      'id',\r\n    ], ['desc', 'desc', 'desc']);\r\n    const isMyTournament = user ? tournament.userIds.includes(user.id) : false;\r\n    const didUserCreated = user ? tournament.creatorUserId === user.id : false;\r\n\r\n    return (\r\n      <Fragment>\r\n        <Grid centered>\r\n          <Grid.Row>\r\n            <Menu stackable size={'massive'} inverted items={[\r\n              {key: 'close', content: 'Close', icon: 'x', onClick: this.close, color: 'red', active: true},\r\n              {key: 'share', content: 'Share Tournament', icon: 'share', onClick: this.shareTournament, as: NavLink,\r\n                to: location.pathname, color: 'green', active: true,\r\n                title: navigator.share ? 'Click to open the sharing menu' : 'Click to copy URL to tournament'},\r\n            ]} />\r\n          </Grid.Row>\r\n        </Grid>\r\n        <Segment>\r\n          <Statistic.Group widths={\"three\"} size={\"tiny\"}>\r\n            <Statistic\r\n              value={tournament.started ? (tournament.finished ? 'Finished' : `${tournament.round}/${tournament.rounds}`) : 'Waiting'}\r\n              label={tournament.started ? (tournament.finished ? 'Status' : 'Rounds') : 'Status'}\r\n            />\r\n            <Statistic\r\n              value={tournament.userIds.length}\r\n              label={'Users'}\r\n            />\r\n            <Statistic\r\n              value={tournament.gameCount}\r\n              label={'Games between each pair'}\r\n            />\r\n          </Statistic.Group>\r\n          <Grid columns={'equal'}>\r\n            <Grid.Column textAlign={'left'}><Button negative onClick={this.close}>Close</Button></Grid.Column>\r\n            <Grid.Column>\r\n              <Button\r\n                positive\r\n                icon\r\n                onClick={this.shareTournament}\r\n                style={{width: '100%'}}\r\n                as={NavLink}\r\n                to={location.pathname}\r\n                title={navigator.share ? 'Click to open the sharing menu' : 'Click to copy URL to tournament'}\r\n              >\r\n                <Icon name={'share'}/> Share Tournament\r\n              </Button>\r\n            </Grid.Column>\r\n          </Grid>\r\n        </Segment>\r\n        {!tournament.started ? (\r\n          <Segment>\r\n            <Grid columns={'equal'}>\r\n              <Grid.Column textAlign={'left'}>\r\n                <Button\r\n                  disabled={tournament.started}\r\n                  style={{width: '100%'}}\r\n                  color={isMyTournament ? 'yellow' : 'green'}\r\n                  onClick={this.toggleParticipation}\r\n                >\r\n                  {tournament.started ? null : <Icon name={isMyTournament ? 'hourglass' : 'play'} />}\r\n                  {isMyTournament ? 'Participating' : (\r\n                    tournament.started ? (\r\n                      tournament.finished ? 'Tournament finished' : 'Tournament started'\r\n                    ) : 'Join the tournament'\r\n                  )}\r\n                </Button>\r\n              </Grid.Column>\r\n              <Grid.Column>\r\n                <Button\r\n                  disabled={!didUserCreated || players.length < 2 || tournament.started}\r\n                  positive\r\n                  icon\r\n                  onClick={this.startTournament}\r\n                  style={{width: '100%'}}\r\n                  color={players.length >= 2 ? (didUserCreated ? 'green' : 'yellow') : 'yellow'}\r\n                >\r\n                  {tournament.finished  ? null : (\r\n                    <Icon name={players.length >= 2 ? (didUserCreated ? 'play' : 'hourglass') : 'play'}/>\r\n                  )}\r\n                  {tournament.started ? (\r\n                    tournament.finished ? 'Finished' : 'Started'\r\n                  ) : (\r\n                    players.length >= 2 ? (\r\n                      didUserCreated ? 'Start tournament' : 'Waiting for tournament to start'\r\n                    ) : 'Needs at least participants'\r\n                  )}\r\n                </Button>\r\n              </Grid.Column>\r\n            </Grid>\r\n          </Segment>\r\n        ) : null }\r\n        <Segment>\r\n          {tournament.started ? (\r\n            <Tab menu={{pointing: true, attached: false}} panes={[\r\n              {menuItem: 'Rankings', render: () => (\r\n                <Table celled collapsing unstackable>\r\n                  <Table.Header>\r\n                    <Table.Row>\r\n                      {tournament.finished ? <Table.HeaderCell> </Table.HeaderCell> : null}\r\n                      <Table.HeaderCell>Rank</Table.HeaderCell>\r\n                      <Table.HeaderCell>User</Table.HeaderCell>\r\n                      <Table.HeaderCell>Score (TB)</Table.HeaderCell>\r\n                      <Table.HeaderCell>Expected Score</Table.HeaderCell>\r\n                      {tournament.started && !tournament.finished ? <Table.HeaderCell>Game</Table.HeaderCell> : null}\r\n                      {tournament.finished ? <Table.HeaderCell>Score difference</Table.HeaderCell> : null}\r\n                    </Table.Row>\r\n                  </Table.Header>\r\n                  <Table.Body>\r\n                    {players.map(player => {\r\n                      const stats = tournament.userStats[player.id];\r\n                      return (\r\n                        <Table.Row key={player.id}>\r\n                          {tournament.finished ? (\r\n                            <Table.Cell>{stats.rank <= 3 ? (\r\n                              <Icon\r\n                                name={{1: 'trophy', 2: 'certificate', 3: 'certificate'}[stats.rank]}\r\n                                color={{1: 'yellow', 2: 'grey', 3: 'brown'}[stats.rank]}\r\n                              />\r\n                            ) : null}</Table.Cell>\r\n                          ) : null}\r\n                          <Table.Cell>{stats.rank}</Table.Cell>\r\n                          <Table.Cell>\r\n                            <HashedIcon floated={'left'} size={'mini'} hash={player.id} />\r\n                            {player.name}\r\n                          </Table.Cell>\r\n                          <Table.Cell>{stats.points === stats.ratedPoints ? stats.points : `${stats.ratedPoints} (${stats.points})`}</Table.Cell>\r\n                          <Table.Cell>{stats.initialScore.expectedPoints.toFixed(1)}</Table.Cell>\r\n                          {tournament.started && !tournament.finished ? (\r\n                            <Table.Cell>{stats.waitingForNextRound ? 'Waiting for next round' : (\r\n                              stats.currentGameId ? (\r\n                                <GameCard\r\n                                  user={null}\r\n                                  usersById={usersById}\r\n                                  tournamentsById={tournamentsById}\r\n                                  game={gamesById[stats.currentGameId]}\r\n                                  selectLiveGame={selectLiveGame}\r\n                                  terse\r\n                                  live\r\n                                />\r\n                              ) : 'Finished'\r\n                            )}</Table.Cell>\r\n                          ) : null}\r\n                          {tournament.finished ? (\r\n                            <Table.Cell>{stats.scoreDifference > 0 ? `+${stats.scoreDifference}` : stats.scoreDifference}</Table.Cell>\r\n                          ) : null}\r\n                        </Table.Row>\r\n                      );\r\n                    })}\r\n                  </Table.Body>\r\n                </Table>\r\n              )},\r\n              {menuItem: 'Games', render: () => (\r\n                <Table celled collapsing unstackable>\r\n                  <Table.Header>\r\n                    <Table.Row>\r\n                      <Table.HeaderCell colSpan={2}>White</Table.HeaderCell>\r\n                      <Table.HeaderCell colSpan={2}>Black</Table.HeaderCell>\r\n                      <Table.HeaderCell>Game</Table.HeaderCell>\r\n                    </Table.Row>\r\n                  </Table.Header>\r\n                  {tournament.schedule.map((round, roundIndex) => (\r\n                    <Fragment key={roundIndex}>\r\n                      <Table.Header>\r\n                        <Table.Row>\r\n                          <Table.HeaderCell colSpan={5}>{round.type === 'playoff' ? 'Playoffs - ' : null}Round {round.round}</Table.HeaderCell>\r\n                        </Table.Row>\r\n                      </Table.Header>\r\n                      <Table.Body>\r\n                        {round.pairings.map(({userIds: [playerAId, playerBId], gameId}, gameIndex) => {\r\n                          const game = gamesById[gameId];\r\n                          const playerAWon = game && game.finished && game.winnerUserId === playerAId;\r\n                          const playerBWon = game && game.finished && game.winnerUserId === playerBId;\r\n                          return (\r\n                            <Table.Row key={gameIndex}>\r\n                              <Table.Cell className={classNames('tournament-game', 'player-a', {'player-a-won': playerAWon, 'player-b-won': playerBWon})}>\r\n                                {playerAId ? (\r\n                                  <Fragment>\r\n                                    <HashedIcon floated={'left'} size={'mini'} hash={playerAId} />\r\n                                    {usersById[playerAId].name}\r\n                                  </Fragment>\r\n                                ) : 'Sitting out this round'}\r\n                              </Table.Cell>\r\n                              <Table.Cell className={classNames('tournament-game', 'player-a', {'player-a-won': playerAWon, 'player-b-won': playerBWon})}>\r\n                                {game && game.finished ? (game.winnerUserId === playerAId ? '1' : '0') : '-'}\r\n                              </Table.Cell>\r\n                              <Table.Cell className={classNames('tournament-game', 'player-b', {'player-a-won': playerAWon, 'player-b-won': playerBWon})}>\r\n                                {playerBId ? (\r\n                                  <Fragment>\r\n                                    <HashedIcon floated={'left'} size={'mini'} hash={playerBId} />\r\n                                    {usersById[playerBId].name}\r\n                                  </Fragment>\r\n                                ) : 'Sitting out this round'}\r\n                              </Table.Cell>\r\n                              <Table.Cell className={classNames('tournament-game', 'player-b', {'player-a-won': playerAWon, 'player-b-won': playerBWon})}>\r\n                                {game && game.finished ? (game.winnerUserId === playerBId ? '1' : '0') : '-'}\r\n                              </Table.Cell>\r\n                              <Table.Cell>\r\n                                {playerAId && playerBId ? (\r\n                                  game ? (\r\n                                    <GameCard\r\n                                      user={null}\r\n                                      usersById={usersById}\r\n                                      tournamentsById={tournamentsById}\r\n                                      game={game}\r\n                                      selectLiveGame={selectLiveGame}\r\n                                      terse\r\n                                      live\r\n                                    />\r\n                                  ) : 'Not started yet'\r\n                                ) : null}\r\n                              </Table.Cell>\r\n                            </Table.Row>\r\n                          )\r\n                        })}\r\n                      </Table.Body>\r\n                    </Fragment>\r\n                  ))}\r\n                </Table>\r\n              )},\r\n            ]} />\r\n          ) : (\r\n            <Table celled collapsing unstackable>\r\n              <Table.Header>\r\n                <Table.Row>\r\n                  <Table.HeaderCell>User</Table.HeaderCell>\r\n                  <Table.HeaderCell>Rating</Table.HeaderCell>\r\n                </Table.Row>\r\n              </Table.Header>\r\n              <Table.Body>\r\n                {players.map(player => (\r\n                  <Table.Row key={player.id}>\r\n                    <Table.Cell>\r\n                      <HashedIcon floated={'left'} size={'mini'} hash={player.id} />\r\n                      {player.name}\r\n                    </Table.Cell>\r\n                    <Table.Cell>{player.score}</Table.Cell>\r\n                  </Table.Row>\r\n                ))}\r\n              </Table.Body>\r\n            </Table>\r\n          )}\r\n        </Segment>\r\n        {didUserCreated && !tournament.started ? (\r\n          <Segment>\r\n            <Grid columns={'equal'}>\r\n              <Grid.Column textAlign={'left'}>\r\n              </Grid.Column>\r\n              <Grid.Column>\r\n                <Modal\r\n                  size={'mini'}\r\n                  trigger={\r\n                    <Button\r\n                      disabled={!didUserCreated}\r\n                      negative\r\n                      icon\r\n                      style={{width: '100%'}}\r\n                    >\r\n                      <Icon name={'stop'}/>\r\n                      {'Abort tournament'}\r\n                    </Button>\r\n                  }\r\n                  header={'Abort tournament'}\r\n                  content={'Are you sure you want to abort the tournament?'}\r\n                  actions={[\r\n                    {key: 'yes', content: 'Abort', onClick: this.abortTournament, negative: true},\r\n                    {key: 'no', content: 'No, keep tournament', secondary: true},\r\n                  ]}\r\n                />\r\n              </Grid.Column>\r\n            </Grid>\r\n          </Segment>\r\n        ) : null}\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nChosenOnlineTournament.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n  location: PropTypes.object.isRequired,\r\n  client: PropTypes.object.isRequired,\r\n  user: PropTypes.object,\r\n  usersInfo: PropTypes.object.isRequired,\r\n  gamesInfo: PropTypes.object.isRequired,\r\n  selectLiveGame: PropTypes.func.isRequired,\r\n  selectLiveTournament: PropTypes.func.isRequired,\r\n  tournament: PropTypes.object,\r\n  toggleParticipation: PropTypes.func.isRequired,\r\n  startTournament: PropTypes.func.isRequired,\r\n  abortTournament: PropTypes.func.isRequired,\r\n};\r\n\r\nChosenOnlineTournament = withRouter(withClient(ChosenOnlineTournament));\r\n\r\nclass OnlineTournament extends Component {\r\n  render() {\r\n    const {\r\n      selectLiveGame, selectLiveTournament, toggleParticipation, startTournament, abortTournament, tournament, user,\r\n      usersInfo: {byId: usersById}, tournamentsInfo,\r\n    } = this.props;\r\n    if (!Object.values(usersById).length) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Switch>\r\n        <Route exact path={this.props.match.path}>\r\n          <Segment>\r\n            <CreateTournament />\r\n            <br/><br/>\r\n            <Tab menu={{pointing: true}} panes={[\r\n              {key: 'my-live', label: \"My Future & Running tournaments\", items: tournamentsInfo.myFutureAndLive, color: 'green'},\r\n              {key: 'other-live', label: \"Other Future and Running tournaments\", items: tournamentsInfo.otherFutureAndLive, color: 'green'},\r\n              {key: 'my-past', label: \"My Past tournaments\", items: tournamentsInfo.myFinished},\r\n              {key: 'other-past', label: \"Other Past tournaments\", items: tournamentsInfo.otherFinished},\r\n            ].filter(({items}) => items.length).map(({key, label, items, color}) => (\r\n              {menuItem: {key, content: <Fragment>{label} <Label content={items.length} color={color} /></Fragment>}, render: () => (\r\n                <TournamentList\r\n                  user={user}\r\n                  usersById={usersById}\r\n                  tournaments={items}\r\n                  selectLiveTournament={selectLiveTournament}\r\n                />\r\n              )}\r\n            ))} />\r\n          </Segment>\r\n        </Route>\r\n        <Route path={`${this.props.match.path}/:id`}>\r\n          <ChosenOnlineTournament\r\n            tournament={tournament}\r\n            selectLiveGame={selectLiveGame}\r\n            selectLiveTournament={selectLiveTournament}\r\n            toggleParticipation={toggleParticipation}\r\n            startTournament={startTournament}\r\n            abortTournament={abortTournament}\r\n          />\r\n        </Route>\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nOnlineTournament.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n  tournament: PropTypes.object,\r\n  client: PropTypes.object.isRequired,\r\n  user: PropTypes.object,\r\n  usersInfo: PropTypes.object.isRequired,\r\n  gamesInfo: PropTypes.object.isRequired,\r\n  tournamentsInfo: PropTypes.object.isRequired,\r\n  selectLiveGame: PropTypes.func.isRequired,\r\n  selectLiveTournament: PropTypes.func.isRequired,\r\n  toggleParticipation: PropTypes.func.isRequired,\r\n  startTournament: PropTypes.func.isRequired,\r\n  abortTournament: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withRouter(withClient(OnlineTournament));\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Button, Grid, Label, Menu, Message} from \"semantic-ui-react\";\r\nimport BoardBackground from \"./Board/BoardBackground\";\r\nimport Game from \"../game/game\";\r\nimport {withClient} from \"../client/withClient\";\r\nimport Client from \"../client/client\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nclass LearnBoard extends Component {\r\n  state = {\r\n    rowsAndColumns: this.props.rowsAndColumns,\r\n    arrows: null,\r\n    selectedMoveCell: null,\r\n    movedFromCell: null,\r\n    selectedBuildCell: null,\r\n    won: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (prevProps.rowsAndColumns !== this.props.rowsAndColumns) {\r\n      this.reset();\r\n    }\r\n  }\r\n\r\n  isCellAvailable = cell => {\r\n    const {canMove, canBuild} = this.props;\r\n    if (!canMove && !canBuild) {\r\n      return false;\r\n    }\r\n    const {selectedMoveCell, selectedBuildCell, won} = this.state;\r\n    if (won) {\r\n      return false;\r\n    }\r\n    if (canMove && !canBuild) {\r\n      return this.isCellAvailableForMoving(cell, selectedMoveCell);\r\n    } else if (canBuild && !canMove) {\r\n      return this.isCellAvailableForBuilding(cell, selectedBuildCell);\r\n    } else if (canMove && canBuild) {\r\n      if (!selectedMoveCell && !selectedBuildCell) {\r\n        return this.isCellAvailableForMoving(cell, selectedMoveCell);\r\n      } else if (selectedMoveCell) {\r\n        return this.isCellAvailableForMoving(cell, selectedMoveCell);\r\n      } else if (selectedBuildCell) {\r\n        return this.isCellAvailableForBuilding(cell, selectedBuildCell);\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  isCellAvailableForMoving(cell, selectedMoveCell) {\r\n    if (!selectedMoveCell) {\r\n      return cell.player === Game.PLAYER_A;\r\n    }\r\n    if (selectedMoveCell.level === 3) {\r\n      return false;\r\n    }\r\n    if (Math.max(Math.abs(cell.x - selectedMoveCell.x), Math.abs(cell.y - selectedMoveCell.y)) !== 1) {\r\n      return false;\r\n    }\r\n    if ((cell.level - selectedMoveCell.level) > 1) {\r\n      return false;\r\n    }\r\n    if (cell.player) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  isCellAvailableForBuilding(cell, selectedBuildCell) {\r\n    if (!selectedBuildCell) {\r\n      return cell.player === Game.PLAYER_A;\r\n    }\r\n    if (Math.max(Math.abs(cell.x - selectedBuildCell.x), Math.abs(cell.y - selectedBuildCell.y)) !== 1) {\r\n      return false;\r\n    }\r\n    if (cell.level > 3) {\r\n      return false;\r\n    }\r\n    if (cell.player) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  makeMove = cell => {\r\n    const {selectedMoveCell, selectedBuildCell, won} = this.state;\r\n    if (won) {\r\n      return;\r\n    }\r\n    const {canMove, canBuild} = this.props;\r\n    if (canMove && !canBuild) {\r\n      this.makeMoveMoving(cell, selectedMoveCell);\r\n    } else if (canBuild && !canMove) {\r\n      this.makeMoveBuilding(cell, selectedBuildCell);\r\n    } else if (canMove && canBuild) {\r\n      if (!selectedMoveCell && !selectedBuildCell) {\r\n        this.makeMoveMoving(cell, selectedMoveCell);\r\n      } else if (selectedMoveCell) {\r\n        this.makeMoveMoving(cell, selectedMoveCell);\r\n        if (cell.level !== 3) {\r\n          this.setState({movedFromCell: selectedMoveCell});\r\n          this.makeMoveBuilding(cell, selectedBuildCell);\r\n        }\r\n      } else if (selectedBuildCell) {\r\n        this.makeMoveBuilding(cell, selectedBuildCell);\r\n        this.setState({movedFromCell: null});\r\n      }\r\n    }\r\n  };\r\n\r\n  makeMoveMoving(cell, selectedMoveCell) {\r\n    if (selectedMoveCell) {\r\n      this.setState(({rowsAndColumns}) => ({\r\n        selectedMoveCell: null,\r\n        rowsAndColumns: Game.updateCells(rowsAndColumns, ...[\r\n          {x: selectedMoveCell.x, y: selectedMoveCell.y, player: null, worker: null},\r\n          {x: cell.x, y: cell.y, player: selectedMoveCell.player, worker: selectedMoveCell.worker},\r\n        ]),\r\n        arrows: [\r\n          {from: selectedMoveCell, to: cell, type: 'move', colour: 'white'},\r\n        ],\r\n        won: cell.level === 3,\r\n      }));\r\n    } else {\r\n      this.setState({selectedMoveCell: cell});\r\n    }\r\n  }\r\n\r\n  makeMoveUndoMoving(movedFromCell, selectedBuildCell) {\r\n    this.setState(({rowsAndColumns}) => ({\r\n      selectedMoveCell: movedFromCell,\r\n      selectedBuildCell: null,\r\n      rowsAndColumns: Game.updateCells(rowsAndColumns, ...[\r\n        {x: selectedBuildCell.x, y: selectedBuildCell.y, player: null, worker: null},\r\n        {x: movedFromCell.x, y: movedFromCell.y, player: movedFromCell.player, worker: movedFromCell.worker},\r\n      ]),\r\n      arrows: null,\r\n      won: false,\r\n    }));\r\n  }\r\n\r\n  makeMoveBuilding(cell, selectedBuildCell) {\r\n    if (selectedBuildCell) {\r\n      this.setState(({rowsAndColumns}) => ({\r\n        selectedBuildCell: null,\r\n        rowsAndColumns: Game.updateCells(rowsAndColumns, {\r\n          x: cell.x, y: cell.y, level: rowsAndColumns[cell.y].cells[cell.x].level + 1,\r\n        }),\r\n        arrows: [\r\n          {from: selectedBuildCell, to: cell, type: 'build', colour: 'white'},\r\n        ],\r\n      }));\r\n    } else {\r\n      this.setState({selectedBuildCell: cell});\r\n    }\r\n  }\r\n\r\n  isCellUndoable = cell => {\r\n    if (!this.props.canMove && !this.props.canBuild) {\r\n      return false;\r\n    }\r\n    const {selectedMoveCell, selectedBuildCell, won} = this.state;\r\n    if (won) {\r\n      return false;\r\n    }\r\n    const {canMove, canBuild} = this.props;\r\n    if (canMove && !canBuild) {\r\n      return selectedMoveCell !== null && selectedMoveCell.x === cell.x && selectedMoveCell.y === cell.y;\r\n    } else if (canBuild && !canMove) {\r\n      return selectedBuildCell !== null && selectedBuildCell.x === cell.x && selectedBuildCell.y === cell.y;\r\n    } else if (canMove && canBuild) {\r\n      if (selectedMoveCell) {\r\n        return selectedMoveCell.x === cell.x && selectedMoveCell.y === cell.y;\r\n      } else if (selectedBuildCell) {\r\n        return selectedBuildCell.x === cell.x && selectedBuildCell.y === cell.y;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  undo = () => {\r\n    const {canMove, canBuild} = this.props;\r\n    const {selectedMoveCell, movedFromCell, selectedBuildCell, won} = this.state;\r\n    if (won) {\r\n      return;\r\n    }\r\n    if (canMove && !canBuild) {\r\n      this.setState({selectedMoveCell: null});\r\n    } else if (canBuild && !canMove) {\r\n      this.setState({selectedBuildCell: null});\r\n    } else if (canMove && canBuild) {\r\n      if (selectedMoveCell) {\r\n        this.setState({selectedMoveCell: null});\r\n      } else if (selectedBuildCell) {\r\n        this.makeMoveUndoMoving(movedFromCell, selectedBuildCell);\r\n      }\r\n    }\r\n  };\r\n\r\n  reset = () => {\r\n    const {rowsAndColumns} = this.props;\r\n    this.setState({\r\n      rowsAndColumns, arrows: null, won: false, selectedMoveCell: null, movedFromCell: null, selectedBuildCell: null,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {user, board, canMove, canBuild, rowsAndColumns: originalRowsAndColumns} = this.props;\r\n    const {rowsAndColumns, arrows, won, selectedMoveCell, selectedBuildCell} = this.state;\r\n    const rawSettings = user ? user.settings : Client.getDefaultSettings();\r\n    const settings = {...rawSettings, theme: {...rawSettings.theme, numbers: 'obvious'}};\r\n\r\n    return (\r\n      <Fragment>\r\n        {canMove || canBuild ? (\r\n          <Fragment>\r\n            <br />\r\n            <Label color={won ? 'green' : 'blue'} icon={won ? 'trophy' : undefined} content={(\r\n              won ? \"You won! Press reset to start again\" : (\r\n                !selectedMoveCell && !selectedBuildCell ? \"Select one of your pieces\" : (\r\n                  selectedMoveCell ? \"Select a square to move to, or click on your piece to do something else\" : (\r\n                    \"Select a square to build on, or click on your piece to do something else\"\r\n                  )\r\n                )\r\n              )\r\n            )} />\r\n            <br />\r\n          </Fragment>\r\n        ) : null}\r\n        <BoardBackground\r\n          medium\r\n          allowControl={[]}\r\n          clickable={canMove || canBuild}\r\n          undoable={canMove || canBuild}\r\n          isCellAvailable={this.isCellAvailable}\r\n          isCellUndoable={this.isCellUndoable}\r\n          makeMove={this.makeMove}\r\n          undo={this.undo}\r\n          settings={settings}\r\n          animated showArrows\r\n          rowsAndColumns={rowsAndColumns}\r\n          {...(arrows ? {...board, arrows} : board)}\r\n        />\r\n        {canMove || canBuild ? (\r\n          <div>\r\n            <Button onClick={this.reset} disabled={rowsAndColumns === originalRowsAndColumns} primary>Reset</Button>\r\n          </div>\r\n        ) : null}\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nLearnBoard.propTypes = {\r\n  user: PropTypes.object,\r\n  board: PropTypes.object,\r\n  rowsAndColumns: PropTypes.array.isRequired,\r\n  canMove: PropTypes.bool.isRequired,\r\n  canBuild: PropTypes.bool.isRequired,\r\n};\r\n\r\nLearnBoard.defaultProps = {\r\n  canMove: false,\r\n  canBuild: false,\r\n};\r\n\r\nLearnBoard = withClient(LearnBoard);\r\n\r\nclass LearnToPlay extends Component {\r\n  static steps = [\r\n    {title: 'Introduction', body: <Fragment>\r\n      <div>\r\n        In this website, you can play <strong>Santorini</strong> games with people around the world.\r\n      </div>\r\n      <div>\r\n        The board consists of a <strong>5x5 square grid</strong>, and each player, <strong>black</strong> and\r\n        <strong>white</strong>, has two <strong>pieces</strong> each:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n            {x: 3, y: 0, level: 0, player: null, worker: null},\r\n            {x: 4, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 2, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 3, y: 1, level: 0, player: null, worker: null},\r\n            {x: 4, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 2, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n            {x: 3, y: 2, level: 0, player: null, worker: null},\r\n            {x: 4, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 3, cells: [\r\n            {x: 0, y: 3, level: 0, player: null, worker: null},\r\n            {x: 1, y: 3, level: 0, player: null, worker: null},\r\n            {x: 2, y: 3, level: 0, player: null, worker: null},\r\n            {x: 3, y: 3, level: 0, player: null, worker: null},\r\n            {x: 4, y: 3, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 4, cells: [\r\n            {x: 0, y: 4, level: 0, player: null, worker: null},\r\n            {x: 1, y: 4, level: 0, player: null, worker: null},\r\n            {x: 2, y: 4, level: 0, player: null, worker: null},\r\n            {x: 3, y: 4, level: 0, player: null, worker: null},\r\n            {x: 4, y: 4, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n      <div>\r\n        The <strong>objective</strong> of the game is to move one of your pieces to the <strong>3rd level</strong>,\r\n        and of course, to <strong>prevent your opponent</strong> from doing so before you:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 1, y: 0, level: 1, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 3, player: null, worker: null},\r\n            {x: 1, y: 1, level: 2, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 0, y: 0}, to: {x: 1, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 0}, to: {x: 1, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 1, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 3, player: null, worker: null},\r\n            {x: 1, y: 1, level: 2, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 0, y: 0}, to: {x: 1, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 0}, to: {x: 1, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 1, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 3, player: null, worker: null},\r\n            {x: 1, y: 1, level: 2, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 0, y: 0}, to: {x: 1, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 0}, to: {x: 1, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 1, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 3, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 1, y: 1, level: 2, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 0, y: 0}, to: {x: 1, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 0}, to: {x: 1, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n    </Fragment>},\r\n    {title: 'Moving', body: <Fragment>\r\n      <div>\r\n        You can <strong>move 1 square</strong> in any direction, <strong>horizontally</strong>,\r\n        <strong>vertically</strong>, or <strong>diagonally</strong>.\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 2}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 2}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 2}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <div>\r\n        But you <strong>can't move in a square that has another piece</strong>, your's or the opponent's:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 2}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 2}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <div>\r\n        Beneath, you can <strong>try moving your pieces</strong>. Notice that you need to <strong>click on a piece to\r\n        select it</strong>, and then <strong>click on the target square</strong> to move it.\r\n        To <strong>deselect</strong> a selected piece <strong>click on it again</strong>:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        canMove\r\n      />\r\n    </Fragment>},\r\n    {title: 'Levels', body:<Fragment>\r\n      <div>\r\n        In the game there are <strong>five levels</strong>: <Label color={'green'}>ground</Label>,\r\n        <Label color={'grey'}>level 1</Label>, <Label color={'yellow'}>level 2</Label>,\r\n        <Label color={'red'}>level 3</Label>, and the <Label color={'blue'}>blocked level (level 4)</Label>:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 1, player: null, worker: null},\r\n            {x: 2, y: 0, level: 2, player: null, worker: null},\r\n            {x: 3, y: 0, level: 3, player: null, worker: null},\r\n            {x: 4, y: 0, level: 4, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n      <div>\r\n        You can go <strong>up one level</strong>, go <strong>down any number of levels</strong>, and <strong>move to\r\n        the same level</strong>. You can <strong>never move to a blocked level</strong>:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 2, player: null, worker: null},\r\n            {x: 2, y: 0, level: 3, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 1, player: null, worker: null},\r\n            {x: 1, y: 2, level: 1, player: null, worker: null},\r\n            {x: 2, y: 2, level: 4, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 2}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 2}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 2, player: null, worker: null},\r\n            {x: 2, y: 0, level: 3, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 1, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 1, player: null, worker: null},\r\n            {x: 1, y: 2, level: 1, player: null, worker: null},\r\n            {x: 2, y: 2, level: 4, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 2}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 2}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 2, player: null, worker: null},\r\n            {x: 2, y: 0, level: 3, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 2, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 1, player: null, worker: null},\r\n            {x: 1, y: 2, level: 1, player: null, worker: null},\r\n            {x: 2, y: 2, level: 4, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 0}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 1}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 2}, type: 'move', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 2}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <div>\r\n        Try it yourself below:\r\n      </div>\r\n      <LearnBoard\r\n        canMove\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 2, player: null, worker: null},\r\n            {x: 2, y: 0, level: 3, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 1, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 1, player: null, worker: null},\r\n            {x: 1, y: 2, level: 1, player: null, worker: null},\r\n            {x: 2, y: 2, level: 4, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n    </Fragment>},\r\n    {title: 'Building', body:<Fragment>\r\n      <div>\r\n        After you've moved one of your pieces, you <strong>must build on 1 nearby square</strong>, horizontally,\r\n        vertically, or diagonally:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 0}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 0}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 0}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 1}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 2}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 2}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 2}, type: 'build', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <div>\r\n        You can <strong>build at any square</strong> next to the piece you moved: it <strong>doesn't matter which\r\n        level your are</strong>, and which level you want to build. But you can never build more than the blocked\r\n        level:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 1, player: null, worker: null},\r\n            {x: 2, y: 0, level: 2, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 1, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 3, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 2, player: null, worker: null},\r\n            {x: 1, y: 2, level: 3, player: null, worker: null},\r\n            {x: 2, y: 2, level: 4, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 0}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 0}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 0}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 1}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 2}, type: 'build', colour: 'white'},\r\n            {from: {x: 1, y: 1}, to: {x: 1, y: 2}, type: 'build', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <div>\r\n        Try it yourself below, by selecting your player and then building:\r\n      </div>\r\n      <LearnBoard\r\n        canBuild\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 1, player: null, worker: null},\r\n            {x: 2, y: 0, level: 2, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 1, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 3, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 2, player: null, worker: null},\r\n            {x: 1, y: 2, level: 3, player: null, worker: null},\r\n            {x: 2, y: 2, level: 4, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n    </Fragment>},\r\n    {title: 'Winning', body:<Fragment>\r\n      <div>\r\n        If there was no opponent on the board (you wish!), you would do something like the following\r\n        moves <strong>to win</strong>:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n      {/*<br/>*/}\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 2, y: 1}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 1, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 2, y: 1}, to: {x: 1, y: 1}, type: 'build', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      {/*<br/>*/}\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 1, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 2, y: 1}, to: {x: 1, y: 1}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 1, player: null, worker: null},\r\n            {x: 1, y: 1, level: 1, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'build', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      {/*<br/>*/}\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 1, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 1, y: 1, level: 1, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <br/>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 1, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 1, y: 1, level: 2, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 0, y: 1}, to: {x: 1, y: 1}, type: 'build', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      {/*<br/>*/}\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 1, player: null, worker: null},\r\n            {x: 1, y: 1, level: 2, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 0, y: 1}, to: {x: 1, y: 1}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 2, player: null, worker: null},\r\n            {x: 1, y: 1, level: 2, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'build', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      {/*<br/>*/}\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 2, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 1, y: 1, level: 2, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 1, y: 1}, to: {x: 0, y: 1}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 2, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 1, y: 1, level: 3, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 0, y: 1}, to: {x: 1, y: 1}, type: 'build', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      {/*<br/>*/}\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 2, player: null, worker: null},\r\n            {x: 1, y: 1, level: 3, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n        board={{\r\n          arrows: [\r\n            {from: {x: 0, y: 1}, to: {x: 1, y: 1}, type: 'move', colour: 'white'},\r\n          ],\r\n        }}\r\n      />\r\n      <div>\r\n        Why don't you try this below?\r\n      </div>\r\n      <LearnBoard\r\n        canMove canBuild\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n    </Fragment>},\r\n    {title: 'Good starting positions', body:<Fragment>\r\n      <div>\r\n        To start the game, the first player puts their pieces anywhere on the board, and then second player does the\r\n        same. Here are some good examples:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n            {x: 3, y: 0, level: 0, player: null, worker: null},\r\n            {x: 4, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 3, y: 1, level: 0, player: null, worker: null},\r\n            {x: 4, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 2, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 3, y: 2, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n            {x: 4, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 3, cells: [\r\n            {x: 0, y: 3, level: 0, player: null, worker: null},\r\n            {x: 1, y: 3, level: 0, player: null, worker: null},\r\n            {x: 2, y: 3, level: 0, player: null, worker: null},\r\n            {x: 3, y: 3, level: 0, player: null, worker: null},\r\n            {x: 4, y: 3, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 4, cells: [\r\n            {x: 0, y: 4, level: 0, player: null, worker: null},\r\n            {x: 1, y: 4, level: 0, player: null, worker: null},\r\n            {x: 2, y: 4, level: 0, player: null, worker: null},\r\n            {x: 3, y: 4, level: 0, player: null, worker: null},\r\n            {x: 4, y: 4, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n            {x: 3, y: 0, level: 0, player: null, worker: null},\r\n            {x: 4, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 3, y: 1, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n            {x: 4, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 2, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 3, y: 2, level: 0, player: null, worker: null},\r\n            {x: 4, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 3, cells: [\r\n            {x: 0, y: 3, level: 0, player: null, worker: null},\r\n            {x: 1, y: 3, level: 0, player: null, worker: null},\r\n            {x: 2, y: 3, level: 0, player: null, worker: null},\r\n            {x: 3, y: 3, level: 0, player: null, worker: null},\r\n            {x: 4, y: 3, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 4, cells: [\r\n            {x: 0, y: 4, level: 0, player: null, worker: null},\r\n            {x: 1, y: 4, level: 0, player: null, worker: null},\r\n            {x: 2, y: 4, level: 0, player: null, worker: null},\r\n            {x: 3, y: 4, level: 0, player: null, worker: null},\r\n            {x: 4, y: 4, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n            {x: 3, y: 0, level: 0, player: null, worker: null},\r\n            {x: 4, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: null, worker: null},\r\n            {x: 3, y: 1, level: 0, player: null, worker: null},\r\n            {x: 4, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 2, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 3, y: 2, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n            {x: 4, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 3, cells: [\r\n            {x: 0, y: 3, level: 0, player: null, worker: null},\r\n            {x: 1, y: 3, level: 0, player: null, worker: null},\r\n            {x: 2, y: 3, level: 0, player: null, worker: null},\r\n            {x: 3, y: 3, level: 0, player: null, worker: null},\r\n            {x: 4, y: 3, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 4, cells: [\r\n            {x: 0, y: 4, level: 0, player: null, worker: null},\r\n            {x: 1, y: 4, level: 0, player: null, worker: null},\r\n            {x: 2, y: 4, level: 0, player: null, worker: null},\r\n            {x: 3, y: 4, level: 0, player: null, worker: null},\r\n            {x: 4, y: 4, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: null, worker: null},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n            {x: 3, y: 0, level: 0, player: null, worker: null},\r\n            {x: 4, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n            {x: 2, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 3, y: 1, level: 0, player: null, worker: null},\r\n            {x: 4, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 3, y: 2, level: 0, player: null, worker: null},\r\n            {x: 4, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 3, cells: [\r\n            {x: 0, y: 3, level: 0, player: null, worker: null},\r\n            {x: 1, y: 3, level: 0, player: null, worker: null},\r\n            {x: 2, y: 3, level: 0, player: null, worker: null},\r\n            {x: 3, y: 3, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n            {x: 4, y: 3, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 4, cells: [\r\n            {x: 0, y: 4, level: 0, player: null, worker: null},\r\n            {x: 1, y: 4, level: 0, player: null, worker: null},\r\n            {x: 2, y: 4, level: 0, player: null, worker: null},\r\n            {x: 3, y: 4, level: 0, player: null, worker: null},\r\n            {x: 4, y: 4, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n    </Fragment>},\r\n    {title: 'Disadvantaged starting positions', body:<Fragment>\r\n      <div>\r\n        In these starting positions the both players have their pieces near the center, and they can move easily to\r\n        any square on the board. In contrast, these starting positions would probably put the black players at a\r\n        disadvantage, since his pieces are too far away from the opponent's:\r\n      </div>\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n            {x: 1, y: 0, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n            {x: 3, y: 0, level: 0, player: null, worker: null},\r\n            {x: 4, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 3, y: 1, level: 0, player: null, worker: null},\r\n            {x: 4, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 3, y: 2, level: 0, player: null, worker: null},\r\n            {x: 4, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 3, cells: [\r\n            {x: 0, y: 3, level: 0, player: null, worker: null},\r\n            {x: 1, y: 3, level: 0, player: null, worker: null},\r\n            {x: 2, y: 3, level: 0, player: null, worker: null},\r\n            {x: 3, y: 3, level: 0, player: null, worker: null},\r\n            {x: 4, y: 3, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 4, cells: [\r\n            {x: 0, y: 4, level: 0, player: null, worker: null},\r\n            {x: 1, y: 4, level: 0, player: null, worker: null},\r\n            {x: 2, y: 4, level: 0, player: null, worker: null},\r\n            {x: 3, y: 4, level: 0, player: null, worker: null},\r\n            {x: 4, y: 4, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n            {x: 3, y: 0, level: 0, player: null, worker: null},\r\n            {x: 4, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 3, y: 1, level: 0, player: null, worker: null},\r\n            {x: 4, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 3, y: 2, level: 0, player: null, worker: null},\r\n            {x: 4, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 3, cells: [\r\n            {x: 0, y: 3, level: 0, player: null, worker: null},\r\n            {x: 1, y: 3, level: 0, player: null, worker: null},\r\n            {x: 2, y: 3, level: 0, player: null, worker: null},\r\n            {x: 3, y: 3, level: 0, player: null, worker: null},\r\n            {x: 4, y: 3, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 4, cells: [\r\n            {x: 0, y: 4, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n            {x: 1, y: 4, level: 0, player: null, worker: null},\r\n            {x: 2, y: 4, level: 0, player: null, worker: null},\r\n            {x: 3, y: 4, level: 0, player: null, worker: null},\r\n            {x: 4, y: 4, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n            {x: 1, y: 0, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n            {x: 3, y: 0, level: 0, player: null, worker: null},\r\n            {x: 4, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 3, y: 1, level: 0, player: null, worker: null},\r\n            {x: 4, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 3, y: 2, level: 0, player: null, worker: null},\r\n            {x: 4, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 3, cells: [\r\n            {x: 0, y: 3, level: 0, player: null, worker: null},\r\n            {x: 1, y: 3, level: 0, player: null, worker: null},\r\n            {x: 2, y: 3, level: 0, player: null, worker: null},\r\n            {x: 3, y: 3, level: 0, player: null, worker: null},\r\n            {x: 4, y: 3, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 4, cells: [\r\n            {x: 0, y: 4, level: 0, player: null, worker: null},\r\n            {x: 1, y: 4, level: 0, player: null, worker: null},\r\n            {x: 2, y: 4, level: 0, player: null, worker: null},\r\n            {x: 3, y: 4, level: 0, player: null, worker: null},\r\n            {x: 4, y: 4, level: 0, player: null, worker: null},\r\n          ]},\r\n        ]}\r\n      />\r\n      <LearnBoard\r\n        rowsAndColumns={[\r\n          {y: 0, cells: [\r\n            {x: 0, y: 0, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n            {x: 1, y: 0, level: 0, player: null, worker: null},\r\n            {x: 2, y: 0, level: 0, player: null, worker: null},\r\n            {x: 3, y: 0, level: 0, player: null, worker: null},\r\n            {x: 4, y: 0, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 1, cells: [\r\n            {x: 0, y: 1, level: 0, player: null, worker: null},\r\n            {x: 1, y: 1, level: 0, player: null, worker: null},\r\n            {x: 2, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n            {x: 3, y: 1, level: 0, player: null, worker: null},\r\n            {x: 4, y: 1, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 2, cells: [\r\n            {x: 0, y: 2, level: 0, player: null, worker: null},\r\n            {x: 1, y: 2, level: 0, player: null, worker: null},\r\n            {x: 2, y: 2, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_SECOND},\r\n            {x: 3, y: 2, level: 0, player: null, worker: null},\r\n            {x: 4, y: 2, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 3, cells: [\r\n            {x: 0, y: 3, level: 0, player: null, worker: null},\r\n            {x: 1, y: 3, level: 0, player: null, worker: null},\r\n            {x: 2, y: 3, level: 0, player: null, worker: null},\r\n            {x: 3, y: 3, level: 0, player: null, worker: null},\r\n            {x: 4, y: 3, level: 0, player: null, worker: null},\r\n          ]},\r\n          {y: 4, cells: [\r\n            {x: 0, y: 4, level: 0, player: null, worker: null},\r\n            {x: 1, y: 4, level: 0, player: null, worker: null},\r\n            {x: 2, y: 4, level: 0, player: null, worker: null},\r\n            {x: 3, y: 4, level: 0, player: null, worker: null},\r\n            {x: 4, y: 4, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_SECOND},\r\n          ]},\r\n        ]}\r\n      />\r\n    </Fragment>},\r\n    {title: 'You\\'re ready to play!', body: <Fragment>\r\n      <div>\r\n        You're now ready to play! You can now <NavLink to={'./hotseat'}>play with a friend on the same\r\n        screen</NavLink> or play online <NavLink to={'./lobby'}>at the lobby</NavLink>.\r\n      </div>\r\n    </Fragment>}\r\n  ];\r\n\r\n  state = {\r\n    stepIndex: 0,\r\n  };\r\n\r\n  goToFirstStep = () => {\r\n    this.setState({stepIndex: 0});\r\n  };\r\n\r\n  goToPreviousStep = () => {\r\n    this.setState(state => ({stepIndex: state.stepIndex - 1}));\r\n  };\r\n\r\n  goToNextStep = () => {\r\n    this.setState(state => ({stepIndex: state.stepIndex + 1}));\r\n  };\r\n\r\n  goToLastStep = () => {\r\n    this.setState({stepIndex: this.constructor.steps.length - 1});\r\n  };\r\n\r\n  render() {\r\n    const {stepIndex} = this.state;\r\n    const steps = this.constructor.steps;\r\n    const step = steps[stepIndex];\r\n\r\n    return (\r\n      <Message>\r\n        <Message.Content>\r\n          <Grid columns={'equal'} verticalAlign={'middle'} textAlign={'center'}>\r\n            <Grid.Row>\r\n              <Menu size={'massive'} items={[\r\n                {key: 'first', icon: 'fast backward', onClick: this.goToFirstStep, disabled: stepIndex === 0},\r\n                {key: 'previous', icon: 'backward', onClick: this.goToPreviousStep, disabled: stepIndex === 0},\r\n                {key: 'next', icon: 'forward', onClick: this.goToNextStep, disabled: stepIndex === steps.length - 1},\r\n                {key: 'last', icon: 'fast forward', onClick: this.goToLastStep, disabled: stepIndex === steps.length - 1},\r\n              ]}/>\r\n            </Grid.Row>\r\n            <Grid.Row><Message.Header>{stepIndex + 1}.  {step.title}</Message.Header></Grid.Row>\r\n            <Grid.Row><Message content={<Fragment key={stepIndex}>{step.body}</Fragment>} /></Grid.Row>\r\n            <Grid.Row>\r\n              {stepIndex < steps.length - 1 ? (\r\n                <Button primary onClick={this.goToNextStep} icon={'forward'} content={'Go to next step'} />\r\n              ) : (\r\n                <Fragment>\r\n                  <Button positive as={NavLink} to={'/lobby'} icon={'play'} content={'Play with someone online'} />\r\n                  <Button positive as={NavLink} to={'/hotseat'} icon={'retweet'} content={'Play with a friend on the same screen'} />\r\n                </Fragment>\r\n              )}\r\n            </Grid.Row>\r\n          </Grid>\r\n        </Message.Content>\r\n      </Message>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LearnToPlay;\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport BoardBackground from \"./Board/BoardBackground\";\r\nimport Game from \"../game/game\";\r\nimport {withClient} from \"../client/withClient\";\r\nimport {Button, Grid, Menu, Message, Modal, Segment} from \"semantic-ui-react\";\r\nimport keydown from \"react-keydown\";\r\nimport Play from \"./Play\";\r\nimport * as utils from \"../utils\";\r\n\r\nclass EditPosition extends Component {\r\n  static initialPositionNotation = Game.getPositionNotation(Game.getInitialRowsAndColumns());\r\n\r\n  state = {\r\n    paletteSelectedItem: {x: 0, y: 1},\r\n    paletteUpdate: {player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n    position: Game.getInitialRowsAndColumns(),\r\n    positionError: null,\r\n    urlError: false,\r\n    ...this.constructor.getGameAndErrorFromUrlPosition(),\r\n    selectedGame: null,\r\n    previousPosition: null,\r\n  };\r\n\r\n  static getGameAndErrorFromUrlPosition() {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const position = params.get('position');\r\n    if (position) {\r\n      let game, urlError;\r\n      try {\r\n        game = Game.fromCompressedPositionNotation(position);\r\n        if (!game) {\r\n          urlError = 'The position was not valid';\r\n        }\r\n      } catch (e) {\r\n        game = null;\r\n        urlError = `The board position was not valid: ${e.message}`;\r\n      }\r\n      if (!game) {\r\n        return {game: Game.create(), urlError, position: Game.getInitialRowsAndColumns()};\r\n      }\r\n      return {game, urlError: false, position: game.rowsAndColumns};\r\n    } else {\r\n      return {game: Game.create(), urlError: false, position: Game.getInitialRowsAndColumns()};\r\n    }\r\n  }\r\n\r\n  dismissUrlPositionError = () =>{\r\n    this.setState({error: null});\r\n  };\r\n\r\n  onPaletteSelectedItemChange = (paletteSelectedItem, paletteUpdate) => {\r\n    this.setState({paletteSelectedItem, paletteUpdate});\r\n  };\r\n\r\n  onPositionChange = position => {\r\n    let game, positionError;\r\n    try {\r\n      game = Game.fromPosition(position);\r\n      positionError = null;\r\n    } catch (e) {\r\n      game = Game.create();\r\n      positionError = e.message;\r\n    }\r\n    this.setState(state => ({\r\n      position,\r\n      game,\r\n      positionError,\r\n      previousPosition: state.position,\r\n    }));\r\n  };\r\n\r\n  makeMove = newGame => {\r\n    this.setState({game: newGame});\r\n  };\r\n\r\n  onSelectedGameChange = selectedGame => {\r\n    this.setState({selectedGame});\r\n  };\r\n\r\n  copyGame = () => {\r\n    const {game, selectedGame} = this.state;\r\n    const visibleGame = selectedGame || game;\r\n    this.onPositionChange(visibleGame.rowsAndColumns);\r\n  };\r\n\r\n  resetBoard = () => {\r\n    this.onPositionChange(Game.getInitialRowsAndColumns());\r\n  };\r\n\r\n  undo = () => {\r\n    this.onPositionChange(this.state.previousPosition);\r\n  };\r\n\r\n  resetGame = () => {\r\n    this.onPositionChange(this.state.position);\r\n  };\r\n\r\n  copyPosition = () => {\r\n    utils.copyToClipboard(Game.getPositionNotation(this.state.position));\r\n    alert('Position copied to clipboard');\r\n  };\r\n\r\n  copyPlayPosition = () => {\r\n    utils.copyToClipboard((this.state.selectedGame || this.state.game).positionNotation);\r\n    alert('Play position copied to clipboard');\r\n  };\r\n\r\n  render() {\r\n    const {user, client, keydown} = this.props;\r\n    const {paletteSelectedItem, position, paletteUpdate, positionError, urlError, game, selectedGame, previousPosition} = this.state;\r\n    const settings = user ? user.settings : client.settings;\r\n\r\n    const positionNotation = Game.getPositionNotation(position);\r\n    return (\r\n      <Fragment>\r\n        <Modal\r\n          open={!!urlError}\r\n          size={'mini'}\r\n          onClose={this.dismissUrlPositionError}\r\n          header={'Could not load shared position'}\r\n          content={`${urlError}. Please check that you copied the full URL`}\r\n          actions={[{key: 'ok', content: 'OK', positive: true}]}\r\n        />\r\n        <Grid centered>\r\n          <Grid.Row>\r\n            <Menu inverted size={'massive'} items={[\r\n              {key: 'share', icon: 'share', content: 'Share position', color: 'green', active: true, as: 'a',\r\n                href: `?position=${positionNotation}`,\r\n                title: navigator.share ? 'Click to open the sharing menu' : 'Click to copy URL to position'},\r\n              {key: 'copy', icon: 'clipboard', content: 'Copy position', color: 'green', active: true,\r\n                title: 'Click to copy position to position', onClick: this.copyPosition},\r\n              {key: 'copy-play', icon: 'clipboard', content: 'Copy play position', color: 'green', active: true,\r\n                title: 'Click to copy play position to position', onClick: this.copyPlayPosition},\r\n            ]} />\r\n          </Grid.Row>\r\n        </Grid>\r\n        <Segment>\r\n          {positionError ? <Message error content={positionError} /> : null}\r\n          <Play\r\n            user={user}\r\n            settings={settings}\r\n            defaultSettings={client.settings}\r\n            game={game}\r\n            makeMove={this.makeMove}\r\n            onSelectedGameChange={this.onSelectedGameChange}\r\n          >\r\n            <div>\r\n              <Button\r\n                content={'Reset game'}\r\n                primary\r\n                onClick={this.resetGame}\r\n              />\r\n            </div>\r\n            <EditPositionPalette\r\n              selectedItem={paletteSelectedItem}\r\n              onSelectedItemChange={this.onPaletteSelectedItemChange}\r\n              keydown={keydown}\r\n            />\r\n            <div>\r\n              <Button\r\n                content={'Copy from game'}\r\n                primary\r\n                disabled={(selectedGame || game).positionNotation === positionNotation}\r\n                onClick={this.copyGame}\r\n              />\r\n              <Button\r\n                content={'Reset'}\r\n                negative\r\n                disabled={positionNotation === this.constructor.initialPositionNotation}\r\n                onClick={this.resetBoard}\r\n              />\r\n              <Button\r\n                content={'Undo'}\r\n                secondary\r\n                disabled={!previousPosition}\r\n                onClick={this.undo}\r\n              />\r\n            </div>\r\n            <EditPositionBoard\r\n              position={position}\r\n              update={paletteUpdate}\r\n              onPositionChange={this.onPositionChange}\r\n            />\r\n          </Play>\r\n        </Segment>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nEditPosition.propTypes = {\r\n  keydown: PropTypes.object.isRequired,\r\n  user: PropTypes.object,\r\n  client: PropTypes.object.isRequired,\r\n};\r\n\r\nclass EditPositionPalette extends Component {\r\n  static rowsAndColumns = [\r\n    {y: 0, cells: [\r\n      {x: 0, y: 0, level: 0, player: null, worker: null},\r\n      {x: 1, y: 0, level: 1, player: null, worker: null},\r\n      {x: 2, y: 0, level: 2, player: null, worker: null},\r\n      {x: 3, y: 0, level: 3, player: null, worker: null},\r\n      {x: 4, y: 0, level: 4, player: null, worker: null},\r\n    ]},\r\n    {y: 1, cells: [\r\n      {x: 0, y: 1, level: 0, player: Game.PLAYER_A, worker: Game.WORKER_FIRST},\r\n      {x: 1, y: 1, level: 0, player: Game.PLAYER_B, worker: Game.WORKER_FIRST},\r\n      {x: 2, y: 1, level: 0, player: null, worker: null},\r\n      {x: 3, y: 1, level: 0, player: null, worker: null},\r\n      {x: 4, y: 1, level: 0, player: null, worker: null},\r\n    ]},\r\n  ];\r\n  static keys = [\r\n    'q', '0', '1', '2', '3', '4', 'a', 'b',\r\n  ];\r\n  static moveFromKey = {\r\n    'q': {x: 0, y: 0},\r\n    0: {x: 0, y: 0},\r\n    1: {x: 1, y: 0},\r\n    2: {x: 2, y: 0},\r\n    3: {x: 3, y: 0},\r\n    4: {x: 4, y: 0},\r\n    a: {x: 0, y: 1},\r\n    b: {x: 1, y: 1},\r\n  };\r\n\r\n  state = {\r\n    selectedItem: {x: 0, y: 1},\r\n  };\r\n\r\n  componentWillReceiveProps({keydown}) {\r\n    if (keydown.event) {\r\n      const {key} = keydown.event;\r\n      const coordinates = this.constructor.moveFromKey[key];\r\n      if (coordinates) {\r\n        const {x, y} = coordinates;\r\n        const move = this.constructor.rowsAndColumns[y].cells[x];\r\n        this.makeMove(move);\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (prevProps.selectedItem !== undefined && this.props.selectedItem === undefined) {\r\n      this.setState({selectedItem: prevProps.selectedItem});\r\n    }\r\n  }\r\n\r\n  get selectedItem() {\r\n    if (this.props.selectedItem === undefined) {\r\n      return this.state.selectedItem;\r\n    } else {\r\n      return this.props.selectedItem;\r\n    }\r\n  }\r\n\r\n  isCellAvailable = cell => {\r\n    return !this.isCellUndoable(cell) && (cell.y === 0 || cell.x <= 1);\r\n  };\r\n\r\n  isCellUndoable = cell => {\r\n    const {selectedItem} = this;\r\n    return cell.x === selectedItem.x && cell.y === selectedItem.y;\r\n  };\r\n\r\n  makeMove = cell => {\r\n    const selectedItem = {x: cell.x, y: cell.y};\r\n    if (this.props.selectedItem === undefined) {\r\n      this.setState({selectedItem: selectedItem});\r\n    }\r\n    if (this.props.onSelectedItemChange) {\r\n      const update = cell.player ? {player: cell.player} : {level: cell.level};\r\n      this.props.onSelectedItemChange(selectedItem, update);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {user, client} = this.props;\r\n    const settings = user ? user.settings : client.settings;\r\n\r\n    return (\r\n      <BoardBackground\r\n        medium\r\n        allowControl={[Game.PLAYER_A, Game.PLAYER_B]}\r\n        rowsAndColumns={this.constructor.rowsAndColumns}\r\n        clickable undoable={false}\r\n        isCellAvailable={this.isCellAvailable}\r\n        isCellUndoable={this.isCellUndoable}\r\n        makeMove={this.makeMove}\r\n        settings={settings}\r\n        animated={false}\r\n        showArrows={false}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nEditPositionPalette.propTypes = {\r\n  user: PropTypes.object,\r\n  client: PropTypes.object.isRequired,\r\n  selectedItem: PropTypes.object,\r\n  onSelectedItemChange: PropTypes.func,\r\n  keydown: PropTypes.object.isRequired,\r\n};\r\n\r\nEditPositionPalette = withClient(EditPositionPalette);\r\n\r\nclass EditPositionBoard extends Component {\r\n  state = {\r\n    position: Game.getInitialRowsAndColumns(),\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (prevProps.position !== undefined && this.props.position === undefined) {\r\n      this.setState({position: prevProps.position});\r\n    }\r\n  }\r\n\r\n  get position() {\r\n    if (this.props.position === undefined) {\r\n      return this.state.position;\r\n    } else {\r\n      return this.props.position;\r\n    }\r\n  }\r\n\r\n  isCellAvailable = () => {\r\n    return true;\r\n  };\r\n\r\n  isCellUndoable = () => {\r\n    return false;\r\n  };\r\n\r\n  makeMove = cell => {\r\n    const {update} = this.props;\r\n    if ('level' in update) {\r\n      if (cell.level !== update.level) {\r\n        this.updatePosition({x: cell.x, y: cell.y, level: update.level});\r\n      }\r\n    } else if ('player' in update) {\r\n      if (cell.player !== update.player) {\r\n        this.updatePosition({x: cell.x, y: cell.y, player: update.player, worker: Game.WORKER_FIRST});\r\n      } else {\r\n        this.updatePosition({x: cell.x, y: cell.y, player: null, worker: null});\r\n      }\r\n    }\r\n  };\r\n\r\n  updatePosition = newCell => {\r\n    const newPosition = Game.updateCells(this.position, newCell);\r\n\r\n    if (this.props.position === undefined) {\r\n      this.setState({position: newPosition});\r\n    }\r\n    if (this.props.onPositionChange) {\r\n      this.props.onPositionChange(newPosition);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {position} = this;\r\n    const {user, client} = this.props;\r\n    const settings = user ? user.settings : client.settings;\r\n\r\n    return (\r\n      <BoardBackground\r\n        medium\r\n        allowControl={[Game.PLAYER_A, Game.PLAYER_B]}\r\n        rowsAndColumns={position}\r\n        clickable undoable={false}\r\n        isCellAvailable={this.isCellAvailable}\r\n        isCellUndoable={this.isCellUndoable}\r\n        makeMove={this.makeMove}\r\n        settings={settings}\r\n        animated={false}\r\n        showArrows={false}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nEditPositionBoard.propTypes = {\r\n  user: PropTypes.object,\r\n  client: PropTypes.object.isRequired,\r\n  position: PropTypes.array,\r\n  update: PropTypes.object.isRequired,\r\n  onPositionChange: PropTypes.func,\r\n};\r\n\r\nEditPositionBoard = withClient(EditPositionBoard);\r\n\r\nexport default keydown(EditPositionPalette.SubComponent.keys)(withClient(EditPosition));\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Game from \"../game/game\";\r\nimport {Grid, Header, Icon, Message, Segment} from \"semantic-ui-react\";\r\nimport Play from \"./Play\";\r\nimport {withClient} from \"../client/withClient\";\r\nimport _ from 'lodash';\r\nimport \"../styles/challenges.css\";\r\n\r\nclass Challenges extends Component {\r\n  static challenges = [\r\n    {\r\n      position: 'AABMAAAJAIAAEFMAJADMADAAD',\r\n      initialPlayer: Game.PLAYER_B,\r\n      type: 'mate',\r\n      options: {\r\n        mateIn: 5,\r\n      },\r\n      meta: {\r\n        source: 'From the first tournament on Thyra Online, Tommy vs Costas',\r\n        difficulty: 4,\r\n        maxDifficulty: 5,\r\n      },\r\n      playerResponses: [\r\n        {\r\n          playerMoves: [\r\n            'AABMDAAJCGAAEFMAJADMADAAD',\r\n          ],\r\n          response: [{x: 2, y: 0}, {x: 1, y: 1}, {x: 1, y: 2}],\r\n          playerResponses: [\r\n            {\r\n              playerMoves: [\r\n                'AAAMGABJCIADEDMAJADMADAAD',\r\n              ],\r\n              response: [{x: 1, y: 1}, {x: 0, y: 2}, {x: 1, y: 2}],\r\n              playerResponses: [\r\n                {\r\n                  playerMoves: [\r\n                    'AAAMGAAMCGBGEFMAJADMADAAD',\r\n                    'AAAMGAAMAIBGEFMAJADMADAAD',\r\n                  ],\r\n                  response: [{x: 2, y: 2}, {x: 1, y: 2}, {x: 1, y: 1}],\r\n                  playerResponses: [\r\n                    {\r\n                      playerMoves: [\r\n                        'AAAMGADMAIBHFDMAMADMADAAD',\r\n                        'AAAMGADMAGBHFFMAMADMADAAD',\r\n                      ],\r\n                      response: [{x: 0, y: 2}, {x: 0, y: 1}, {x: 1, y: 1}],\r\n                      playerResponses: [\r\n                        {\r\n                          playerMoves: [\r\n                            'AAAMJBGMAIAHFDMAMADMADAAD',\r\n                          ],\r\n                        },\r\n                        {\r\n                          playerMoves: [\r\n                            'AAAMJBGMCIAHDDMAMADMADAAD',\r\n                          ],\r\n                        },\r\n                        {\r\n                          playerMoves: [\r\n                            'AAAMIBGMAJAHFDMAMADMADAAD',\r\n                          ],\r\n                        },\r\n                      ],\r\n                    },\r\n                  ],\r\n                }\r\n              ],\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  state = {\r\n    challenge: this.constructor.challenges[0],\r\n    challengePlayerResponses: this.constructor.challenges[0].playerResponses,\r\n    game: Game.fromCompressedPositionNotation(this.constructor.challenges[0].position),\r\n    wrongMove: false,\r\n    won: false,\r\n  };\r\n\r\n  submit = (moves, newGame) => {\r\n    const {challengePlayerResponses, won} = this.state;\r\n    if (won) {\r\n      return;\r\n    }\r\n    const playerResponse = challengePlayerResponses.find(\r\n      playerResponse => playerResponse.playerMoves.includes(newGame.positionNotation));\r\n    if (!playerResponse) {\r\n      console.log(_.flatten(challengePlayerResponses.map(pR => pR.playerMoves)), newGame.positionNotation);\r\n      this.setState({wrongMove: true});\r\n      return;\r\n    }\r\n    const challengeResponse = playerResponse.response ? newGame.makeMoves(playerResponse.response) : newGame;\r\n    this.setState({\r\n      game: challengeResponse,\r\n      challengePlayerResponses: playerResponse.playerResponses || null,\r\n      wrongMove: false,\r\n      won: !playerResponse.response,\r\n    });\r\n  };\r\n\r\n  onDisplayPositionChange = () => {\r\n    if (this.state.wrongMove) {\r\n      this.setState({wrongMove: false});\r\n    }\r\n  };\r\n\r\n  getDifficultyStars(difficulty, maxDifficulty) {\r\n    return _.range(maxDifficulty).map(index => (\r\n      <Icon\r\n        key={index}\r\n        name={difficulty > index ? 'star' : 'star outline'}\r\n        color={'yellow'}\r\n      />\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {challenge, game, wrongMove, won} = this.state;\r\n    const {user, client} = this.props;\r\n    const challengePrompt = challenge.type === 'mate' ? `Find mate in ${challenge.options.mateIn}` : 'Unknown challenge';\r\n    const message = (\r\n      wrongMove ? (\r\n        <Message error icon={'warning'} content={\"That's not the right answer\"} />\r\n      ) : won ? (\r\n        <Message success icon={'check'} content={\"Correct! You solved it!\"} />\r\n      ) : (\r\n        <Message content={challengePrompt} />\r\n      )\r\n    );\r\n    return (\r\n      <Fragment>\r\n        <Grid centered>\r\n          <Grid.Row>\r\n            <Segment>\r\n              <Header as={'h1'}>{challengePrompt}</Header>\r\n              <Header as={'h4'} className={'difficulty-header'}>{this.getDifficultyStars(challenge.meta.difficulty, challenge.meta.maxDifficulty)}</Header>\r\n              <Header as={'h4'}>{challenge.meta.source}</Header>\r\n            </Segment>\r\n          </Grid.Row>\r\n          <Grid.Row>\r\n            {message}\r\n          </Grid.Row>\r\n        </Grid>\r\n        <Play\r\n          user={user}\r\n          defaultSettings={client.settings}\r\n          changeSettings={this.changeSettings}\r\n          game={game}\r\n          matchGame={game}\r\n          allowControl={[challenge.initialPlayer]}\r\n          names={{[challenge.initialPlayer]: 'You', [Game.OTHER_PLAYER[challenge.initialPlayer]]: 'Challenge'}}\r\n          submit={this.submit}\r\n          onDisplayPositionChange={this.onDisplayPositionChange}\r\n        >\r\n          {message}\r\n        </Play>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nChallenges.propTypes = {\r\n  user: PropTypes.object,\r\n  client: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withClient(Challenges);\r\n","import React, {Component, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Card, Form, Grid, Header, Icon, Input, Segment} from \"semantic-ui-react\";\r\nimport Game from \"../game/game\";\r\nimport _ from \"lodash\";\r\nimport Board from \"./Board\";\r\nimport {withClient} from \"../client/withClient\";\r\n\r\nclass CreateChallenge extends Component {\r\n  state = {\r\n    challenge: null,\r\n    path: null,\r\n  };\r\n\r\n  onCreateChallenge = challenge => {\r\n    this.setState({challenge, path: []});\r\n  };\r\n\r\n  getDifficultyStars(difficulty, maxDifficulty) {\r\n    return _.range(maxDifficulty).map(index => (\r\n      <Icon\r\n        key={index}\r\n        name={difficulty > index ? 'star' : 'star outline'}\r\n        color={'yellow'}\r\n      />\r\n    ));\r\n  }\r\n\r\n  onBoardSelect = game => {\r\n\r\n  };\r\n\r\n  render() {\r\n    const {user, client} = this.props;\r\n    const {challenge} = this.state;\r\n    const settings = user ? user.settings : client.settings;\r\n\r\n    if (!challenge) {\r\n      return (\r\n        <ChallengeEditor onCreateChallenge={this.onCreateChallenge} />\r\n      )\r\n    }\r\n    const challengePrompt = challenge.type === 'mate' ? `Find mate in ${challenge.options.mateIn}` : 'Unknown challenge';\r\n\r\n    return (\r\n      <Fragment>\r\n        <Grid centered>\r\n          <Grid.Row>\r\n            <Segment>\r\n              <Header as={'h1'}>{challengePrompt}</Header>\r\n              <Header as={'h4'} className={'difficulty-header'}>{this.getDifficultyStars(challenge.meta.difficulty, challenge.meta.maxDifficulty)}</Header>\r\n              <Header as={'h4'}>{challenge.meta.source}</Header>\r\n            </Segment>\r\n          </Grid.Row>\r\n        </Grid>\r\n        <Segment>\r\n          <Card.Group style={{/*maxHeight: '300px', */overflowY: 'auto', flexWrap: 'unset'}}>\r\n            <Card>\r\n              <Board\r\n                medium onSelect={this.onBoardSelect}\r\n                settings={settings}\r\n                game={challenge.game}\r\n              />\r\n            </Card>\r\n          </Card.Group>\r\n        </Segment>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nclass ChallengeEditor extends Component {\r\n  getNewChallenge() {\r\n    return {\r\n      challenge: {\r\n        position: '',\r\n        initialPlayer: Game.PLAYER_A,\r\n        type: 'mate',\r\n        options: {\r\n          mateIn: 1,\r\n        },\r\n        meta: {\r\n          source: '',\r\n          difficulty: 1,\r\n          maxDifficulty: 5,\r\n        },\r\n      },\r\n      error: {\r\n        position: null,\r\n      },\r\n    };\r\n  }\r\n\r\n  state = {\r\n    ...this.getNewChallenge(),\r\n  };\r\n\r\n  setValue = (e, {name, value}) => {\r\n    this.setState(state => {\r\n      const challenge = {\r\n        ...state.challenge,\r\n      };\r\n      let newChallengeToChange = challenge;\r\n      const parts = name.split('.');\r\n      for (const part of parts.slice(0, parts.length - 1)) {\r\n        newChallengeToChange = newChallengeToChange[part] || {};\r\n      }\r\n      newChallengeToChange[parts[parts.length - 1]] = value;\r\n      return {challenge};\r\n    });\r\n    this.onValueSet(name, value);\r\n  };\r\n\r\n  onValueSet = name => {\r\n    if (name === 'position') {\r\n      this.setState(state => ({\r\n        error: {\r\n          ...state.error,\r\n          position: !state.challenge.position || Game.isValidCompressedPositionNotation(state.challenge.position)\r\n            ? null : 'This is not a valid position',\r\n        },\r\n      }));\r\n    }\r\n  };\r\n\r\n  createChallenge = () => {\r\n    const {challenge, error} = this.state;\r\n    if (error.position) {\r\n      return;\r\n    }\r\n    this.props.onCreateChallenge({\r\n      ...challenge,\r\n      responses: [],\r\n      game: Game.fromCompressedPositionNotation(challenge.position),\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {challenge, error} = this.state;\r\n\r\n    return (\r\n      <Fragment>\r\n        <Header>Create a chanllenge</Header>\r\n        <Segment>\r\n          <Form onSubmit={this.createChallenge}>\r\n            <Form.Group>\r\n              <Form.Field\r\n                name={'position'}\r\n                control={Input}\r\n                label={'Initial position'}\r\n                placeholder={'Game position'}\r\n                onChange={this.setValue}\r\n                value={challenge.position}\r\n                required\r\n                error={error.position}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group inline>\r\n              <label>Starting player</label>\r\n              <Form.Radio\r\n                name={'initialPlayer'}\r\n                label={'Player A'}\r\n                onChange={this.setValue}\r\n                value={Game.PLAYER_A}\r\n                checked={challenge.initialPlayer === Game.PLAYER_A}\r\n              />\r\n              <Form.Radio\r\n                name={'initialPlayer'}\r\n                label={'Player B'}\r\n                onChange={this.setValue}\r\n                value={Game.PLAYER_B}\r\n                checked={challenge.initialPlayer === Game.PLAYER_B}\r\n              />\r\n            </Form.Group>\r\n            <Form.Select\r\n              options={[\r\n                {key: 'mate', value: 'mate', text: 'Mate'},\r\n              ]}\r\n              name={'type'}\r\n              label={'Type'}\r\n              onChange={this.setValue}\r\n              value={challenge.type}\r\n            />\r\n            <Form.Group>\r\n              <Form.Field\r\n                control={Input}\r\n                type={'range'}\r\n                label={`Mate In: ${challenge.options.mateIn}`}\r\n                min={1}\r\n                max={10}\r\n                name={'options.mateIn'}\r\n                onChange={this.setValue}\r\n                value={challenge.options.mateIn}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <Form.Field\r\n                control={Input}\r\n                label={'Source'}\r\n                name={'meta.source'}\r\n                onChange={this.setValue}\r\n                value={challenge.meta.source}\r\n              />\r\n              <Form.Field\r\n                control={Input}\r\n                type={'range'}\r\n                label={`Difficulty: ${challenge.meta.difficulty}/${challenge.meta.maxDifficulty}`}\r\n                min={1}\r\n                max={challenge.meta.maxDifficulty}\r\n                name={'meta.difficulty'}\r\n                onChange={this.setValue}\r\n                value={challenge.meta.difficulty}\r\n              />\r\n            </Form.Group>\r\n            <Form.Button content='Create' />\r\n          </Form>\r\n        </Segment>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nChallengeEditor.propTypes = {\r\n  onCreateChallenge: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withClient(CreateChallenge);\r\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport 'fomantic-ui-css/semantic.css';\nimport {Container, Header, Message, Segment, Tab} from 'semantic-ui-react';\nimport './styles/App.css';\nimport './styles/semantic-ui.css';\nimport {client} from \"./client/client\";\nimport NavigationalTab from \"./components/NavigationalTab\";\nimport {withRouter} from \"react-router-dom\";\nimport Hotseat from \"./components/Hotseat\";\nimport Lobby, {LogIn, LogOut} from \"./components/Lobby\";\nimport OnlineGame from \"./components/OnlineGame\";\nimport {withClient} from \"./client/withClient\";\nimport services from \"./services\";\nimport SvgBoardBackground from \"./components/Board/SvgBoardBackground\";\nimport OnlineTournament from \"./components/OnlineTournament\";\nimport Settings from \"./components/Settings\";\nimport LearnToPlay from \"./components/LearnToPlay\";\nimport EditPosition from \"./components/EditPosition\";\nimport Challenges from \"./components/Challenges\";\nimport CreateChallenge from \"./components/CreateChallenge\";\n\nclass App extends Component {\n  state = {\n    liveGame: null,\n    liveTournament: null,\n  };\n  selectLiveGame = liveGame => {\n    let gameUrl;\n    if (liveGame) {\n      gameUrl = `/game/${liveGame.id}`;\n    } else {\n      gameUrl = '/lobby';\n    }\n    if (gameUrl !== this.props.location.pathname) {\n      this.props.history.push(gameUrl);\n    }\n    if (this.state.liveGame === liveGame) {\n      return;\n    }\n    this.setState({liveGame});\n  };\n  selectLiveTournament = liveTournament => {\n    let tournamentUrl;\n    if (liveTournament) {\n      tournamentUrl = `/tournament/${liveTournament.id}`;\n    } else {\n      tournamentUrl = `/lobby`;\n    }\n    if (tournamentUrl !== this.props.location.pathname) {\n      this.props.history.push(tournamentUrl);\n    }\n    if (this.state.liveTournament === liveTournament) {\n      return;\n    }\n    this.setState({liveTournament});\n  };\n\n  toggleParticipation = tournament => {\n    const {user, client} = this.props;\n\n    if (tournament.userIds.includes(user.id)) {\n      client.leaveTournament(tournament);\n    } else {\n      client.joinTournament(tournament);\n    }\n  };\n\n  startTournament = tournament => {\n    const {client} = this.props;\n\n    client.startTournament(tournament);\n  };\n\n  abortTournament = tournament => {\n    const {client} = this.props;\n\n    client.abortTournament(tournament);\n  };\n\n  componentDidUpdate(prevProps) {\n    this.askForNotificationPermissionOnWaitForGame(prevProps);\n    this.navigateToMyNewGame(prevProps);\n    this.notifyAboutMyMove(prevProps);\n  }\n\n  askForNotificationPermissionOnWaitForGame(prevProps) {\n    const user = this.props.user;\n    if (!user) {\n      return;\n    }\n    if ((!prevProps.user || !prevProps.user.readyToPlay) && (user && user.readyToPlay) && user.settings.enableNotifications) {\n      services.notifications.requestPermission();\n    }\n  }\n\n  navigateToMyNewGame(prevProps) {\n    const user = this.props.user;\n    if (!user) {\n      return\n    }\n\n    if (prevProps.gamesInfo.myLive === this.props.gamesInfo.myLive) {\n      return;\n    }\n\n    if (this.state.liveGame && !this.state.liveGame.finished) {\n      return;\n    }\n\n    const previousMyLiveGameIds = new Set(prevProps.gamesInfo.myLive.map(game => game.id));\n    const myLiveGameIds = this.props.gamesInfo.myLive.map(game => game.id);\n    const newMyLiveGameIds = myLiveGameIds.filter(id => !previousMyLiveGameIds.has(id));\n    if (newMyLiveGameIds.length !== 1) {\n      return;\n    }\n\n    const newGame = this.props.gamesInfo.byId[newMyLiveGameIds[0]];\n    if (newGame.move === 1) {\n      const otherUserId = newGame.userIds[0] === user.id ? newGame.userIds[1] : (newGame.userIds[1] === user.id ? newGame.userIds[0] : null);\n      const otherUser = this.props.usersInfo.byId[otherUserId];\n      services.notifications.notify(otherUser ? `New game vs ${otherUser.name} started` : `New game started`);\n    }\n    if (newGame.move === 1) {\n      this.selectLiveGame(newGame);\n    }\n  }\n\n  notifyAboutMyMove(prevProps) {\n    const user = this.props.user;\n    if (!user) {\n      return;\n    }\n    if (!this.props.gamesInfo.myLive.length) {\n      return;\n    }\n    const gamesThatChangedToMyTurn = this.props.gamesInfo.myLive\n      .filter(game => game.nextUserId === user.id)\n      .filter(game => {\n        const prevGame = prevProps.gamesInfo.byId[game.id];\n        return prevGame && prevGame.nextUserId !== user.id;\n      });\n    if (!gamesThatChangedToMyTurn.length) {\n      return;\n    }\n\n    const otherUsers = gamesThatChangedToMyTurn.map(game => {\n      const otherUserId = game.userIds[0] === user.id ? game.userIds[1] : (game.userIds[1] === user.id ? game.userIds[0] : null);\n      const otherUser = this.props.usersInfo.byId[otherUserId];\n      return otherUser;\n    });\n    const otherUser = otherUsers.length === 1 ? otherUsers[0] : null;\n    services.notifications.notify(otherUser ? `Your turn at game vs ${otherUser.name}` : `It's your turn to play in ${gamesThatChangedToMyTurn.length}`, {\n      tag: 'your-turn',\n      body: `It's your turn to play in ${gamesThatChangedToMyTurn.length} games`,\n    });\n  }\n\n  render() {\n    const {liveGame, liveTournament} = this.state;\n    const {connected, disconnected, available, user, usersInfo: {byId: usersById}} = this.props;\n    const playerA = liveGame ? usersById[liveGame.userIds[0]] : null;\n    const playerB = liveGame ? usersById[liveGame.userIds[1]] : null;\n    const isUserPlayerA = (user && playerA) ? playerA.id === user.id : false;\n    const isUserPlayerB = (user && playerB) ? playerB.id === user.id : false;\n    const isMyGame = isUserPlayerA || isUserPlayerB;\n    const onlineGameLabel = (liveGame && playerA && playerB)\n      ? (liveGame.finished\n        ? `Review ${isUserPlayerA ? 'you' : playerA.name} vs ${isUserPlayerB ? 'you' : playerB.name}`\n        : (isMyGame\n          ? `Live Play ${isUserPlayerA ? 'you' : playerA.name} vs ${isUserPlayerB ? 'you' : playerB.name}`\n          : `Spectate ${isUserPlayerA ? 'you' : playerA.name} vs ${isUserPlayerB ? 'you' : playerB.name}`))\n      : 'Live Play/Spectate/Review';\n    const isMyTournament = (liveTournament && user) ? liveTournament.userIds.includes(user.id) : false;\n    const onlineTournamentLabel = liveTournament\n      ? (liveTournament.finished\n        ? `Review tournament ${liveTournament.name}`\n        : (isMyTournament\n          ? `Live tournament ${liveTournament.name}`\n          : `Spectate tournament ${liveTournament.name}`))\n      : 'Tournaments';\n    return (\n      <Container>\n        <SvgBoardBackground.Definitions />\n        <Segment textAlign={\"center\"}>\n          <Header as={\"h1\"}>Thyra Online</Header>\n          <Settings/>\n          <LogIn client={client} />\n          <LogOut client={client} />\n        </Segment>\n        {!connected ? (\n          (disconnected || !available) ? (\n            <Message\n              negative\n              header={'Trying to connect ot server...'}\n              content={<p>The server seems to be experiencing problems, or maybe it's a bit slow. It will connect as soon as possible</p>}\n            />\n          ) : (\n            <Message\n              header={'Connecting to server...'}\n              content={<p>Please sit tight as we're trying to connect to the server</p>}\n            />\n          )\n        ) : null}\n        <NavigationalTab menu={{pointing: true, attached: false, stackable: true}} panes={[\n          client.available ? {menuItem: {icon: 'users', content: 'Lobby'}, path: 'lobby', render: () => (\n            <Tab.Pane><Lobby selectLiveGame={this.selectLiveGame} selectLiveTournament={this.selectLiveTournament} /></Tab.Pane>\n          )} : null,\n          client.available ? {menuItem: {icon: 'play', content: onlineGameLabel}, path: 'game', navigate: liveGame ? `game/${liveGame.id}` : 'game', render: () => (\n            <Tab.Pane><OnlineGame game={liveGame} selectLiveGame={this.selectLiveGame} /></Tab.Pane>\n          )} : null,\n          client.available ? {menuItem: {icon: 'sitemap', content: onlineTournamentLabel}, path: 'tournament', navigate: liveTournament ? `tournament/${liveTournament.id}` : 'tournament', render: () => (\n            <Tab.Pane>\n              <OnlineTournament\n                tournament={liveTournament}\n                selectLiveTournament={this.selectLiveTournament}\n                selectLiveGame={this.selectLiveGame}\n                toggleParticipation={this.toggleParticipation}\n                startTournament={this.startTournament}\n                abortTournament={this.abortTournament}\n              />\n            </Tab.Pane>\n          )} : null,\n          {menuItem: {icon: 'retweet', content: 'Hotseat'}, path: 'hotseat', render: () => (\n            <Tab.Pane><Hotseat /></Tab.Pane>\n          )},\n          process.env.REACT_APP_DEBUG ? {menuItem: {icon: 'edit', content: 'Edit position'}, path: 'edit-position', render: () => (\n            <Tab.Pane><EditPosition /></Tab.Pane>\n          )} : null,\n          process.env.REACT_APP_DEBUG ? {menuItem: {icon: 'shield', content: 'Create Challenge'}, path: 'create-challenge', render: () => (\n            <Tab.Pane><CreateChallenge /></Tab.Pane>\n          )} : null,\n          process.env.REACT_APP_DEBUG ? {menuItem: {icon: 'shield', content: 'Challenges'}, path: 'challenges', render: () => (\n            <Tab.Pane><Challenges /></Tab.Pane>\n          )} : null,\n          {menuItem: {icon: 'book', content: 'Learn To Play'}, path: 'learn-to-play', render: () => (\n            <Tab.Pane><LearnToPlay /></Tab.Pane>\n          )},\n        ]} />\n        <Header as={\"h6\"} style={{color: '#dddddd'}}>{process.env.REACT_APP_VERSION || '?'}</Header>\n      </Container>\n    );\n  }\n}\n\nApp.propTypes = {\n  location: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n  user: PropTypes.object,\n  usersInfo: PropTypes.object.isRequired,\n};\n\nexport default withRouter(withClient(App));\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\n\nReactDOM.render((\n  <BrowserRouter basename={process.env.REACT_APP_PAGE_BASE_PATH}>\n    <Switch>\n      <Route>\n        <App />\n      </Route>\n    </Switch>\n  </BrowserRouter>\n), document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}